(self["webpackChunklink3_front"]=self["webpackChunklink3_front"]||[]).push([[534],{7045:function(e,t,i){var n=i(6339),s=i(3070);e.exports=function(e,t,i){return i.get&&n(i.get,t,{getter:!0}),i.set&&n(i.set,t,{setter:!0}),s.f(e,t,i)}},7066:function(e,t,i){"use strict";var n=i(9670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2087:function(e,t,i){var n=i(7854),s=i(9781),r=i(7045),o=i(7066),a=i(7293),l=n.RegExp,u=l.prototype,c=s&&a((function(){var e=!0;try{l(".","d")}catch(c){e=!1}var t={},i="",n=e?"dgimsy":"gimsy",s=function(e,n){Object.defineProperty(t,e,{get:function(){return i+=n,!0}})},r={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(r.hasIndices="d"),r)s(o,r[o]);var a=Object.getOwnPropertyDescriptor(u,"flags").get.call(t);return a!==n||i!==n}));c&&r(u,"flags",{configurable:!0,get:o})},9897:function(e,t){"use strict";class i{constructor(e){var t,i;this.timer=null,this.time=10,this.count=10,this.arr=[],this.time=null!==(t=e.time)&&void 0!==t?t:10,this.count=null!==(i=e.count)&&void 0!==i?i:10,this.url="https://"+e.project+"."+e.host+"/logstores/"+e.logstore+"/track",this.opt=e,e.installUnloadHook&&"function"===typeof e.installUnloadHook&&e.installUnloadHook((()=>{this.platformSend(this.assemblePayload())}))}assemblePayload(e=this.arr){const t={__logs__:e};return this.opt.tags&&(t.__tags__=this.opt.tags),this.opt.topic&&(t.__topic__=this.opt.topic),this.opt.source&&(t.__source__=this.opt.source),JSON.stringify(t)}platformSend(e){this.opt.sendPayload&&"function"===typeof this.opt.sendPayload&&this.arr&&this.arr.length>0&&this.opt.sendPayload(this.url,e)}transString(e){let t={};for(let i in e)"object"==typeof e[i]?t[i]=JSON.stringify(e[i]):t[i]=String(e[i]);return t}sendImmediateInner(){this.arr&&this.arr.length>0&&(this.platformSend(this.assemblePayload()),null!=this.timer&&(clearTimeout(this.timer),this.timer=null),this.arr=[])}sendInner(){if(this.timer)this.arr.length>=this.count&&(clearTimeout(this.timer),this.timer=null,this.sendImmediateInner());else{const e=this;this.arr.length>=this.count||this.time<=0?this.sendImmediateInner():this.timer=setTimeout((function(){e.sendImmediateInner()}),1e3*this.time)}}send(e){const t=this.transString(e);this.arr.push(t),this.sendInner()}sendImmediate(e){const t=this.transString(e);this.arr.push(t),this.sendImmediateInner()}sendBatchLogs(e){const t=e.map((e=>this.transString(e)));this.arr.push(...t),this.sendInner()}sendBatchLogsImmediate(e){const t=e.map((e=>this.transString(e)));this.arr.push(...t),this.sendImmediateInner()}}function n(e,t){return!(!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(`${e}?APIVersion=0.6.0`,t)}function s(e,t){const i=new window.XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("x-log-apiversion","0.6.0"),i.setRequestHeader("x-log-bodyrawsize",t.length.toString());const n=new Blob([t],{type:"application/x-protobuf"});i.send(n)}function r(e,t){try{n(e,t)||s(e,t)}catch(i){window&&window.console&&"function"===typeof window.console.error&&(console.error("Failed to log to ali log service because of this exception:\n"+i),console.error("Failed log data:",e))}}class o extends i{constructor(e){const t=Object.assign({},e,{installUnloadHook:e=>{window.addEventListener("beforeunload",(()=>{e()}))},sendPayload:(e,t)=>{r(e,t)}});super(t)}}function a(e,t,i){e[t]=i}a(window,"SLS_Tracker",o),t.ZP=o},5388:function(e,t,i){"use strict";i(3462),i(7380),i(1118);var n=i(5743),s=function(e,t){return void 0===t&&(t=!1),function(i,s,o){if(i)e(i);else if(s.statusCode>=400&&s.statusCode<=599){var a=o;if(t)if(n.TextDecoder){var l=r(s.headers&&s.headers["content-type"]);try{a=new TextDecoder(l).decode(o)}catch(u){}}else a=String.fromCharCode.apply(null,new Uint8Array(o));e({cause:a})}else e(null,o)}};function r(e){return void 0===e&&(e=""),e.toLowerCase().split(";").reduce((function(e,t){var i=t.split("="),n=i[0],s=i[1];return"charset"===n.trim()?s.trim():e}),"utf-8")}e.exports=s},3470:function(e,t,i){"use strict";var n=i(5743),s=i(9675),r=i(3940);c.httpHandler=i(5388);
/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */
var o=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var i=e.indexOf(":"),n=e.slice(0,i).trim().toLowerCase(),s=e.slice(i+1).trim();"undefined"===typeof t[n]?t[n]=s:Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]})),t):t};function a(e,t){for(var i=0;i<e.length;i++)t(e[i])}function l(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function u(e,t,i){var n=e;return r(t)?(i=t,"string"===typeof e&&(n={uri:e})):n=s({},t,{uri:e}),n.callback=i,n}function c(e,t,i){return t=u(e,t,i),d(t)}function d(e){if("undefined"===typeof e.callback)throw new Error("callback argument missing");var t=!1,i=function(i,n,s){t||(t=!0,e.callback(i,n,s))};function n(){4===p.readyState&&setTimeout(a,0)}function s(){var e=void 0;if(e=p.response?p.response:p.responseText||h(p),b)try{e=JSON.parse(e)}catch(t){}return e}function r(e){return clearTimeout(m),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,i(e,w)}function a(){if(!d){var t;clearTimeout(m),t=e.useXDR&&void 0===p.status?200:1223===p.status?204:p.status;var n=w,r=null;return 0!==t?(n={body:s(),statusCode:t,method:_,headers:{},url:g,rawRequest:p},p.getAllResponseHeaders&&(n.headers=o(p.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),i(r,n,n.body)}}var u,d,p=e.xhr||null;p||(p=e.cors||e.useXDR?new c.XDomainRequest:new c.XMLHttpRequest);var m,g=p.url=e.uri||e.url,_=p.method=e.method||"GET",f=e.body||e.data,y=p.headers=e.headers||{},v=!!e.sync,b=!1,w={body:void 0,headers:{},statusCode:0,method:_,url:g,rawRequest:p};if("json"in e&&!1!==e.json&&(b=!0,y["accept"]||y["Accept"]||(y["Accept"]="application/json"),"GET"!==_&&"HEAD"!==_&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),p.onreadystatechange=n,p.onload=a,p.onerror=r,p.onprogress=function(){},p.onabort=function(){d=!0},p.ontimeout=r,p.open(_,g,!v,e.username,e.password),v||(p.withCredentials=!!e.withCredentials),!v&&e.timeout>0&&(m=setTimeout((function(){if(!d){d=!0,p.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),p.setRequestHeader)for(u in y)y.hasOwnProperty(u)&&p.setRequestHeader(u,y[u]);else if(e.headers&&!l(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(p.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(p),p.send(f||null),p}function h(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(i){}return null}function p(){}e.exports=c,e.exports["default"]=c,c.XMLHttpRequest=n.XMLHttpRequest||p,c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:n.XDomainRequest,a(["get","put","post","patch","head","delete"],(function(e){c["delete"===e?"del":e]=function(t,i,n){return i=u(t,i,n),i.method=e.toUpperCase(),d(i)}}))},2107:function(e,t){"use strict";function i(e,t,i){if(void 0===i&&(i=Array.prototype),e&&"function"===typeof i.find)return i.find.call(e,t);for(var n=0;n<e.length;n++)if(Object.prototype.hasOwnProperty.call(e,n)){var s=e[n];if(t.call(void 0,s,n,e))return s}}function n(e,t){return void 0===t&&(t=Object),t&&"function"===typeof t.freeze?t.freeze(e):e}function s(e,t){if(null===e||"object"!==typeof e)throw new TypeError("target is not an object");for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}var r=n({HTML:"text/html",isHTML:function(e){return e===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),o=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===o.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=s,t.find=i,t.freeze=n,t.MIME_TYPE=r,t.NAMESPACE=o},8270:function(e,t,i){var n=i(2107),s=i(9569),r=i(3835),o=i(2261),a=s.DOMImplementation,l=n.NAMESPACE,u=o.ParseError,c=o.XMLReader;function d(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function h(e){this.options=e||{locator:{}}}function p(e,t,i){if(!e){if(t instanceof m)return t;e=t}var n={},s=e instanceof Function;function r(t){var r=e[t];!r&&s&&(r=2==e.length?function(i){e(t,i)}:e),n[t]=r&&function(e){r("[xmldom "+t+"]\t"+e+_(i))}||function(){}}return i=i||{},r("warning"),r("error"),r("fatalError"),n}function m(){this.cdata=!1}function g(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function _(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function f(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function y(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}h.prototype.parseFromString=function(e,t){var i=this.options,n=new c,s=i.domBuilder||new m,o=i.errorHandler,a=i.locator,u=i.xmlns||{},h=/\/x?html?$/.test(t),g=h?r.HTML_ENTITIES:r.XML_ENTITIES;a&&s.setDocumentLocator(a),n.errorHandler=p(o,s,a),n.domBuilder=i.domBuilder||s,h&&(u[""]=l.HTML),u.xml=u.xml||l.XML;var _=i.normalizeLineEndings||d;return e&&"string"===typeof e?n.parse(_(e),u,g):n.errorHandler.error("invalid doc source"),s.doc},m.prototype={startDocument:function(){this.doc=(new a).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,n){var s=this.doc,r=s.createElementNS(e,i||t),o=n.length;y(this,r),this.currentElement=r,this.locator&&g(this.locator,r);for(var a=0;a<o;a++){e=n.getURI(a);var l=n.getValue(a),u=(i=n.getQName(a),s.createAttributeNS(e,i));this.locator&&g(n.getLocator(a),u),u.value=u.nodeValue=l,r.setAttributeNode(u)}},endElement:function(e,t,i){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&g(this.locator,i),y(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){if(e=f.apply(this,arguments),e){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&g(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=f.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&g(this.locator,n),y(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var n=this.doc.implementation;if(n&&n.createDocumentType){var s=n.createDocumentType(e,t,i);this.locator&&g(this.locator,s),y(this,s),this.doc.doctype=s}},warning:function(e){console.warn("[xmldom warning]\t"+e,_(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,_(this.locator))},fatalError:function(e){throw new u(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){m.prototype[e]=function(){return null}})),t.DOMParser=h},9569:function(e,t,i){var n=i(2107),s=n.find,r=n.NAMESPACE;function o(e){return""!==e}function a(e){return e?e.split(/[\t\n\f\r ]+/).filter(o):[]}function l(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function u(e){if(!e)return[];var t=a(e);return Object.keys(t.reduce(l,{}))}function c(e){return function(t){return e&&-1!==e.indexOf(t)}}function d(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function h(e,t){var i=e.prototype;if(!(i instanceof t)){function n(){}n.prototype=t.prototype,n=new n,d(i,n),e.prototype=i=n}i.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),i.constructor=e)}var p={},m=p.ELEMENT_NODE=1,g=p.ATTRIBUTE_NODE=2,_=p.TEXT_NODE=3,f=p.CDATA_SECTION_NODE=4,y=p.ENTITY_REFERENCE_NODE=5,v=p.ENTITY_NODE=6,b=p.PROCESSING_INSTRUCTION_NODE=7,w=p.COMMENT_NODE=8,k=p.DOCUMENT_NODE=9,T=p.DOCUMENT_TYPE_NODE=10,x=p.DOCUMENT_FRAGMENT_NODE=11,S=p.NOTATION_NODE=12,E={},A={},C=(E.INDEX_SIZE_ERR=(A[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(A[2]="DOMString size error",2),E.HIERARCHY_REQUEST_ERR=(A[3]="Hierarchy request error",3)),I=(E.WRONG_DOCUMENT_ERR=(A[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(A[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(A[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(A[7]="No modification allowed",7),E.NOT_FOUND_ERR=(A[8]="Not found",8)),P=(E.NOT_SUPPORTED_ERR=(A[9]="Not supported",9),E.INUSE_ATTRIBUTE_ERR=(A[10]="Attribute in use",10));E.INVALID_STATE_ERR=(A[11]="Invalid state",11),E.SYNTAX_ERR=(A[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(A[13]="Invalid modification",13),E.NAMESPACE_ERR=(A[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(A[15]="Invalid access",15);function N(e,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,A[e]),this.message=A[e],Error.captureStackTrace&&Error.captureStackTrace(this,N);return i.code=e,t&&(this.message=this.message+": "+t),i}function D(){}function L(e,t){this._node=e,this._refresh=t,O(this)}function O(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);Se(e,"length",i.length),d(i,e),e._inc=t}}function B(){}function U(e,t){var i=e.length;while(i--)if(e[i]===t)return i}function V(e,t,i,n){if(n?t[U(t,n)]=i:t[t.length++]=i,e){i.ownerElement=e;var s=e.ownerDocument;s&&(n&&W(s,e,n),H(s,e,i))}}function R(e,t,i){var n=U(t,i);if(!(n>=0))throw new N(I,new Error(e.tagName+"@"+i));var s=t.length-1;while(n<s)t[n]=t[++n];if(t.length=s,e){var r=e.ownerDocument;r&&(W(r,e,i),i.ownerElement=null)}}function j(){}function M(){}function F(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function q(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(q(e,t))return!0}while(e=e.nextSibling)}function z(){this.ownerDocument=this}function H(e,t,i){e&&e._inc++;var n=i.namespaceURI;n===r.XMLNS&&(t._nsMap[i.prefix?i.localName:""]=i.value)}function W(e,t,i,n){e&&e._inc++;var s=i.namespaceURI;s===r.XMLNS&&delete t._nsMap[i.prefix?i.localName:""]}function G(e,t,i){if(e&&e._inc){e._inc++;var n=t.childNodes;if(i)n[n.length++]=i;else{var s=t.firstChild,r=0;while(s)n[r++]=s,s=s.nextSibling;n.length=r,delete n[n.length]}}}function X(e,t){var i=t.previousSibling,n=t.nextSibling;return i?i.nextSibling=n:e.firstChild=n,n?n.previousSibling=i:e.lastChild=i,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,G(e.ownerDocument,e),t}function Q(e){return e&&(e.nodeType===M.DOCUMENT_NODE||e.nodeType===M.DOCUMENT_FRAGMENT_NODE||e.nodeType===M.ELEMENT_NODE)}function K(e){return e&&(Y(e)||J(e)||Z(e)||e.nodeType===M.DOCUMENT_FRAGMENT_NODE||e.nodeType===M.COMMENT_NODE||e.nodeType===M.PROCESSING_INSTRUCTION_NODE)}function Z(e){return e&&e.nodeType===M.DOCUMENT_TYPE_NODE}function Y(e){return e&&e.nodeType===M.ELEMENT_NODE}function J(e){return e&&e.nodeType===M.TEXT_NODE}function $(e,t){var i=e.childNodes||[];if(s(i,Y)||Z(t))return!1;var n=s(i,Z);return!(t&&n&&i.indexOf(n)>i.indexOf(t))}function ee(e,t){var i=e.childNodes||[];function n(e){return Y(e)&&e!==t}if(s(i,n))return!1;var r=s(i,Z);return!(t&&r&&i.indexOf(r)>i.indexOf(t))}function te(e,t,i){if(!Q(e))throw new N(C,"Unexpected parent node type "+e.nodeType);if(i&&i.parentNode!==e)throw new N(I,"child not in parent");if(!K(t)||Z(t)&&e.nodeType!==M.DOCUMENT_NODE)throw new N(C,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function ie(e,t,i){var n=e.childNodes||[],r=t.childNodes||[];if(t.nodeType===M.DOCUMENT_FRAGMENT_NODE){var o=r.filter(Y);if(o.length>1||s(r,J))throw new N(C,"More than one element or text in fragment");if(1===o.length&&!$(e,i))throw new N(C,"Element in fragment can not be inserted before doctype")}if(Y(t)&&!$(e,i))throw new N(C,"Only one element can be added and only after doctype");if(Z(t)){if(s(n,Z))throw new N(C,"Only one doctype is allowed");var a=s(n,Y);if(i&&n.indexOf(a)<n.indexOf(i))throw new N(C,"Doctype can only be inserted before an element");if(!i&&a)throw new N(C,"Doctype can not be appended since element is present")}}function ne(e,t,i){var n=e.childNodes||[],r=t.childNodes||[];if(t.nodeType===M.DOCUMENT_FRAGMENT_NODE){var o=r.filter(Y);if(o.length>1||s(r,J))throw new N(C,"More than one element or text in fragment");if(1===o.length&&!ee(e,i))throw new N(C,"Element in fragment can not be inserted before doctype")}if(Y(t)&&!ee(e,i))throw new N(C,"Only one element can be added and only after doctype");if(Z(t)){function a(e){return Z(e)&&e!==i}if(s(n,a))throw new N(C,"Only one doctype is allowed");var l=s(n,Y);if(i&&n.indexOf(l)<n.indexOf(i))throw new N(C,"Doctype can only be inserted before an element")}}function se(e,t,i,n){te(e,t,i),e.nodeType===M.DOCUMENT_NODE&&(n||ie)(e,t,i);var s=t.parentNode;if(s&&s.removeChild(t),t.nodeType===x){var r=t.firstChild;if(null==r)return t;var o=t.lastChild}else r=o=t;var a=i?i.previousSibling:e.lastChild;r.previousSibling=a,o.nextSibling=i,a?a.nextSibling=r:e.firstChild=r,null==i?e.lastChild=o:i.previousSibling=o;do{r.parentNode=e}while(r!==o&&(r=r.nextSibling));return G(e.ownerDocument||e,e),t.nodeType==x&&(t.firstChild=t.lastChild=null),t}function re(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,G(e.ownerDocument,e,t),t}function oe(){this._nsMap={}}function ae(){}function le(){}function ue(){}function ce(){}function de(){}function he(){}function pe(){}function me(){}function ge(){}function _e(){}function fe(){}function ye(){}function ve(e,t){var i=[],n=9==this.nodeType&&this.documentElement||this,s=n.prefix,r=n.namespaceURI;if(r&&null==s){s=n.lookupPrefix(r);if(null==s)var o=[{namespace:r,prefix:null}]}return ke(this,i,e,t,o),i.join("")}function be(e,t,i){var n=e.prefix||"",s=e.namespaceURI;if(!s)return!1;if("xml"===n&&s===r.XML||s===r.XMLNS)return!1;var o=i.length;while(o--){var a=i[o];if(a.prefix===n)return a.namespace!==s}return!0}function we(e,t,i){e.push(" ",t,'="',i.replace(/[<>&"\t\n\r]/g,F),'"')}function ke(e,t,i,n,s){if(s||(s=[]),n){if(e=n(e),!e)return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case m:var o=e.attributes,a=o.length,l=e.firstChild,u=e.tagName;i=r.isHTML(e.namespaceURI)||i;var c=u;if(!i&&!e.prefix&&e.namespaceURI){for(var d,h=0;h<o.length;h++)if("xmlns"===o.item(h).name){d=o.item(h).value;break}if(!d)for(var p=s.length-1;p>=0;p--){var v=s[p];if(""===v.prefix&&v.namespace===e.namespaceURI){d=v.namespace;break}}if(d!==e.namespaceURI)for(p=s.length-1;p>=0;p--){v=s[p];if(v.namespace===e.namespaceURI){v.prefix&&(c=v.prefix+":"+u);break}}}t.push("<",c);for(var S=0;S<a;S++){var E=o.item(S);"xmlns"==E.prefix?s.push({prefix:E.localName,namespace:E.value}):"xmlns"==E.nodeName&&s.push({prefix:"",namespace:E.value})}for(S=0;S<a;S++){E=o.item(S);if(be(E,i,s)){var A=E.prefix||"",C=E.namespaceURI;we(t,A?"xmlns:"+A:"xmlns",C),s.push({prefix:A,namespace:C})}ke(E,t,i,n,s)}if(u===c&&be(e,i,s)){A=e.prefix||"",C=e.namespaceURI;we(t,A?"xmlns:"+A:"xmlns",C),s.push({prefix:A,namespace:C})}if(l||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),i&&/^script$/i.test(u))while(l)l.data?t.push(l.data):ke(l,t,i,n,s.slice()),l=l.nextSibling;else while(l)ke(l,t,i,n,s.slice()),l=l.nextSibling;t.push("</",c,">")}else t.push("/>");return;case k:case x:l=e.firstChild;while(l)ke(l,t,i,n,s.slice()),l=l.nextSibling;return;case g:return we(t,e.name,e.value);case _:return t.push(e.data.replace(/[<&>]/g,F));case f:return t.push("<![CDATA[",e.data,"]]>");case w:return t.push("\x3c!--",e.data,"--\x3e");case T:var I=e.publicId,P=e.systemId;if(t.push("<!DOCTYPE ",e.name),I)t.push(" PUBLIC ",I),P&&"."!=P&&t.push(" ",P),t.push(">");else if(P&&"."!=P)t.push(" SYSTEM ",P,">");else{var N=e.internalSubset;N&&t.push(" [",N,"]"),t.push(">")}return;case b:return t.push("<?",e.target," ",e.data,"?>");case y:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Te(e,t,i){var n;switch(t.nodeType){case m:n=t.cloneNode(!1),n.ownerDocument=e;case x:break;case g:i=!0;break}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,i){var s=t.firstChild;while(s)n.appendChild(Te(e,s,i)),s=s.nextSibling}return n}function xe(e,t,i){var n=new t.constructor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=t[s];"object"!=typeof r&&r!=n[s]&&(n[s]=r)}switch(t.childNodes&&(n.childNodes=new D),n.ownerDocument=e,n.nodeType){case m:var o=t.attributes,a=n.attributes=new B,l=o.length;a._ownerElement=n;for(var u=0;u<l;u++)n.setAttributeNode(xe(e,o.item(u),!0));break;case g:i=!0}if(i){var c=t.firstChild;while(c)n.appendChild(xe(e,c,i)),c=c.nextSibling}return n}function Se(e,t,i){e[t]=i}N.prototype=Error.prototype,d(E,N),D.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],n=0;n<this.length;n++)ke(this[n],i,e,t);return i.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},L.prototype.item=function(e){return O(this),this[e]},h(L,D),B.prototype={length:0,item:D.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new N(P);var i=this.getNamedItem(e.nodeName);return V(this._ownerElement,this,e,i),i},setNamedItemNS:function(e){var t,i=e.ownerElement;if(i&&i!=this._ownerElement)throw new N(P);return t=this.getNamedItemNS(e.namespaceURI,e.localName),V(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return R(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);return R(this._ownerElement,this,i),i},getNamedItemNS:function(e,t){var i=this.length;while(i--){var n=this[i];if(n.localName==t&&n.namespaceURI==e)return n}return null}},j.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,i){var n=new z;if(n.implementation=this,n.childNodes=new D,n.doctype=i||null,i&&n.appendChild(i),t){var s=n.createElementNS(e,t);n.appendChild(s)}return n},createDocumentType:function(e,t,i){var n=new he;return n.name=e,n.nodeName=e,n.publicId=t||"",n.systemId=i||"",n}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return se(this,e,t)},replaceChild:function(e,t){se(this,e,t,ne),t&&this.removeChild(t)},removeChild:function(e){return X(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return xe(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;t&&t.nodeType==_&&e.nodeType==_?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var i=t._nsMap;if(i)for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&i[n]===e)return n;t=t.nodeType==g?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var i=t._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,e))return i[e];t=t.nodeType==g?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},d(p,M),d(p,M.prototype),z.prototype={nodeName:"#document",nodeType:k,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==x){var i=e.firstChild;while(i){var n=i.nextSibling;this.insertBefore(i,t),i=n}return e}return se(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===m&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),X(this,e)},replaceChild:function(e,t){se(this,e,t,ne),e.ownerDocument=this,t&&this.removeChild(t),Y(e)&&(this.documentElement=e)},importNode:function(e,t){return Te(this,e,t)},getElementById:function(e){var t=null;return q(this.documentElement,(function(i){if(i.nodeType==m&&i.getAttribute("id")==e)return t=i,!0})),t},getElementsByClassName:function(e){var t=u(e);return new L(this,(function(i){var n=[];return t.length>0&&q(i.documentElement,(function(s){if(s!==i&&s.nodeType===m){var r=s.getAttribute("class");if(r){var o=e===r;if(!o){var a=u(r);o=t.every(c(a))}o&&n.push(s)}}})),n}))},createElement:function(e){var t=new oe;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new D;var i=t.attributes=new B;return i._ownerElement=t,t},createDocumentFragment:function(){var e=new _e;return e.ownerDocument=this,e.childNodes=new D,e},createTextNode:function(e){var t=new ue;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new ce;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new de;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new fe;return i.ownerDocument=this,i.tagName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new ae;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new ge;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new oe,n=t.split(":"),s=i.attributes=new B;return i.childNodes=new D,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,s._ownerElement=i,i},createAttributeNS:function(e,t){var i=new ae,n=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==n.length?(i.prefix=n[0],i.localName=n[1]):i.localName=t,i}},h(z,M),oe.prototype={nodeType:m,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===x?this.insertBefore(e,null):re(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+i,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new L(this,(function(t){var i=[];return q(t,(function(n){n===t||n.nodeType!=m||"*"!==e&&n.tagName!=e||i.push(n)})),i}))},getElementsByTagNameNS:function(e,t){return new L(this,(function(i){var n=[];return q(i,(function(s){s===i||s.nodeType!==m||"*"!==e&&s.namespaceURI!==e||"*"!==t&&s.localName!=t||n.push(s)})),n}))}},z.prototype.getElementsByTagName=oe.prototype.getElementsByTagName,z.prototype.getElementsByTagNameNS=oe.prototype.getElementsByTagNameNS,h(oe,M),ae.prototype.nodeType=g,h(ae,M),le.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(A[C])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){var n=this.data.substring(0,e),s=this.data.substring(e+t);i=n+i+s,this.nodeValue=this.data=i,this.length=i.length}},h(le,M),ue.prototype={nodeName:"#text",nodeType:_,splitText:function(e){var t=this.data,i=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},h(ue,le),ce.prototype={nodeName:"#comment",nodeType:w},h(ce,le),de.prototype={nodeName:"#cdata-section",nodeType:f},h(de,le),he.prototype.nodeType=T,h(he,M),pe.prototype.nodeType=S,h(pe,M),me.prototype.nodeType=v,h(me,M),ge.prototype.nodeType=y,h(ge,M),_e.prototype.nodeName="#document-fragment",_e.prototype.nodeType=x,h(_e,M),fe.prototype.nodeType=b,h(fe,M),ye.prototype.serializeToString=function(e,t,i){return ve.call(e,t,i)},M.prototype.toString=ve;try{if(Object.defineProperty){function Ee(e){switch(e.nodeType){case m:case x:var t=[];e=e.firstChild;while(e)7!==e.nodeType&&8!==e.nodeType&&t.push(Ee(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(L.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return Ee(this)},set:function(e){switch(this.nodeType){case m:case x:while(this.firstChild)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Se=function(e,t,i){e["$$"+t]=i}}}catch(Ae){}t.DocumentType=he,t.DOMException=N,t.DOMImplementation=j,t.Element=oe,t.Node=M,t.NodeList=D,t.XMLSerializer=ye},3835:function(e,t,i){var n=i(2107).freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=n({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES},7978:function(e,t,i){var n=i(9569);n.DOMImplementation,n.XMLSerializer,t.DOMParser=i(8270).DOMParser},2261:function(e,t,i){var n=i(2107).NAMESPACE,s=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+s.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+s.source+r.source+"*(?::"+s.source+r.source+"*)?$"),a=0,l=1,u=2,c=3,d=4,h=5,p=6,m=7;function g(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,g)}function _(){}function f(e,t,i,s,r){function o(e){if(e>65535){e-=65536;var t=55296+(e>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}function a(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(i,t)?i[t]:"#"===t.charAt(0)?o(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function l(t){if(t>f){var i=e.substring(f,t).replace(/&#?\w+;/g,a);p&&u(f),s.characters(i,0,t-f),f=t}}function u(t,i){while(t>=d&&(i=h.exec(e)))c=i.index,d=c+i[0].length,p.lineNumber++;p.columnNumber=t-c+1}var c=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,p=s.locator,m=[{currentNSMap:t}],_={},f=0;while(1){try{var T=e.indexOf("<",f);if(T<0){if(!e.substr(f).match(/^\s*$/)){var A=s.doc,C=A.createTextNode(e.substr(f));A.appendChild(C),s.currentElement=C}return}switch(T>f&&l(T),e.charAt(T+1)){case"/":var I=e.indexOf(">",T+3),P=e.substring(T+2,I).replace(/[ \t\n\r]+$/g,""),N=m.pop();I<0?(P=e.substring(T+2).replace(/[\s<].*/,""),r.error("end tag name: "+P+" is not complete:"+N.tagName),I=T+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),r.error("end tag name: "+P+" maybe not complete"),I=T+1+P.length);var D=N.localNSMap,L=N.tagName==P,O=L||N.tagName&&N.tagName.toLowerCase()==P.toLowerCase();if(O){if(s.endElement(N.uri,N.localName,P),D)for(var B in D)Object.prototype.hasOwnProperty.call(D,B)&&s.endPrefixMapping(B);L||r.fatalError("end tag name: "+P+" is not match the current start tagName:"+N.tagName)}else m.push(N);I++;break;case"?":p&&u(T),I=S(e,T,s);break;case"!":p&&u(T),I=x(e,T,s,r);break;default:p&&u(T);var U=new E,V=m[m.length-1].currentNSMap,R=(I=v(e,T,U,V,a,r),U.length);if(!U.closed&&k(e,I,U.tagName,_)&&(U.closed=!0,i.nbsp||r.warning("unclosed xml attribute")),p&&R){for(var j=y(p,{}),M=0;M<R;M++){var F=U[M];u(F.offset),F.locator=y(p,{})}s.locator=j,b(U,s,V)&&m.push(U),s.locator=p}else b(U,s,V)&&m.push(U);n.isHTML(U.uri)&&!U.closed?I=w(e,I,U.tagName,a,s):I++}}catch(q){if(q instanceof g)throw q;r.error("element parse error: "+q),I=-1}I>f?f=I:l(Math.max(T,f)+1)}}function y(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function v(e,t,i,s,r,o){function g(e,t,n){i.attributeNames.hasOwnProperty(e)&&o.fatalError("Attribute "+e+" redefined"),i.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),n)}var _,f=++t,y=a;while(1){var v=e.charAt(f);switch(v){case"=":if(y===l)_=e.slice(t,f),y=c;else{if(y!==u)throw new Error("attribute equal must after attrName");y=c}break;case"'":case'"':if(y===c||y===l){if(y===l&&(o.warning('attribute value must after "="'),_=e.slice(t,f)),t=f+1,f=e.indexOf(v,t),!(f>0))throw new Error("attribute value no end '"+v+"' match");b=e.slice(t,f),g(_,b,t-1),y=h}else{if(y!=d)throw new Error('attribute value must after "="');b=e.slice(t,f),g(_,b,t),o.warning('attribute "'+_+'" missed start quot('+v+")!!"),t=f+1,y=h}break;case"/":switch(y){case a:i.setTagName(e.slice(t,f));case h:case p:case m:y=m,i.closed=!0;case d:case l:break;case u:i.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),y==a&&i.setTagName(e.slice(t,f)),f;case">":switch(y){case a:i.setTagName(e.slice(t,f));case h:case p:case m:break;case d:case l:b=e.slice(t,f),"/"===b.slice(-1)&&(i.closed=!0,b=b.slice(0,-1));case u:y===u&&(b=_),y==d?(o.warning('attribute "'+b+'" missed quot(")!'),g(_,b,t)):(n.isHTML(s[""])&&b.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+b+'" missed value!! "'+b+'" instead!!'),g(b,b,t));break;case c:throw new Error("attribute value missed!!")}return f;case"":v=" ";default:if(v<=" ")switch(y){case a:i.setTagName(e.slice(t,f)),y=p;break;case l:_=e.slice(t,f),y=u;break;case d:var b=e.slice(t,f);o.warning('attribute "'+b+'" missed quot(")!!'),g(_,b,t);case h:y=p;break}else switch(y){case u:i.tagName;n.isHTML(s[""])&&_.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+_+'" missed value!! "'+_+'" instead2!!'),g(_,_,t),t=f,y=l;break;case h:o.warning('attribute space is required"'+_+'"!!');case p:y=l,t=f;break;case c:y=d,t=f;break;case m:throw new Error("elements closed character '/' and '>' must be connected to")}}f++}}function b(e,t,i){var s=e.tagName,r=null,o=e.length;while(o--){var a=e[o],l=a.qName,u=a.value,c=l.indexOf(":");if(c>0)var d=a.prefix=l.slice(0,c),h=l.slice(c+1),p="xmlns"===d&&h;else h=l,d=null,p="xmlns"===l&&"";a.localName=h,!1!==p&&(null==r&&(r={},T(i,i={})),i[p]=r[p]=u,a.uri=n.XMLNS,t.startPrefixMapping(p,u))}o=e.length;while(o--){a=e[o];d=a.prefix;d&&("xml"===d&&(a.uri=n.XML),"xmlns"!==d&&(a.uri=i[d||""]))}c=s.indexOf(":");c>0?(d=e.prefix=s.slice(0,c),h=e.localName=s.slice(c+1)):(d=null,h=e.localName=s);var m=e.uri=i[d||""];if(t.startElement(m,h,s,e),!e.closed)return e.currentNSMap=i,e.localNSMap=r,!0;if(t.endElement(m,h,s),r)for(d in r)Object.prototype.hasOwnProperty.call(r,d)&&t.endPrefixMapping(d)}function w(e,t,i,n,s){if(/^(?:script|textarea)$/i.test(i)){var r=e.indexOf("</"+i+">",t),o=e.substring(t+1,r);if(/[&<]/.test(o))return/^script$/i.test(i)?(s.characters(o,0,o.length),r):(o=o.replace(/&#?\w+;/g,n),s.characters(o,0,o.length),r)}return t+1}function k(e,t,i,n){var s=n[i];return null==s&&(s=e.lastIndexOf("</"+i+">"),s<t&&(s=e.lastIndexOf("</"+i)),n[i]=s),s<t}function T(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function x(e,t,i,n){var s=e.charAt(t+2);switch(s){case"-":if("-"===e.charAt(t+3)){var r=e.indexOf("--\x3e",t+4);return r>t?(i.comment(e,t+4,r-t-4),r+3):(n.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){r=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,r-t-9),i.endCDATA(),r+3}var o=A(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var l=o[1][0],u=!1,c=!1;a>3&&(/^public$/i.test(o[2][0])?(u=o[3][0],c=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(c=o[3][0]));var d=o[a-1];return i.startDTD(l,u,c),i.endDTD(),d.index+d[0].length}}return-1}function S(e,t,i){var n=e.indexOf("?>",t);if(n){var s=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(s){s[0].length;return i.processingInstruction(s[1],s[2]),n+2}return-1}return-1}function E(){this.attributeNames={}}function A(e,t){var i,n=[],s=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;s.lastIndex=t,s.exec(e);while(i=s.exec(e))if(n.push(i),i[1])return n}g.prototype=new Error,g.prototype.name=g.name,_.prototype={parse:function(e,t,i){var n=this.domBuilder;n.startDocument(),T(t,t={}),f(e,t,i,n,this.errorHandler),n.endDocument()}},E.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,i){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=_,t.ParseError=g},2613:function(e,t,i){i(2801),i(3462),i(7380),i(1118),function(t){"use strict";var i=v(),n=b(),s=w(),r=k(),o={imagePlaceholder:void 0,cacheBust:!1},a={toSvg:l,toPng:c,toJpeg:d,toBlob:h,toPixelData:u,impl:{fontFaces:s,images:r,util:i,inliner:n,options:{}}};function l(e,t){return t=t||{},p(t),Promise.resolve(e).then((function(e){return g(e,t.filter,!0)})).then(_).then(f).then(n).then((function(n){return y(n,t.width||i.width(e),t.height||i.height(e))}));function n(e){return t.bgcolor&&(e.style.backgroundColor=t.bgcolor),t.width&&(e.style.width=t.width+"px"),t.height&&(e.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach((function(i){e.style[i]=t.style[i]})),e}}function u(e,t){return m(e,t||{}).then((function(t){return t.getContext("2d").getImageData(0,0,i.width(e),i.height(e)).data}))}function c(e,t){return m(e,t||{}).then((function(e){return e.toDataURL()}))}function d(e,t){return t=t||{},m(e,t).then((function(e){return e.toDataURL("image/jpeg",t.quality||1)}))}function h(e,t){return m(e,t||{}).then(i.canvasToBlob)}function p(e){"undefined"===typeof e.imagePlaceholder?a.impl.options.imagePlaceholder=o.imagePlaceholder:a.impl.options.imagePlaceholder=e.imagePlaceholder,"undefined"===typeof e.cacheBust?a.impl.options.cacheBust=o.cacheBust:a.impl.options.cacheBust=e.cacheBust}function m(e,t){return l(e,t).then(i.makeImage).then(i.delay(100)).then((function(t){var i=n(e);return i.getContext("2d").drawImage(t,0,0),i}));function n(e){var n=document.createElement("canvas");if(n.width=t.width||i.width(e),n.height=t.height||i.height(e),t.bgcolor){var s=n.getContext("2d");s.fillStyle=t.bgcolor,s.fillRect(0,0,n.width,n.height)}return n}}function g(e,t,n){return n||!t||t(e)?Promise.resolve(e).then(s).then((function(i){return r(e,i,t)})).then((function(t){return o(e,t)})):Promise.resolve();function s(e){return e instanceof HTMLCanvasElement?i.makeImage(e.toDataURL()):e.cloneNode(!1)}function r(e,t,n){var s=e.childNodes;return 0===s.length?Promise.resolve(t):r(t,i.asArray(s),n).then((function(){return t}));function r(e,t,i){var n=Promise.resolve();return t.forEach((function(t){n=n.then((function(){return g(t,i)})).then((function(t){t&&e.appendChild(t)}))})),n}}function o(e,t){return t instanceof Element?Promise.resolve().then(n).then(s).then(r).then(o).then((function(){return t})):t;function n(){function n(e,t){function n(e,t){i.asArray(e).forEach((function(i){t.setProperty(i,e.getPropertyValue(i),e.getPropertyPriority(i))}))}e.cssText?t.cssText=e.cssText:n(e,t)}n(window.getComputedStyle(e),t.style)}function s(){function n(n){var s=window.getComputedStyle(e,n),r=s.getPropertyValue("content");if(""!==r&&"none"!==r){var o=i.uid();t.className=t.className+" "+o;var a=document.createElement("style");a.appendChild(l(o,n,s)),t.appendChild(a)}function l(e,t,n){var s="."+e+":"+t,r=n.cssText?o(n):a(n);return document.createTextNode(s+"{"+r+"}");function o(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}function a(e){return i.asArray(e).map(t).join("; ")+";";function t(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")}}}}[":before",":after"].forEach((function(e){n(e)}))}function r(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}function o(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement&&["width","height"].forEach((function(e){var i=t.getAttribute(e);i&&t.style.setProperty(e,i)})))}}}function _(e){return s.resolveAll().then((function(t){var i=document.createElement("style");return e.appendChild(i),i.appendChild(document.createTextNode(t)),e}))}function f(e){return r.inlineAll(e).then((function(){return e}))}function y(e,t,n){return Promise.resolve(e).then((function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)})).then(i.escapeXhtml).then((function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"})).then((function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+n+'">'+e+"</svg>"})).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}))}function v(){return{escape:h,parseExtension:t,mimeType:i,dataAsUrl:d,isDataUrl:n,canvasToBlob:r,resolveUrl:o,getAndEncode:c,uid:l(),delay:p,asArray:m,escapeXhtml:g,makeImage:u,width:_,height:f};function e(){var e="application/font-woff",t="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:t,jpeg:t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function t(e){var t=/\.([^\.\/]*?)$/g.exec(e);return t?t[1]:""}function i(i){var n=t(i).toLowerCase();return e()[n]||""}function n(e){return-1!==e.search(/^(data:)/)}function s(e){return new Promise((function(t){for(var i=window.atob(e.toDataURL().split(",")[1]),n=i.length,s=new Uint8Array(n),r=0;r<n;r++)s[r]=i.charCodeAt(r);t(new Blob([s],{type:"image/png"}))}))}function r(e){return e.toBlob?new Promise((function(t){e.toBlob(t)})):s(e)}function o(e,t){var i=document.implementation.createHTMLDocument(),n=i.createElement("base");i.head.appendChild(n);var s=i.createElement("a");return i.body.appendChild(s),n.href=t,s.href=e,s.href}function l(){var e=0;return function(){return"u"+t()+e++;function t(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function u(e){return new Promise((function(t,i){var n=new Image;n.onload=function(){t(n)},n.onerror=i,n.src=e}))}function c(e){var t=3e4;return a.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),new Promise((function(i){var n,s=new XMLHttpRequest;if(s.onreadystatechange=o,s.ontimeout=l,s.responseType="blob",s.timeout=t,s.open("GET",e,!0),s.send(),a.impl.options.imagePlaceholder){var r=a.impl.options.imagePlaceholder.split(/,/);r&&r[1]&&(n=r[1])}function o(){if(4===s.readyState)if(200===s.status){var t=new FileReader;t.onloadend=function(){var e=t.result.split(/,/)[1];i(e)},t.readAsDataURL(s.response)}else n?i(n):u("cannot fetch resource: "+e+", status: "+s.status)}function l(){n?i(n):u("timeout of "+t+"ms occured while fetching resource: "+e)}function u(e){console.error(e),i("")}}))}function d(e,t){return"data:"+t+";base64,"+e}function h(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function p(e){return function(t){return new Promise((function(i){setTimeout((function(){i(t)}),e)}))}}function m(e){for(var t=[],i=e.length,n=0;n<i;n++)t.push(e[n]);return t}function g(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")}function _(e){var t=y(e,"border-left-width"),i=y(e,"border-right-width");return e.scrollWidth+t+i}function f(e){var t=y(e,"border-top-width"),i=y(e,"border-bottom-width");return e.scrollHeight+t+i}function y(e,t){var i=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(i.replace("px",""))}}function b(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:r,shouldProcess:t,impl:{readUrls:n,inline:s}};function t(t){return-1!==t.search(e)}function n(t){var n,s=[];while(null!==(n=e.exec(t)))s.push(n[1]);return s.filter((function(e){return!i.isDataUrl(e)}))}function s(e,t,n,s){return Promise.resolve(t).then((function(e){return n?i.resolveUrl(e,n):e})).then(s||i.getAndEncode).then((function(e){return i.dataAsUrl(e,i.mimeType(t))})).then((function(i){return e.replace(r(t),"$1"+i+"$3")}));function r(e){return new RegExp("(url\\(['\"]?)("+i.escape(e)+")(['\"]?\\))","g")}}function r(e,i,r){return o()?Promise.resolve(e):Promise.resolve(e).then(n).then((function(t){var n=Promise.resolve(e);return t.forEach((function(e){n=n.then((function(t){return s(t,e,i,r)}))})),n}));function o(){return!t(e)}}}function w(){return{resolveAll:e,impl:{readAll:t}};function e(){return t(document).then((function(e){return Promise.all(e.map((function(e){return e.resolve()})))})).then((function(e){return e.join("\n")}))}function t(){return Promise.resolve(i.asArray(document.styleSheets)).then(t).then(e).then((function(e){return e.map(s)}));function e(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return n.shouldProcess(e.style.getPropertyValue("src"))}))}function t(e){var t=[];return e.forEach((function(e){try{i.asArray(e.cssRules||[]).forEach(t.push.bind(t))}catch(n){console.log("Error while reading CSS rules from "+e.href,n.toString())}})),t}function s(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return n.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}}function k(){return{inlineAll:t,impl:{newImage:e}};function e(e){return{inline:t};function t(t){return i.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(t||i.getAndEncode).then((function(t){return i.dataAsUrl(t,i.mimeType(e.src))})).then((function(t){return new Promise((function(i,n){e.onload=i,e.onerror=n,e.src=t}))}))}}function t(s){return s instanceof Element?r(s).then((function(){return s instanceof HTMLImageElement?e(s).inline():Promise.all(i.asArray(s.childNodes).map((function(e){return t(e)})))})):Promise.resolve(s);function r(e){var t=e.style.getPropertyValue("background");return t?n.inlineAll(t).then((function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))})).then((function(){return e})):Promise.resolve(e)}}}e.exports=a}()},9004:function(e,t,i){var n,s="undefined"!==typeof i.g?i.g:"undefined"!==typeof window?window:{},r=i(5893);"undefined"!==typeof document?n=document:(n=s["__GLOBAL_DOCUMENT_CACHE@4"],n||(n=s["__GLOBAL_DOCUMENT_CACHE@4"]=r)),e.exports=n},5743:function(e,t,i){var n;n="undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:"undefined"!==typeof self?self:{},e.exports=n},3940:function(e){e.exports=i;var t=Object.prototype.toString;function i(e){if(!e)return!1;var i=t.call(e);return"[object Function]"===i||"function"===typeof e&&"[object RegExp]"!==i||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}},6274:function(e,t){function i(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return o[e];var i=String(e),r=n[i.toLowerCase()];if(r)return r;r=s[i.toLowerCase()];return r||(1===i.length?i.charCodeAt(0):void 0)}i.isEventKey=function(e,t){if(e&&"object"===typeof e){var i=e.which||e.keyCode||e.charCode;if(null===i||void 0===i)return!1;if("string"===typeof t){var r=n[t.toLowerCase()];if(r)return r===i;r=s[t.toLowerCase()];if(r)return r===i}else if("number"===typeof t)return t===i;return!1}},t=e.exports=i;var n=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(r=97;r<123;r++)n[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)n[r-48]=r;for(r=1;r<13;r++)n["f"+r]=r+111;for(r=0;r<10;r++)n["numpad "+r]=r+96;var o=t.names=t.title={};for(r in n)o[n[r]]=r;for(var a in s)n[a]=s[a]},9577:function(e,t,i){i(3462),i(7380),i(1118);var n=i(5155).getUint64,s=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},s=12;0===i.version?(i.earliestPresentationTime=t.getUint32(s),i.firstOffset=t.getUint32(s+4),s+=8):(i.earliestPresentationTime=n(e.subarray(s)),i.firstOffset=n(e.subarray(s+8)),s+=16),s+=2;var r=t.getUint16(s);for(s+=2;r>0;s+=12,r--)i.references.push({referenceType:(128&e[s])>>>7,referencedSize:2147483647&t.getUint32(s),subsegmentDuration:t.getUint32(s+4),startsWithSap:!!(128&e[s+8]),sapType:(112&e[s+8])>>>4,sapDeltaTime:268435455&t.getUint32(s+8)});return i};e.exports=s},9771:function(e){var t,i,n,s,r,o,a,l=9e4;t=function(e){return e*l},i=function(e,t){return e*t},n=function(e){return e/l},s=function(e,t){return e/t},r=function(e,i){return t(s(e,i))},o=function(e,t){return i(n(e),t)},a=function(e,t,i){return n(i?e:e-t)},e.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:t,secondsToAudioTs:i,videoTsToSeconds:n,audioTsToSeconds:s,audioTsToVideoTs:r,videoTsToAudioTs:o,metadataTsToSeconds:a}},5155:function(e){var t=Math.pow(2,32),i=function(e){var i,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(i=n.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):n.getUint32(0)*t+n.getUint32(4)};e.exports={getUint64:i,MAX_UINT32:t}},4988:function(e){function t(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(s){n=s}return[n,i]}e.exports=t},2940:function(e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),t=t.trim(),!t){if(!i.alwaysNormalize)return e;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return s.path=o.normalizePath(s.path),o.buildURLFromParts(s)}var r=o.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=o.normalizePath(r.path),o.buildURLFromParts(r)):t;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=n.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(u.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+r.path;u.path=o.normalizePath(d)}else u.path=a.path,r.params||(u.params=a.params,r.query||(u.query=a.query));return null===u.path&&(u.path=i.alwaysNormalize?o.normalizePath(r.path):r.path),o.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(s,"");while(e.length!==(e=e.replace(r,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o})()},2648:function(e,t,i){var n=i(5743),s=e.exports={WebVTT:i(7318),VTTCue:i(9622),VTTRegion:i(7223)};n.vttjs=s,n.WebVTT=s.WebVTT;var r=s.VTTCue,o=s.VTTRegion,a=n.VTTCue,l=n.VTTRegion;s.shim=function(){n.VTTCue=r,n.VTTRegion=o},s.restore=function(){n.VTTCue=a,n.VTTRegion=l},n.VTTCue||s.shim()},7318:function(e,t,i){var n=i(9004),s=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function r(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function o(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function a(){this.values=s(null)}function l(e,t,i,n){var s=n?e.split(n):[e];for(var r in s)if("string"===typeof s[r]){var o=s[r].split(i);if(2===o.length){var a=o[0].trim(),l=o[1].trim();t(a,l)}}}function u(e,t,i){var n=e;function s(){var t=o(e);if(null===t)throw new r(r.Errors.BadTimeStamp,"Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function u(e,t){var n=new a;l(e,(function(e,t){switch(e){case"region":for(var s=i.length-1;s>=0;s--)if(i[s].id===t){n.set(e,i[s].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),o=r[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===r.length&&n.alt("lineAlign",r[1],["start","center","end"]);break;case"position":r=t.split(","),n.percent(e,r[0]),2===r.length&&n.alt("positionAlign",r[1],["start","center","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","center","end","left","right"]);break}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");try{t.line=n.get("line","auto")}catch(s){}t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100);try{t.align=n.get("align","center")}catch(s){t.align=n.get("align","middle")}try{t.position=n.get("position","auto")}catch(s){t.position=n.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=n.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}function c(){e=e.replace(/^\s+/,"")}if(c(),t.startTime=s(),c(),"--\x3e"!==e.substr(0,3))throw new r(r.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),c(),t.endTime=s(),c(),u(e,t)}r.prototype=s(Error.prototype),r.prototype.constructor=r,r.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var c=n.createElement&&n.createElement("textarea"),d={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},m={rt:"ruby"};function g(e,t){function i(){if(!t)return null;function e(e){return t=t.substr(e.length),e}var i=t.match(/^([^<]*)(<[^>]*>?)?/);return e(i[1]?i[1]:i[2])}function n(e){return c.innerHTML=e,e=c.textContent,c.textContent="",e}function s(e,t){return!m[t.localName]||m[t.localName]===e.localName}function r(t,i){var n=d[t];if(!n)return null;var s=e.document.createElement(n),r=p[t];return r&&i&&(s[r]=i.trim()),s}var a,l=e.document.createElement("div"),u=l,g=[];while(null!==(a=i()))if("<"!==a[0])u.appendChild(e.document.createTextNode(n(a)));else{if("/"===a[1]){g.length&&g[g.length-1]===a.substr(2).replace(">","")&&(g.pop(),u=u.parentNode);continue}var _,f=o(a.substr(1,a.length-2));if(f){_=e.document.createProcessingInstruction("timestamp",f),u.appendChild(_);continue}var y=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(_=r(y[1],y[3]),!_)continue;if(!s(u,_))continue;if(y[2]){var v=y[2].split(".");v.forEach((function(e){var t=/^bg_/.test(e),i=t?e.slice(3):e;if(h.hasOwnProperty(i)){var n=t?"background-color":"color",s=h[i];_.style[n]=s}})),_.className=v.join(" ")}g.push(y[1]),u.appendChild(_),u=_}return l}var _=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function f(e){for(var t=0;t<_.length;t++){var i=_[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function y(e){var t,i=[],n="";if(!e||!e.childNodes)return"ltr";function s(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function r(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?(e.length=0,n[0]):i}return"ruby"===t.tagName?r(e):t.childNodes?(s(e,t),r(e)):void 0}s(i,e);while(n=r(i))for(var o=0;o<n.length;o++)if(t=n.charCodeAt(o),f(t))return"rtl";return"ltr"}function v(e){if("number"===typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,n=0,s=0;s<i.length&&i[s]!==t;s++)"showing"===i[s].mode&&n++;return-1*++n}function b(){}function w(e,t,i){b.call(this),this.cue=t,this.cueDiv=g(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var s=0;switch(t.positionAlign){case"start":s=t.position;break;case"center":s=t.position-t.size/2;break;case"end":s=t.position-t.size;break}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function k(e){var t,i,n,s;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,s=e.div.offsetTop;var r=(r=e.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects();e=e.div.getBoundingClientRect(),t=r?Math.max(r[0]&&r[0].height||0,e.height/r.length):0}this.left=e.left,this.right=e.right,this.top=e.top||s,this.height=e.height||i,this.bottom=e.bottom||s+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function T(e,t,i,n){function s(e,t){for(var s,r=new k(e),o=1,a=0;a<t.length;a++){while(e.overlapsOppositeAxis(i,t[a])||e.within(i)&&e.overlapsAny(n))e.move(t[a]);if(e.within(i))return e;var l=e.intersectPercentage(i);o>l&&(s=new k(e),o=l),e=new k(r)}return s||r}var r=new k(t),o=t.cue,a=v(o),l=[];if(o.snapToLines){var u;switch(o.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=r.lineHeight,d=c*Math.round(a),h=i[u]+c,p=l[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/c)*c),a<0&&(d+=""===o.vertical?i.height:i.width,l=l.reverse()),r.move(p,d)}else{var m=r.lineHeight/i.height*100;switch(o.lineAlign){case"center":a-=m/2;break;case"end":a-=m;break}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")});break}l=["+y","-x","+x","-y"],r=new k(t)}var g=s(r,l);t.move(g.toCSSCompatValues(i))}function x(){}b.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},w.prototype=s(b.prototype),w.prototype.constructor=w,k.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}},k.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},k.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},k.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},k.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},k.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),i=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),n=t*i;return n/(this.height*this.width)},k.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},k.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var s={left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i};return s},x.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},x.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null};var S=.05,E="sans-serif",A="1.5%";x.processCues=function(e,t,i){if(!e||!t||!i)return null;while(i.firstChild)i.removeChild(i.firstChild);var n=e.document.createElement("div");function s(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=A,i.appendChild(n),s(t)){var r=[],o=k.getSimpleBoxPosition(n),a=Math.round(o.height*S*100)/100,l={font:a+"px "+E};(function(){for(var i,s,a=0;a<t.length;a++)s=t[a],i=new w(e,s,l),n.appendChild(i.div),T(e,i,o,r),s.displayState=i.div,r.push(k.getSimpleBoxPosition(i))})()}else for(var u=0;u<t.length;u++)n.appendChild(t[u].displayState)},x.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},x.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof r))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function i(){var e=t.buffer,i=0;while(i<e.length&&"\r"!==e[i]&&"\n"!==e[i])++i;var n=e.substr(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.substr(i),n}function n(e){var i=new a;if(l(e,(function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var s=new a;if(s.percent("x",n[0]),s.percent("y",n[1]),!s.has("x")||!s.has("y"))break;i.set(e+"X",s.get("x")),i.set(e+"Y",s.get("y"));break;case"scroll":i.alt(e,t,["up"]);break}}),/=/,/\s/),i.has("id")){var n=new(t.vttjs.VTTRegion||t.window.VTTRegion);n.width=i.get("width",100),n.lines=i.get("lines",3),n.regionAnchorX=i.get("regionanchorX",0),n.regionAnchorY=i.get("regionanchorY",100),n.viewportAnchorX=i.get("viewportanchorX",0),n.viewportAnchorY=i.get("viewportanchorY",100),n.scroll=i.get("scroll",""),t.onregion&&t.onregion(n),t.regionList.push({id:i.get("id"),region:n})}}function s(e){var i=new a;l(e,(function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",o(t));break}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}function c(e){e.match(/X-TIMESTAMP-MAP/)?l(e,(function(e,t){switch(e){case"X-TIMESTAMP-MAP":s(t);break}}),/=/):l(e,(function(e,t){switch(e){case"Region":n(t);break}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var d;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;d=i();var h=d.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new r(r.Errors.BadSignature);t.state="HEADER"}var p=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(p?p=!1:d=i(),t.state){case"HEADER":/:/.test(d)?c(d):d||(t.state="ID");continue;case"NOTE":d||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){t.state="NOTE";break}if(!d)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(g){t.cue.align="middle"}if(t.state="CUE",-1===d.indexOf("--\x3e")){t.cue.id=d;continue}case"CUE":try{u(d,t.cue,t.regionList)}catch(g){t.reportOrThrowError(g),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var m=-1!==d.indexOf("--\x3e");if(!d||m&&(p=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=d.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":d||(t.state="ID");continue}}}catch(g){t.reportOrThrowError(g),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new r(r.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=x},9622:function(e){var t="auto",i={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function s(e){if("string"!==typeof e)return!1;var t=i[e.toLowerCase()];return!!t&&e.toLowerCase()}function r(e){if("string"!==typeof e)return!1;var t=n[e.toLowerCase()];return!!t&&e.toLowerCase()}function o(e,i,n){this.hasBeenReset=!1;var o="",a=!1,l=e,u=i,c=n,d=null,h="",p=!0,m="auto",g="start",_="auto",f="auto",y=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(e){a=!!e}},startTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(e){var t=s(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return m},set:function(e){if("number"!==typeof e&&e!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return g},set:function(e){var t=r(e);t?(g=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=r(e);t?(f=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=r(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=o},7223:function(e){var t={"":!0,up:!0};function i(e){if("string"!==typeof e)return!1;var i=t[e.toLowerCase()];return!!i&&e.toLowerCase()}function n(e){return"number"===typeof e&&e>=0&&e<=100}function s(){var e=100,t=3,s=0,r=100,o=0,a=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");s=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var t=i(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):l=t}}})}e.exports=s},3749:function(e,t){"use strict";!function(e,t){function i(t,i,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,s(i),(function(e){o(t,e,n)})):u(t,n)}function n(t,i,n){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){n&&n.trigger&&n.trigger(e),o(t,e,i)})):u(t,n||i)}function s(e){return e=e||{},e.appId=S.appId,e.verifyAppId=S.appId,e.verifySignType="sha1",e.verifyTimestamp=S.timestamp+"",e.verifyNonceStr=S.nonceStr,e.verifySignature=S.signature,e}function r(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function o(e,t,i){var n,s;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,n=t.errMsg,n||(n=t.err_msg,delete t.err_msg,n=a(e,n,i),t.errMsg=n),i=i||{},i._complete&&(i._complete(t),delete i._complete),n=t.errMsg||"",S.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t)),s=n.indexOf(":"),n.substring(s+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function a(e,t){var i,n,s,r;if(t){switch(i=t.indexOf(":"),e){case m.config:n="config";break;case m.openProductSpecificView:n="openProductSpecificView";break;default:n=t.substring(0,i),n=n.replace(/_/g," "),n=n.replace(/\b\w+\b/g,(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)})),n=n.substring(0,1).toLowerCase()+n.substring(1),n=n.replace(/ /g,""),-1!=n.indexOf("Wcpay")&&(n=n.replace("Wcpay","WCPay")),s=g[n],s&&(n=s)}r=t.substring(i+1),"confirm"==r&&(r="ok"),"failed"==r&&(r="fail"),-1!=r.indexOf("failed_")&&(r=r.substring(7)),-1!=r.indexOf("fail_")&&(r=r.substring(5)),r=r.replace(/_/g," "),r=r.toLowerCase(),("access denied"==r||"no permission to execute"==r)&&(r="permission denied"),"config"==n&&"function not exist"==r&&(r="ok"),t=n+":"+r}return t}function l(e){var t,i,n,s;if(e){for(t=0,i=e.length;i>t;++t)n=e[t],s=m[n],s&&(e[t]=s);return e}}function u(e,t){if(!(!S.debug||t&&t.isInnerInvoke)){var i=g[e];i&&(e=i),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function c(){if(!("6.0.2">k||x.systemType<0)){var e=new Image;x.appId=S.appId,x.initTime=T.initEndTime-T.initStartTime,x.preVerifyTime=T.preVerifyEndTime-T.preVerifyStartTime,C.getNetworkType({isInnerInvoke:!0,success:function(t){x.networkType=t.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+x.version+"&o="+x.isPreVerifyOk+"&s="+x.systemType+"&c="+x.clientVersion+"&a="+x.appId+"&n="+x.networkType+"&i="+x.initTime+"&p="+x.preVerifyTime+"&u="+x.url;e.src=i}})}}function d(){return(new Date).getTime()}function h(t){v&&(e.WeixinJSBridge?t():_.addEventListener&&_.addEventListener("WeixinJSBridgeReady",t,!1))}function p(){C.invoke||(C.invoke=function(t,i,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,s(i),n)},C.on=function(t,i){e.WeixinJSBridge&&WeixinJSBridge.on(t,i)})}var m,g,_,f,y,v,b,w,k,T,x,S,E,A,C;if(!e.jWeixin)m={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},g=function(){var e,t={};for(e in m)t[m[e]]=e;return t}(),_=e.document,f=_.title,y=navigator.userAgent.toLowerCase(),v=-1!=y.indexOf("micromessenger"),b=-1!=y.indexOf("android"),w=-1!=y.indexOf("iphone")||-1!=y.indexOf("ipad"),k=function(){var e=y.match(/micromessenger\/(\d+\.\d+\.\d+)/)||y.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),T={initStartTime:d(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},x={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:w?1:b?2:-1,clientVersion:k,url:encodeURIComponent(location.href)},S={},E={_completes:[]},A={state:0,res:{}},h((function(){T.initEndTime=d()})),C={config:function(e){S=e,u("config",e);var t=!1!==S.check;h((function(){var e,n,s;if(t)i(m.config,{verifyJsApiList:l(S.jsApiList)},function(){E._complete=function(e){T.preVerifyEndTime=d(),A.state=1,A.res=e},E.success=function(){x.isPreVerifyOk=0},E.fail=function(e){E._fail?E._fail(e):A.state=-1};var e=E._completes;return e.push((function(){S.debug||c()})),E.complete=function(){for(var t=0,i=e.length;i>t;++t)e[t]();E._completes=[]},E}()),T.preVerifyStartTime=d();else{for(A.state=1,e=E._completes,n=0,s=e.length;s>n;++n)e[n]();E._completes=[]}})),S.beta&&p()},ready:function(e){0!=A.state?e():(E._completes.push(e),!v&&S.debug&&e())},error:function(e){"6.0.2">k||(-1==A.state?e(A.res):E._fail=e)},checkJsApi:function(e){var t=function(e){var t,i,n=e.checkResult;for(t in n)i=g[t],i&&(n[i]=n[t],delete n[t]);return e};i("checkJsApi",{jsApiList:l(e.jsApiList)},function(){return e._complete=function(e){if(b){var i=e.checkResult;i&&(e.checkResult=JSON.parse(i))}e=t(e)},e}())},onMenuShareTimeline:function(e){n(m.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||f,desc:e.title||f,img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareAppMessage:function(e){n(m.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:e.title||f,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){n(m.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||f,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){n(m.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||f,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){n(m.onMenuShareQZone,{complete:function(){i("shareQZone",{title:e.title||f,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){n("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){n("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},function(){return e._complete=function(e){if(b){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},previewImage:function(e){i(m.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){var t=function(e){var t,i,n,s=e.errMsg;if(e.errMsg="getNetworkType:ok",t=e.subtype,delete e.subtype,t)e.networkType=t;else switch(i=s.indexOf(":"),n=s.substring(i+1)){case"wifi":case"edge":case"wwan":e.networkType=n;break;default:e.errMsg="getNetworkType:fail"}return e};i("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},i(m.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){i("hideOptionMenu",{},e)},showOptionMenu:function(e){i("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},i("closeWindow",{immediate_close:e.immediateClose||0},e)},hideMenuItems:function(e){i("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){i("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){i("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){i("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},i("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){var t,i;w&&(t=e.resultStr,t&&(i=JSON.parse(t),e.resultStr=i&&i.scan_code&&i.scan_code.scan_result))},e}())},openProductSpecificView:function(e){i(m.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0},e)},addCard:function(e){var t,n,s,r,o=e.cardList,a=[];for(t=0,n=o.length;n>t;++t)s=o[t],r={card_id:s.cardId,card_ext:s.cardExt},a.push(r);i(m.addCard,{card_list:a},function(){return e._complete=function(e){var t,i,n,s=e.card_list;if(s){for(s=JSON.parse(s),t=0,i=s.length;i>t;++t)n=s[t],n.cardId=n.card_id,n.cardExt=n.card_ext,n.isSuccess=!!n.is_succ,delete n.card_id,delete n.card_ext,delete n.is_succ;e.cardList=s,delete e.card_list}},e}())},chooseCard:function(e){i("chooseCard",{app_id:S.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){var t,n,s,r,o=e.cardList,a=[];for(t=0,n=o.length;n>t;++t)s=o[t],r={card_id:s.cardId,code:s.code},a.push(r);i(m.openCard,{card_list:a},e)},chooseWXPay:function(e){i(m.chooseWXPay,r(e),e)}},t&&(e.wx=e.jWeixin=C)}(window,!0),t["Z"]=window.wx},3433:function(e,t,i){"use strict";function n(e){return new Promise((function(e,t){if("undefined"!==typeof BMap)return e(BMap),!0;window.onBMapCallback=function(){e(BMap)};let i=document.createElement("script");i.type="text/javascript",i.src="https://api.map.baidu.com/api?v=2.0&ak=5LhGNjF8xF2jIat2u0hZVezoEwqpdVIH&s=1&callback=onBMapCallback",i.onerror=t,document.head.appendChild(i)}))}function s(){return new Promise(((e,t)=>{let i=new BMap.Geolocation;i.getCurrentPosition((async function(t){let i={point:{},label:"",address:"",uid:"",point_info:{}};if(this.getStatus()==BMAP_STATUS_SUCCESS){i.point.lat=t.point.lat,i.point.lng=t.point.lng;let e=await r(t.point);i.label=e.title,i.address=e.address,i.uid=e.uid,i.point_info=e.point_uid}else console.log("无法定位到您的当前位置，导航失败，请手动输入您的当前位置！"+this.getStatus());e(i)}),{enableHighAccuracy:!0}),navigator.geolocation.clearWatch(i)}))}function r(e){return new Promise(((t,i)=>{var n=new BMap.Geocoder;n.getLocation(new BMap.Point(e.lng,e.lat),(function(e){var i=e.addressComponents,n=e.surroundingPois;let s={address:"",uid:"",point_uid:{},title:""};n&&n.length>0?(s.address=n[0].address,s.uid=n[0].uid,s.point_uid=n[0].point,s.title=n[0].title):s.address=i.province+i.city+i.district+i.street+i.streetNumber,t(s)}))}))}i.d(t,{l6:function(){return r},nj:function(){return n},tZ:function(){return s}})},5820:function(e,t,i){"use strict";i.d(t,{L:function(){return u}});var n=i(5177),s=i.n(n),r=i(2613),o=i.n(r),a=i(9592);function l(e,t,i){let n={allowTaint:!0,scale:window.devicePixelRatio,logging:!1,width:e.offsetWidth,height:e.offsetHeight,useCORS:!0,removeContainer:!0};setTimeout((()=>{s()(e,n).then((function(e){t(e.toDataURL("image/png"))})).catch((e=>{i(e)}))}),600)}function u(e){let t=document.getElementById(e);return(0,a.Jv)().Safari||(0,a.Jv)().weixin&&(0,a.Jv)().iPhone?new Promise((function(e,i){l(t,e,i)})):new Promise((function(e,i){o().toPng(t,{bgcolor:"#ffffff"}).then((function(t){e(t)})).catch((n=>{console.log("domtoimage err ",n),l(t,e,i)}))}))}},689:function(e,t,i){"use strict";i.d(t,{aq:function(){return s},sI:function(){return r}});const n=["case","group"];function s(e,t,i){if(e){let s="/"+e,r="/"+t;return!!(i.indexOf(s)>=0&&n.includes(e))||!(i.indexOf(s)>=0||i.indexOf(r)>=0)}return!1}function r(e,t,i){try{let s=document.referrer;if(!s)return!0;if(e&&i.indexOf(e)>=0&&n.includes(e))return!0;if(s==i)return!1;let r=o(i);if(!r)return!1;if(e){let n="/"+e,s="/"+t;const r=new URL(i);let o=r.pathname;return!(o.indexOf(n)>=0||o.indexOf(s)>=0)}return!1}catch(s){return!1}}function o(e){const t=/(\w+):\/\/([^/:]+)(:\d*)?([^# ]*)/,i=e.match(t);return!!i}},1790:function(e,t,i){"use strict";var n=i(2175);t["Z"]={props:{width:String,height:String,qr_image_logo:String,qr_url:String,borderRadius:String},data:function(){return{}},computed:{},methods:{},mounted:async function(){},components:{[n.Z.name]:n.Z}}},406:function(e,t,i){"use strict";var n=i(568),s=i(9592),r=i(8871),o=i(6294),a=i(5610),l=i(5280),u=i(7594),c=i(4189),d=i(8322);const h=i(470);t["Z"]={props:{user:Object,index:Number,item:Object,no_swipe_dot:Boolean,no_auto_swipe:Boolean,tracker:Object,style_border:String,is_banner_show_first_image:Boolean},data:function(){return{show_edit_popup:!1,encrypted_toggle_show:!1,check_encryption:this.no_auto_swipe,clickInfoCache:{},pay_toggle_show:!1}},computed:{...(0,o.mapState)({user_guest:e=>e.user.user_guest,module_id_reclick:e=>e.page.local_user_data.module_id_reclick,temporary_user:e=>e.user.temporary_user,page:e=>e.page.page,user_guest_orders:e=>e.user.user_guest.link3_orders,white_color_theme:e=>e.page.state_theme.white_font}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},style_when_no_image:function(){let e=248;return this.item&&"image_rectangle"==this.item.type&&(e=124),{"line-height":e+"px",height:e+"px"}},images:function(){if(!this.item)return[];if(!this.item.typeValue)return[];if(!this.item.typeValue.images)return[];if(!this.is_banner_show_first_image){let e=new Array;return e.push(this.item.typeValue.images[0]),e}return this.item.typeValue.images},auto_play_time:function(){return this.no_auto_swipe?0:this.item&&this.item.typeValue&&this.item.typeValue.slideshow&&this.item.typeValue.slideshow.slideshow_auto?this.item.typeValue.slideshow.slideshow_time?1e3*this.item.typeValue.slideshow.slideshow_time:3e3:0},show_indicators:function(){return!this.no_swipe_dot&&(!!(this.item&&this.item.typeValue&&this.item.typeValue.slideshow&&this.images.length>1)&&this.item.typeValue.slideshow.slideshow_dot_show)},area_type:function(){return this.item&&this.item.typeValue&&this.item.typeValue.area_type?this.item.typeValue.area_type:"sekuai"},encrypt_icon_after(){return!this.no_auto_swipe&&(!!this.encrypt_icon&&(!(!(!this.payment_amount||this.encrypted_browsing_password||u.Z.getToken()&&"undefined"!=u.Z.getToken())&&this.checkLink3OrdersStatus(this.item))&&!this.check_encryption))},encrypt_icon:function(){return this.item&&this.item.typeValue?!(!this.item.typeValue.encrypted_browsing_password&&!this.item.typeValue.payment_amount):{}},encrypted_browsing_password:function(){return!!this.type_value.encrypted_browsing_password},payment_amount:function(){return!!this.type_value.payment_amount},isSafari:function(){return!!((0,s.Jv)().Safari||(0,s.Jv)().iPhone||this.page.has_baidu)},isWeixin(){return(0,s.Jv)().weixin},isMiniprogram(){return(0,s.Jv)().miniprogram},my_theme_font_color:function(){let e="black";"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e=this.user.custom_font.font_color);let t=this.white_color_theme;return t.indexOf(this.user.theme)>=0&&(e="white"),e},text_bg(){return h},style_height_image:function(){let e="100%";return this.item&&"image_rectangle"==this.item.type&&(e="50%"),e},imageStyle(){let e={},t=248;return this.item&&"image_rectangle"==this.item.type&&this.isSafari&&this.encrypt_icon_after&&(t=124,e.lineHeight=t+"px",e.height=t+"px"),e.borderRadius=this.style_border,e}},methods:{...(0,o.mapMutations)({updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState"}),getImageSquareOrRectangleUrl:function(e){return(0,n.uR)(e)},VerifyPasswordSuccess(){this.check_encryption=!0,this.clickInfoCache.item&&this.clickInfoCache.index&&this.imageClick(this.clickInfoCache.item,this.clickInfoCache.index)},encryptionToggleShow(e){this.encrypted_toggle_show=e},checkLink3OrdersStatus(e){if(this.user_guest&&this.user_guest_orders){let t=this.user_guest_orders;return!(!t||!Array.isArray(t))&&(!!t.find((t=>t.module_id==e.unid&&t.price>0))||(this.user_guest.unid,this.user.unid,!1))}return!1},checkTemporaryUserLink3OrdersStatus(e){if(this.temporary_user&&""!==this.temporary_user.unid&&this.temporary_user.vip){let t=this.temporary_user.vip;return!(!t.link3_orders||!Array.isArray(t.link3_orders))&&(!!t.link3_orders.find((t=>t.module_id==e.unid&&t.price>0))||(this.temporary_user.unid,this.user.unid,!1))}return!1},payToggleShow(e){this.pay_toggle_show=e},openBuy(e){this.updateLocalUserDataState({show_buy_popup_link3:!1,show_buy_qrcode_link3:!1,show_donate_popup_link3:!1}),this.updateLocalUserDataState({show_buy_popup_link3:!0,buy_popup_goods_index_link3:e})},imageClick:async function(e,t){if(this.isMiniprogram){if(this.payment_amount||this.encrypted_browsing_password)return void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.user.username?d.v.link3PreviewPageUrl+"/"+this.user.username:""});if(e.nav_url){if(!(0,s.sg)(e.nav_url))return;return this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.user.username?d.v.link3PreviewPageUrl+"/"+this.user.username:""})}{this.updateAliyun("click");let e=this.images.filter((e=>{if(e.image_url)return!0})).map((e=>this.getImageSquareOrRectangleUrl(e.image_url)));return void(0,r.ImagePreview)({images:e,startPosition:t,closeable:!0,teleport:"#app"})}}try{if(this.payment_amount&&!this.encrypted_browsing_password){if(!this.checkLink3OrdersStatus(this.item)&&(this.payToggleShow(!0),this.openBuy(this.item.unid),!this.check_pay_status))return;if(""===this.user_guest.unid)return this.payToggleShow(!0),void this.openBuy(this.item.unid);if(!u.Z.getToken())return this.payToggleShow(!0),void this.openBuy(this.item.unid);{let e=await c.bG();if(!e)return!1;"0001"==e.code&&this.updateUserGuestState(e.data)}}if(this.check_pay_status=!1,e&&t&&(this.clickInfoCache={item:e,index:t}),this.encrypted_browsing_password&&!this.check_encryption)return void this.encryptionToggleShow(!0)}catch(n){console.log(n)}let i=(0,s.sg)(e.nav_url);if(i)return this.updateAliyun("click"),this.updateAliyun("leave"),window.open(i);{this.updateAliyun("click");let e=this.images.filter((e=>{if(e.image_url)return!0})).map((e=>this.getImageSquareOrRectangleUrl(e.image_url)));(0,r.ImagePreview)({images:e,startPosition:t,closeable:!0,teleport:"#app"})}},preImage:function(){this.$refs["refImageSwipe"].prev()},nextImage:function(){this.$refs["refImageSwipe"].next()},indicatorClick:function(e){this.$refs["refImageSwipe"].swipeTo(e-1)},tagAlign:function(e,t){let i={"justify-content":"flex-start","padding-left":"16px"};return e.tag&&e.tag.align&&("center"==e.tag.align?i={"justify-content":"center"}:"right"==e.tag.align&&(i={"justify-content":"flex-end","padding-right":"16px"})),i},tagBackgroundColor:function(e,t){let i={background:"black"};return e.tag&&e.tag.background_color&&(i={background:e.tag.background_color}),i},descTextAlign:function(e,t){let i="left";return e.desc&&e.desc.align&&("center"==e.desc.align&&(i="center"),"right"==e.desc.align&&(i="right")),i},indicatorStyle:function(e,t){let i={border:"",background:""},n="#000000";return n=this.my_theme_font_color,i.border="1px solid "+n,e==t+1&&(i.background=n),i},updateAliyun(e){let t={action:e,unid:this.user.unid,system:(0,s.O3)(),client_ip:"",url:location.href,"user-agent":navigator.userAgent,referrer:document.referrer,module_title:this.item.typeValue.title?this.item.typeValue.title:"",module_type:this.item.type,module_unid:this.item.unid?this.item.unid:"0"};const i=this.$route.meta;i.directview&&this.user.unid&&("click"==e?this.tracker.send(t):this.tracker.sendImmediate(t))}},created(){},mounted:function(){},components:{PEncryptedPopup:l.Z,PBuyPopup:a.Z},watch:{module_id_reclick:{handler(e,t){e!==t&&e==this.item.unid&&this.imageClick()}}}}},8218:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var n=i(311);const s={class:"sms-code__item_dot"},r=["type","pattern"];function o(e,t,i,o,a,l){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"sms-code",onClick:t[4]||(t[4]=(...e)=>l.componentFocus&&l.componentFocus(...e))},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.valueArr,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,class:(0,n.normalizeClass)(["sms-code__item",{active:t===l.currentIndex},{err:a.inputError&&t===l.currentIndex},{err:i.inputErrorPopup}])},[(0,n.withDirectives)((0,n.createElementVNode)("span",s,null,512),[[n.vShow,i.secret&&e.value]]),(0,n.withDirectives)((0,n.createElementVNode)("span",{class:"sms-code__item_text"},(0,n.toDisplayString)(e.value),513),[[n.vShow,!i.secret]]),(0,n.withDirectives)((0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["sms-code__item_cursor",{ismargin:e.value}])},null,2),[[n.vShow,t===l.currentIndex&&i.showCursor]])],2)))),128)),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.inputValue=e),type:"number"===this.codeType?"tel":"text",pattern:"number"===this.codeType?"tel":"",class:"sms-code__input",ref:"smsCodeInput",onInput:t[1]||(t[1]=e=>l.inputevent(e)),onFocus:t[2]||(t[2]=e=>a.isFocus=!0),onBlur:t[3]||(t[3]=e=>a.isFocus=!1)},null,40,r),[[n.vModelDynamic,a.inputValue]])])}const a=RegExp(/\s/,"gi"),l=RegExp(/[^0-9]/,"gi");var u={name:"sms-code",props:{value:{type:String,default:"",required:!0},codeType:{type:String,default:"text",validator:e=>["text","number"].includes(e)},codeCount:{type:[Number,String],default:6},secret:{type:Boolean,default:!1},showCursor:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},formatter:{type:Function},inputErrorPopup:{type:Boolean,default:!1}},data(){return{inter:void 0,inputValue:"",isFocus:!1,valueArr:[],inputError:!1}},computed:{currentIndex(){if(this.isFocus){let e=this.inputValue.length,t=Number(this.codeCount);return e===t?t-1:e}return-1}},watch:{isFocus:{handler:function(e,t){e!==t&&void 0!==t&&this.$emit("focus",e)},immediate:!0},value:{handler:function(e){let t=this.formatters(e);this.rander(t),this.inputValue=t},immediate:!0},inputValue:{handler:function(e,t){e!==t&&(this.$emit("input",e),e.length===Number(this.codeCount)&&this.$emit("callback",e),this.rander(e))}},codeType:{handler:function(){let e=this.formatters(this.value);this.inputValue=e,this.componentFocus()}},codeCount:{handler:function(){let e=this.formatters(this.value);e===this.value?this.rander(e):this.inputValue=e,this.componentFocus()}},inputErrorPopup:{handler:function(e,t){e!==t&&(this.valueArr=["","","",""],this.inputValue="")}}},mounted(){this.autoFocus&&this.componentFocus()},methods:{rander(e){let t=e.split("");this.valueArr=[];for(let i=0;i<Number(this.codeCount);i++)this.valueArr.push({key:i,value:i<t.length?t[i]:""})},inputevent(e){let t=this.formatters(e.target.value);this.inputValue=t},componentFocus(){this.$refs.smsCodeInput.selectionStart=this.inputValue.length,this.$refs.smsCodeInput.focus()},formatterNumber(e){return e.replace(l,"")},formatters(e){let t=e.replace(a,"").substring(0,Number(this.codeCount));return t&&("number"===this.codeType&&(l.test(t)&&(this.inputError=!0,this.$emit("inputErrorEmit",this.inputError),this.inter=setTimeout((()=>{this.inputError=!1,this.$emit("inputErrorEmit",this.inputError),clearTimeout(this.inter),this.inter=void 0}),2e3)),t=this.formatterNumber(t)),this.formatter&&(t=this.formatter(t))),t}}},c=i(89);const d=(0,c.Z)(u,[["render",o],["__scopeId","data-v-1f01e88e"]]);var h=d},4334:function(e,t,i){"use strict";i.d(t,{Z:function(){return y}});var n=i(3042),s=(i(5708),i(9859)),r=i(311);const o={style:{}},a={key:0,style:{"font-size":"20px","font-weight":"900",width:"100%","text-align":"center","margin-top":"14px","white-space":"pre-wrap","max-width":"86%","margin-left":"7%"}},l={style:{display:"flex","justify-content":"center","margin-top":"20px"}};function u(e,t,i,u,c,d){const h=s.Z,p=n.G;return(0,r.openBlock)(),(0,r.createBlock)(p,{show:e.is_popup_qr,"onUpdate:show":t[2]||(t[2]=t=>e.is_popup_qr=t),closeable:"",style:(0,r.normalizeStyle)([{border:"0","border-radius":"4px"},{width:e.popupWidth+"px","min-height":e.popupWidth+"px"}])},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",o,[e.user.profile_title?((0,r.openBlock)(),(0,r.createElementBlock)("div",a,(0,r.toDisplayString)(e.user.profile_title)+(0,r.toDisplayString)(e.translate("title")),1)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",l,[(0,r.createVNode)(h,{width:e.popupWidth-100+"",height:e.popupWidth-100+"",qr_image_logo:e.qr_image_logo,qr_url:e.qr_url},null,8,["width","height","qr_image_logo","qr_url"])]),(0,r.createElementVNode)("div",{onClick:t[0]||(t[0]=(...t)=>e.copyLink3&&e.copyLink3(...t)),style:{width:"100%","font-size":"12px","font-weight":"600","text-align":"center",color:"#969799","margin-top":"20px","margin-bottom":"10px"}},(0,r.toDisplayString)(e.translate("qr_code")),1),(0,r.createElementVNode)("div",{onClick:t[1]||(t[1]=(...t)=>e.copyLink3&&e.copyLink3(...t)),style:{width:"100%","font-size":"16px","font-weight":"600","text-align":"center",cursor:"pointer","margin-bottom":"20px"}},(0,r.toDisplayString)(e.link3PreviewPageUrl(""))+"/"+(0,r.toDisplayString)(e.user.username),1)])])),_:1},8,["show","style"])}var c=i(6294),d=i(7999),h=i(1790),p=i(8322),m={props:{user:Object,present_language:String,qr_image_logo:String,qr_url:String},data:function(){return{popupWidth:.86*window.innerWidth>414?414:.86*window.innerWidth,preview_language:{"zh-CN":{title:"的Link3",qr_code:"永久二维码",js_copy_success:"已复制，\n可直接去粘贴",js_copy_fail:"复制失败，请手动输出："},en:{title:"'s Link3",qr_code:"",js_copy_success:"Copied!",js_copy_fail:"Copy failed, please input:"},"zh-HK":{title:"的Link3",qr_code:"永久二維碼",js_copy_success:"已復制，\n可直接去粘貼",js_copy_fail:"複製失敗，請手動輸出："}}}},computed:{...(0,c.mapState)({page:e=>e.page.page}),is_popup_qr:{get(){return this.page.link3_qr_popup},set(e){this.updatePageState({link3_qr_popup:e})}},link3PreviewPageUrl(){return function(e){let t=p.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}}},methods:{...(0,c.mapMutations)({updatePageState:"page/updatePageState"}),translate:function(e){return this.preview_language[this.present_language][e]},copyLink3:async function(){(0,d.Z)(p.v.link3PreviewPageUrl+"/"+this.user.username)?alert(this.translate("js_copy_success")):alert(this.translate("js_copy_fail")+p.v.link3PreviewPageUrl+"/"+this.user.username)}},mounted:async function(){},components:{Qrcode:h.Z}},g=m,_=i(89);const f=(0,_.Z)(g,[["render",u],["__scopeId","data-v-3d6d6e96"]]);var y=f},9859:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var n=i(311);const s=["src"];function r(e,t,i,r,o,a){const l=(0,n.resolveComponent)("vue-qrcode");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{style:(0,n.normalizeStyle)([{position:"relative",display:"inline-grid","place-items":"center"},{height:e.height+"px",width:e.width+"px"}])},[(0,n.createVNode)(l,{class:"grid-item",value:e.qr_url,options:{width:e.width,errorCorrectionLevel:"Q"},style:(0,n.normalizeStyle)({borderRadius:e.borderRadius?e.borderRadius+"px":0})},null,8,["value","options","style"]),e.qr_image_logo?((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,class:"grid-item",style:{"background-color":"#fff",outline:"0.20rem solid #fff","box-shadow":"0 0.125rem 0.25rem rgba(0, 0, 0, 0.25)",height:"15%",width:"15%",overflow:"hidden","object-fit":"scale-down","z-index":"100"},src:e.qr_image_logo},null,8,s)):(0,n.createCommentVNode)("",!0)],4)}var o=i(1790),a=o.Z,l=i(89);const u=(0,l.Z)(a,[["render",r],["__scopeId","data-v-2501ab21"]]);var c=u},3870:function(e,t,i){"use strict";i.d(t,{Z:function(){return S}});var n=i(9792),s=i(9859),r=i(311);const o={style:{position:"fixed",top:"-30000000px"}},a={id:"id_qrcode_my_link3",style:{width:"200px",height:"200px"}},l={key:0,style:{"margin-top":"10px"}},u=["id"],c=["src"],d={class:"grid-item",style:{display:"flex","flex-direction":"column","justify-content":"space-between",width:"100%",height:"100%","background-size":"100% 100%",position:"relative"}},h={style:{"align-self":"flex-start","margin-left":"44px",background:"transparent","z-index":"100",display:"flex","flex-direction":"row","justify-content":"flex-start","align-items":"flex-start"}},p=["src"],m={style:{"margin-left":"32px","margin-top":"70px"}},g={key:1,id:"id_preview_image",style:{width:"414px",height:"100%"}};function _(e,t,i,_,f,y){const v=s.Z,b=n.Z;return(0,r.openBlock)(),(0,r.createElementBlock)("div",o,[(0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",null,[(0,r.createVNode)(v,{width:"200",height:"200",qr_image_logo:e.qr_image_logo,qr_url:e.my_link3},null,8,["qr_image_logo","qr_url"])])]),e.load_RealPreview&&e.share_popup.show?((0,r.openBlock)(),(0,r.createElementBlock)("div",l,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.cards,((t,i)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:i},[(0,r.createElementVNode)("div",{id:"id_card_"+i,style:{width:"1080px",height:"600px","background-color":"#D8C0FF",display:"inline-grid","place-items":"center"}},[(0,r.createElementVNode)("img",{class:"grid-item",src:e.background_image(i),style:{width:"1080px",height:"600px"}},null,8,c),(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",h,[(0,r.createElementVNode)("img",{src:e.getRemoteImage,style:{width:"120px",height:"120px","box-shadow":"0px 0px 30px 0px rgba(255,255,255,0.4)","margin-top":"44px","border-radius":"50%"}},null,8,p),(0,r.createElementVNode)("div",m,[(0,r.createElementVNode)("div",{style:(0,r.normalizeStyle)([{"font-size":"32px","font-weight":"500",width:"700px","white-space":"break-spaces","text-overflow":"ellipsis",display:"-webkit-box",overflow:"hidden","-webkit-line-clamp":"1","-webkit-box-orient":"vertical","text-align":"justify"},{color:t.color}])},(0,r.toDisplayString)(e.user.profile_title?e.user.profile_title:e.user.username),5),(0,r.createElementVNode)("div",{style:(0,r.normalizeStyle)([{"font-size":"20px","font-weight":"400","margin-top":"14px",width:"700px","white-space":"break-spaces","text-overflow":"ellipsis",display:"-webkit-box",overflow:"hidden","-webkit-line-clamp":"4","-webkit-box-orient":"vertical","text-align":"justify"},{color:t.color}])},(0,r.toDisplayString)(e.user.bio?e.user.bio:""),5)])]),(0,r.createElementVNode)("div",{style:(0,r.normalizeStyle)([{"align-self":"flex-end","margin-right":"46px","margin-bottom":"30px","z-index":"100",background:"transparent",display:"flex","flex-direction":"row","justify-content":"flex-end","align-items":"flex-end"},{color:t.color,marginBottom:4==i||5==i?"34px":"30px",marginRight:4==i||5==i?"50px":"46px"}])},[(0,r.createElementVNode)("div",{style:(0,r.normalizeStyle)([{"text-align":"right","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","font-size":"24px","margin-right":"14px","font-weight":"400","max-width":"730px","min-width":"400px"},{color:t.color}])},(0,r.toDisplayString)(e.link3PreviewPageUrl(""))+"/"+(0,r.toDisplayString)(e.user.username),5),(0,r.createVNode)(v,{width:"160",height:"160",qr_image_logo:e.qr_image_logo,qr_url:e.my_link3,borderRadius:"12",style:{"margin-bottom":"16px"}},null,8,["qr_image_logo","qr_url"])],4)])],8,u)])))),128))])):(0,r.createCommentVNode)("",!0),e.load_RealPreview&&e.share_popup.show?((0,r.openBlock)(),(0,r.createElementBlock)("div",g,[(0,r.createElementVNode)("div",null,[(0,r.createVNode)(b,{user_data:e.user_data,is_show_qrcode:!0,is_hide_share_button:!0,is_hide_bottom_logo:!0,is_hide_bottom_button:!0,is_show_bottom_ad:!1,close_callback:!0,is_hide_favorites_button:!0,is_banner_show_first_image:!0},null,8,["user_data"])])])):(0,r.createCommentVNode)("",!0)])}var f=i(6294),y=i(8322),v=i(9592),b=i(568),w={props:{user_data:Object},data:function(){return{cards:[{color:"#fff"},{color:"#fff"},{color:"#154600"},{color:"#a14631"},{color:"#fff"},{color:"#793c1b"},{color:"#2A0053"},{color:"#002D34"},{color:"#452200"}],load_RealPreview:!1}},computed:{...(0,f.mapState)({user:e=>e.user.user,share_popup:e=>e.page.share_popup}),my_link3(){return(0,v.UZ)(this.user.username)},qr_image_logo:function(){return(0,b.sQ)(this.user.profile_image)},getRemoteImage(){return(0,b.sQ)(this.user.profile_image)},link3PreviewPageUrl(){return function(e){let t=y.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}}},provide(){return{preview_from:()=>"GeneImage"}},methods:{background_image(e){return y.v.qiniuUrl+"/others/share_business_card_background/share_card_swipe"+(e+1)+".jpg"},strSlice(e,t){return e.substring(0,t||64)},nameslice(e,t){const i=t||13;return this.getLength(e,i)[1]+1<e.length?e.slice(0,this.getLength(e,i)[1])+"...":e},getLength(e,t){let i=0,n=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);if(n=s,i+=r>=0&&r<=128?1:2,i>t)return[i,s]}return[i,n]}},mounted:function(){let e=this;setTimeout((()=>{e.load_RealPreview=!0}),1e3)},components:{Qrcode:s.Z,RealPreview:n.Z}},k=w,T=i(89);const x=(0,T.Z)(k,[["render",_],["__scopeId","data-v-14b20c98"]]);var S=x},7382:function(e,t,i){"use strict";i.d(t,{Z:function(){return W}});var n=i(2229),s=(i(8228),i(9545)),r=(i(51),i(3649)),o=(i(4165),i(3042)),a=(i(5708),i(311)),l=i.p+"img/share_indicator.8494ccb2.png";const u=e=>((0,a.pushScopeId)("data-v-db247ada"),e=e(),(0,a.popScopeId)(),e),c={style:{height:"100%"}},d=u((()=>(0,a.createElementVNode)("img",{src:l,style:{"margin-top":"30px","margin-right":"20px","object-fit":"scale-down"}},null,-1))),h={style:{height:"100%",display:"flex","flex-direction":"column","justify-content":"space-between","align-items":"center"}},p={style:{width:"90%"}},m={style:{"font-size":"large","font-weight":"900","margin-top":"var(--van-popup-close-icon-margin)","text-align":"left"}},g={style:{display:"flex","justify-content":"flex-start",width:"96%"}},_={style:{color:"#7D3AED",padding:"0 4px"}},f={style:{color:"#969799","font-size":"12px","margin-bottom":"18px"}},y={style:{display:"flex","flex-direction":"row","justify-content":"space-around","align-items":"center","margin-bottom":"12px"}},v={key:0,style:{width:"20px",height:"4px",background:"#7C3AED","border-radius":"4px"}},b={key:0,style:{width:"20px",height:"4px",background:"#7C3AED","border-radius":"4px"}},w={key:0,style:{width:"20px",height:"4px",background:"#7C3AED","border-radius":"4px"}},k={style:{"flex-grow":"2",overflow:"auto",width:"100%"}},T={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center","min-height":"280px"}},x=["src"],S={style:{width:"100%","overflow-y":"hidden",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",overflow:"hidden"}},E={class:"flexC flexD",style:{"margin-top":"61px"}},A=["src"],C={class:"bold"},I={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",color:"#969799"}},P=["src"],N={style:{"margin-top":"10px"}},D={style:{width:"90%",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}};function L(e,t,i,l,u,L){const O=o.G,B=r.J,U=s.z,V=n.g;return(0,a.openBlock)(),(0,a.createBlock)(O,{show:e.is_popup_share,"onUpdate:show":t[8]||(t[8]=t=>e.is_popup_share=t),closeable:"",style:(0,a.normalizeStyle)([{border:"0","border-radius":"4px"},{width:e.sharePopupWidth+"px",height:e.sharePopupHeight+"px"}])},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",c,[(0,a.createVNode)(O,{show:e.show_share_in_weixin,"onUpdate:show":t[0]||(t[0]=t=>e.show_share_in_weixin=t),style:{width:"100%","text-align":"end"}},{default:(0,a.withCtx)((()=>[d])),_:1},8,["show"]),(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("div",m,(0,a.toDisplayString)(e.translate("vue_link")),1),(0,a.createElementVNode)("div",{style:(0,a.normalizeStyle)([{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center","border-radius":"4px",border:"#EBEDF0 1px solid","margin-top":"8px","padding-left":"8px","padding-right":"8px","padding-top":"4px","padding-bottom":"4px"},e.isNeedChangeUnid?"border-radius: 4px 4px 0px 0px;":""])},[(0,a.createElementVNode)("span",{onClick:t[1]||(t[1]=(...t)=>e.copyLink3&&e.copyLink3(...t)),style:{cursor:"pointer"}},[(0,a.createVNode)(B,{name:"link-o"}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.link3PreviewPageUrl("remove_http_prefix"))+"/"+(0,a.toDisplayString)(e.user.username),1)]),(0,a.createVNode)(U,{plain:"",type:"primary",style:{"flex-shrink":"0",border:"0",height:"32px","line-height":"32px",color:"white","background-color":"#7C3AED"},onClick:e.copyLink3},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("vue_copy")),1)])),_:1},8,["onClick"])],4),e.isNeedChangeUnid?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,onClick:t[2]||(t[2]=(...t)=>e.renameUsername&&e.renameUsername(...t)),class:"pointer",style:{display:"flex","justify-content":"flex-start","align-items":"center","padding-left":"12px",height:"32px","font-size":"12px",color:"#333333","border-radius":"0px 0px 4px 4px",border:"1px solid #FFAA00",background:"#FFF7DD","margin-bottom":"4px"}},[(0,a.createElementVNode)("div",g,[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("vue_unid_change_info"))+" ",1),(0,a.createElementVNode)("span",_,(0,a.toDisplayString)(e.translate("vue_unid_change_info1")),1),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.translate("vue_unid_change_info2")),1)]),(0,a.createVNode)(B,{name:"arrow",style:{display:"flex","justify-content":"flex-end",width:"5px",height:"11px",color:"#040000"}})])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",f,(0,a.toDisplayString)(e.translate("vue_tips")),1),(0,a.createElementVNode)("div",y,[(0,a.createElementVNode)("div",{onClick:t[3]||(t[3]=t=>e.switchTab("qrcode")),style:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center",cursor:"pointer"}},[(0,a.createElementVNode)("div",{style:(0,a.normalizeStyle)({fontWeight:"qrcode"==e.share_tab?"900":"200"})},(0,a.toDisplayString)(e.translate("vue_qrcode")),5),"qrcode"==e.share_tab?((0,a.openBlock)(),(0,a.createElementBlock)("div",v)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",{onClick:t[4]||(t[4]=t=>e.switchTab("business_card")),style:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center",cursor:"pointer"}},[(0,a.createElementVNode)("div",{style:(0,a.normalizeStyle)({fontWeight:"business_card"==e.share_tab?"900":"200"})},(0,a.toDisplayString)(e.translate("vue_business_card")),5),"business_card"==e.share_tab?((0,a.openBlock)(),(0,a.createElementBlock)("div",b)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",{onClick:t[5]||(t[5]=t=>e.switchTab("image")),style:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center",cursor:"pointer"}},[(0,a.createElementVNode)("div",{style:(0,a.normalizeStyle)({fontWeight:"image"==e.share_tab?"900":"200"})},(0,a.toDisplayString)(e.translate("vue_share")),5),"image"==e.share_tab?((0,a.openBlock)(),(0,a.createElementBlock)("div",w)):(0,a.createCommentVNode)("",!0)])])]),(0,a.createElementVNode)("div",k,[(0,a.withDirectives)((0,a.createElementVNode)("div",T,[e.preview_image_src?((0,a.openBlock)(),(0,a.createElementBlock)("img",{key:0,style:{width:"70%",border:"1px solid #f6f2f2","object-fit":"cover"},src:e.preview_image_src,alt:""},null,8,x)):((0,a.openBlock)(),(0,a.createBlock)(V,{key:1,vertical:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("vue_photo_load")),1)])),_:1}))],512),[[a.vShow,"image"==e.share_tab]]),(0,a.withDirectives)((0,a.createElementVNode)("div",S,[(0,a.createElementVNode)("div",E,[e.card_images[""+e.cur_card_index]?((0,a.openBlock)(),(0,a.createElementBlock)("img",{key:0,style:{width:"90%"},src:e.card_images[""+e.cur_card_index],alt:""},null,8,A)):((0,a.openBlock)(),(0,a.createBlock)(V,{key:1,style:{"margin-top":"60px"},vertical:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("vue_card_load")),1)])),_:1})),e.card_images[""+e.cur_card_index]?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:2,style:{width:"100px",height:"40px","border-radius":"2px","margin-top":"30px",border:"0","background-color":"#fff","font-size":"14px"},onClick:t[6]||(t[6]=(...t)=>e.changeCard&&e.changeCard(...t)),class:"flexC changeBtn pointer"},[(0,a.createElementVNode)("span",C,(0,a.toDisplayString)(e.translate("vue_business_card_change")),1)])):(0,a.createCommentVNode)("",!0)])],512),[[a.vShow,"business_card"==e.share_tab]]),(0,a.withDirectives)((0,a.createElementVNode)("div",I,[e.qrcode_src?((0,a.openBlock)(),(0,a.createElementBlock)("img",{key:0,style:{"margin-top":"10px",width:"260px",border:"1px solid #f6f2f2","object-fit":"scale-down"},src:e.qrcode_src,alt:""},null,8,P)):((0,a.openBlock)(),(0,a.createBlock)(V,{key:1,vertical:"",style:{"margin-top":"10px",width:"260px",height:"260px",border:"1px solid #f6f2f2",display:"flex","justify-content":"center"}},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("vue_qrcode_load")),1)])),_:1})),(0,a.createElementVNode)("div",{style:{"margin-top":"20px"},onClick:t[7]||(t[7]=(...t)=>e.copyLink3&&e.copyLink3(...t))},(0,a.toDisplayString)(e.link3PreviewPageUrl(""))+"/"+(0,a.toDisplayString)(e.user.username),1),(0,a.createElementVNode)("div",N,(0,a.toDisplayString)(e.translate("vue_share_long")),1)],512),[[a.vShow,"qrcode"==e.share_tab]])]),(0,a.createElementVNode)("div",D,[(0,a.createVNode)(U,{plain:"",type:"success",onClick:e.downloadImage,style:(0,a.normalizeStyle)([{color:"white",width:"100%",height:"42px","line-height":"42px","font-size":"14px","font-weight":"600",background:"#7C3AED","border-radius":"7px 7px 7px 7px","margin-top":"10px"},{background:e.current_image_url?"#7C3AED":"#969799",border:e.current_image_url?"1px solid #7C3AED":"1px solid #969799"}])},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("vue_save_photo")),1)])),_:1},8,["onClick","style"]),(0,a.createVNode)(U,{plain:"",type:"success",onClick:e.otherShare,style:{color:"#5e5e5e",width:"100%",height:"42px","line-height":"42px","font-size":"14px","font-weight":"400",background:"white","border-radius":"7px 7px 7px 7px","margin-top":"10px","margin-bottom":"12px","--van-button-border-width":"1px","--van-button-border-radius":"7px","border-color":"#EBEDF0"}},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("vue_share_other")),1)])),_:1},8,["onClick"])])])])])),_:1},8,["show","style"])}var O=i(6294),B=i(8871),U=i(9592),V=i(7999),R=i(8322),j=i(568),M=i(5820),F={props:{},data:function(){return{maxWidth:.86*window.innerWidth>400?400:.86*window.innerWidth,sharePopupWidth:.86*window.innerWidth>414?414:.86*window.innerWidth,sharePopupHeight:.9*window.innerHeight>800?800:.9*window.innerHeight,share_tab:"qrcode",show_share_in_weixin:!1,preview_image_src:"",qrcode_src:"",md5OfUser:"",md5OfQrcode:"",md5OfCard:"",preview_language:{"zh-HK":{js_copyed_long:"鏈接已復制，\n可直接去粘貼",js_copyed_normal:"已復制",js_copy:"複製",js_copy_fail:"複製失敗",js_copy_fail_long:"複製失敗，請去手動輸：",js_press_photo:"請長按下面圖片，\n再選擇'保存圖片'",js_press_qrcode:"請長按下面二維碼，\n再選擇'保存圖片'",js_link:"的Link3專屬鏈接: ",js_homepage:"的Link3鏈接主頁",vue_link:"分享我的專屬Link3鏈接",vue_copy:"複製",vue_tips:"Tips: 可粘貼在微博置頂、社交平台個人主頁等地方哦",vue_qrcode:"永久二維碼",vue_business_card:"分享卡片",vue_business_card_change:"換個樣式",vue_share:"圖片分享",vue_photo_load:"圖片生成中...",vue_card_load:"卡片生成中...",vue_qrcode_load:"二維碼生成中...",vue_share_long:"您的專屬二維碼，方便分享你的好友哦",vue_save_photo:"保存圖片",vue_share_other:"分享到其他平台",vue_unid_change_info:"尚未設置",vue_unid_change_info1:"永久鏈接",vue_unid_change_info2:"，請盡快設置"},"zh-CN":{js_copyed_long:"链接已复制，\n可直接去粘贴",js_copyed_normal:"已复制",js_copy:"复制",js_copy_fail:"复制失败",js_copy_fail_long:"复制失败，请去手动输：",js_press_photo:"请长按下面图片，\n再选择'保存图片'",js_press_qrcode:"请长按下面二维码，\n再选择'保存图片'",js_link:"的Link3专属链接: ",js_homepage:"的Link3链接主页",vue_link:"分享我的专属Link3链接",vue_copy:"复制",vue_tips:"Tips: 可粘贴在微博置顶、社交平台个人主页等地方哦",vue_qrcode:"永久二维码",vue_business_card:"分享卡片",vue_business_card_change:"换个样式",vue_share:"图片分享",vue_photo_load:"图片生成中...",vue_card_load:"卡片生成中...",vue_qrcode_load:"二维码生成中...",vue_share_long:"您的专属二维码，方便分享你的好友哦",vue_save_photo:"保存图片",vue_share_other:"分享到其他平台",vue_unid_change_info:"尚未设置",vue_unid_change_info1:"永久链接",vue_unid_change_info2:"，请尽快设置"},en:{js_copyed_long:"Copyed",js_copyed_normal:"Copyed",js_copy:"Copy",js_copy_fail:"Failed",js_copy_fail_long:"Copy failed, please input yourself:",js_press_photo:"Long press the image, then click 'save image'",js_press_qrcode:"Long press the qrcode, then click 'save image'",js_link:"'s Link3: ",js_homepage:"Link3 copyed, paste it to anywhere",vue_link:"Share My Link3",vue_copy:"Copy",vue_tips:"Tips: share your link3 to everywhere",vue_qrcode:"Qrcode",vue_business_card:"Card",vue_business_card_change:"Change style",vue_share:"Share Image",vue_photo_load:"Loading...",vue_card_load:"Loading...",vue_qrcode_load:"Loading...",vue_share_long:"Qrcode only for you, share to your friends",vue_save_photo:"Save Image",vue_share_other:"Share Others...",vue_unid_change_info:"Your  ",vue_unid_change_info1:"Permalink",vue_unid_change_info2:" not yet set, please set it up soon."}},card_images:{},cur_card_index:0}},computed:{...(0,O.mapState)({user:e=>e.user.user,share_popup:e=>e.page.share_popup}),is_popup_share:{get(){return this.share_popup.show},set(e){this.updateSharePopupState({show:e})}},my_link3(){return(0,U.UZ)(this.user.unid)},my_link3_username(){return(0,U.UZ)(this.user.username)},present_language(){return this.share_popup.lang||"zh-CN"},getRemoteImage(){return(0,j.sQ)(this.user.profile_image)},qiniuUrlComputed:function(){return R.v.qiniuUrl},current_image_url:function(){let e=this.preview_image_src;return"image"==this.share_tab&&(e=this.preview_image_src),"qrcode"==this.share_tab&&(e=this.qrcode_src),"business_card"==this.share_tab&&(e=this.card_images[this.cur_card_index]),e},isNeedChangeUnid(){return!!(this.user&&this.user.username&&this.user.username.startsWith("link3_"))},link3PreviewPageUrl(){return function(e){let t=R.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}}},methods:{...(0,O.mapMutations)({updateSharePopupState:"page/updateSharePopupState",updateAuthState:"user/updateAuthState"}),translate:function(e){return this.preview_language[this.present_language][e]},copyLink3:(0,U.Ds)((async function(){let e=this;(0,V.Z)(this.my_link3_username)?(B.Toast.success(e.translate("js_copyed_long")),e.copy_name=e.translate("js_copyed_normal"),setTimeout((()=>{e.copy_name=e.translate("js_copy")}),2e3)):B.Toast.fail(e.translate("js_copy_fail_long"))}),300),switchTab:function(e){let t=this,i=(0,U.FB)(JSON.stringify(t.user));switch(e){case"image":this.share_tab="image",t.md5OfUser&&t.md5OfUser==i||(0,M.L)("id_preview_image").then((function(e){t.md5OfUser=i,t.preview_image_src=e})).catch((e=>{console.log("html2image err image--",e)}));break;case"business_card":this.share_tab="business_card",this.cardToImage(this.cur_card_index);break;case"qrcode":this.share_tab="qrcode";break;default:break}},downloadImage:async function(){if(/MicroMessenger/i.test(navigator.userAgent))"qrcode"==this.share_tab?(0,B.Toast)({message:this.translate("js_press_qrcode"),icon:"warn-o"}):(0,B.Toast)({message:this.translate("js_press_photo"),icon:"warn-o"});else{if(!this.current_image_url)return;(0,U.V$)(this.current_image_url,"link3.cc_"+this.user.username+".png")}},changeCard(){this.cur_card_index++,this.cur_card_index>=9&&(this.cur_card_index=0),this.cardToImage(this.cur_card_index)},cardToImage(e){let t=this,i=(0,U.FB)(this.user.profile_image+this.user.bio+this.user.profile_title+this.user.username);(!this.md5OfCard||this.md5OfCard!=i||t.card_images&&!t.card_images[""+e])&&(0,M.L)("id_card_"+e).then((function(n){t.md5OfCard=i,t.card_images[""+e]=n})).catch((e=>{console.log("html2image err",e)}))},otherShare:async function(){/MicroMessenger/i.test(navigator.userAgent)?(this.show_share_in_weixin=!0,(0,V.Z)(this.user.profile_title+this.translate("js_link")+this.my_link3_username)&&B.Toast.success(this.translate("js_copyed_long"))):navigator.share?await navigator.share({title:(this.user.profile_title?this.user.profile_title:this.user.username)+this.translate("js_homepage"),text:R.v.link3PreviewPageUrl+"/"+this.user.username+" "+(this.user.bio?this.user.bio:""),url:R.v.link3PreviewPageUrl+"/"+this.user.username}):(0,V.Z)(this.user.profile_title+this.translate("js_link")+this.my_link3_username)?B.Toast.success(this.translate("js_copyed_long")):B.Toast.fail(this.translate("js_copy_fail"))},renameUsername:function(){this.updateAuthState({is_logined:!0,show_username:!0,show_password:!1,show_phone:!1,show_msgcode:!1,back_to_account:this.cur_tab,submit_button_action:"rename_username"}),this.$router.push({name:"auth"})}},components:{},created(){},mounted:async function(){},watch:{"share_popup.show":{handler:function(e){let t=this;1==e&&setTimeout((async()=>{let e=(0,U.FB)(this.user.profile_image);t.md5OfQrcode&&t.md5OfQrcode==e||(0,M.L)("id_qrcode_my_link3").then((function(i){t.md5OfQrcode=e,t.qrcode_src=i})).catch((e=>{console.log("html2image err-show-",e)}))}),500)}}}},q=F,z=i(89);const H=(0,z.Z)(q,[["render",L],["__scopeId","data-v-db247ada"]]);var W=H},9792:function(e,t,i){"use strict";i.d(t,{Z:function(){return UT}});var n=i(6106),s=i(4334),r=i(3),o=(i(6145),i(3042)),a=(i(5708),i(507)),l=i(9859),u=i(311);const c=["src"];function d(e,t,i,n,s,r){return(0,u.openBlock)(),(0,u.createElementBlock)("div",{class:"pointer",style:{width:"100%"},onClick:t[0]||(t[0]=(...t)=>e.clickAd&&e.clickAd(...t))},[(0,u.createElementVNode)("img",{src:e.ad_image_url,alt:"",style:{width:"100%"}},null,8,c)])}var h=i(9841),p=i(8322),m={props:{from:String,isVip:Boolean},data:function(){return{ads:[],ad_index:-1,click_to_url:null,ad_image_url:null,statistics_event_name:null}},computed:{},methods:{clickAd(){switch(this.from){case"preview_bottom":try{window&&window.LA&&this.statistics_event_name&&window.LA.track(this.statistics_event_name)}catch(e){console.log(e)}this.click_to_url&&window.open(this.click_to_url);break;default:break}},getAdIndexByWeight(){if(1==this.isVip)return-1;if(!this.ads||this.ads.length<=0)return-1;let e=0;for(let n=0;n<this.ads.length;n++)try{e+=parseInt(this.ads[n].weight)}catch(i){console.log(i)}if(console.log("sum",e),e>60)return-1;let t=Math.floor(100*Math.random()+1);console.log("random",t),e=0;for(let n=0;n<this.ads.length;n++){let s=0;try{s=parseInt(this.ads[n].weight)}catch(i){console.log(i)}if(s&&s>0&&s<=100){if(e<t&&t<=e+s)return n;e+=s}}return-1},getAdsFromServer:async function(){try{let e=await(0,h.Sk)(1,100);return e&&"0001"==e.code&&e.data?(e.data.data&&(this.ads=e.data.data,this.ads.forEach((e=>{e.ad_image_urls&&(e.ad_image_urls=JSON.parse(e.ad_image_urls)),e.extension&&(e.extension=JSON.parse(e.extension))})),console.log("ads: ",this.ads)),e.data):(console.log("获取ads失败"),!1)}catch(e){return console.log("获取ads失败",e),!1}}},watch:{ads:{handler:function(e,t){if(this.ad_index=this.getAdIndexByWeight(),!this.ads||this.ads.length<=0||this.ad_index<0||this.ad_index>this.ads.length-1)return this.click_to_url=null,void(this.ad_image_url=null);let i=this.ads[this.ad_index];if(this.click_to_url=i.click_to_url,this.statistics_event_name=i.statistics_event_name,i.ad_image_urls&&i.ad_image_urls.length>=0){let e=Math.floor(Math.random()*i.ad_image_urls.length);this.ad_image_url=p.v.qiniuUrl+i.ad_image_urls[e]}try{window&&window.LA&&this.statistics_event_name&&window.LA.track(this.statistics_event_name+"_display")}catch(n){console.log(n)}console.log("click_to_url",this.click_to_url),console.log("ad_image_url",this.ad_image_url),console.log("statistics_event_name",this.statistics_event_name),console.log("statistics_event_name_display",this.statistics_event_name+"_display")},immediate:!1}},async mounted(){await this.getAdsFromServer()},updated:function(){},components:{}},g=m,_=i(89);const f=(0,_.Z)(g,[["render",d],["__scopeId","data-v-16c656c0"]]);var y=f,v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAQKADAAQAAAABAAAAQAAAAABGUUKwAAAF10lEQVR4Ae1bTWgUSRjt7hnUkHRYwaw3BUEDZm+6IARzEHc9CCI5iSfJQsCL6EEC7n3B3UOWXJYVVjzlKCJ7WHARiQQE9SJJJHrSm8mCkkmIhsxk32urm+6Z/qmqrpoZHAtqarq66qvvvfqqvurqatexHGq12hCaGEMcQRze2dk5gnQfou+6ro/UQV4NCeN/yHuFdBlxEXHO9/1VpNaCa0PyxsbGsXq9fhFgfoD87wBQqx3U30H9BdR/UKlUZvv7+5+b1ldLsTQloKQP4JNIJxCPppUpmwdClhBvg4hbSGkxpUNpAgD2m/X19atIr0CbvaU1khPwHgTMDAwM/I70g1yV9FLaBACwix6/hPQmIsd52wPAryJOwSLuIOVwUQ5aBGxubh7Y3t6eBfBR5RYtVAD4+Wq1erGvr++tqnhlAtbW1kbR4F2A/1a1MZvlodMKdBofHBycV2nHUykMk59AQw+7DTwxUCfqRh1VMElZAIRX4M9/g+BrKsI7WHYa64frIKRepEMhAQL8XQg6VyRM9f7q688GOHS4oVpVpvx9kDBeRELhEBA9bwX8vandDmNIhAwqhTLnhO65VXItgOMJK7q/ciVo3CRgAv8oljJ7sCA+f/OTY8MSsIL8CW7ydpaamQSI2Z4T3q6syjr5zeBDGbZIwBDYAoZTWd4hlQDh55+iolFXlwW+DSSsYJ3wfdo6oWUOAGhXLHLaCp4kcEjYmBPYkQJTS4e3ECCWt0ZXeEU9H1qAZRJGiS3eFv8nGAFTfLB5hdTY2l4FfFw5G3MC5oNVPEAdQRo9QCUsQDzVdRw8ibAxHNixxBgnOrIA3PThN9/gppFHWt2ejyvH/xYs4T0WSAdhBYETjiwA42Oy28CTAAuWsFdgpXgnIgAWMBHklPwx1fNxNUyTEMcaEABGjiGz9DaWDfAhESZJIFZipuyAAG5ghg3ppjrgbzypOoyywSQJIeaAAEwI3L3VDjrgdRszRUKI2cXMT7f3DmYReQQV5fLAq/Ruc5tL/zacf35tOB/Xmu98vi7rHUAA9xD30wLGbIBPV1s+9+hpz5mcrTiHTqT3S1lLEJjHSADf2CiHvJ5XFpZRobrbcQb4DikjlCUBYkdIwHCG/MzsdoBfftRw/rxQd178nb/bXZKEYRfP/U+B9Hgm2qYbJsGHc8QvJ7abWlG/1JwTntECcowsqYhJ8EnJ5a80LWEfCQje0Bap0M3gQ901SPDpBj9hRszd9ioDnqZ55rrnjPxIrvWC6hCRHQ5whVvyyzAN3enCzv7sOf5QuivTEGm8iofeF3uz2bK5W8tdWzKrEujC6MraGWR7nzoRO+2ykAAW1iGBLuwWXNnLh1ZefFCtRFABLyrWvrpBTAQ8kyMddCxBWrhmQY2eD1oidg4BHkhSCt1Egi54AXiZBCwqoReFu4GEkuCJZJEEzIlHQwFNPukkCWXBC8xznjiHtyAPO1myEySUBS8QLBA7LYD+8EESltpVO0kwBD7CHCzRuEGIPbJnarBbS5dZMrdKa80xBZ6S8dr8OA9eRmtUPBMswhK6dmfYJHiM/yWYf7ARFAwBMoLMzEMEvC8bbAwHk+CJI441sgD0fm+/GgMrNcQZ2Z4uKmfCEkz3vOj9GWIN9Y8sgBmwgt5+PQ5mPiBOheyYSHUswUbPEwuxEWMcV8ICeANW4OId+mOkHTklYhH8PA5HnAQBiW3myAuErLAADx4jXQnzTKQylmARPA9JEVMCPHG1EMBMnqaCBfCU5RavTYU8EiyC5zG58bQTYsSVSgBv8Fyd53mX+d9kSCPBFnjqTQxZZwSD+3ngxAnL6bwyOvfiJNgED92m806JUveWSbAZEMyHJ8W/2MPShQSQEEFCbx6Xj1sEnhonGo3GHyAk90VKvE47/3PS5pgvMvu4TlIWEK/wpX0yo0wAyejpj6ZCa8Aw6N3P5kISmIKI3vxwMk6CIKI3P51tJoLXYo+xtz6eTiOCeeIY3hj+cg+u6z6f/x8Rlp9sWT3ZuQAAAABJRU5ErkJggg==";const b=e=>((0,u.pushScopeId)("data-v-7b0a5e72"),e=e(),(0,u.popScopeId)(),e),w=["id"],k={style:{width:"80%",height:"54px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"baseline"}},T={style:{"font-size":"14px",color:"#020202","font-weight":"500"}},x={style:{color:"#020202","padding-top":"2px","font-size":"12px"}},S=b((()=>(0,u.createElementVNode)("div",{class:"flexD flexC",style:{"margin-left":"2px",width:"44px",height:"44px","border-radius":"100%"}},[(0,u.createElementVNode)("img",{src:v,style:{width:"32px",height:"32px",margin:"0 4px 2px"},alt:"",srcset:""})],-1)));function E(e,t,i,n,s,r){return(0,u.openBlock)(),(0,u.createElementBlock)("div",{style:(0,u.normalizeStyle)([{position:"relative",overflow:"hidden","margin-top":"20px"},{"border-radius":e.style_border}])},[(0,u.createElementVNode)("div",{style:{width:"100%",height:"0px","padding-bottom":"60%"},id:e.mapId},null,8,w),(0,u.withDirectives)((0,u.createElementVNode)("div",{onClick:t[0]||(t[0]=(...t)=>e.goToLocation&&e.goToLocation(...t)),style:{padding:"0 6px 0 14px",display:"flex","justify-content":"space-between","align-items":"center","background-color":"#fff"}},[(0,u.createElementVNode)("div",k,[(0,u.createElementVNode)("span",T,(0,u.toDisplayString)(this.nameslice(this.item.typeValue.title,24)),1),(0,u.createElementVNode)("span",x,(0,u.toDisplayString)(this.nameslice(this.item.typeValue.address,24)),1)]),S],512),[[u.vShow,this.item.typeValue.title]])],4)}var A=i(9592),C=i(6294),I=i(3433),P={data(){return{encrypted_toggle_show:!1,check_encryption:!1,clickInfoCache:{},check_pay_status:!1,pay_toggle_show:!1,mapId:"BMap_"+parseInt(Math.floor(Date.now())+Math.random())+"_"+this.index,init_baidu_map_lng:116.403955,init_baidu_map_lat:39.9151,baidu_map_lng:116.403955,baidu_map_lat:39.9151,baidu_map_address:"",baidu_map_title:"",baidu_map_uid:""}},props:{item:Object,index:Number,user:Object,tracker:Object,style_border:String},computed:{...(0,C.mapState)({user_guest:e=>e.user.user_guest,module_id_reclick:e=>e.page.local_user_data.module_id_reclick,temporary_user:e=>e.user.temporary_user}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},nav_url:function(){return this.type_value.nav_url?this.type_value.nav_url:""},qiniuUrl:function(){return p.v.qiniuUrl},saved_latitude_and_longitude:function(){return!!this.item&&(!!this.item.typeValue&&(!(!this.item.typeValue.latitude||!this.item.typeValue.longitude)&&(!(!this.item.typeValue.latitude||!this.item.typeValue.longitude)&&(this.baidu_map_lng=this.item.typeValue.longitude,this.baidu_map_lat=this.item.typeValue.latitude,this.item.typeValue.title&&this.item.typeValue.title.length>0&&this.item.typeValue.uid&&this.item.typeValue.address&&(this.baidu_map_title=this.item.typeValue.title,this.baidu_map_address=this.item.typeValue.address,this.baidu_map_uid=this.item.typeValue.uid),!0))))}},methods:{...(0,C.mapMutations)({updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState"}),updateAliyun(e){let t={action:e,unid:this.user.unid,system:(0,A.O3)(),client_ip:"",url:location.href,"user-agent":navigator.userAgent,referrer:document.referrer,module_title:this.item.typeValue.title?this.item.typeValue.title:"",module_type:this.item.type,module_unid:this.item.unid?this.item.unid:"0"};const i=this.$route.meta;i.directview&&this.user.unid&&("click"==e?this.tracker.send(t):this.tracker.sendImmediate(t))},initMap(e,t){e&&t||(e=this.init_baidu_map_lng,t=this.init_baidu_map_lat);let i=this;(0,I.nj)(p.v.baidu_ak).then((()=>{var n=new BMap.Map(i.mapId,{enableMapClick:!1}),s=new BMap.Point(e,t);n.centerAndZoom(s,19),n.enableScrollWheelZoom();var r=n.getSize().height-45,o=n.getSize().width-45;function a(){this.defaultAnchor=BMAP_ANCHOR_TOP_LEFT,this.defaultOffset=new BMap.Size(o,r)}a.prototype=new BMap.Control,a.prototype.initialize=function(e){var t=document.createElement("div");return t.style.width="36px",t.style.height="36px",t.style.cursor="pointer",t.style.background="url("+p.v.qiniuUrl+"/social_icons/position_reset@2x.png) center no-repeat",t.style.backgroundSize="20px 20px",t.style.backgroundColor="#fff",t.style.border="1px solid #B7B7B7",i.item.typeValue.address?t.style.borderRadius="4px":t.style.borderRadius=i.style_border,t.onclick=function(t){e.panTo(s)},e.getContainer().appendChild(t),t};var l=new a;n.addControl(l);var u=new BMap.Marker(s);n.addOverlay(u),u.setAnimation(BMAP_ANIMATION_BOUNCE)})).catch((e=>{console.log("地图加载失败")}))},goToLocation(){window.open("https://map.baidu.com/mobile/webapp/place/detail/foo=bar&qt=ninf&wd="+this.item.typeValue.title+"&c=131&searchFlag=sort&center_rank=1&nb_x=12532606.36&nb_y=2638671.13&da_src=unifynearbyclick&uid="+this.item.typeValue.uid+"&industry=&qid=&pos=&da_ref=&da_qrtp=&da_adquery=&da_adtitle="+this.item.typeValue.title+"&da_adindus=&detail_from=list&vt=map")},nameslice(e,t){const i=t||13;return this.getLength(e,i)[1]+1<e.length?e.slice(0,this.getLength(e,i)[1])+"...":e},getLength(e,t){let i=0,n=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);if(n=s,i+=r>=0&&r<=128?1:2,i>t)return[i,s]}return[i,n]}},async created(){},mounted(){let e=this;setTimeout((async function(){e.saved_latitude_and_longitude?e.initMap(e.item.typeValue.longitude,e.item.typeValue.latitude):e.initMap(e.init_baidu_map_lng,e.init_baidu_map_lat)}),500)},watch:{type_value:{handler:function(e,t){e!==t&&this.initMap(this.item.typeValue.longitude,this.item.typeValue.latitude)}},"user.theme":{handler:function(e,t){this.initMap(this.item.typeValue.longitude,this.item.typeValue.latitude)}}},components:{}},N=P;const D=(0,_.Z)(N,[["render",E],["__scopeId","data-v-7b0a5e72"]]);var L=D,O=i(5610),B=i(5280),U=i(3649),V=(i(4165),i(6647));const R=e=>((0,u.pushScopeId)("data-v-e1dc5700"),e=e(),(0,u.popScopeId)(),e),j={style:{position:"relative",overflow:"hidden","margin-top":"20px"}},M={key:0,class:"flexC",style:{width:"100%",height:"150px",background:"white","font-size":"30px",color:"#5e5e5e"}},F={key:1,class:"multiple_image_style_352",style:{display:"flex","text-align":"center","justify-content":"center"}},q={style:{position:"relative",margin:"1px",width:"49%",height:"0","padding-bottom":"49%",overflow:"hidden"}},z=["src"],H={key:2,class:"multiple_image_style_352",style:{display:"flex","text-align":"center","justify-content":"space-between"}},W=["onClick","src"],G={key:3,class:"multiple_image_style_230",style:{display:"flex","text-align":"center","justify-content":"space-between"}},X=["onClick","src"],Q={key:4,class:"multiple_image_style_352",style:{display:"flex","text-align":"center","justify-content":"space-between","flex-wrap":"wrap","align-self":"auto"}},K=["onClick","src"],Z={key:5,class:"multiple_image_style_230",style:{display:"flex","text-align":"center","flex-wrap":"wrap","align-content":"flex-start","justify-content":"space-between"}},Y=["onClick","src"],J={key:6,class:"multiple_image_style_230",style:{display:"flex","text-align":"center","flex-wrap":"wrap","align-content":"flex-start","justify-content":"space-between"}},$=["onClick","src"],ee=R((()=>(0,u.createElementVNode)("div",{style:{width:"33%",height:"0","padding-bottom":"33%",overflow:"hidden",cursor:"auto"}},[(0,u.createElementVNode)("div",{style:{width:"100%","object-fit":"cover",height:"0","padding-bottom":"100%","background-position":"center","background-repeat":"no-repeat"}})],-1))),te={key:7,class:"multiple_image_style_230",style:{display:"flex","text-align":"center","flex-wrap":"wrap","align-content":"flex-start","justify-content":"space-between"}},ie=["onClick","src"],ne=R((()=>(0,u.createElementVNode)("div",{style:{width:"33%",height:"0","padding-bottom":"33%",overflow:"hidden",cursor:"auto"}},[(0,u.createElementVNode)("div",{style:{width:"100%","object-fit":"cover",height:"0","padding-bottom":"100%","background-position":"center","background-repeat":"no-repeat"}})],-1))),se=R((()=>(0,u.createElementVNode)("div",{style:{width:"33%",height:"0","padding-bottom":"33%",overflow:"hidden",cursor:"auto"}},[(0,u.createElementVNode)("div",{style:{width:"100%","object-fit":"cover",height:"0","padding-bottom":"100%","background-position":"center","background-repeat":"no-repeat"}})],-1))),re={key:8,class:"multiple_image_style_230",style:{display:"flex","text-align":"center","flex-wrap":"wrap","align-content":"flex-start"}},oe=["onClick","src"],ae=R((()=>(0,u.createElementVNode)("img",{src:V,style:{height:"70px"},alt:""},null,-1))),le=[ae];function ue(e,t,i,n,s,r){const o=U.J,a=B.Z,l=O.Z;return(0,u.openBlock)(),(0,u.createElementBlock)("div",j,[e.images_list&&0==e.images_list.length?((0,u.openBlock)(),(0,u.createElementBlock)("div",M,[(0,u.createVNode)(o,{name:"photo-o"})])):e.images_list&&1==e.images_list.length?((0,u.openBlock)(),(0,u.createElementBlock)("div",F,[(0,u.createElementVNode)("div",q,[(0,u.createElementVNode)("img",{class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),onClick:t[0]||(t[0]=t=>e.jumpto(e.images_list[0].image_url,0)),style:{width:"100%",height:"100%","object-fit":"cover",position:"absolute",top:"0",left:"0"},src:e.isSafari&&e.encrypt_icon_after?"":e.qiniuUrl+"/"+e.images_list[0].image_url,alt:""},null,10,z)])])):e.images_list&&2==e.images_list.length?((0,u.openBlock)(),(0,u.createElementBlock)("div",H,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.images_list,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:t.unid+2,style:{margin:"1px",width:"49.8%",height:"0","padding-bottom":"49.8%",overflow:"hidden",position:"relative"}},[(0,u.createElementVNode)("img",{class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),onClick:n=>e.jumpto(t.image_url,i),style:{width:"100%",height:"100%","object-fit":"cover",position:"absolute",top:"0",left:"0"},src:e.isSafari&&e.encrypt_icon_after?"":e.qiniuUrl+"/"+t.image_url,alt:""},null,10,W)])))),128))])):e.images_list&&3==e.images_list.length?((0,u.openBlock)(),(0,u.createElementBlock)("div",G,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.images_list,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:t.unid+2,style:{margin:"1px",width:"33%",height:"0","padding-bottom":"33%",overflow:"hidden",position:"relative"}},[(0,u.createElementVNode)("img",{class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),onClick:n=>e.jumpto(t.image_url,i),style:{width:"100%",height:"100%","object-fit":"cover",position:"absolute",top:"0",left:"0"},src:e.isSafari&&e.encrypt_icon_after?"":e.qiniuUrl+"/"+t.image_url,alt:""},null,10,X)])))),128))])):e.images_list&&4==e.images_list.length?((0,u.openBlock)(),(0,u.createElementBlock)("div",Q,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.images_list,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:t.unid+2,style:{width:"49.8%",height:"0","padding-bottom":"49.8%",overflow:"hidden",position:"relative"}},[(0,u.createElementVNode)("img",{class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),onClick:n=>e.jumpto(t.image_url,i),style:{width:"100%",height:"100%","object-fit":"cover",position:"absolute",top:"0",left:"0"},src:e.isSafari&&e.encrypt_icon_after?"":e.qiniuUrl+"/"+t.image_url,alt:""},null,10,K)])))),128))])):e.images_list&&6==e.images_list.length||e.images_list&&9==e.images_list.length?((0,u.openBlock)(),(0,u.createElementBlock)("div",Z,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.images_list,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:t.unid+2,style:{width:"33%",height:"0","padding-bottom":"33%",overflow:"hidden",position:"relative"}},[(0,u.createElementVNode)("img",{class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),onClick:n=>e.jumpto(t.image_url,i),style:{width:"100%",height:"100%","object-fit":"cover",position:"absolute",top:"0",left:"0"},src:e.isSafari&&e.encrypt_icon_after?"":e.qiniuUrl+"/"+t.image_url,alt:""},null,10,Y)])))),128))])):e.images_list&&5==e.images_list.length||e.images_list&&8==e.images_list.length?((0,u.openBlock)(),(0,u.createElementBlock)("div",J,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.images_list,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:t.unid+2,style:{width:"33%",height:"0","padding-bottom":"33%",overflow:"hidden",position:"relative"}},[(0,u.createElementVNode)("img",{class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),onClick:n=>e.jumpto(t.image_url,i),style:{width:"100%",height:"100%","object-fit":"cover",position:"absolute",top:"0",left:"0"},src:e.isSafari&&e.encrypt_icon_after?"":e.qiniuUrl+"/"+t.image_url,alt:""},null,10,$)])))),128)),ee])):e.images_list&&7==e.images_list.length?((0,u.openBlock)(),(0,u.createElementBlock)("div",te,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.images_list,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:t.unid+2,style:{width:"33%",height:"0","padding-bottom":"33%",overflow:"hidden",position:"relative"}},[(0,u.createElementVNode)("img",{class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),onClick:n=>e.jumpto(t.image_url,i),style:{width:"100%",height:"100%","object-fit":"cover",position:"absolute",top:"0",left:"0"},src:e.isSafari&&e.encrypt_icon_after?"":e.qiniuUrl+"/"+t.image_url,alt:""},null,10,ie)])))),128)),ne,se])):((0,u.openBlock)(),(0,u.createElementBlock)("div",re,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.images_list,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:t.unid+2,style:{margin:"1px",width:"33%",height:"0","padding-bottom":"33%",overflow:"hidden",position:"relative"}},[(0,u.createElementVNode)("img",{class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),onClick:n=>e.jumpto(t.image_url,i),style:{width:"100%",height:"100%","object-fit":"cover",position:"absolute",top:"0",left:"0"},src:e.isSafari&&e.encrypt_icon_after?"":e.qiniuUrl+"/"+t.image_url,alt:""},null,10,oe)])))),128))])),(0,u.withDirectives)((0,u.createElementVNode)("div",{onClick:t[1]||(t[1]=t=>e.jumpto(e.images_list&&e.images_list.length>0?e.images_list[0].image_url:"",0)),class:"pointer flexC",style:(0,u.normalizeStyle)([{"z-index":"1",position:"absolute",top:"0",left:"0",height:"100%",width:"100%"},e.encrypt_icon_after&&e.images_list&&0==e.images_list.length?"backdrop-filter:blur(40px)":""])},le,4),[[u.vShow,e.encrypt_icon_after]]),e.encrypted_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(a,{key:9,onEncryptedToggleShowEmit:e.encryptionToggleShow,encrypted_toggle_show:e.encrypted_toggle_show,onConfirm:e.verifyPasswordSuccess,item:e.item,index:e.index,user:e.user},null,8,["onEncryptedToggleShowEmit","encrypted_toggle_show","onConfirm","item","index","user"])):(0,u.createCommentVNode)("",!0),e.pay_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(l,{key:10,onPayToggleShowEmit:e.payToggleShow,pay_toggle_show:e.pay_toggle_show,item:e.item,index:e.index,user:e.user},null,8,["onPayToggleShowEmit","pay_toggle_show","item","index","user"])):(0,u.createCommentVNode)("",!0)])}var ce=i(8871),de=i(7594),he=i(4189),pe={data(){return{encrypted_toggle_show:!1,check_encryption:!1,clickInfoCache:{},check_pay_status:!1,pay_toggle_show:!1}},props:{item:Object,index:Number,user:Object,tracker:Object},computed:{...(0,C.mapState)({user_guest:e=>e.user.user_guest,module_id_reclick:e=>e.page.local_user_data.module_id_reclick,temporary_user:e=>e.user.temporary_user,page:e=>e.page.page,user_guest_orders:e=>e.user.user_guest.link3_orders}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},nav_url:function(){return this.type_value.nav_url?this.type_value.nav_url:""},qiniuUrl:function(){return p.v.qiniuUrl},encrypt_icon_after(){return!!this.encrypt_icon&&(!(!(!this.payment_amount||this.encrypted_browsing_password||de.Z.getToken()&&"undefined"!=de.Z.getToken())&&this.checkLink3OrdersStatus(this.item))&&!this.check_encryption)},encrypt_icon:function(){return this.item&&this.item.typeValue?!(!this.item.typeValue.encrypted_browsing_password&&!this.item.typeValue.payment_amount):{}},encrypted_browsing_password:function(){return!!this.type_value.encrypted_browsing_password},payment_amount:function(){return!!this.type_value.payment_amount},images_list:function(){return this.item&&this.item.typeValue&&this.item.typeValue.images?this.item.typeValue.images:[]},multiple_images_style:function(){let e={};return this.images_list&&1==this.images_list.length&&(e.maxHeight="187px"),this.images_list&&2==this.images_list.length&&(e.maxHeight="117px"),this.images_list&&this.images_list.length>=3&&(e.maxHeight="111px"),e},isSafari:function(){return!!((0,A.Jv)().Safari||(0,A.Jv)().iPhone||this.page.has_baidu)}},methods:{...(0,C.mapMutations)({updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState",updateUserGuestOrders:"user/updateUserGuestOrders"}),verifyPasswordSuccess(){this.check_encryption=!0,this.jumpto()},encryptionToggleShow(e){this.encrypted_toggle_show=e},checkLink3OrdersStatus(e){if(this.user_guest&&this.user_guest_orders){let t=this.user_guest_orders;return!(!t||!Array.isArray(t))&&(!!t.find((t=>t.module_id==e.unid&&t.price>0))||(this.user_guest.unid,this.user.unid,!1))}return!1},checkTemporaryUserLink3OrdersStatus(e){if(this.temporary_user&&""!==this.temporary_user.unid&&this.temporary_user.vip){let t=this.temporary_user.vip;return!(!t.link3_orders||!Array.isArray(t.link3_orders))&&(!!t.link3_orders.find((t=>t.module_id==e.unid&&t.price>0))||(this.temporary_user.unid,this.user.unid,!1))}return!1},payToggleShow(e){this.pay_toggle_show=e},openBuy(e){this.updateLocalUserDataState({show_buy_popup_link3:!1,show_buy_qrcode_link3:!1,show_donate_popup_link3:!1}),this.updateLocalUserDataState({show_buy_popup_link3:!0,buy_popup_goods_index_link3:e})},async jumpto(e,t){if((0,A.Jv)().miniprogram){if(this.payment_amount||this.encrypted_browsing_password)return void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.user.username?p.v.link3PreviewPageUrl+"/"+this.user.username:""});if(this.nav_url){if(!(0,A.sg)(this.nav_url))return;return this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.user.username?p.v.link3PreviewPageUrl+"/"+this.user.username:""})}}try{if(this.payment_amount&&!this.encrypted_browsing_password){if(!de.Z.getToken()||"undefined"==de.Z.getToken()||""===this.user_guest.unid)return this.payToggleShow(!0),void this.openBuy(this.item.unid);{if(!this.checkLink3OrdersStatus(this.item)&&(this.payToggleShow(!0),this.openBuy(this.item.unid),!this.check_pay_status))return;let e=await he.bG();if(!e)return!1;"0001"==e.code&&this.updateUserGuestState(e.data)}}if(this.check_pay_status=!1,this.encrypted_browsing_password&&!this.check_encryption)return void this.encryptionToggleShow(!0)}catch(i){console.log(i)}this.updateAliyun("click"),e?(0,ce.ImagePreview)({images:[this.qiniuUrl+"/"+e],startPosition:0,closeable:!0,showIndex:!1,teleport:"#app"}):("undefined"==typeof e||"string"==typeof e)&&this.images_list&&this.images_list.length>0&&(0,ce.ImagePreview)({images:[this.qiniuUrl+"/"+this.images_list[0].image_url],startPosition:0,closeable:!0,showIndex:!1,teleport:"#app"})},updateAliyun(e){let t={action:e,unid:this.user.unid,system:(0,A.O3)(),client_ip:"",url:location.href,"user-agent":navigator.userAgent,referrer:document.referrer,module_title:this.item.typeValue.title?this.item.typeValue.title:"",module_type:this.item.type,module_unid:this.item.unid?this.item.unid:"0"};const i=this.$route.meta;i.directview&&this.user.unid&&("click"==e?this.tracker.send(t):this.tracker.sendImmediate(t))},imgOnload(e){console.log(e);var t=e.parentNode.offsetWidth,i=e.parentNode.offsetHeight,n=e.width,s=e.height,r=e.width/e.height;if(r>t/i){let r=i/s*n+"px",o=i+"px",a="-"+(i/s*n-t)/2+"px";e.style.width=r,e.style.height=o,e.style.left=a,e.style.position="relative"}else{let r=t+"px",o=t/n*s+"px",a="-"+(t/n*s-i)/2+"px";e.style.width=r,e.style.height=o,e.style.top=a,e.style.position="relative"}},background_image(e){if(this.images_list&&this.images_list.length>0)return p.v.qiniuUrl+"/"+this.images_list[e].image_url}},watch:{type_value:{handler:function(e,t){}},module_id_reclick:{handler(e,t){e!==t&&e==this.item.unid&&this.jumpto()}}},components:{PEncryptedPopup:B.Z,PBuyPopup:O.Z}},me=pe;const ge=(0,_.Z)(me,[["render",ue],["__scopeId","data-v-e1dc5700"]]);var _e=ge;const fe=["src"],ye=(0,u.createElementVNode)("img",{src:V,style:{height:"70px"},alt:""},null,-1),ve=[ye],be={style:{width:"85vw",position:"relative","max-width":"320px"},class:"b"},we={style:{width:"100%","min-height":"193px","background-color":"white","border-radius":"16px"},class:"flexC flexD b"},ke={class:"flexLC flexD b",style:{width:"100%",flex:"1",padding:"0 3.5%"}},Te={class:"fs16 bold",style:{"padding-top":"28px","padding-bottom":"18px"}},xe={style:{"font-size":"14px","word-wrap":"break-word","word-break":"break-all","white-space":"pre-wrap",color:"#333333"}},Se={class:"flexBC pointer",style:{height:"48px","border-top":"1px solid #eee",width:"100%"}},Ee={class:"fs16"};function Ae(e,t,i,n,s,r){const a=U.J,l=B.Z,c=O.Z,d=o.G;return(0,u.openBlock)(),(0,u.createElementBlock)("div",{style:(0,u.normalizeStyle)([{position:"relative",overflow:"hidden","max-width":"720px","align-items":"end"},[{minHeight:e.type_value.text?"48px":""},{"border-radius":e.style_border},{background:e.type_value.file_url?"transparent":"white"}]]),class:"flexC"},[e.type_value.file_url?((0,u.openBlock)(),(0,u.createElementBlock)("img",{key:1,onClick:t[1]||(t[1]=(...t)=>e.jumpto&&e.jumpto(...t)),class:(0,u.normalizeClass)(["pointer",[e.encrypt_icon_after?"blur40 ":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""]]),style:(0,u.normalizeStyle)([{width:"100%","max-height":"1200px","object-fit":"cover","border-radius":"4px",display:"flex"},e.imageStyle]),src:(e.isSafari&&e.encrypt_icon_after,e.qiniuUrl+"/"+e.type_value.file_url),alt:""},null,14,fe)):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,onClick:t[0]||(t[0]=(...t)=>e.jumpto&&e.jumpto(...t)),class:"flexC",style:(0,u.normalizeStyle)([{width:"100%",height:"168px","max-height":"1200px","border-radius":"4px",background:"white","font-size":"30px",color:"#5e5e5e","box-sizing":"border-box"},e.imageStyle])},[(0,u.createVNode)(a,{name:"photo-o",style:{position:"absolute",top:"40%"}})],4)),e.type_value.text?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:2,style:(0,u.normalizeStyle)([{position:"absolute",bottom:"0",display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"48px","font-size":"14px","font-weight":"400",color:"#fff","border-bottom-left-radius":"4px","border-bottom-right-radius":"4px","background-size":"100% 100%"},{backgroundImage:`url(${e.text_bg})`}])},[(0,u.createElementVNode)("div",{onClick:t[2]||(t[2]=(...t)=>e.jumpto&&e.jumpto(...t)),style:{"font-size":"16px",width:"100%","padding-left":"12px",color:"#fff","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","margin-top":"12px"}},(0,u.toDisplayString)(e.type_value.text?e.type_value.text:""),1)],4)):(0,u.createCommentVNode)("",!0),(0,u.withDirectives)((0,u.createElementVNode)("div",{onClick:t[3]||(t[3]=(...t)=>e.jumpto&&e.jumpto(...t)),class:"pointer flexC",style:(0,u.normalizeStyle)([{"border-radius":"4px","z-index":"1",position:"absolute",top:"0",left:"0",height:"100%",width:"100%"},e.encryptIconImageStyle])},ve,4),[[u.vShow,e.encrypt_icon_after]]),e.encrypted_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(l,{key:3,onEncryptedToggleShowEmit:e.encryptionToggleShow,encrypted_toggle_show:e.encrypted_toggle_show,onConfirm:e.verifyPasswordSuccess,item:e.item,index:e.index,user:e.user},null,8,["onEncryptedToggleShowEmit","encrypted_toggle_show","onConfirm","item","index","user"])):(0,u.createCommentVNode)("",!0),e.pay_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(c,{key:4,onPayToggleShowEmit:e.payToggleShow,pay_toggle_show:e.pay_toggle_show,item:e.item,index:e.index,user:e.user},null,8,["onPayToggleShowEmit","pay_toggle_show","item","index","user"])):(0,u.createCommentVNode)("",!0),(0,u.createVNode)(d,{onClickOverlay:t[5]||(t[5]=t=>e.copy_url_show=!1),show:e.copy_url_show,"onUpdate:show":t[6]||(t[6]=t=>e.copy_url_show=t),style:{"--van-popup-background-color":"transparent"},teleport:"#app"},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",be,[(0,u.createElementVNode)("div",we,[(0,u.createElementVNode)("div",ke,[(0,u.createElementVNode)("span",Te,(0,u.toDisplayString)(e.translate("go_to_browser")),1),(0,u.createElementVNode)("span",xe,(0,u.toDisplayString)(e.tmp_copy_url),1)]),(0,u.createElementVNode)("div",Se,[(0,u.createElementVNode)("div",{class:"flexC go",style:{width:"100%",height:"100%",color:"#7F49FC"},onClick:t[4]||(t[4]=t=>e.copyLink3Url(e.tmp_real_copy_url))},[(0,u.createElementVNode)("span",Ee,(0,u.toDisplayString)(e.translate("copy")),1)])])])])])),_:1},8,["show"])],4)}var Ce=i(7999);const Ie=i(470);var Pe={data(){return{encrypted_toggle_show:!1,check_encryption:!1,clickInfoCache:{},check_pay_status:!1,pay_toggle_show:!1,preview_language:{"zh-HK":{donate:"已打賞",go_to_browser:"復製鏈接，去瀏覽器中打開",copy:"立即復製",js_copy_success:"復製成功，請去瀏覽器中粘貼",js_copy_fail:"復製失敗，請去手動輸：",js_toast_fail:"失敗，請聯繫客服微信:link3cc888"},"zh-CN":{donate:"已打赏",go_to_browser:"复制链接，去浏览器中打开",copy:"立即复制",js_copy_success:"复制成功，请去浏览器中粘贴",js_copy_fail:"复制失败，请去手动输：",js_toast_fail:"失败，请联系客服微信:link3cc888"},en:{donate:"Reward Successful",go_to_browser:"Copy link, browser opens",copy:"Copy",js_copy_success:"Copy successful, please go to the browser to paste",js_copy_fail:"Copy failed, please input:",js_toast_fail:"Wrong. Please contact us with Wechat: link3cc888"}},is_open_in_browser_wechat:!1,is_open_in_browser_qq:!1,is_open_in_browser_weibo:!1,is_open_in_browser_tiktok:!1,copy_url_show:!1,tmp_copy_url:"",tmp_real_copy_url:""}},props:{item:Object,index:Number,user:Object,tracker:Object,style_border:String},computed:{...(0,C.mapState)({user_guest:e=>e.user.user_guest,module_id_reclick:e=>e.page.local_user_data.module_id_reclick,temporary_user:e=>e.user.temporary_user,page:e=>e.page.page,user_guest_orders:e=>e.user.user_guest.link3_orders,white_color_theme:e=>e.page.state_theme.white_font}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},nav_url:function(){return this.item&&this.item.typeValue&&this.item.typeValue.nav_url?this.item.typeValue.nav_url:""},qiniuUrl:function(){return p.v.qiniuUrl},encrypt_icon_after(){return!!this.encrypt_icon&&(!(!(!this.payment_amount||this.encrypted_browsing_password||de.Z.getToken()&&"undefined"!=de.Z.getToken())&&this.checkLink3OrdersStatus(this.item))&&!this.check_encryption)},encrypt_icon:function(){return this.item&&this.item.typeValue?!(!this.item.typeValue.encrypted_browsing_password&&!this.item.typeValue.payment_amount):{}},encrypted_browsing_password:function(){return!!this.type_value.encrypted_browsing_password},payment_amount:function(){return!!this.type_value.payment_amount},isSafari:function(){return!!((0,A.Jv)().Safari||(0,A.Jv)().iPhone||this.page.has_baidu)},is_open_in_browser_popup:function(){if(!this.item)return!1;if(!this.item.typeValue)return!1;let e=this.item.typeValue;return 1==e.is_open_in_browser_qq&&(0,A.Jv)().qq?(this.is_open_in_browser_qq=!0,!0):1==e.is_open_in_browser_wechat&&((0,A.Jv)().weixin||(0,A.Jv)().wxwork)&&(0,A.Jv)().mobile?(this.is_open_in_browser_wechat=!0,!0):1==e.is_open_in_browser_weibo&&(0,A.Jv)().weibo?(this.is_open_in_browser_weibo=!0,!0):!(1!=e.is_open_in_browser_tiktok||!(0,A.Jv)().douyin)&&(this.is_open_in_browser_tiktok=!0,!0)},present_language_c:function(){return this.present_language()},isMiniprogram(){return(0,A.Jv)().miniprogram},text_bg(){return Ie},imageStyle(){let e=document.getElementsByClassName("realpreview-contnet")[0].clientWidth,t={maxHeight:"560px"};return(0,A.Jv)().pc&&e>768&&(t.maxHeight="1200px;"),t.borderRadius=this.style_border,t},my_theme_font_color:function(){let e="black";"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e=this.user.custom_font.font_color);let t=this.white_color_theme;return t.indexOf(this.user.theme)>=0&&(e="white"),e},encryptIconImageStyle(){let e={};return this.encrypt_icon_after&&!this.type_value.file_url&&(e.backdropFilter="blur(40px)"),e.borderRadius=this.style_border,e}},methods:{...(0,C.mapMutations)({updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState"}),verifyPasswordSuccess(){this.check_encryption=!0,this.jumpto()},encryptionToggleShow(e){this.encrypted_toggle_show=e},checkLink3OrdersStatus(e){if(this.user_guest&&this.user_guest_orders){let t=this.user_guest_orders;return!(!t||!Array.isArray(t))&&(!!t.find((t=>t.module_id==e.unid&&t.price>0))||(this.user_guest.unid,this.user.unid,!1))}return!1},checkTemporaryUserLink3OrdersStatus(e){if(this.temporary_user&&""!==this.temporary_user.unid&&this.temporary_user.vip){let t=this.temporary_user.vip;return!(!t.link3_orders||!Array.isArray(t.link3_orders))&&(!!t.link3_orders.find((t=>t.module_id==e.unid&&t.price>0))||(this.temporary_user.unid,this.user.unid,!1))}return!1},payToggleShow(e){this.pay_toggle_show=e},openBuy(e){this.updateLocalUserDataState({show_buy_popup_link3:!1,show_buy_qrcode_link3:!1,show_donate_popup_link3:!1}),this.updateLocalUserDataState({show_buy_popup_link3:!0,buy_popup_goods_index_link3:e})},async jumpto(){if(this.isMiniprogram){if(this.payment_amount||this.encrypted_browsing_password)return void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.user.username?p.v.link3PreviewPageUrl+"/"+this.user.username:""});if(this.nav_url){if(!(0,A.sg)(this.nav_url))return;let e=this.nav_url.replace(/^https?:\/\//i,"");return this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.nav_url?e:p.v.link3PreviewPageUrl+"/"+this.user.username})}}try{if(this.payment_amount&&!this.encrypted_browsing_password){if(!de.Z.getToken()||"undefined"==de.Z.getToken()||""===this.user_guest.unid)return this.payToggleShow(!0),void this.openBuy(this.item.unid);{if(!this.checkLink3OrdersStatus(this.item)&&(this.payToggleShow(!0),this.openBuy(this.item.unid),!this.check_pay_status))return;let e=await he.bG();if(!e)return!1;"0001"==e.code&&this.updateUserGuestState(e.data)}}if(this.check_pay_status=!1,this.encrypted_browsing_password&&!this.check_encryption)return void this.encryptionToggleShow(!0)}catch(t){console.log(t)}let e;if(e=0==this.nav_url.indexOf("mailto:")?this.nav_url:(0,A.sg)(this.nav_url),e||this.type_value.file_url){if(this.updateAliyun("click"),this.is_open_in_browser_popup&&e)return this.copy_url_show=!0,this.tmp_copy_url=this.nav_url,this.tmp_copy_url&&this.tmp_copy_url.length>30&&(this.tmp_copy_url=this.tmp_copy_url.slice(0,30)+"..."),void(this.tmp_real_copy_url=this.nav_url);this.nav_url?(this.updateAliyun("leave"),(0,A.Jv)().iPhone?window.location.href=e:window.open(e)):""==this.nav_url&&this.type_value.file_url&&(0,ce.ImagePreview)({images:[this.qiniuUrl+"/"+this.type_value.file_url],startPosition:0,closeable:!0,showIndex:!1,teleport:"#app"})}},updateAliyun(e){let t={action:e,unid:this.user.unid,system:(0,A.O3)(),client_ip:"",url:location.href,"user-agent":navigator.userAgent,referrer:document.referrer,module_title:this.item.typeValue.title?this.item.typeValue.title:"",module_type:this.item.type,module_unid:this.item.unid?this.item.unid:"0"};const i=this.$route.meta;i.directview&&this.user.unid&&("click"==e?this.tracker.send(t):this.tracker.sendImmediate(t))},translate:function(e){return this.preview_language[this.present_language_c][e]},copyLink3Url:(0,A.Ds)((async function(e){(0,Ce.Z)(e)?ce.Toast.success(this.translate("js_copy_success")):ce.Toast.fail(this.translate("js_copy_fail")+e),this.copy_url_show=!1}),300)},watch:{type_value:{handler:function(e,t){}},module_id_reclick:{handler(e,t){e!==t&&e==this.item.unid&&this.jumpto()}}},inject:["present_language"],components:{PEncryptedPopup:B.Z,PBuyPopup:O.Z}},Ne=Pe;const De=(0,_.Z)(Ne,[["render",Ae]]);var Le=De;const Oe={key:0,class:"flexC",style:{height:"1px","margin-top":"26px","margin-bottom":"6px"}};function Be(e,t,i,n,s,r){return(0,u.openBlock)(),(0,u.createElementBlock)("div",null,[e.item.enable?((0,u.openBlock)(),(0,u.createElementBlock)("div",Oe,[(0,u.createElementVNode)("div",{class:"pdivider",style:(0,u.normalizeStyle)([{width:`${e.divider_width}`},{"background-image":e.judge_style}])},null,4)])):(0,u.createCommentVNode)("",!0)])}var Ue={props:{item:Object,index:Number,user:Object},data:function(){return{}},computed:{...(0,C.mapState)({white_color_theme:e=>e.page.state_theme.white_divider}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},divider_width:function(){if(!this.item)return{};if(!this.item.typeValue)return{};switch(this.type_value.size){case"short":return"23.6%";case"normal":return"61.8%";case"long":return"100%";default:return"100%"}},theme_color(){let e="rgb(0 0 0 / 60%)";"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e=this.user.custom_font.font_color);let t=this.white_color_theme;return t.indexOf(this.user.theme)>=0&&(e="rgb(255 255 255 / 60%)"),"theme36"==this.user.theme&&(e="#6F2D00"),e},judge_style(){switch(this.type_value.style){case"dotted":return`linear-gradient(to right, ${this.theme_color} 35% ,transparent 0%)`;default:return`linear-gradient(${this.theme_color},${this.theme_color})`}}},methods:{},watch:{},mounted(){},updated:function(){},components:{}},Ve=Ue;const Re=(0,_.Z)(Ve,[["render",Be],["__scopeId","data-v-1b60f61e"]]);var je=Re,Me=i(7984);const Fe={style:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},qe={style:{"white-space":"pre-wrap"}};function ze(e,t,i,n,s,r){return e.item.enable?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,style:{width:"100%",display:"flex","flex-direction":"row","justify-content":"center","align-items":"center",cursor:"pointer"},onClick:t[0]||(t[0]=(...t)=>e.clickHeader&&e.clickHeader(...t))},[(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([e.my_theme_header_title,{width:"96%","font-size":"16px",display:"flex","flex-direction":"row","align-items":"center"}])},[(0,u.createElementVNode)("div",Fe,[(0,u.createElementVNode)("span",qe,(0,u.toDisplayString)(e.item.typeValue?e.item.typeValue.title:""),1),e.show_collapse?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,class:(0,u.normalizeClass)("down"==e.show_collapse?"dropdown-arrow":"up"==e.show_collapse?"dropup-arrow":"")},null,2)):(0,u.createCommentVNode)("",!0)])],4)])):(0,u.createCommentVNode)("",!0)}var He={props:{item:Object,index:Number,user:Object},data:function(){return{collapse:""}},computed:{...(0,C.mapState)({white_color_theme:e=>e.page.state_theme.white_header}),my_theme_header_title:function(){let e={color:"#333",justifyContent:"center"};this.item.typeValue&&("left"==this.item.typeValue.align?e.justifyContent="flex-start":"right"==this.item.typeValue.align?e.justifyContent="flex-end":"center"==this.item.typeValue.align&&(e.justifyContent="center")),this.item.typeValue&&(this.item.typeValue.bolder?e.fontWeight="bolder":e.fontWeight="400"),"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e.color=this.user.custom_font.font_color);let t=this.white_color_theme;return t.indexOf(this.user.theme)>=0&&(e.color="white"),"theme1"==this.user.theme&&(e.color="#333333"),"theme36"==this.user.theme&&(e.color="#6F2D00"),e},show_collapse(){return this.item&&this.item.typeValue&&this.item.typeValue.title&&this.item.typeValue.title.trim()&&this.countBetweenPHeader(this.index)>5?"up"==this.collapse?"up":"down"==this.collapse||""==this.collapse?"down":void 0:""}},methods:{clickHeader(){this.item&&this.item.typeValue&&this.item.typeValue.title&&this.item.typeValue.title.trim()&&this.countBetweenPHeader(this.index)>5&&("up"==this.collapse?this.collapse="down":("down"==this.collapse||""==this.collapse)&&(this.collapse="up"))},countBetweenPHeader(e){if(!this.user||!this.user.links||!this.user.links)return 0;let t=0;for(let i=e+1;i<this.user.links.length;i++){let e=this.user.links[i];if(e.enable){if("header"!=e.type){t+=1;continue}break}}return t}},created(){},mounted:function(){},components:{}},We=He;const Ge=(0,_.Z)(We,[["render",ze],["__scopeId","data-v-685a838a"]]);var Xe=Ge;const Qe={style:{content:"''"}};function Ke(e,t,i,n,s,r){return(0,u.openBlock)(),(0,u.createElementBlock)("div",Qe)}C.mapMutations;var Ze={data(){return{...(0,C.mapState)({local_index_show:e=>e.page.local_user_data.showIndex})}},props:{item:Object},computed:{type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},qiniuUrl:function(){return p.v.qiniuUrl},nav_url:function(){return this.type_value.nav_url?this.type_value.nav_url:""}},methods:{jumpto(){this.type_value.file_url&&(0,ce.ImagePreview)({images:[this.qiniuUrl+"/"+this.type_value.file_url],startPosition:0,closeable:!0,showIndex:!1,teleport:"#app"})}},watch:{local_index_show:{handler:function(e){e==this.index&&(0,ce.ImagePreview)({images:[this.qiniuUrl+"/"+this.type_value.file_url],startPosition:0,closeable:!0,teleport:"#app"})}}}},Ye=Ze;const Je=(0,_.Z)(Ye,[["render",Ke]]);var $e=Je,et=i(2229),tt=(i(8228),i(3548));i(7603);const it={id:"PModuleShare",class:"flexD flexBC",style:{padding:"30px 12px 0px","z-index":"1000"}},nt={class:"flexC",style:{width:"100%","text-align":"center"}},st={class:"title_info"},rt={class:"flexC",style:{width:"100%","text-align":"left"}},ot={class:"title_info"},at={class:"border-box",style:{"flex-grow":"1",width:"100%"}},lt={class:"flexD flexC lower-container b",style:{"border-radius":"0px 0px 11px 11px"}},ut={class:"flexLC",style:{width:"100%",padding:"6px 0 10px"}},ct={style:{"line-height":"16px","font-weight":"bold"},class:"fs14"},dt={style:{display:"flex","flex-direction":"row",height:"30px","justify-content":"space-between","align-items":"center",width:"100%","border-radius":"20px",border:"1px solid #DDDDDD"}},ht={class:"flexC",style:{"padding-left":"2px","padding-right":"2px"}},pt={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",width:"100%"}},mt={style:{width:"60px"}},gt={class:"flexLC",style:{width:"100%","padding-top":"10px","padding-bottom":"6px"}},_t={style:{"line-height":"16px","font-weight":"bold"},class:"fs14"},ft={style:{width:"100%",height:"126px","font-size":"12px",color:"#333",background:"#fff"},class:(0,u.normalizeClass)(["flexD","ignore-elements","drawer-default"])},yt={class:"flexC b",style:{width:"100%"}},vt={class:"main_container flexD flexLC",style:{width:"100%"}},bt=["src"],wt={class:"flexBC pointer b",style:{width:"100%",height:"49px"}},kt={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",width:"100%"}},Tt={style:{width:"120px"}},xt={class:"flexC buttonzone",style:{width:"100%",height:"47px"}},St={class:"fs16"},Et=["id"];function At(e,t,i,n,s,r){const a=tt.g,c=et.g,d=o.G,h=l.Z;return(0,u.openBlock)(),(0,u.createElementBlock)(u.Fragment,null,[(0,u.createVNode)(d,{show:e.module_share_toggle_show_c,"onUpdate:show":t[3]||(t[3]=t=>e.module_share_toggle_show_c=t),round:"",teleport:"#app",onClickOverlay:t[4]||(t[4]=t=>e.changeModuleShareToggleShowEmit(!1)),position:"center",style:{"--van-popup-round-border-radius":"16px"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",it,[(0,u.createElementVNode)("div",nt,[(0,u.createElementVNode)("span",st,(0,u.toDisplayString)(e.translate("share_content_from_Link3_page")),1)]),(0,u.createElementVNode)("div",rt,[(0,u.createElementVNode)("span",ot,(0,u.toDisplayString)(e.translate("jump_link_content")),1)]),(0,u.createElementVNode)("div",at,[(0,u.createElementVNode)("div",lt,[(0,u.createElementVNode)("div",ut,[(0,u.createElementVNode)("span",ct,(0,u.toDisplayString)(e.translate("title_name")),1)]),(0,u.createElementVNode)("div",dt,[(0,u.createVNode)(a,{"model-value":e.module_url_origin,placeholder:e.$t("user_page.links.component.url_link.placeholder_link_url"),border:!1,readonly:"",style:{"--van-field-input-text-color":"#333",height:"30px","line-height":"30px","font-size":"14px","--van-cell-vertical-padding":"0px","border-radius":"22px","--van-field-placeholder-text-color":"#868B95"}},null,8,["model-value","placeholder"]),(0,u.createElementVNode)("div",ht,[(0,u.createElementVNode)("div",pt,[(0,u.createElementVNode)("div",{style:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center",background:"#ccd1dd","background-image":"linear-gradient(to right, #7C3AED , #7C3AED)",height:"26px","text-align":"center","border-radius":"60px",color:"white","font-weight":"900","font-size":"14px","max-width":"70px",margin:"auto",cursor:"pointer"},onClick:t[0]||(t[0]=(...t)=>e.copyModuleShare&&e.copyModuleShare(...t))},[(0,u.createElementVNode)("div",mt,(0,u.toDisplayString)(e.translate("copy")),1)])])])]),(0,u.createElementVNode)("div",gt,[(0,u.createElementVNode)("span",_t,(0,u.toDisplayString)(e.translate("qrcode_name")),1)]),(0,u.createElementVNode)("div",ft,[(0,u.createElementVNode)("div",yt,[(0,u.createElementVNode)("div",vt,[e.module_qrcode_src?((0,u.openBlock)(),(0,u.createElementBlock)("img",{key:0,style:{width:"134px",height:"134px","object-fit":"cover"},src:e.module_qrcode_src,alt:""},null,8,bt)):((0,u.openBlock)(),(0,u.createBlock)(c,{key:1,vertical:"",style:{width:"134px",height:"134px",display:"flex","justify-content":"center"}},{default:(0,u.withCtx)((()=>[(0,u.createTextVNode)((0,u.toDisplayString)(e.translate("vue_qrcode_load")),1)])),_:1}))])])]),(0,u.createElementVNode)("div",wt,[(0,u.createElementVNode)("div",kt,[(0,u.createElementVNode)("div",{style:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center",background:"#ccd1dd","background-image":"linear-gradient(to right, #7C3AED , #7C3AED)",height:"26px","text-align":"center","border-radius":"60px",color:"white","font-weight":"900","font-size":"14px","max-width":"120px",margin:"auto"},onClick:t[1]||(t[1]=(...t)=>e.downloadImage&&e.downloadImage(...t))},[(0,u.createElementVNode)("div",Tt,(0,u.toDisplayString)(e.translate("download")),1)])])])])]),(0,u.createElementVNode)("div",xt,[(0,u.createElementVNode)("div",{id:"bt-cancel",class:"flexC",onClick:t[2]||(t[2]=t=>e.changeModuleShareToggleShowEmit(!1))},[(0,u.createElementVNode)("span",St,(0,u.toDisplayString)(e.translate("js_cancel")),1)])])])])),_:1},8,["show"]),(0,u.createElementVNode)("div",{id:"id_module_qrcode_my_link3_"+e.module_id,class:"title",style:{width:"134px",height:"134px",color:"#666666",overflow:"hidden","z-index":"-1000",position:"absolute",top:"0",left:"0"}},[(0,u.createVNode)(h,{width:"134",height:"134",qr_image_logo:e.qr_image_logo,qr_url:e.module_url_origin},null,8,["qr_image_logo","qr_url"])],8,Et)],64)}var Ct=i(568),It=i(1790),Pt=i(5820),Nt={props:{item:Object,index:Number,user:Object,module_share_toggle_show:Boolean},inject:["present_language"],data:function(){return{show_module_add_popup:"",preview_language:{en:{js_copyed_long:"Copied to clipboard",js_copyed_normal:"Copyed",js_copy:"Copy",js_copy_fail:"Failed",js_cancel:"Cancel",share_content_from_Link3_page:"Share content from Link3 page",jump_link_content:"Click on the short link or scan the code to directly locate the shared content",title_name:"Short Link",qrcode_name:"QR code",copy:"Copy",download:"Download",confirm:"Confirm",cancel:"Cancel",js_copy_success:"Copied",js_copy_fail_self:"Copy failed, please input: ",js_press_qrcode:"Long press the qrcode, then click 'save image'",vue_qrcode_load:"Loading..."},"zh-CN":{js_copyed_long:"已复制到剪贴板",js_copyed_normal:"已复制",js_copy:"复制",js_copy_fail:"复制失败",js_cancel:"取消",share_content_from_Link3_page:"分享Link3页中的内容",jump_link_content:"点击短链接或扫码，将直接定位到分享的内容",title_name:"短链接",qrcode_name:"二维码",copy:"复制",download:"下载",confirm:"确定",cancel:"取消",js_copy_success:"链接已复制，\n可直接去粘贴",js_copy_fail_self:"复制失败，请手动输出：",js_press_qrcode:"请长按下面二维码，\n再选择'保存图片'",vue_qrcode_load:"二维码生成中..."},"zh-HK":{js_copyed_long:"已复制到剪贴板",js_copyed_normal:"已復制",js_copy:"複製",js_copy_fail:"複製失敗",js_cancel:"取消",share_content_from_Link3_page:"分享Link3頁中的內容",jump_link_content:"點擊短鏈接或掃碼，將直接定位到分享的內容",title_name:"短鏈接",qrcode_name:"二維碼",copy:"復製",download:"下載",confirm:"確定",cancel:"取消",js_copy_success:"鏈接已復制，\n可直接去粘貼",js_copy_fail_self:"複製失敗，請手動輸出：",js_press_qrcode:"請長按下面二維碼，\n再選擇'保存圖片'",vue_qrcode_load:"二維碼生成中..."}},link3PreviewPageUrl:p.v.link3PreviewPageUrl,module_qrcode_src:""}},computed:{module_share_toggle_show_c:function(){return!!this.module_share_toggle_show&&this.module_share_toggle_show},present_language_c:function(){return this.present_language()},type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},title:function(){return this.type_value.title?this.type_value.title:""},content:function(){return this.type_value.content?this.type_value.content:""},qr_image_logo:function(){return(0,Ct.sQ)(this.user.profile_image)},my_link3(){return(0,A.UZ)(this.user.unid)},my_link3_username(){return(0,A.UZ)(this.user.username)},module_url_origin:function(){return this.my_link3_username?this.my_link3_username+"?s="+(this.item.unid&&this.item.unid.length>10?(0,A.Hb)(this.item.unid.slice(-9)):this.item.unid):this.link3PreviewPageUrl+"/"+this.user.username},module_id:function(){let e=(new Date).getTime();return this.item&&this.item&&this.item.unid?this.item.unid:e}},methods:{changeModuleShareToggleShowEmit(e){this.$emit("moduleShareToggleShowEmit",e)},copyLink3:(0,A.Ds)((async function(){let e=this;(0,Ce.Z)(this.type_value.content)?(ce.Toast.success({message:e.translate("js_copyed_long"),wordBreak:"normal"}),setTimeout((()=>{this.changeModuleShareToggleShowEmit(!1)}),500)):ce.Toast.fail(e.translate("js_copy_fail"))}),300),translate:function(e){return this.preview_language[this.present_language_c][e]},copyModuleShare:(0,A.Ds)((async function(){let e="";e=this.my_link3_username?this.my_link3_username+"?s="+(this.item.unid&&this.item.unid.length>10?(0,A.Hb)(this.item.unid.slice(-9)):this.item.unid):this.my_link3_username,(0,Ce.Z)(e)?ce.Toast.success(this.translate("js_copyed_normal")):ce.Toast.fail(this.translate("js_copy_fail_self")+e)}),300),createImage:async function(){let e=this,t="id_module_qrcode_my_link3_"+e.module_id;(0,Pt.L)(t).then((function(i){e.module_qrcode_src=i,document.getElementById(t).remove()})).catch((e=>{console.log("html2image err",e)}))},downloadImage:async function(){let e=this;if(this.module_qrcode_src||await this.createImage(),/MicroMessenger/i.test(navigator.userAgent))(0,ce.Toast)({message:e.$t("user_page.links.drawler.module_share.js_press_qrcode"),icon:"warn-o"});else{let t=document.createElement("a");document.body.appendChild(t),t.href=e.module_qrcode_src,t.download="link3.cc_"+e.user.username+".png",t.dispatchEvent(new MouseEvent("click"))}}},watch:{},mounted(){this.createImage()},updated:function(){},components:{Qrcode:It.Z}},Dt=Nt;const Lt=(0,_.Z)(Dt,[["render",At],["__scopeId","data-v-3adff8ba"]]);var Ot=Lt,Bt=i(4251);const Ut=e=>((0,u.pushScopeId)("data-v-0d869562"),e=e(),(0,u.popScopeId)(),e),Vt={id:"Pdonate",class:"main_container flexD flexBC",style:{"max-height":"600px","min-height":"223px"}},Rt=Ut((()=>(0,u.createElementVNode)("div",{class:"title flexC"},[(0,u.createElementVNode)("span",null,"支持成功")],-1))),jt={class:"flexLC",style:{"background-color":"white","border-radius":"8px",width:"88%","padding-left":"16px","padding-right":"23px"}},Mt={class:"flexC pointer",style:{padding:"8px 0 30px",position:"relative","align-items":"flex-start"}},Ft={class:"flexD",style:{"padding-left":"8px",width:"230px"}},qt={class:"fs12 bold",style:{"padding-bottom":"4px",color:"#666666"}},zt={style:{"min-height":"54px"}},Ht={class:"fs14",style:{color:"#000000",background:"#F7F8FA","border-radius":"0px 6px 6px 6px","line-height":"18px",padding:"7px",display:"flex","word-break":"break-all"}},Wt={class:"flexC buttonzone",style:{width:"100%",border:"1px solid #EEEEEE"}},Gt=Ut((()=>(0,u.createElementVNode)("span",{class:"fs16"},"好的",-1))),Xt=[Gt];function Qt(e,t,i,n,s,r){const a=Bt.Z,l=o.G;return(0,u.openBlock)(),(0,u.createBlock)(l,{show:e.leave_word_toggle_show_c,"onUpdate:show":t[1]||(t[1]=t=>e.leave_word_toggle_show_c=t),round:"",teleport:"#app",onClickOverlay:t[2]||(t[2]=t=>e.changeTextShowEmit(!1)),position:"center",style:{"--van-popup-round-border-radius":"16px"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",Vt,[Rt,(0,u.createElementVNode)("div",jt,[(0,u.createElementVNode)("div",Mt,[(0,u.createVNode)(a,{width:"40",height:"40",radius:"20",fontSize:"14",user_data:e.user},null,8,["user_data"]),(0,u.createElementVNode)("div",Ft,[(0,u.createElementVNode)("span",qt,(0,u.toDisplayString)(e.user.profile_title?e.nameslice(e.user.profile_title,26):e.user.username),1),(0,u.createElementVNode)("div",zt,[(0,u.createElementVNode)("span",Ht,(0,u.toDisplayString)(e.leave_word),1)])])])]),(0,u.createElementVNode)("div",Wt,[(0,u.createElementVNode)("div",{id:"bt-cancel",class:"flexC",onClick:t[0]||(t[0]=t=>e.changeTextShowEmit(!1))},Xt)])])])),_:1},8,["show"])}var Kt={props:{item:Object,index:Number,user:Object,leave_word_toggle_show:Boolean},inject:["present_language"],data:function(){return{show_module_add_popup:"",preview_language:{en:{js_copyed_long:"Copied to clipboard",js_copyed_normal:"Copyed",js_copy:"Copy",js_copy_fail:"Failed",js_cancel:"Cancel"},"zh-CN":{js_copyed_long:"已复制到剪贴板",js_copyed_normal:"已复制",js_copy:"复制",js_copy_fail:"复制失败",js_cancel:"取消"},"zh-HK":{js_copyed_long:"已复制到剪贴板",js_copyed_normal:"已復制",js_copy:"複製",js_copy_fail:"複製失敗",js_cancel:"取消"}}}},computed:{type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},leave_word_toggle_show_c:function(){return!!this.leave_word_toggle_show&&this.leave_word_toggle_show},present_language_c:function(){return this.present_language()},title:function(){return this.type_value.title?this.type_value.title:""},content:function(){return this.type_value.content?this.type_value.content:""},leave_word:function(){return this.item.typeValue.leave_word?this.item.typeValue.leave_word:""}},methods:{changeTextShowEmit(e){this.$emit("leaveWordToggleShowEmit",e)},translate:function(e){return this.preview_language[this.present_language_c][e]},nameslice(e,t){const i=t||13;return this.getLength(e,i)[1]+1<e.length?e.slice(0,this.getLength(e,i)[1])+"...":e},getLength(e,t){let i=0,n=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);if(n=s,i+=r>=0&&r<=128?1:2,i>t)return[i,s]}return[i,n]}},watch:{},mounted(){},updated:function(){},components:{}},Zt=Kt;const Yt=(0,_.Z)(Zt,[["render",Qt],["__scopeId","data-v-0d869562"]]);var Jt=Yt,$t=i(9545);i(51);const ei=e=>((0,u.pushScopeId)("data-v-8ca5c91a"),e=e(),(0,u.popScopeId)(),e),ti={style:{width:"85vw",position:"relative","max-width":"320px"},class:"b",id:"pdonatepopup"},ii={class:"flexLC flexD b",style:{width:"100%",flex:"1"}},ni={class:"flexC",style:{width:"100%",position:"relative",height:"54px"}},si=ei((()=>(0,u.createElementVNode)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%) rotate(45deg)",width:"26.456px",height:"3px","border-radius":"1.5px","background-color":"#333"}},null,-1))),ri=ei((()=>(0,u.createElementVNode)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%) rotate(-45deg)",width:"26.456px",height:"3px","border-radius":"1.5px","background-color":"#333"}},null,-1))),oi=[si,ri],ai={style:{"padding-top":"26px"},class:"fs16 bold"},li={class:"tac",style:{width:"100%",color:"#696969"}},ui={class:"fs14"},ci={key:0,class:"fs14 bold",style:{width:"100%",color:"#000",margin:"0 6px"}},di={key:1,class:"fs14"},hi={class:"fs14"},pi={class:"flexC tac",style:{width:"100%",color:"#666","margin-top":"10px","text-align":"center","font-weight":"500"}},mi=ei((()=>(0,u.createElementVNode)("span",{style:{"font-size":"14px","margin-right":"4px",display:"inline-block","vertical-align":"middle"}},"￥",-1))),gi=ei((()=>(0,u.createElementVNode)("span",{style:{display:"inline-block","vertical-align":"middle"}},"5",-1))),_i=ei((()=>(0,u.createElementVNode)("span",{style:{"font-size":"14px","margin-right":"4px",display:"inline-block","vertical-align":"middle"}},"￥",-1))),fi=ei((()=>(0,u.createElementVNode)("span",{style:{display:"inline-block","vertical-align":"middle"}},"20",-1))),yi=ei((()=>(0,u.createElementVNode)("span",{style:{"font-size":"14px","margin-right":"4px",display:"inline-block","vertical-align":"middle"}},"￥",-1))),vi=ei((()=>(0,u.createElementVNode)("span",{style:{display:"inline-block","vertical-align":"middle"}},"50",-1))),bi={class:"flexC tac",style:{width:"100%",color:"#666","margin-top":"8px","text-align":"center","font-weight":"500"}},wi=ei((()=>(0,u.createElementVNode)("span",{style:{"font-size":"14px","margin-right":"4px",display:"inline-block","vertical-align":"middle"}},"￥",-1))),ki=ei((()=>(0,u.createElementVNode)("span",{style:{display:"inline-block","vertical-align":"middle"}},"80",-1))),Ti=ei((()=>(0,u.createElementVNode)("span",{style:{"font-size":"14px","margin-right":"4px"}},"￥",-1))),xi=ei((()=>(0,u.createElementVNode)("span",{style:{display:"inline-block","vertical-align":"middle"}},"100",-1))),Si=ei((()=>(0,u.createElementVNode)("span",{style:{"font-size":"14px","margin-right":"4px",display:"inline-block","vertical-align":"middle"}},"￥",-1))),Ei=ei((()=>(0,u.createElementVNode)("span",{style:{display:"inline-block","vertical-align":"middle"}},"200",-1))),Ai={class:"flexBC pointer",style:{height:"44px",width:"100%",color:"#6B7D99","font-size":"14px"}},Ci={class:"fs14"},Ii={class:"flexLC flexD b",style:{width:"100%",flex:"1"}},Pi={class:"flexC",style:{width:"100%",position:"relative",height:"54px"}},Ni=ei((()=>(0,u.createElementVNode)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%) rotate(45deg)",width:"26.456px",height:"3px","border-radius":"1.5px","background-color":"#333"}},null,-1))),Di=ei((()=>(0,u.createElementVNode)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%) rotate(-45deg)",width:"26.456px",height:"3px","border-radius":"1.5px","background-color":"#333"}},null,-1))),Li=[Ni,Di],Oi={style:{"padding-top":"26px"},class:"fs16 bold"},Bi={class:"tac",style:{width:"100%",color:"#696969"}},Ui={class:"fs14"},Vi={key:0,class:"fs14 bold",style:{width:"100%",color:"#000",margin:"0 6px"}},Ri={key:1,class:"fs14"},ji={class:"fs14"},Mi={class:"flexC tac",style:{width:"100%",color:"#666","margin-top":"10px","text-align":"center"}},Fi=ei((()=>(0,u.createElementVNode)("div",{class:"flexLC",style:{display:"inline-block",width:"88px","text-align":"right","font-weight":"500",color:"#333333","font-size":"28px"}},"￥",-1))),qi={class:"flexD flexLC",style:{width:"160px"}},zi={class:"b",style:{width:"100%"}},Hi={class:"flexC tac pointer",style:{width:"100%",color:"#6B7D99","margin-top":"28px","text-align":"center","font-size":"14px"}},Wi={class:"fs14"},Gi={class:"flexBC pointer",style:{height:"44px",width:"100%","line-height":"44px",color:"#8537FB","font-size":"14px","border-top":"1px solid #EEEEEE"}},Xi={class:"fs16"},Qi={class:"flexD flexLC",style:{width:"320px",height:"342px",background:"#FFFFFF","border-radius":"16px"}},Ki={class:"fs16 bold",style:{"line-height":"18px","padding-top":"30px","padding-bottom":"18px"}},Zi={class:"fs14",style:{"line-height":"18px","padding-bottom":"16px",color:"#696969"}},Yi={class:"flexD flexLC",style:{width:"184px",height:"216px","border-radius":"8px",border:"1px solid #EBEEF1"}},Ji={class:"flexC",style:{"padding-top":"10px","align-items":"flex-end"}},$i=ei((()=>(0,u.createElementVNode)("span",{class:"fs12 bold",style:{"padding-right":"3px","padding-bottom":"1px"}},"¥",-1))),en={class:"fs16 bold"},tn={key:0},nn={style:{width:"320px","min-height":"300px","background-color":"white","border-radius":"16px"},class:"flexC flexD b"},sn={class:"flexLC flexD b",style:{width:"100%",flex:"1",padding:"0 10px",cursor:"text"}},rn={class:"fs14",style:{"line-height":"18px","padding-top":"32px",color:"#000000"}},on={class:"fs14",style:{"line-height":"18px",color:"#000000"}},an={class:"fs14",style:{"line-height":"18px",color:"#000000"}},ln={style:{"padding-top":"10px","padding-bottom":"20px"}},un={class:"flexBC pointer",style:{height:"47px",width:"100%","line-height":"47px",color:"#000000","font-size":"16px","border-top":"1px solid #EEEEEE"}};function cn(e,t,i,s,a,l){const c=(0,u.resolveComponent)("pwxpay"),d=$t.z,h=tt.g,p=o.G,m=(0,u.resolveComponent)("vue-qrcode"),g=n.Z,_=r.E;return(0,u.openBlock)(),(0,u.createElementBlock)(u.Fragment,null,[(0,u.createVNode)(c,{ref:"pwxpay",goods:e.goods,buy_num:e.buy_num},null,8,["goods","buy_num"]),(0,u.createVNode)(p,{onClickOverlay:e.buyClose,show:e.donate_popup_show,"onUpdate:show":t[12]||(t[12]=t=>e.donate_popup_show=t),round:"",teleport:"#app",style:{"--van-popup-background-color":"transparent"},class:"pdonate_popup"},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",ti,[(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{width:"100%",height:"245px","background-color":"white","border-radius":"16px"},{display:e.show_designated}]),class:"flexC flexD b"},[(0,u.createElementVNode)("div",ii,[(0,u.createElementVNode)("div",ni,[(0,u.createElementVNode)("div",{onClick:t[0]||(t[0]=(...t)=>e.buyClose&&e.buyClose(...t)),class:"pointer",style:(0,u.normalizeStyle)([{width:"40px",height:"40px",position:"absolute",right:"8px",top:"72%"},"transform: translateY(-50%) scale(0.6)"])},oi,4),(0,u.createElementVNode)("span",ai,(0,u.toDisplayString)(e.translate("supporting_authors")),1)]),(0,u.createElementVNode)("div",li,[(0,u.createElementVNode)("span",ui,(0,u.toDisplayString)(e.translate("Pay_to")),1),e.user.profile_title?((0,u.openBlock)(),(0,u.createElementBlock)("span",ci,(0,u.toDisplayString)(""==e.user.profile_title||null==e.user.profile_title?e.user.username:e.nameslice(e.user.profile_title,26)),1)):((0,u.openBlock)(),(0,u.createElementBlock)("span",di,(0,u.toDisplayString)(e.translate("web_author")),1)),(0,u.createElementVNode)("span",hi,(0,u.toDisplayString)(e.translate("Pay_to_")),1)]),(0,u.createElementVNode)("div",pi,[(0,u.createVNode)(d,{onClick:t[1]||(t[1]=t=>e.designatedAmounts(5)),type:"default",style:{width:"81px",height:"40px","margin-right":"15px","border-radius":"6px",border:"1px solid #FA5B26","font-size":"18px",color:"#FA5B26"}},{default:(0,u.withCtx)((()=>[mi,gi])),_:1}),(0,u.createVNode)(d,{onClick:t[2]||(t[2]=t=>e.designatedAmounts(20)),type:"default",style:{width:"81px",height:"40px","margin-right":"15px","border-radius":"6px",border:"1px solid #FA5B26","font-size":"18px",color:"#FA5B26"}},{default:(0,u.withCtx)((()=>[_i,fi])),_:1}),(0,u.createVNode)(d,{onClick:t[3]||(t[3]=t=>e.designatedAmounts(50)),type:"default",style:{width:"81px",height:"40px","border-radius":"6px",border:"1px solid #FA5B26","font-size":"18px",color:"#FA5B26"}},{default:(0,u.withCtx)((()=>[yi,vi])),_:1})]),(0,u.createElementVNode)("div",bi,[(0,u.createVNode)(d,{onClick:t[4]||(t[4]=t=>e.designatedAmounts(80)),type:"default",style:{width:"81px",height:"40px","margin-right":"15px","border-radius":"6px",border:"1px solid #FA5B26","font-size":"18px",color:"#FA5B26"}},{default:(0,u.withCtx)((()=>[wi,ki])),_:1}),(0,u.createVNode)(d,{onClick:t[5]||(t[5]=t=>e.designatedAmounts(100)),type:"default",style:{width:"81px",height:"40px","margin-right":"15px","border-radius":"6px",border:"1px solid #FA5B26","font-size":"18px",color:"#FA5B26"}},{default:(0,u.withCtx)((()=>[Ti,xi])),_:1}),(0,u.createVNode)(d,{onClick:t[6]||(t[6]=t=>e.designatedAmounts(200)),type:"default",style:{width:"81px",height:"40px","border-radius":"6px",border:"1px solid #FA5B26","font-size":"18px",color:"#FA5B26"}},{default:(0,u.withCtx)((()=>[Si,Ei])),_:1})])]),(0,u.createElementVNode)("div",Ai,[(0,u.createElementVNode)("div",{class:"flexC cancel",style:{width:"100%",height:"100%","align-items":"start"},onClick:t[7]||(t[7]=(...t)=>e.otherAmounts&&e.otherAmounts(...t))},[(0,u.createElementVNode)("span",Ci,(0,u.toDisplayString)(e.translate("other_amounts")),1)])])],4),(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{width:"100%",height:"245px","background-color":"white","border-radius":"16px"},{display:e.show_other}]),class:"flexC flexD b"},[(0,u.createElementVNode)("div",Ii,[(0,u.createElementVNode)("div",Pi,[(0,u.createElementVNode)("div",{onClick:t[8]||(t[8]=(...t)=>e.buyClose&&e.buyClose(...t)),class:"pointer",style:(0,u.normalizeStyle)([{width:"40px",height:"40px",position:"absolute",right:"8px",top:"72%"},"transform: translateY(-50%) scale(0.6)"])},Li,4),(0,u.createElementVNode)("span",Oi,(0,u.toDisplayString)(e.translate("supporting_authors")),1)]),(0,u.createElementVNode)("div",Bi,[(0,u.createElementVNode)("span",Ui,(0,u.toDisplayString)(e.translate("Pay_to")),1),e.user.profile_title?((0,u.openBlock)(),(0,u.createElementBlock)("span",Vi,(0,u.toDisplayString)(""==e.user.profile_title||null==e.user.profile_title?e.user.username:e.nameslice(e.user.profile_title,26)),1)):((0,u.openBlock)(),(0,u.createElementBlock)("span",Ri,(0,u.toDisplayString)(e.translate("web_author")),1)),(0,u.createElementVNode)("span",ji,(0,u.toDisplayString)(e.translate("Pay_to_")),1)]),(0,u.createElementVNode)("div",Mi,[Fi,(0,u.createElementVNode)("div",qi,[(0,u.createElementVNode)("div",zi,[(0,u.createVNode)(h,{modelValue:e.other_money,"onUpdate:modelValue":t[9]||(t[9]=t=>e.other_money=t),placeholder:"0.00",onFocus:e.otherFocus,onBlur:e.otherBlur,autosize:"",type:"number",rows:"1",border:!1,style:{"box-sizing":"border-box","--van-field-input-text-color":"black","font-size":"38px","font-weight":"500","border-radius":"6px",padding:"0px 6px",height:"40px","line-height":"38px"}},null,8,["modelValue","onFocus","onBlur"])])])]),(0,u.createElementVNode)("div",Hi,[(0,u.createElementVNode)("div",{class:"flexC cancel",style:{width:"100%",height:"100%","align-items":"start"},onClick:t[10]||(t[10]=(...t)=>e.fixedAmounts&&e.fixedAmounts(...t))},[(0,u.createElementVNode)("span",Wi,(0,u.toDisplayString)(e.translate("fixed_amount")),1)])])]),(0,u.createElementVNode)("div",Gi,[(0,u.createElementVNode)("div",{class:"flexC cancel",style:{width:"100%",height:"100%","align-items":"center"},onClick:t[11]||(t[11]=t=>e.otherAmountsConfirm(e.other_money))},[(0,u.createElementVNode)("span",Xi,(0,u.toDisplayString)(e.translate("confirm")),1)])])],4)])])),_:1},8,["onClickOverlay","show"]),(0,u.createVNode)(p,{onClickOverlay:e.qrcodeClose,show:e.donate_popup_qrcode,"onUpdate:show":t[13]||(t[13]=t=>e.donate_popup_qrcode=t),style:{"--van-popup-background-color":"transparent"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",Qi,[(0,u.createElementVNode)("span",Ki,(0,u.toDisplayString)(e.translate("cash")),1),(0,u.createElementVNode)("span",Zi,(0,u.toDisplayString)(e.translate("scan")),1),(0,u.createElementVNode)("div",Yi,[(0,u.createElementVNode)("div",Ji,[$i,(0,u.createElementVNode)("span",en,(0,u.toDisplayString)(e.goods.price),1)]),e.qr_url?((0,u.openBlock)(),(0,u.createElementBlock)("div",tn,[(0,u.createVNode)(m,{value:e.qr_url,options:{width:180,height:180,errorCorrectionLevel:"Q"}},null,8,["value"])])):(0,u.createCommentVNode)("",!0)])])])),_:1},8,["onClickOverlay","show"]),(0,u.createVNode)(p,{show:e.show_auth_popup,"onUpdate:show":t[14]||(t[14]=t=>e.show_auth_popup=t),onClickOverlay:e.pAuthPageClose,style:(0,u.normalizeStyle)([{border:"0","border-radius":"16px"},{width:e.bpopupWidth+"px","min-height":e.bpopupWidth+"px"}])},{default:(0,u.withCtx)((()=>[(0,u.createVNode)(g,{show:e.show_auth_popup,guest_info:e.user,onClosePAuthPageEmit:e.closePAuthPage},null,8,["show","guest_info","onClosePAuthPageEmit"])])),_:1},8,["show","onClickOverlay","style"]),(0,u.createVNode)(p,{onClickOverlay:e.joinGroupClose,show:e.join_group,"onUpdate:show":t[16]||(t[16]=t=>e.join_group=t),style:{"--van-popup-background-color":"transparent"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",nn,[(0,u.createElementVNode)("div",sn,[(0,u.createElementVNode)("span",rn,(0,u.toDisplayString)(e.translate("join_group_info_1")),1),(0,u.createElementVNode)("span",on,(0,u.toDisplayString)(e.translate("join_group_info_2")),1),(0,u.createElementVNode)("span",an,(0,u.toDisplayString)(e.translate("join_group_info_3")),1),(0,u.createElementVNode)("div",ln,[(0,u.createVNode)(_,{src:e.weChat_url,fit:"contain",width:"173",height:"173",style:{}},null,8,["src"])])]),(0,u.createElementVNode)("div",un,[(0,u.createElementVNode)("div",{class:"flexC",style:{width:"100%",height:"100%","align-items":"center"},onClick:t[15]||(t[15]=(...t)=>e.joinGroupClose&&e.joinGroupClose(...t))},[(0,u.createElementVNode)("span",null,(0,u.toDisplayString)(e.translate("confirm")),1)])])])])),_:1},8,["onClickOverlay","show"])],64)}var dn=i(2009),hn=i(2175),pn={props:{user:Object,item:Object,index:Number,donate_toggle_show:Boolean},data:function(){return{lang:[],languageChecked:"zh-CN",buy_num:1,goods:{},showcomputed:this.show,donate_popup_show:!0,buy_popup_qrcode:!1,donate_popup_qrcode:!1,qr_url:void 0,donate_price:0,show_designated:"flex",show_other:"none",tmpOther:0,other_money:"",preview_language:{en:{js_toast_fail:"Wrong. Please contact us with Wechat: link3cc888",js_language_tip:"Language changed, your friend will see it in ",enter_correct_amount:"Please enter the correct amount, with a minimum amount of 0.5",enter_correct_amount_max:"Please enter the correct amount, with a maximum amount of 2000",open_name:"Service activation",goods_time:"Per 30days",num:"Purchase months",total:"Total amount",cancel:"Cancel",buy:"Activate",other_amounts:"Other amounts",fixed_amount:"Fixed Amount",confirm:"Confirm",supporting_authors:"Supporting Authors",web_author:"Web Author",Pay_to:"Pay to ",Pay_to_:"",cash:"Cash Register",scan:"Please use wechat scan the QR code to pay",join_group_info_1:"The service has been temporarily disabled by the Link3's administrator,",join_group_info_2:"The restoration time will be notified separately.",join_group_info_3:"You can join the Link3's official user group to stay updated on the latest developments."},"zh-CN":{js_toast_fail:"失败，请联系客服",js_language_tip:"已切换语言，您的用户将看到",enter_correct_amount:"请输入正确的金额，最小金额为0.5",enter_correct_amount_max:"请输入正确的金额，最大金额为2000",open_name:"开通服务",goods_time:"30天",num:"购买月数",total:"合计金额",cancel:"取消",buy:"立即开通",other_amounts:"其他金额",fixed_amount:"固定金额",confirm:"确定",supporting_authors:"支持作者",web_author:"网页作者",Pay_to:"向",Pay_to_:"支付",cash:"收银台",scan:"请使用微信扫码支付",join_group_info_1:"Link3的系统管理员暂时关闭了此服务，",join_group_info_2:"恢复时间另行通知。",join_group_info_3:"加入Link3官方用户群，了解最新进展"},"zh-HK":{js_toast_fail:"失敗，請聯繫客服",js_language_tip:"已切換語言，您的用戶將看到",enter_correct_amount:"請輸入正確的金額，最小金額為0.5",enter_correct_amount_max:"請輸入正確的金額，最大金額為2000",open_name:"開通服務",goods_time:"30天",num:"購買月數",total:"合計金額",cancel:"取消",buy:"立即開通",other_amounts:"其他金額",fixed_amount:"固定金額",confirm:"確定",supporting_authors:"支持作者",web_author:"網頁作者",Pay_to:"向",Pay_to_:"支付",cash:"收銀台",scan:"請使用微信掃碼支付",join_group_info_1:"Link3的系統管理員暫時關閉了此服務，",join_group_info_2:"恢復時間另行通知。",join_group_info_3:"加入Link3官方用戶群，了解最新進展"}},bpopupWidth:.86*window.innerWidth>375?375:.86*window.innerWidth,windowInnerHeight:window.innerHeight+"px",show_auth_popup:!1,join_group:!1}},computed:{...(0,C.mapState)({show_buy_popup_link3:e=>e.page.local_user_data.show_buy_popup_link3,show_buy_qrcode_link3:e=>e.page.local_user_data.show_buy_qrcode_link3,show_buy_qrcode_url_link3:e=>e.page.local_user_data.show_buy_qrcode_url_link3,buy_popup_goods_index_link3:e=>e.page.local_user_data.buy_popup_goods_index_link3,show_donate_popup_link3:e=>e.page.local_user_data.show_donate_popup_link3,show_donate_qrcode_link3:e=>e.page.local_user_data.show_donate_qrcode_link3,donate_popup_goods_index_link3:e=>e.page.local_user_data.donate_popup_goods_index_link3,user_guest:e=>e.user.user_guest,reclick_buy_popup_link3:e=>e.page.local_user_data.reclick_buy_popup_link3,reclick_donate_popup_link3:e=>e.page.local_user_data.reclick_donate_popup_link3,temporary_user:e=>e.user.temporary_user}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},buy_popup_show_c:function(){return!!this.donate_toggle_show&&this.donate_popup_show},payment_amount:function(){return this.type_value.payment_amount?this.type_value.payment_amount:""},present_language_c:function(){return this.present_language()},weChat_url(){return p.v.qiniuUrl+"/others/auth/qrcode_new.png"},isWeixin(){return(0,A.Jv)().weixin},isMiniprogram(){return(0,A.Jv)().miniprogram}},emits:["donateToggleShowEmit"],inject:["present_language"],methods:{...(0,C.mapMutations)({updateUserState:"user/updateUserState",updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState",updateUserGuestOrders:"user/updateUserGuestOrders"}),buyClose(){this.donate_popup_show=!1,this.updateLocalUserDataState({show_buy_popup_link3:!1,show_donate_popup_link3:!1}),this.$emit("donateToggleShowEmit",!1)},open:(0,A.Ds)((async function(){if(this.isMiniprogram)return this.buyClose(),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.user.username?p.v.link3PreviewPageUrl+"/"+this.user.username:""});if(!de.Z.getToken()||"undefined"==de.Z.getToken()||""===this.user_guest.unid)return this.show_auth_popup=!0,void this.updateLocalUserDataState({show_buy_popup_link3:!1,show_donate_popup_link3:!1,reclick_donate_popup_link3:!0,reclick_buy_popup_link3:!1});{let e=await he.LO();if(!e)return!1;"0001"==e.code&&(this.updateUserGuestState(e.data),e.data&&e.data.vip&&e.data.vip.link3_orders&&this.updateUserGuestOrders(e.data.vip.link3_orders))}this.updateLocalUserDataState({reclick_buy_popup_link3:!1,reclick_donate_popup_link3:!1}),this.donate_popup_show=!1,this.join_group=!0}),700),closePAuthPage(e){this.donate_popup_show=!1,e||this.updateLocalUserDataState({module_id_reclick:this.donate_popup_goods_index_link3?this.donate_popup_goods_index_link3:999999,favorite_reclick:!1,reclick_buy_popup_link3:!1,reclick_donate_popup_link3:!0}),this.show_auth_popup=e},goodsIndex(e){switch(e){case"01":return 0;case"02":return 1;default:return e}},translate:function(e){return this.preview_language[this.present_language_c][e]},qrcodeClose(){this.donate_popup_show=!1,this.updateLocalUserDataState({show_donate_qrcode_link3:!1,show_buy_qrcode_link3:!1,show_buy_popup_link3:!1,show_donate_popup_link3:!1}),this.other_money="",this.show_designated="flex",this.show_other="none",this.$emit("donateToggleShowEmit",!1)},pAuthPageClose(){this.donate_popup_show=!1,this.updateLocalUserDataState({show_donate_qrcode_link3:!1,show_buy_qrcode_link3:!1,show_buy_popup_link3:!1,show_donate_popup_link3:!1,reclick_buy_popup_link3:!1,reclick_donate_popup_link3:!1}),this.$emit("donateToggleShowEmit",!1)},nameslice(e,t){const i=t||13;return this.getLength(e,i)[1]+1<e.length?e.slice(0,this.getLength(e,i)[1])+"...":e},getLength(e,t){let i=0,n=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);if(n=s,i+=r>=0&&r<=128?1:2,i>t)return[i,s]}return[i,n]},designatedAmounts:(0,A.Ds)((async function(e){this.show_designated="flex",this.show_other="none",this.donate_price=e,this.goods.price=e,this.open()}),200),otherAmountsConfirm:(0,A.Ds)((async function(e){try{if(!e||parseFloat(e)<.5||0==parseFloat(e))return void ce.Toast.fail({message:this.translate("enter_correct_amount"),position:"top"});if(e&&parseFloat(e)>2e3)return void ce.Toast.fail({message:this.translate("enter_correct_amount_max"),position:"top"});if(e.indexOf(".")>-1&&e.toString().split(".").pop().length>2){let t=(0,A.q1)(e);if(!(e-t==0&&e>=.5&&e<=2e3))return e-t==0&&e>2e3?void ce.Toast.fail(this.translate("enter_correct_amount_max")):void ce.Toast.fail(this.translate("enter_correct_amount"));this.donate_price=t,this.goods.price=t,this.open()}this.donate_price=e,this.goods.price=e,this.open()}catch(t){ce.Toast.fail(this.translate("enter_correct_amount"))}}),200),fixedAmounts(){this.show_designated="flex",this.show_other="none"},otherAmounts(){this.other_money="",this.show_designated="none",this.show_other="flex"},otherFocus:function(){this.tmpOther=this.other_money},otherBlur:async function(){this.other_money;this.tmpOther},joinGroupClose(){this.donate_popup_show=!1,this.updateLocalUserDataState({show_buy_popup_link3:!1,show_donate_popup_link3:!1}),this.$emit("donateToggleShowEmit",!1),this.join_group=!1}},updated(){de.Z.getToken()&&this.reclick_donate_popup_link3&&this.goods.price>0&&this.open()},watch:{donate_popup_goods_index_link3:{handler(e){this.goods.price=parseFloat(this.donate_price),this.goods.name=this.type_value.title,this.goods.goodsid=e,this.goods.business_code="50",this.goods.c_unid=this.user.unid},immediate:!0},show_donate_popup_link3:{handler(e,t){"boolean"==typeof e&&(e&&(this.buy_num=1),this.donate_popup_show=e)}},show_buy_qrcode_link3:{handler(e,t){"boolean"==typeof e&&(this.buy_popup_show&&this.updateLocalUserDataState({show_buy_popup_link3:!1}),this.buy_popup_qrcode=e)}},show_donate_qrcode_link3:{handler(e,t){"boolean"==typeof e&&(this.donate_popup_show&&this.updateLocalUserDataState({show_donate_popup_link3:!1}),this.donate_popup_qrcode=e)}},show_buy_qrcode_url_link3:{handler(e){this.qr_url=e}},buy_num(e){e<1&&(this.buy_num=1)},"user.setting.present_language":{handler(e,t){if(e){let t=e;"English"==e?t="en":"中文"==e&&(t="zh-CN"),this.languageChecked=t}},immediate:!0}},components:{pwxpay:dn.Z,[hn.Z.name]:hn.Z,PAuthPage:n.Z}},mn=pn;const gn=(0,_.Z)(mn,[["render",cn],["__scopeId","data-v-8ca5c91a"]]);var _n=gn;const fn={id:"Ptext",class:"main_container flexD flexBC"},yn={class:"title flexC"},vn={class:"item_container border-box flexC",style:{"flex-grow":"1"}},bn={class:"flexC buttonzone",style:{width:"100%"}},wn={class:"fs16"},kn={class:"fs16"};function Tn(e,t,i,n,s,r){const a=o.G;return(0,u.openBlock)(),(0,u.createBlock)(a,{show:e.text_toggle_show_c,"onUpdate:show":t[2]||(t[2]=t=>e.text_toggle_show_c=t),round:"",teleport:"#app",onClickOverlay:t[3]||(t[3]=t=>e.changeTextShowEmit(!1)),position:"center",style:{"--van-popup-round-border-radius":"16px"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",fn,[(0,u.createElementVNode)("div",yn,[(0,u.createElementVNode)("span",null,(0,u.toDisplayString)(e.title),1)]),(0,u.createElementVNode)("div",vn,(0,u.toDisplayString)(e.content),1),(0,u.createElementVNode)("div",bn,[(0,u.createElementVNode)("div",{id:"bt-cancel",class:"flexC",onClick:t[0]||(t[0]=t=>e.changeTextShowEmit(!1))},[(0,u.createElementVNode)("span",wn,(0,u.toDisplayString)(e.translate("js_cancel")),1)]),(0,u.createElementVNode)("div",{id:"bt-copy",class:"flexC",style:{"border-left":"1px solid #eee"},onClick:t[1]||(t[1]=(...t)=>e.copyLink3&&e.copyLink3(...t))},[(0,u.createElementVNode)("span",kn,(0,u.toDisplayString)(e.translate("js_copy")),1)])])])])),_:1},8,["show"])}var xn={props:{item:Object,index:Number,user:Object,text_toggle_show:Boolean},inject:["present_language"],data:function(){return{show_module_add_popup:"",preview_language:{en:{js_copyed_long:"Copied to clipboard",js_copyed_normal:"Copyed",js_copy:"Copy",js_copy_fail:"Failed",js_cancel:"Cancel"},"zh-CN":{js_copyed_long:"已复制到剪贴板",js_copyed_normal:"已复制",js_copy:"复制",js_copy_fail:"复制失败",js_cancel:"取消"},"zh-HK":{js_copyed_long:"已复制到剪贴板",js_copyed_normal:"已復制",js_copy:"複製",js_copy_fail:"複製失敗",js_cancel:"取消"}}}},computed:{type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},text_toggle_show_c:function(){return!!this.text_toggle_show&&this.text_toggle_show},present_language_c:function(){return this.present_language()},title:function(){return this.type_value.title?this.type_value.title:""},content:function(){return this.type_value.content?this.type_value.content:""}},methods:{changeTextShowEmit(e){this.$emit("textToggleShowEmit",e)},copyLink3:(0,A.Ds)((async function(){let e=this;(0,Ce.Z)(this.type_value.content)?(ce.Toast.success({message:e.translate("js_copyed_long"),wordBreak:"normal"}),setTimeout((()=>{this.changeTextShowEmit(!1)}),500)):ce.Toast.fail(e.translate("js_copy_fail"))}),300),translate:function(e){return this.preview_language[this.present_language_c][e]}},watch:{},mounted(){},updated:function(){},components:{}},Sn=xn;const En=(0,_.Z)(Sn,[["render",Tn],["__scopeId","data-v-1ce4337a"]]);var An=En,Cn=i(4054);const In=e=>((0,u.pushScopeId)("data-v-41383a45"),e=e(),(0,u.popScopeId)(),e),Pn={style:{overflow:"hidden"}},Nn={src:Cn,class:"img-animation",style:{width:"43px",height:"43px",position:"absolute",top:"0",left:"0",bottom:"0",right:"0",margin:"auto"},alt:""},Dn=["src"],Ln={key:0,class:"flexC",style:{"margin-top":"15px"}},On=In((()=>(0,u.createElementVNode)("div",{style:{position:"absolute",margin:"auto",bottom:"0",right:"0",left:"0",top:"0",width:"20px",height:"4px","border-radius":"2px","background-color":"#333",transform:"rotate(45deg)"}},null,-1))),Bn=In((()=>(0,u.createElementVNode)("div",{style:{position:"absolute",margin:"auto",bottom:"0",right:"0",left:"0",top:"0",width:"20px",height:"4px","border-radius":"2px","background-color":"#333",transform:"rotate(-45deg)"}},null,-1))),Un=[On,Bn];function Vn(e,t,i,n,s,r){return(0,u.openBlock)(),(0,u.createElementBlock)("div",Pn,[(0,u.createVNode)(u.Transition,{name:"drawer"},{default:(0,u.withCtx)((()=>[e.show_watched?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,class:"type",style:(0,u.normalizeStyle)([{width:"100%"},{height:e.iframe_height},{overflow:"hidden"},{background:"#eaeaea"},{position:"relative"},{"border-radius":e.my_theme_button_border_style.borderRadius}])},[(0,u.withDirectives)((0,u.createElementVNode)("img",Nn,null,512),[[u.vShow,!e.audio_url_resolved]]),(0,u.createElementVNode)("iframe",{id:"iframe-audio",style:(0,u.normalizeStyle)([{width:"100%",position:"relative","z-index":"1"},{height:e.iframe_height}]),frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",src:e.audio_url_resolved},null,12,Dn)],4)):(0,u.createCommentVNode)("",!0)])),_:1}),e.show_watched?((0,u.openBlock)(),(0,u.createElementBlock)("div",Ln,[(0,u.createElementVNode)("div",{style:{width:"28px",height:"28px",background:"#E1E1E1",position:"relative","border-radius":"50%"},onClick:t[0]||(t[0]=t=>e.toggleCloseAudio(!1))},Un)])):(0,u.createCommentVNode)("",!0)])}var Rn={props:{item:Object,index:Number,user:Object,style_border:String,video_toggle_show:Boolean},data:function(){return{show_watched:!1}},computed:{...(0,C.mapState)({local_index_show:e=>e.page.local_user_data}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},audio_data:function(){return"audio"==this.item.type||"playlist"==this.item.type?(0,A.uE)({...this.type_value,item_type:this.item.type}):{}},iframe_height:function(){return"playlist"==this.item.type?"330px":(this.audio_data.audio_type,"wangyiyunyinyue"===this.audio_data.audio_type?"84px":"66.4px")},title:function(){return this.type_value.title?this.type_value.title:""},audio_url_resolved:function(){return this.audio_data&&this.audio_data.audio_url_resolved?this.audio_data.audio_url_resolved:""},type_transition(){return"playlist"==this.item.type?"playlist":"wangyiyunyinyue"===this.audio_data.audio_type?"wyy":"tme"},isMiniprogram(){return(0,A.Jv)().miniprogram},my_theme_button_border_style(){let e={borderRadius:this.style_border};return"24px"==this.style_border&&(e.borderRadius="8px"),e}},methods:{toggleCloseAudio(e){this.$emit("toggleShowEmit",e)}},watch:{video_toggle_show:{handler:function(e,t){e!==t&&((0,A.Jv)().miniprogram||(this.show_watched=e))}},"audio_data.audio_type":{handler:function(e){e||this.toggleCloseAudio(!1)},deep:!0}},mounted(){},updated:function(){},components:{}},jn=Rn;const Mn=(0,_.Z)(jn,[["render",Vn],["__scopeId","data-v-41383a45"]]);var Fn=Mn;const qn={class:"preview_box",style:{width:"100%",position:"relative"}},zn=["id"],Hn={class:"preview_btn_hover",style:{width:"230px",height:"56px",background:"rgba(0,0,0,0.5)",border:"1px solid #fff","border-radius":"8px",color:"#fff","line-height":"56px","text-align":"center",margin:"auto"}},Wn=["id"];function Gn(e,t,i,n,s,r){const o=B.Z;return(0,u.openBlock)(),(0,u.createElementBlock)(u.Fragment,null,[(0,u.createElementVNode)("div",qn,[(0,u.createElementVNode)("video",{id:"video"+this.item.unid,"webkit-playsinline":"true","x-webkit-airplay":"true",playsinline:"true","x5-video-player-type":"h5","x5-video-orientation":"h5","x5-video-player-fullscreen":"true",controlsList:"nofullscreen","data-setup":'{"userActions": {"doubleClick": false }}',class:"video-js vjs-default-skin",style:{"object-fit":"contain",width:"100%",height:"100%","z-index":"0"}},null,8,zn),(0,u.withDirectives)((0,u.createElementVNode)("div",{onClick:t[0]||(t[0]=(...e)=>r.Decryption&&r.Decryption(...e)),style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",margin:"auto",display:"flex","justify-content":"center","align-items":"center",background:"rgba(0,0,0,0.5)"}},[(0,u.createElementVNode)("div",Hn,(0,u.toDisplayString)(r.translate("preview_ended")),1)],512),[[u.vShow,s.show_trial_end_reminder]]),(0,u.withDirectives)((0,u.createElementVNode)("div",{onClick:t[1]||(t[1]=(...e)=>r.Decryption&&r.Decryption(...e)),id:"video_info_"+e.video,class:"fs12",style:{background:"#EAEBF1",height:"32px","line-height":"32px","padding-left":"16px",color:"#000"}},(0,u.toDisplayString)(r.translate("preview_lasting"))+" "+(0,u.toDisplayString)(s.trial_viewing_time_num)+"s ",9,Wn),[[u.vShow,s.show_trial_time]])]),s.encrypted_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(o,{key:0,onEncryptedToggleShowEmit:r.encryptionToggleShow,encrypted_toggle_show:s.encrypted_toggle_show,onConfirm:r.verifyPasswordSuccess,item:i.item,index:e.index,user:i.user},null,8,["onEncryptedToggleShowEmit","encrypted_toggle_show","onConfirm","item","index","user"])):(0,u.createCommentVNode)("",!0)],64)}i(3462),i(7380),i(1118),i(2087);var Xn=i(5743),Qn=i.n(Xn),Kn=i(9004),Zn=i.n(Kn),Yn=i(6274),Jn=i.n(Yn),$n=i(4988),es=i.n($n),ts=i(3470),is=i.n(ts),ns=i(2648),ss=i.n(ns),rs=i(2940),os=i.n(rs),as="http://example.com",ls=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Qn().location&&Qn().location.href||"");var i="function"===typeof Qn().URL,n=/^\/\//.test(e),s=!Qn().location&&!/\/\//i.test(e);if(i?e=new(Qn().URL)(e,Qn().location||as):/\/\//i.test(e)||(e=os().buildAbsoluteURL(Qn().location&&Qn().location.href||"",e)),i){var r=new URL(t,e);return s?r.href.slice(as.length):n?r.href.slice(r.protocol.length):r.href}return os().buildAbsoluteURL(e,t)},us=ls;function cs(){return cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},cs.apply(this,arguments)}var ds=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var s=Array.prototype.slice.call(arguments,1),r=t.length,o=0;o<r;++o)t[o].apply(this,s)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),hs=(i(2801),function(e){return Qn().atob?Qn().atob(e):Buffer.from(e,"base64").toString("binary")});function ps(e){for(var t=hs(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}
/*! @name m3u8-parser @version 6.1.0 @license Apache-2.0 */
class ms extends ds{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const gs=String.fromCharCode(9),_s=function(e){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),i={};return t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),i},fs=function(){const e="[^=]*",t='"[^"]*"|[^,]*',i="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+i+")")},ys=function(e){const t={};if(!e)return t;const i=e.split(fs());let n,s=i.length;while(s--)""!==i[s]&&(n=/([^=]*)=(.*)/.exec(i[s]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),t[n[0]]=n[1]);return t};class vs extends ds{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),0===e.length)return;if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});const n=this.tagMappers.reduce(((t,i)=>{const n=i(e);return n===e?t:t.concat([n])}),[e]);n.forEach((e=>{for(let t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e),t)return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void this.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e),t)return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e),t)return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e),t)return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void this.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e),t)return i=cs(_s(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e),t)return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-MAP:(.*)$/.exec(e),t){if(i={type:"tag",tagType:"map"},t[1]){const e=ys(t[1]);e.URI&&(i.uri=e.URI),e.BYTERANGE&&(i.byterange=_s(e.BYTERANGE))}this.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e),t){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=ys(t[1]),i.attributes.RESOLUTION){const e=i.attributes.RESOLUTION.split("x"),t={};e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),i.attributes.RESOLUTION=t}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e),t)return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=ys(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e),t)this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e),t)return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-KEY:(.*)$/.exec(e),t)return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=ys(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i);if(t=/^#EXT-X-START:(.*)$/.exec(e),t)return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=ys(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e),t)return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e),t)return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(e),t)return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-SKIP:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"skip"},i.attributes=ys(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(gs)),void this.trigger("data",i);if(t=/^#EXT-X-PART:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"part"},i.attributes=ys(t[1]),["DURATION"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=/YES/.test(i.attributes[e]))})),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=_s(i.attributes.BYTERANGE)),void this.trigger("data",i);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"server-control"},i.attributes=ys(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=/YES/.test(i.attributes[e]))})),void this.trigger("data",i);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"part-inf"},i.attributes=ys(t[1]),["PART-TARGET"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),void this.trigger("data",i);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"preload-hint"},i.attributes=ys(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(i.attributes.hasOwnProperty(e)){i.attributes[e]=parseInt(i.attributes[e],10);const t="BYTERANGE-LENGTH"===e?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[t]=i.attributes[e],delete i.attributes[e]}})),void this.trigger("data",i);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e),t&&t[1])return i={type:"tag",tagType:"rendition-report"},i.attributes=ys(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseInt(i.attributes[e],10))})),void this.trigger("data",i);if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(e),t&&t[1]){i={type:"tag",tagType:"daterange"},i.attributes=ys(t[1]),["ID","CLASS"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=String(i.attributes[e]))})),["START-DATE","END-DATE"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=new Date(i.attributes[e]))})),["DURATION","PLANNED-DURATION"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=parseFloat(i.attributes[e]))})),["END-ON-NEXT"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=/YES/i.test(i.attributes[e]))})),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach((function(e){i.attributes.hasOwnProperty(e)&&(i.attributes[e]=i.attributes[e].toString(16))}));const e=/^X-([A-Z]+-)+[A-Z]+$/;for(const t in i.attributes){if(!e.test(t))continue;const n=/[0-9A-Fa-f]{6}/g.test(i.attributes[t]),s=/^\d+(\.\d+)?$/.test(i.attributes[t]);i.attributes[t]=n?i.attributes[t].toString(16):s?parseFloat(i.attributes[t]):String(i.attributes[t])}this.trigger("data",i)}else this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}))}addParser({expression:e,customType:t,dataParser:i,segment:n}){"function"!==typeof i&&(i=e=>e),this.customParsers.push((s=>{const r=e.exec(s);if(r)return this.trigger("data",{type:"custom",data:i(s),customType:t,segment:n}),!0}))}addTagMapper({expression:e,map:t}){const i=i=>e.test(i)?t(i):i;this.tagMappers.push(i)}}const bs=e=>e.toLowerCase().replace(/-(\w)/g,(e=>e[1].toUpperCase())),ws=function(e){const t={};return Object.keys(e).forEach((function(i){t[bs(i)]=e[i]})),t},ks=function(e){const{serverControl:t,targetDuration:i,partTargetDuration:n}=e;if(!t)return;const s="#EXT-X-SERVER-CONTROL",r="holdBack",o="partHoldBack",a=i&&3*i,l=n&&2*n;i&&!t.hasOwnProperty(r)&&(t[r]=a,this.trigger("info",{message:`${s} defaulting HOLD-BACK to targetDuration * 3 (${a}).`})),a&&t[r]<a&&(this.trigger("warn",{message:`${s} clamping HOLD-BACK (${t[r]}) to targetDuration * 3 (${a})`}),t[r]=a),n&&!t.hasOwnProperty(o)&&(t[o]=3*n,this.trigger("info",{message:`${s} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[o]}).`})),n&&t[o]<l&&(this.trigger("warn",{message:`${s} clamping PART-HOLD-BACK (${t[o]}) to partTargetDuration * 2 (${l}).`}),t[o]=l)};class Ts extends ds{constructor(){super(),this.lineStream=new ms,this.parseStream=new vs,this.lineStream.pipe(this.parseStream);const e=this,t=[];let i,n,s={},r=!1;const o=function(){},a={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let u=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let c=0,d=0;const h={};this.on("end",(()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&i&&(s.map=i),!s.key&&n&&(s.key=n),s.timeline||"number"!==typeof u||(s.timeline=u),this.manifest.preloadSegment=s)})),this.parseStream.on("data",(function(p){let m,g;({tag(){({version(){p.version&&(this.manifest.version=p.version)},"allow-cache"(){this.manifest.allowCache=p.allowed,"allowed"in p||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const e={};"length"in p&&(s.byterange=e,e.length=p.length,"offset"in p||(p.offset=c)),"offset"in p&&(s.byterange=e,e.offset=p.offset),c=e.offset+e.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),p.duration>0&&(s.duration=p.duration),0===p.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(p.attributes)if("NONE"!==p.attributes.METHOD)if(p.attributes.URI){if("com.apple.streamingkeydelivery"===p.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:p.attributes});if("com.microsoft.playready"===p.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:p.attributes.URI});if(p.attributes.KEYFORMAT===l){const e=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return-1===e.indexOf(p.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===p.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==p.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):p.attributes.KEYID&&"0x"===p.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:p.attributes.KEYFORMAT,keyId:p.attributes.KEYID.substring(2)},pssh:ps(p.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}p.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:p.attributes.METHOD||"AES-128",uri:p.attributes.URI},"undefined"!==typeof p.attributes.IV&&(n.iv=p.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(p.number)?this.manifest.mediaSequence=p.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+p.number})},"discontinuity-sequence"(){isFinite(p.number)?(this.manifest.discontinuitySequence=p.number,u=p.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+p.number})},"playlist-type"(){/VOD|EVENT/.test(p.playlistType)?this.manifest.playlistType=p.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+p.playlist})},map(){i={},p.uri&&(i.uri=p.uri),p.byterange&&(i.byterange=p.byterange),n&&(i.key=n)},"stream-inf"(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||a,p.attributes?(s.attributes||(s.attributes={}),cs(s.attributes,p.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||a,!(p.attributes&&p.attributes.TYPE&&p.attributes["GROUP-ID"]&&p.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const e=this.manifest.mediaGroups[p.attributes.TYPE];e[p.attributes["GROUP-ID"]]=e[p.attributes["GROUP-ID"]]||{},m=e[p.attributes["GROUP-ID"]],g={default:/yes/i.test(p.attributes.DEFAULT)},g.default?g.autoselect=!0:g.autoselect=/yes/i.test(p.attributes.AUTOSELECT),p.attributes.LANGUAGE&&(g.language=p.attributes.LANGUAGE),p.attributes.URI&&(g.uri=p.attributes.URI),p.attributes["INSTREAM-ID"]&&(g.instreamId=p.attributes["INSTREAM-ID"]),p.attributes.CHARACTERISTICS&&(g.characteristics=p.attributes.CHARACTERISTICS),p.attributes.FORCED&&(g.forced=/yes/i.test(p.attributes.FORCED)),m[p.attributes.NAME]=g},discontinuity(){u+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=p.dateTimeString,this.manifest.dateTimeObject=p.dateTimeObject),s.dateTimeString=p.dateTimeString,s.dateTimeObject=p.dateTimeObject},targetduration(){!isFinite(p.duration)||p.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+p.duration}):(this.manifest.targetDuration=p.duration,ks.call(this,this.manifest))},start(){p.attributes&&!isNaN(p.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:p.attributes["TIME-OFFSET"],precise:p.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){s.cueOut=p.data},"cue-out-cont"(){s.cueOutCont=p.data},"cue-in"(){s.cueIn=p.data},skip(){this.manifest.skip=ws(p.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",p.attributes,["SKIPPED-SEGMENTS"])},part(){r=!0;const e=this.manifest.segments.length,t=ws(p.attributes);s.parts=s.parts||[],s.parts.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=d),d=t.byterange.offset+t.byterange.length);const i=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${i} for segment #${e}`,p.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((e,t)=>{e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const e=this.manifest.serverControl=ws(p.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),ks.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const e=this.manifest.segments.length,t=ws(p.attributes),i=t.type&&"PART"===t.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=i?d:0,i&&(d=t.byterange.offset+t.byterange.length)));const n=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${n} for segment #${e}`,p.attributes,["TYPE","URI"]),t.type)for(let r=0;r<s.preloadHints.length-1;r++){const i=s.preloadHints[r];i.type&&(i.type===t.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${n} for segment #${e} has the same TYPE ${t.type} as preload hint #${r}`}))}},"rendition-report"(){const e=ws(p.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);const t=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];r&&i.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${t}`,p.attributes,i)},"part-inf"(){this.manifest.partInf=ws(p.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",p.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),ks.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(ws(p.attributes));const e=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${e}`,p.attributes,["ID","START-DATE"]);const t=this.manifest.daterange[e];t.endDate&&t.startDate&&new Date(t.endDate)<new Date(t.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),t.duration&&t.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),t.plannedDuration&&t.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const i=!!t.endOnNext;if(i&&!t.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),i&&(t.duration||t.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),t.duration&&t.endDate){const i=t.startDate,n=i.setSeconds(i.getSeconds()+t.duration);this.manifest.daterange[e].endDate=new Date(n)}if(t&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),h[t.id]){for(const n in h[t.id])if(h[t.id][n]!==t[n]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}}else h[t.id]=t}}[p.tagType]||o).call(e)},uri(){s.uri=p.uri,t.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),n&&(s.key=n),s.timeline=u,i&&(s.map=i),d=0,s={}},comment(){},custom(){p.segment?(s.custom=s.custom||{},s.custom[p.customType]=p.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[p.customType]=p.data)}})[p.type].call(e)}))}warnOnMissingAttributes_(e,t,i){const n=[];i.forEach((function(e){t.hasOwnProperty(e)||n.push(e)})),n.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${n.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var xs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Ss=["video","audio","text"],Es=["Video","Audio","Text"],As=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,i){var n=("00"+Number(t).toString(16)).slice(-2),s=("00"+Number(i).toString(16)).slice(-2);return"avc1."+n+"00"+s})):e},Cs=function(e){void 0===e&&(e="");var t=e.split(","),i=[];return t.forEach((function(e){var t;e=e.trim(),Ss.forEach((function(n){var s=xs[n].exec(e.toLowerCase());if(s&&!(s.length<=1)){t=n;var r=e.substring(0,s[1].length),o=e.replace(r,"");i.push({type:r,details:o,mediaType:n})}})),t||i.push({type:e,details:"",mediaType:"unknown"})})),i},Is=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var s=i[n];if(s.default&&s.playlists)return Cs(s.playlists[0].attributes.CODECS)}return null},Ps=function(e){return void 0===e&&(e=""),xs.audio.test(e.trim().toLowerCase())},Ns=function(e){return void 0===e&&(e=""),xs.text.test(e.trim().toLowerCase())},Ds=function(e){if(e&&"string"===typeof e){var t=e.toLowerCase().split(",").map((function(e){return As(e.trim())})),i="video";1===t.length&&Ps(t[0])?i="audio":1===t.length&&Ns(t[0])&&(i="application");var n="mp4";return t.every((function(e){return xs.mp4.test(e)}))?n="mp4":t.every((function(e){return xs.webm.test(e)}))?n="webm":t.every((function(e){return xs.ogg.test(e)}))&&(n="ogg"),i+"/"+n+';codecs="'+e+'"'}},Ls=function(e){return void 0===e&&(e=""),Qn().MediaSource&&Qn().MediaSource.isTypeSupported&&Qn().MediaSource.isTypeSupported(Ds(e))||!1},Os=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<Es.length;t++){var i=Es[t];if(xs["muxer"+i].test(e))return!0}return!1}))},Bs="mp4a.40.2",Us="avc1.4d400d",Vs=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Rs=/^application\/dash\+xml/i,js=function(e){return Vs.test(e)?"hls":Rs.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},Ms=function(e){return e.toString(2).length},Fs=function(e){return Math.ceil(Ms(e)/8)},qs=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},zs=function(e){return qs(e)},Hs=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||zs(e)||e instanceof ArrayBuffer||(e="number"!==typeof e||"number"===typeof e&&e!==e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Ws=Qn().BigInt||Number,Gs=[Ws("0x1"),Ws("0x100"),Ws("0x10000"),Ws("0x1000000"),Ws("0x100000000"),Ws("0x10000000000"),Ws("0x1000000000000"),Ws("0x100000000000000"),Ws("0x10000000000000000")],Xs=(function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}(),function(e,t){var i=void 0===t?{}:t,n=i.signed,s=void 0!==n&&n,r=i.le,o=void 0!==r&&r;e=Hs(e);var a=o?"reduce":"reduceRight",l=e[a]?e[a]:Array.prototype[a],u=l.call(e,(function(t,i,n){var s=o?n:Math.abs(n+1-e.length);return t+Ws(i)*Gs[s]}),Ws(0));if(s){var c=Gs[e.length]/Ws(2)-Ws(1);u=Ws(u),u>c&&(u-=c,u-=c,u-=Ws(2))}return Number(u)}),Qs=function(e,t){var i=void 0===t?{}:t,n=i.le,s=void 0!==n&&n;("bigint"!==typeof e&&"number"!==typeof e||"number"===typeof e&&e!==e)&&(e=0),e=Ws(e);for(var r=Fs(e),o=new Uint8Array(new ArrayBuffer(r)),a=0;a<r;a++){var l=s?a:Math.abs(a+1-o.length);o[l]=Number(e/Gs[a]&Ws(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=0===a?1:2)}return o},Ks=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Hs(e));try{return decodeURIComponent(escape(t))}catch(ST){}return t},Zs=function(e,t){if("string"!==typeof e&&e&&"function"===typeof e.toString&&(e=e.toString()),"string"!==typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i},Ys=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!==typeof e})),t.length<=1)return Hs(t[0]);var n=t.reduce((function(e,t,i){return e+(t.byteLength||t.length)}),0),s=new Uint8Array(n),r=0;return t.forEach((function(e){e=Hs(e),s.set(e,r),r+=e.byteLength})),s},Js=function(e,t,i){var n=void 0===i?{}:i,s=n.offset,r=void 0===s?0:s,o=n.mask,a=void 0===o?[]:o;e=Hs(e),t=Hs(t);var l=t.every?t.every:Array.prototype.every;return t.length&&e.length-r>=t.length&&l.call(t,(function(t,i){var n=a[i]?a[i]&e[r+i]:e[r+i];return t===n}))},$s="http://example.com",er=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Qn().location&&Qn().location.href||"");var i="function"===typeof Qn().URL,n=/^\/\//.test(e),s=!Qn().location&&!/\/\//i.test(e);if(i?e=new(Qn().URL)(e,Qn().location||$s):/\/\//i.test(e)||(e=os().buildAbsoluteURL(Qn().location&&Qn().location.href||"",e)),i){var r=new URL(t,e);return s?r.href.slice($s.length):n?r.href.slice(r.protocol.length):r.href}return os().buildAbsoluteURL(e,t)},tr=er,ir=function(e,t,i){t.forEach((function(t){for(var n in e.mediaGroups[t])for(var s in e.mediaGroups[t][n]){var r=e.mediaGroups[t][n][s];i(r,t,n,s)}}))},nr=function(e){return Qn().atob?Qn().atob(e):Buffer.from(e,"base64").toString("binary")};function sr(e){for(var t=nr(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}var rr=i(7978);const or=e=>!!e&&"object"===typeof e,ar=(...e)=>e.reduce(((e,t)=>("object"!==typeof t||Object.keys(t).forEach((i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):or(e[i])&&or(t[i])?e[i]=ar(e[i],t[i]):e[i]=t[i]})),e)),{}),lr=e=>Object.keys(e).map((t=>e[t])),ur=(e,t)=>{const i=[];for(let n=e;n<t;n++)i.push(n);return i},cr=e=>e.reduce(((e,t)=>e.concat(t)),[]),dr=e=>{if(!e.length)return[];const t=[];for(let i=0;i<e.length;i++)t.push(e[i]);return t},hr=(e,t)=>e.reduce(((e,i,n)=>(i[t]&&e.push(n),e)),[]),pr=(e,t)=>lr(e.reduce(((e,i)=>(i.forEach((i=>{e[t(i)]=i})),e)),{}));var mr={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const gr=({baseUrl:e="",source:t="",range:i="",indexRange:n=""})=>{const s={uri:t,resolvedUri:tr(e||"",t)};if(i||n){const e=i||n,t=e.split("-");let r,o=Qn().BigInt?Qn().BigInt(t[0]):parseInt(t[0],10),a=Qn().BigInt?Qn().BigInt(t[1]):parseInt(t[1],10);o<Number.MAX_SAFE_INTEGER&&"bigint"===typeof o&&(o=Number(o)),a<Number.MAX_SAFE_INTEGER&&"bigint"===typeof a&&(a=Number(a)),r="bigint"===typeof a||"bigint"===typeof o?Qn().BigInt(a)-Qn().BigInt(o)+Qn().BigInt(1):a-o+1,"bigint"===typeof r&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),s.byterange={length:r,offset:o}}return s},_r=e=>{let t;return t="bigint"===typeof e.offset||"bigint"===typeof e.length?Qn().BigInt(e.offset)+Qn().BigInt(e.length)-Qn().BigInt(1):e.offset+e.length-1,`${e.offset}-${t}`},fr=e=>(e&&"number"!==typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e),yr={static(e){const{duration:t,timescale:i=1,sourceDuration:n,periodDuration:s}=e,r=fr(e.endNumber),o=t/i;return"number"===typeof r?{start:0,end:r}:"number"===typeof s?{start:0,end:s/o}:{start:0,end:n/o}},dynamic(e){const{NOW:t,clientOffset:i,availabilityStartTime:n,timescale:s=1,duration:r,periodStart:o=0,minimumUpdatePeriod:a=0,timeShiftBufferDepth:l=1/0}=e,u=fr(e.endNumber),c=(t+i)/1e3,d=n+o,h=c+a,p=h-d,m=Math.ceil(p*s/r),g=Math.floor((c-d-l)*s/r),_=Math.floor((c-d)*s/r);return{start:Math.max(0,g),end:"number"===typeof u?u:Math.min(m,_)}}},vr=e=>t=>{const{duration:i,timescale:n=1,periodStart:s,startNumber:r=1}=e;return{number:r+t,duration:i/n,timeline:s,time:t*i}},br=e=>{const{type:t,duration:i,timescale:n=1,periodDuration:s,sourceDuration:r}=e,{start:o,end:a}=yr[t](e),l=ur(o,a).map(vr(e));if("static"===t){const e=l.length-1,t="number"===typeof s?s:r;l[e].duration=t-i/n*e}return l},wr=e=>{const{baseUrl:t,initialization:i={},sourceDuration:n,indexRange:s="",periodStart:r,presentationTime:o,number:a=0,duration:l}=e;if(!t)throw new Error(mr.NO_BASE_URL);const u=gr({baseUrl:t,source:i.sourceURL,range:i.range}),c=gr({baseUrl:t,source:t,indexRange:s});if(c.map=u,l){const t=br(e);t.length&&(c.duration=t[0].duration,c.timeline=t[0].timeline)}else n&&(c.duration=n,c.timeline=r);return c.presentationTime=o||r,c.number=a,[c]},kr=(e,t,i)=>{const n=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,r=e.timeline||0,o=e.sidx.byterange,a=o.offset+o.length,l=t.timescale,u=t.references.filter((e=>1!==e.referenceType)),c=[],d=e.endList?"static":"dynamic",h=e.sidx.timeline;let p,m=h,g=e.mediaSequence||0;p="bigint"===typeof t.firstOffset?Qn().BigInt(a)+t.firstOffset:a+t.firstOffset;for(let _=0;_<u.length;_++){const e=t.references[_],o=e.referencedSize,a=e.subsegmentDuration;let u;u="bigint"===typeof p?p+Qn().BigInt(o)-Qn().BigInt(1):p+o-1;const f=`${p}-${u}`,y={baseUrl:i,timescale:l,timeline:r,periodStart:h,presentationTime:m,number:g,duration:a,sourceDuration:s,indexRange:f,type:d},v=wr(y)[0];n&&(v.map=n),c.push(v),p+="bigint"===typeof p?Qn().BigInt(o):o,m+=a/l,g++}return e.segments=c,e},Tr=["AUDIO","SUBTITLES"],xr=1/60,Sr=e=>pr(e,(({timeline:e})=>e)).sort(((e,t)=>e.timeline>t.timeline?1:-1)),Er=(e,t)=>{for(let i=0;i<e.length;i++)if(e[i].attributes.NAME===t)return e[i];return null},Ar=e=>{let t=[];return ir(e,Tr,((e,i,n,s)=>{t=t.concat(e.playlists||[])})),t},Cr=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach(((t,i)=>{t.number=e.mediaSequence+i}))},Ir=({oldPlaylists:e,newPlaylists:t,timelineStarts:i})=>{t.forEach((t=>{t.discontinuitySequence=i.findIndex((function({timeline:e}){return e===t.timeline}));const n=Er(e,t.attributes.NAME);if(!n)return;if(t.sidx)return;const s=t.segments[0],r=n.segments.findIndex((function(e){return Math.abs(e.presentationTime-s.presentationTime)<xr}));if(-1===r)return Cr({playlist:t,mediaSequence:n.mediaSequence+n.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!n.segments.length&&t.timeline>n.timeline||n.segments.length&&t.timeline>n.segments[n.segments.length-1].timeline)&&t.discontinuitySequence--);const o=n.segments[r];o.discontinuity&&!s.discontinuity&&(s.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),Cr({playlist:t,mediaSequence:n.segments[r].number})}))},Pr=({oldManifest:e,newManifest:t})=>{const i=e.playlists.concat(Ar(e)),n=t.playlists.concat(Ar(t));return t.timelineStarts=Sr([e.timelineStarts,t.timelineStarts]),Ir({oldPlaylists:i,newPlaylists:n,timelineStarts:t.timelineStarts}),t},Nr=e=>e&&e.uri+"-"+_r(e.byterange),Dr=e=>{const t=lr(e.reduce(((e,t)=>{const i=t.attributes.id+(t.attributes.lang||"");return e[i]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),e[i].segments.push(...t.segments)),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):(e[i]=t,e[i].attributes.timelineStarts=[]),e[i].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{}));return t.map((e=>(e.discontinuityStarts=hr(e.segments||[],"discontinuity"),e)))},Lr=(e,t)=>{const i=Nr(e.sidx),n=i&&t[i]&&t[i].sidx;return n&&kr(e,n,e.sidx.resolvedUri),e},Or=(e,t={})=>{if(!Object.keys(t).length)return e;for(const i in e)e[i]=Lr(e[i],t);return e},Br=({attributes:e,segments:t,sidx:i,mediaSequence:n,discontinuitySequence:s,discontinuityStarts:r},o)=>{const a={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,["PROGRAM-ID"]:1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:s,discontinuityStarts:r,timelineStarts:e.timelineStarts,mediaSequence:n,segments:t};return e.contentProtection&&(a.contentProtection=e.contentProtection),i&&(a.sidx=i),o&&(a.attributes.AUDIO="audio",a.attributes.SUBTITLES="subs"),a},Ur=({attributes:e,segments:t,mediaSequence:i,discontinuityStarts:n,discontinuitySequence:s})=>{"undefined"===typeof t&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);const r={NAME:e.id,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1};return e.codecs&&(r.CODECS=e.codecs),{attributes:r,uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:n,discontinuitySequence:s,mediaSequence:i,segments:t}},Vr=(e,t={},i=!1)=>{let n;const s=e.reduce(((e,s)=>{const r=s.attributes.role&&s.attributes.role.value||"",o=s.attributes.lang||"";let a=s.attributes.label||"main";if(o&&!s.attributes.label){const e=r?` (${r})`:"";a=`${s.attributes.lang}${e}`}e[a]||(e[a]={language:o,autoselect:!0,default:"main"===r,playlists:[],uri:""});const l=Lr(Br(s,i),t);return e[a].playlists.push(l),"undefined"===typeof n&&"main"===r&&(n=s,n.default=!0),e}),{});if(!n){const e=Object.keys(s)[0];s[e].default=!0}return s},Rr=(e,t={})=>e.reduce(((e,i)=>{const n=i.attributes.label||i.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),e[n].playlists.push(Lr(Ur(i),t)),e}),{}),jr=e=>e.reduce(((e,t)=>t?(t.forEach((t=>{const{channel:i,language:n}=t;e[n]={autoselect:!1,default:!1,instreamId:i,language:n},t.hasOwnProperty("aspectRatio")&&(e[n].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[n].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[n]["3D"]=t["3D"])})),e):e),{}),Mr=({attributes:e,segments:t,sidx:i,discontinuityStarts:n})=>{const s={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuityStarts:n,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(s.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(s.contentProtection=e.contentProtection),i&&(s.sidx=i),s},Fr=({attributes:e})=>"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType,qr=({attributes:e})=>"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType,zr=({attributes:e})=>"text/vtt"===e.mimeType||"text"===e.contentType,Hr=(e,t)=>{e.forEach((e=>{e.mediaSequence=0,e.discontinuitySequence=t.findIndex((function({timeline:t}){return t===e.timeline})),e.segments&&e.segments.forEach(((e,t)=>{e.number=t}))}))},Wr=e=>e?Object.keys(e).reduce(((t,i)=>{const n=e[i];return t.concat(n.playlists)}),[]):[],Gr=({dashPlaylists:e,locations:t,sidxMapping:i={},previousManifest:n,eventStream:s})=>{if(!e.length)return{};const{sourceDuration:r,type:o,suggestedPresentationDelay:a,minimumUpdatePeriod:l}=e[0].attributes,u=Dr(e.filter(Fr)).map(Mr),c=Dr(e.filter(qr)),d=Dr(e.filter(zr)),h=e.map((e=>e.attributes.captionServices)).filter(Boolean),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:r,playlists:Or(u,i)};l>=0&&(p.minimumUpdatePeriod=1e3*l),t&&(p.locations=t),"dynamic"===o&&(p.suggestedPresentationDelay=a),s&&s.length>0&&(p.eventStream=s);const m=0===p.playlists.length,g=c.length?Vr(c,i,m):null,_=d.length?Rr(d,i):null,f=u.concat(Wr(g),Wr(_)),y=f.map((({timelineStarts:e})=>e));return p.timelineStarts=Sr(y),Hr(f,p.timelineStarts),g&&(p.mediaGroups.AUDIO.audio=g),_&&(p.mediaGroups.SUBTITLES.subs=_),h.length&&(p.mediaGroups["CLOSED-CAPTIONS"].cc=jr(h)),n?Pr({oldManifest:n,newManifest:p}):p},Xr=(e,t,i)=>{const{NOW:n,clientOffset:s,availabilityStartTime:r,timescale:o=1,periodStart:a=0,minimumUpdatePeriod:l=0}=e,u=(n+s)/1e3,c=r+a,d=u+l,h=d-c;return Math.ceil((h*o-t)/i)},Qr=(e,t)=>{const{type:i,minimumUpdatePeriod:n=0,media:s="",sourceDuration:r,timescale:o=1,startNumber:a=1,periodStart:l}=e,u=[];let c=-1;for(let d=0;d<t.length;d++){const h=t[d],p=h.d,m=h.r||0,g=h.t||0;let _;if(c<0&&(c=g),g&&g>c&&(c=g),m<0){const a=d+1;_=a===t.length?"dynamic"===i&&n>0&&s.indexOf("$Number$")>0?Xr(e,c,p):(r*o-c)/p:(t[a].t-c)/p}else _=m+1;const f=a+u.length+_;let y=a+u.length;while(y<f)u.push({number:y,duration:p/o,time:c,timeline:l}),c+=p,y++}return u},Kr=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Zr=e=>(t,i,n,s)=>{if("$$"===t)return"$";if("undefined"===typeof e[i])return t;const r=""+e[i];return"RepresentationID"===i?r:(s=n?parseInt(s,10):1,r.length>=s?r:`${new Array(s-r.length+1).join("0")}${r}`)},Yr=(e,t)=>e.replace(Kr,Zr(t)),Jr=(e,t)=>e.duration||t?e.duration?br(e):Qr(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}],$r=(e,t)=>{const i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:n={sourceURL:"",range:""}}=e,s=gr({baseUrl:e.baseUrl,source:Yr(n.sourceURL,i),range:n.range}),r=Jr(e,t);return r.map((t=>{i.Number=t.number,i.Time=t.time;const n=Yr(e.media||"",i),r=e.timescale||1,o=e.presentationTimeOffset||0,a=e.periodStart+(t.time-o)/r,l={uri:n,timeline:t.timeline,duration:t.duration,resolvedUri:tr(e.baseUrl||"",n),map:s,number:t.number,presentationTime:a};return l}))},eo=(e,t)=>{const{baseUrl:i,initialization:n={}}=e,s=gr({baseUrl:i,source:n.sourceURL,range:n.range}),r=gr({baseUrl:i,source:t.media,range:t.mediaRange});return r.map=s,r},to=(e,t)=>{const{duration:i,segmentUrls:n=[],periodStart:s}=e;if(!i&&!t||i&&t)throw new Error(mr.SEGMENT_TIME_UNSPECIFIED);const r=n.map((t=>eo(e,t)));let o;i&&(o=br(e)),t&&(o=Qr(e,t));const a=o.map(((t,i)=>{if(r[i]){const n=r[i],o=e.timescale||1,a=e.presentationTimeOffset||0;return n.timeline=t.timeline,n.duration=t.duration,n.number=t.number,n.presentationTime=s+(t.time-a)/o,n}})).filter((e=>e));return a},io=({attributes:e,segmentInfo:t})=>{let i,n;t.template?(n=$r,i=ar(e,t.template)):t.base?(n=wr,i=ar(e,t.base)):t.list&&(n=to,i=ar(e,t.list));const s={attributes:e};if(!n)return s;const r=n(i,t.segmentTimeline);if(i.duration){const{duration:e,timescale:t=1}=i;i.duration=e/t}else r.length?i.duration=r.reduce(((e,t)=>Math.max(e,Math.ceil(t.duration))),0):i.duration=0;return s.attributes=i,s.segments=r,t.base&&i.indexRange&&(s.sidx=r[0],s.segments=[]),s},no=e=>e.map(io),so=(e,t)=>dr(e.childNodes).filter((({tagName:e})=>e===t)),ro=e=>e.textContent.trim(),oo=e=>parseFloat(e.split("/").reduce(((e,t)=>e/t))),ao=e=>{const t=31536e3,i=2592e3,n=86400,s=3600,r=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,a=o.exec(e);if(!a)return 0;const[l,u,c,d,h,p]=a.slice(1);return parseFloat(l||0)*t+parseFloat(u||0)*i+parseFloat(c||0)*n+parseFloat(d||0)*s+parseFloat(h||0)*r+parseFloat(p||0)},lo=e=>{const t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},uo={mediaPresentationDuration(e){return ao(e)},availabilityStartTime(e){return lo(e)/1e3},minimumUpdatePeriod(e){return ao(e)},suggestedPresentationDelay(e){return ao(e)},type(e){return e},timeShiftBufferDepth(e){return ao(e)},start(e){return ao(e)},width(e){return parseInt(e,10)},height(e){return parseInt(e,10)},bandwidth(e){return parseInt(e,10)},frameRate(e){return oo(e)},startNumber(e){return parseInt(e,10)},timescale(e){return parseInt(e,10)},presentationTimeOffset(e){return parseInt(e,10)},duration(e){const t=parseInt(e,10);return isNaN(t)?ao(e):t},d(e){return parseInt(e,10)},t(e){return parseInt(e,10)},r(e){return parseInt(e,10)},presentationTime(e){return parseInt(e,10)},DEFAULT(e){return e}},co=e=>e&&e.attributes?dr(e.attributes).reduce(((e,t)=>{const i=uo[t.name]||uo.DEFAULT;return e[t.name]=i(t.value),e}),{}):{},ho={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},po=(e,t)=>t.length?cr(e.map((function(e){return t.map((function(t){return tr(e,ro(t))}))}))):e,mo=e=>{const t=so(e,"SegmentTemplate")[0],i=so(e,"SegmentList")[0],n=i&&so(i,"SegmentURL").map((e=>ar({tag:"SegmentURL"},co(e)))),s=so(e,"SegmentBase")[0],r=i||t,o=r&&so(r,"SegmentTimeline")[0],a=i||s||t,l=a&&so(a,"Initialization")[0],u=t&&co(t);u&&l?u.initialization=l&&co(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:o&&so(o,"S").map((e=>co(e))),list:i&&ar(co(i),{segmentUrls:n,initialization:co(l)}),base:s&&ar(co(s),{initialization:co(l)})};return Object.keys(c).forEach((e=>{c[e]||delete c[e]})),c},go=(e,t,i)=>n=>{const s=so(n,"BaseURL"),r=po(t,s),o=ar(e,co(n)),a=mo(n);return r.map((e=>({segmentInfo:ar(i,a),attributes:ar(o,{baseUrl:e})})))},_o=e=>e.reduce(((e,t)=>{const i=co(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const n=ho[i.schemeIdUri];if(n){e[n]={attributes:i};const s=so(t,"cenc:pssh")[0];if(s){const t=ro(s);e[n].pssh=t&&sr(t)}}return e}),{}),fo=e=>{if("urn:scte:dash:cc:cea-608:2015"===e.schemeIdUri){const t="string"!==typeof e.value?[]:e.value.split(";");return t.map((e=>{let t,i;return i=e,/^CC\d=/.test(e)?[t,i]=e.split("="):/^CC\d$/.test(e)&&(t=e),{channel:t,language:i}}))}if("urn:scte:dash:cc:cea-708:2015"===e.schemeIdUri){const t="string"!==typeof e.value?[]:e.value.split(";");return t.map((e=>{const t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){const[i,n=""]=e.split("=");t.channel=i,t.language=e,n.split(",").forEach((e=>{const[i,n]=e.split(":");"lang"===i?t.language=n:"er"===i?t.easyReader=Number(n):"war"===i?t.aspectRatio=Number(n):"3D"===i&&(t["3D"]=Number(n))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t}))}},yo=e=>cr(so(e.node,"EventStream").map((t=>{const i=co(t),n=i.schemeIdUri;return so(t,"Event").map((t=>{const s=co(t),r=s.presentationTime||0,o=i.timescale||1,a=s.duration||0,l=r/o+e.attributes.start;return{schemeIdUri:n,value:i.value,id:s.id,start:l,end:l+a/o,messageData:ro(t)||s.messageData,contentEncoding:i.contentEncoding,presentationTimeOffset:i.presentationTimeOffset||0}}))}))),vo=(e,t,i)=>n=>{const s=co(n),r=po(t,so(n,"BaseURL")),o=so(n,"Role")[0],a={role:co(o)};let l=ar(e,s,a);const u=so(n,"Accessibility")[0],c=fo(co(u));c&&(l=ar(l,{captionServices:c}));const d=so(n,"Label")[0];if(d&&d.childNodes.length){const e=d.childNodes[0].nodeValue.trim();l=ar(l,{label:e})}const h=_o(so(n,"ContentProtection"));Object.keys(h).length&&(l=ar(l,{contentProtection:h}));const p=mo(n),m=so(n,"Representation"),g=ar(i,p);return cr(m.map(go(l,r,g)))},bo=(e,t)=>(i,n)=>{const s=po(t,so(i.node,"BaseURL")),r=ar(e,{periodStart:i.attributes.start});"number"===typeof i.attributes.duration&&(r.periodDuration=i.attributes.duration);const o=so(i.node,"AdaptationSet"),a=mo(i.node);return cr(o.map(vo(r,s,a)))},wo=({attributes:e,priorPeriodAttributes:t,mpdType:i})=>"number"===typeof e.start?e.start:t&&"number"===typeof t.start&&"number"===typeof t.duration?t.start+t.duration:t||"static"!==i?null:0,ko=(e,t={})=>{const{manifestUri:i="",NOW:n=Date.now(),clientOffset:s=0}=t,r=so(e,"Period");if(!r.length)throw new Error(mr.INVALID_NUMBER_OF_PERIOD);const o=so(e,"Location"),a=co(e),l=po([i],so(e,"BaseURL"));a.type=a.type||"static",a.sourceDuration=a.mediaPresentationDuration||0,a.NOW=n,a.clientOffset=s,o.length&&(a.locations=o.map(ro));const u=[];return r.forEach(((e,t)=>{const i=co(e),n=u[t-1];i.start=wo({attributes:i,priorPeriodAttributes:n?n.attributes:null,mpdType:a.type}),u.push({node:e,attributes:i})})),{locations:a.locations,representationInfo:cr(u.map(bo(a,l))),eventStream:cr(u.map(yo))}},To=e=>{if(""===e)throw new Error(mr.DASH_EMPTY_MANIFEST);const t=new rr.DOMParser;let i,n;try{i=t.parseFromString(e,"application/xml"),n=i&&"MPD"===i.documentElement.tagName?i.documentElement:null}catch(ST){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(mr.DASH_INVALID_XML);return n},xo=e=>{const t=so(e,"UTCTiming")[0];if(!t)return null;const i=co(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(mr.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},So=(e,t={})=>{const i=ko(To(e),t),n=no(i.representationInfo);return Gr({dashPlaylists:n,locations:i.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:i.eventStream})},Eo=e=>xo(To(e));var Ao,Co=i(9577),Io=i.n(Co),Po=Hs([73,68,51]),No=function(e,t){void 0===t&&(t=0),e=Hs(e);var i=e[t+5],n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(16&i)>>4;return s?n+20:n+10},Do=function e(t,i){return void 0===i&&(i=0),t=Hs(t),t.length-i<10||!Js(t,Po,{offset:i})?i:(i+=No(t,i),e(t,i))},Lo=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"===typeof e?Zs(e):e}),Oo=function(e){return Array.isArray(e)?e.map((function(e){return Lo(e)})):[Lo(e)]},Bo=function(e){e=Hs(e);var t=[],i=0;while(e.length>i){var n=e[i],s=0,r=0;r++;var o=e[r];r++;while(128&o)s=(127&o)<<7,o=e[r],r++;s+=127&o;for(var a=0;a<Ao.length;a++){var l=Ao[a],u=l.id,c=l.parser;if(n===u){t.push(c(e.subarray(r,r+s)));break}}i+=s+r}return t};Ao=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var i=e[t.size];t.url=Ks(e.subarray(t.size+1,t.size+1+i)),t.size+=i}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=Bo(e.subarray(t.size))||[],t}},{id:4,parser:function(e){var t={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:Bo(e.subarray(13))};return t}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Uo=function e(t,i,n){void 0===n&&(n=!1),i=Oo(i),t=Hs(t);var s=[];if(!i.length)return s;var r=0;while(r<t.length){var o=(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0,a=t.subarray(r+4,r+8);if(0===o)break;var l=r+o;if(l>t.length){if(n)break;l=t.length}var u=t.subarray(r+8,l);Js(a,i[0])&&(1===i.length?s.push(u):s.push.apply(s,e(u,i.slice(1),n))),r=l}return s},Vo={EBML:Hs([26,69,223,163]),DocType:Hs([66,130]),Segment:Hs([24,83,128,103]),SegmentInfo:Hs([21,73,169,102]),Tracks:Hs([22,84,174,107]),Track:Hs([174]),TrackNumber:Hs([215]),DefaultDuration:Hs([35,227,131]),TrackEntry:Hs([174]),TrackType:Hs([131]),FlagDefault:Hs([136]),CodecID:Hs([134]),CodecPrivate:Hs([99,162]),VideoTrack:Hs([224]),AudioTrack:Hs([225]),Cluster:Hs([31,67,182,117]),Timestamp:Hs([231]),TimestampScale:Hs([42,215,177]),BlockGroup:Hs([160]),BlockDuration:Hs([155]),Block:Hs([161]),SimpleBlock:Hs([163])},Ro=[128,64,32,16,8,4,2,1],jo=function(e){for(var t=1,i=0;i<Ro.length;i++){if(e&Ro[i])break;t++}return t},Mo=function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var s=jo(e[t]),r=e.subarray(t,t+s);return i&&(r=Array.prototype.slice.call(e,t,t+s),r[0]^=Ro[s-1]),{length:s,value:Xs(r,{signed:n}),bytes:r}},Fo=function e(t){return"string"===typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"===typeof t?Qs(t):t},qo=function(e){return Array.isArray(e)?e.map((function(e){return Fo(e)})):[Fo(e)]},zo=function e(t,i,n){if(n>=i.length)return i.length;var s=Mo(i,n,!1);if(Js(t.bytes,s.bytes))return n;var r=Mo(i,n+s.length);return e(t,i,n+r.length+r.value+s.length)},Ho=function e(t,i){i=qo(i),t=Hs(t);var n=[];if(!i.length)return n;var s=0;while(s<t.length){var r=Mo(t,s,!1),o=Mo(t,s+r.length),a=s+r.length+o.length;127===o.value&&(o.value=zo(r,t,a),o.value!==t.length&&(o.value-=a));var l=a+o.value>t.length?t.length:a+o.value,u=t.subarray(a,l);Js(i[0],r.bytes)&&(1===i.length?n.push(u):n=n.concat(e(u,i.slice(1))));var c=r.length+o.length+u.length;s+=c}return n},Wo=Hs([0,0,0,1]),Go=Hs([0,0,1]),Xo=Hs([0,0,3]),Qo=function(e){var t=[],i=1;while(i<e.length-2)Js(e.subarray(i,i+3),Xo)&&(t.push(i+2),i++),i++;if(0===t.length)return e;var n=e.length-t.length,s=new Uint8Array(n),r=0;for(i=0;i<n;r++,i++)r===t[0]&&(r++,t.shift()),s[i]=e[r];return s},Ko=function(e,t,i,n){void 0===n&&(n=1/0),e=Hs(e),i=[].concat(i);var s,r=0,o=0;while(r<e.length&&(o<n||s)){var a=void 0;if(Js(e.subarray(r),Wo)?a=4:Js(e.subarray(r),Go)&&(a=3),a){if(o++,s)return Qo(e.subarray(s,r));var l=void 0;"h264"===t?l=31&e[r+a]:"h265"===t&&(l=e[r+a]>>1&63),-1!==i.indexOf(l)&&(s=r+a),r+=a+("h264"===t?1:2)}else r++}return e.subarray(0,0)},Zo=function(e,t,i){return Ko(e,"h264",t,i)},Yo=function(e,t,i){return Ko(e,"h265",t,i)},Jo={webm:Hs([119,101,98,109]),matroska:Hs([109,97,116,114,111,115,107,97]),flac:Hs([102,76,97,67]),ogg:Hs([79,103,103,83]),ac3:Hs([11,119]),riff:Hs([82,73,70,70]),avi:Hs([65,86,73]),wav:Hs([87,65,86,69]),"3gp":Hs([102,116,121,112,51,103]),mp4:Hs([102,116,121,112]),fmp4:Hs([115,116,121,112]),mov:Hs([102,116,121,112,113,116]),moov:Hs([109,111,111,118]),moof:Hs([109,111,111,102])},$o={aac:function(e){var t=Do(e);return Js(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Do(e);return Js(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Ho(e,[Vo.EBML,Vo.DocType])[0];return Js(t,Jo.webm)},mkv:function(e){var t=Ho(e,[Vo.EBML,Vo.DocType])[0];return Js(t,Jo.matroska)},mp4:function(e){return!$o["3gp"](e)&&!$o.mov(e)&&(!(!Js(e,Jo.mp4,{offset:4})&&!Js(e,Jo.fmp4,{offset:4}))||(!(!Js(e,Jo.moof,{offset:4})&&!Js(e,Jo.moov,{offset:4}))||void 0))},mov:function(e){return Js(e,Jo.mov,{offset:4})},"3gp":function(e){return Js(e,Jo["3gp"],{offset:4})},ac3:function(e){var t=Do(e);return Js(e,Jo.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];var t=0;while(t+188<e.length&&t<188){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Do(e);return Js(e,Jo.flac,{offset:t})},ogg:function(e){return Js(e,Jo.ogg)},avi:function(e){return Js(e,Jo.riff)&&Js(e,Jo.avi,{offset:8})},wav:function(e){return Js(e,Jo.riff)&&Js(e,Jo.wav,{offset:8})},h264:function(e){return Zo(e,7,3).length},h265:function(e){return Yo(e,[32,33],3).length}},ea=Object.keys($o).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);ea.forEach((function(e){var t=$o[e];$o[e]=function(e){return t(Hs(e))}}));var ta=$o,ia=function(e){e=Hs(e);for(var t=0;t<ea.length;t++){var i=ea[t];if(ta[i](e))return i}return""},na=function(e){return Uo(e,["moof"]).length>0},sa=i(9771),ra="8.3.0";const oa={},aa=function(e,t){return oa[e]=oa[e]||[],t&&(oa[e]=oa[e].concat(t)),oa[e]},la=function(e,t){aa(e,t)},ua=function(e,t){const i=aa(e).indexOf(t);return!(i<=-1)&&(oa[e]=oa[e].slice(),oa[e].splice(i,1),!0)},ca=function(e,t){aa(e,[].concat(t).map((t=>{const i=(...n)=>(ua(e,i),t(...n));return i})))},da={prefixed:!0},ha=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],pa=ha[0];let ma;for(let VT=0;VT<ha.length;VT++)if(ha[VT][1]in Zn()){ma=ha[VT];break}if(ma){for(let e=0;e<ma.length;e++)da[pa[e]]=ma[e];da.prefixed=ma[0]!==pa[0]}let ga=[];const _a=(e,t)=>(i,n,s)=>{const r=t.levels[n],o=new RegExp(`^(${r})$`);if("log"!==i&&s.unshift(i.toUpperCase()+":"),s.unshift(e+":"),ga){ga.push([].concat(s));const e=ga.length-1e3;ga.splice(0,e>0?e:0)}if(!Qn().console)return;let a=Qn().console[i];a||"debug"!==i||(a=Qn().console.info||Qn().console.log),a&&r&&o.test(i)&&a[Array.isArray(s)?"apply":"call"](Qn().console,s)};function fa(e){let t,i="info";const n=function(...e){t("log",i,e)};return t=_a(e,n),n.createLogger=t=>fa(e+": "+t),n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},n.level=e=>{if("string"===typeof e){if(!n.levels.hasOwnProperty(e))throw new Error(`"${e}" in not a valid log level`);i=e}return i},n.history=()=>ga?[].concat(ga):[],n.history.filter=e=>(ga||[]).filter((t=>new RegExp(`.*${e}.*`).test(t[0]))),n.history.clear=()=>{ga&&(ga.length=0)},n.history.disable=()=>{null!==ga&&(ga.length=0,ga=null)},n.history.enable=()=>{null===ga&&(ga=[])},n.error=(...e)=>t("error",i,e),n.warn=(...e)=>t("warn",i,e),n.debug=(...e)=>t("debug",i,e),n}const ya=fa("VIDEOJS"),va=ya.createLogger,ba=Object.prototype.toString,wa=function(e){return xa(e)?Object.keys(e):[]};function ka(e,t){wa(e).forEach((i=>t(e[i],i)))}function Ta(e,t,i=0){return wa(e).reduce(((i,n)=>t(i,e[n],n)),i)}function xa(e){return!!e&&"object"===typeof e}function Sa(e){return xa(e)&&"[object Object]"===ba.call(e)&&e.constructor===Object}function Ea(...e){const t={};return e.forEach((e=>{e&&ka(e,((e,i)=>{Sa(e)?(Sa(t[i])||(t[i]={}),t[i]=Ea(t[i],e)):t[i]=e}))})),t}function Aa(e,t,i,n=!0){const s=i=>Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const e=i();return s(e),e}};return n&&(r.set=s),Object.defineProperty(e,t,r)}var Ca=Object.freeze({__proto__:null,each:ka,reduce:Ta,isObject:xa,isPlain:Sa,merge:Ea,defineLazyProperty:Aa});let Ia,Pa=!1,Na=null,Da=!1,La=!1,Oa=!1,Ba=!1,Ua=!1,Va=null,Ra=null,ja=null,Ma=!1,Fa=!1,qa=!1,za=!1;const Ha=Boolean(Ya()&&("ontouchstart"in Qn()||Qn().navigator.maxTouchPoints||Qn().DocumentTouch&&Qn().document instanceof Qn().DocumentTouch)),Wa=Qn().navigator&&Qn().navigator.userAgentData;if(Wa&&(Da="Android"===Wa.platform,Oa=Boolean(Wa.brands.find((e=>"Microsoft Edge"===e.brand))),Ba=Boolean(Wa.brands.find((e=>"Chromium"===e.brand))),Ua=!Oa&&Ba,Va=Ra=(Wa.brands.find((e=>"Chromium"===e.brand))||{}).version||null,Fa="Windows"===Wa.platform),!Ba){const e=Qn().navigator&&Qn().navigator.userAgent||"";Pa=/iPod/i.test(e),Na=function(){const t=e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Da=/Android/i.test(e),Ia=function(){const t=e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const i=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return i&&n?parseFloat(t[1]+"."+t[2]):i||null}(),La=/Firefox/i.test(e),Oa=/Edg/i.test(e),Ba=/Chrome/i.test(e)||/CriOS/i.test(e),Ua=!Oa&&Ba,Va=Ra=function(){const t=e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),ja=function(){const t=/MSIE\s(\d+)\.\d/.exec(e);let i=t&&parseFloat(t[1]);return!i&&/Trident\/7.0/i.test(e)&&/rv:11.0/.test(e)&&(i=11),i}(),Ma=/Safari/i.test(e)&&!Ua&&!Da&&!Oa,Fa=/Windows/i.test(e),qa=/iPad/i.test(e)||Ma&&Ha&&!/iPhone/i.test(e),za=/iPhone/i.test(e)&&!qa}const Ga=za||qa||Pa,Xa=(Ma||Ga)&&!Ua;var Qa=Object.freeze({__proto__:null,get IS_IPOD(){return Pa},get IOS_VERSION(){return Na},get IS_ANDROID(){return Da},get ANDROID_VERSION(){return Ia},get IS_FIREFOX(){return La},get IS_EDGE(){return Oa},get IS_CHROMIUM(){return Ba},get IS_CHROME(){return Ua},get CHROMIUM_VERSION(){return Va},get CHROME_VERSION(){return Ra},get IE_VERSION(){return ja},get IS_SAFARI(){return Ma},get IS_WINDOWS(){return Fa},get IS_IPAD(){return qa},get IS_IPHONE(){return za},TOUCH_ENABLED:Ha,IS_IOS:Ga,IS_ANY_SAFARI:Xa});function Ka(e){return"string"===typeof e&&Boolean(e.trim())}function Za(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Ya(){return Zn()===Qn().document}function Ja(e){return xa(e)&&1===e.nodeType}function $a(){try{return Qn().parent!==Qn().self}catch(e){return!0}}function el(e){return function(t,i){if(!Ka(t))return Zn()[e](null);Ka(i)&&(i=Zn().querySelector(i));const n=Ja(i)?i:Zn();return n[e]&&n[e](t)}}function tl(e="div",t={},i={},n){const s=Zn().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){const i=t[e];"textContent"===e?il(s,i):s[e]===i&&"tabIndex"!==e||(s[e]=i)})),Object.getOwnPropertyNames(i).forEach((function(e){s.setAttribute(e,i[e])})),n&&wl(s,n),s}function il(e,t){return"undefined"===typeof e.textContent?e.innerText=t:e.textContent=t,e}function nl(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function sl(e,t){return Za(t),e.classList.contains(t)}function rl(e,...t){return e.classList.add(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e}function ol(e,...t){return e?(e.classList.remove(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e):(ya.warn("removeClass was called with an element that doesn't exist"),null)}function al(e,t,i){return"function"===typeof i&&(i=i(e,t)),"boolean"!==typeof i&&(i=void 0),t.split(/\s+/).forEach((t=>e.classList.toggle(t,i))),e}function ll(e,t){Object.getOwnPropertyNames(t).forEach((function(i){const n=t[i];null===n||"undefined"===typeof n||!1===n?e.removeAttribute(i):e.setAttribute(i,!0===n?"":n)}))}function ul(e){const t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0){const n=e.attributes;for(let s=n.length-1;s>=0;s--){const r=n[s].name;let o=n[s].value;"boolean"!==typeof e[r]&&-1===i.indexOf(","+r+",")||(o=null!==o),t[r]=o}}return t}function cl(e,t){return e.getAttribute(t)}function dl(e,t,i){e.setAttribute(t,i)}function hl(e,t){e.removeAttribute(t)}function pl(){Zn().body.focus(),Zn().onselectstart=function(){return!1}}function ml(){Zn().onselectstart=function(){return!0}}function gl(e){if(e&&e.getBoundingClientRect&&e.parentNode){const t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach((e=>{void 0!==t[e]&&(i[e]=t[e])})),i.height||(i.height=parseFloat(El(e,"height"))),i.width||(i.width=parseFloat(El(e,"width"))),i}}function _l(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};const t=e.offsetWidth,i=e.offsetHeight;let n=0,s=0;while(e.offsetParent&&e!==Zn()[da.fullscreenElement])n+=e.offsetLeft,s+=e.offsetTop,e=e.offsetParent;return{left:n,top:s,width:t,height:i}}function fl(e,t){const i={x:0,y:0};if(Ga){let t=e;while(t&&"html"!==t.nodeName.toLowerCase()){const e=El(t,"transform");if(/^matrix/.test(e)){const t=e.slice(7,-1).split(/,\s/).map(Number);i.x+=t[4],i.y+=t[5]}else if(/^matrix3d/.test(e)){const t=e.slice(9,-1).split(/,\s/).map(Number);i.x+=t[12],i.y+=t[13]}t=t.parentNode}}const n={},s=_l(t.target),r=_l(e),o=r.width,a=r.height;let l=t.offsetY-(r.top-s.top),u=t.offsetX-(r.left-s.left);return t.changedTouches&&(u=t.changedTouches[0].pageX-r.left,l=t.changedTouches[0].pageY+r.top,Ga&&(u-=i.x,l-=i.y)),n.y=1-Math.max(0,Math.min(1,l/a)),n.x=Math.max(0,Math.min(1,u/o)),n}function yl(e){return xa(e)&&3===e.nodeType}function vl(e){while(e.firstChild)e.removeChild(e.firstChild);return e}function bl(e){return"function"===typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((e=>("function"===typeof e&&(e=e()),Ja(e)||yl(e)?e:"string"===typeof e&&/\S/.test(e)?Zn().createTextNode(e):void 0))).filter((e=>e))}function wl(e,t){return bl(t).forEach((t=>e.appendChild(t))),e}function kl(e,t){return wl(vl(e),t)}function Tl(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}const xl=el("querySelector"),Sl=el("querySelectorAll");function El(e,t){if(!e||!t)return"";if("function"===typeof Qn().getComputedStyle){let i;try{i=Qn().getComputedStyle(e)}catch(ST){return""}return i?i.getPropertyValue(t)||i[t]:""}return""}var Al=Object.freeze({__proto__:null,isReal:Ya,isEl:Ja,isInFrame:$a,createEl:tl,textContent:il,prependTo:nl,hasClass:sl,addClass:rl,removeClass:ol,toggleClass:al,setAttributes:ll,getAttributes:ul,getAttribute:cl,setAttribute:dl,removeAttribute:hl,blockTextSelection:pl,unblockTextSelection:ml,getBoundingClientRect:gl,findPosition:_l,getPointerPosition:fl,isTextNode:yl,emptyEl:vl,normalizeContent:bl,appendContent:wl,insertContent:kl,isSingleLeftClick:Tl,$:xl,$$:Sl,computedStyle:El});let Cl,Il=!1;const Pl=function(){if(!1===Cl.options.autoSetup)return;const e=Array.prototype.slice.call(Zn().getElementsByTagName("video")),t=Array.prototype.slice.call(Zn().getElementsByTagName("audio")),i=Array.prototype.slice.call(Zn().getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&n.length>0)for(let s=0,r=n.length;s<r;s++){const e=n[s];if(!e||!e.getAttribute){Nl(1);break}if(void 0===e.player){const t=e.getAttribute("data-setup");null!==t&&Cl(e)}}else Il||Nl(1)};function Nl(e,t){Ya()&&(t&&(Cl=t),Qn().setTimeout(Pl,e))}function Dl(){Il=!0,Qn().removeEventListener("load",Dl)}Ya()&&("complete"===Zn().readyState?Dl():Qn().addEventListener("load",Dl));const Ll=function(e){const t=Zn().createElement("style");return t.className=e,t},Ol=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t};var Bl=new WeakMap;const Ul=3;let Vl,Rl=Ul;function jl(){return Rl++}function Ml(e,t){if(!Bl.has(e))return;const i=Bl.get(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&Bl.delete(e)}function Fl(e,t,i,n){i.forEach((function(i){e(t,i,n)}))}function ql(e){if(e.fixed_)return e;function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){const n=e||Qn().event;e={};for(const t in n)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&n.preventDefault||(e[t]=n[t]));if(e.target||(e.target=e.srcElement||Zn()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX){const t=Zn().documentElement,i=Zn().body;e.pageX=e.clientX+(t&&t.scrollLeft||i&&i.scrollLeft||0)-(t&&t.clientLeft||i&&i.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||i&&i.scrollTop||0)-(t&&t.clientTop||i&&i.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}const zl=function(){if("boolean"!==typeof Vl){Vl=!1;try{const e=Object.defineProperty({},"passive",{get(){Vl=!0}});Qn().addEventListener("test",null,e),Qn().removeEventListener("test",null,e)}catch(ST){}}return Vl},Hl=["touchstart","touchmove"];function Wl(e,t,i){if(Array.isArray(t))return Fl(Wl,e,t,i);Bl.has(e)||Bl.set(e,{});const n=Bl.get(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),i.guid||(i.guid=jl()),n.handlers[t].push(i),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,i){if(n.disabled)return;t=ql(t);const s=n.handlers[t.type];if(s){const n=s.slice(0);for(let s=0,r=n.length;s<r;s++){if(t.isImmediatePropagationStopped())break;try{n[s].call(e,t,i)}catch(ST){ya.error(ST)}}}}),1===n.handlers[t].length)if(e.addEventListener){let i=!1;zl()&&Hl.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,n.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function Gl(e,t,i){if(!Bl.has(e))return;const n=Bl.get(e);if(!n.handlers)return;if(Array.isArray(t))return Fl(Gl,e,t,i);const s=function(e,t){n.handlers[t]=[],Ml(e,t)};if(void 0===t){for(const t in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},t)&&s(e,t);return}const r=n.handlers[t];if(r)if(i){if(i.guid)for(let e=0;e<r.length;e++)r[e].guid===i.guid&&r.splice(e--,1);Ml(e,t)}else s(e,t)}function Xl(e,t,i){const n=Bl.has(e)?Bl.get(e):{},s=e.parentNode||e.ownerDocument;if("string"===typeof t?t={type:t,target:e}:t.target||(t.target=e),t=ql(t),n.dispatcher&&n.dispatcher.call(e,t,i),s&&!t.isPropagationStopped()&&!0===t.bubbles)Xl.call(null,s,t,i);else if(!s&&!t.defaultPrevented&&t.target&&t.target[t.type]){Bl.has(t.target)||Bl.set(t.target,{});const e=Bl.get(t.target);t.target[t.type]&&(e.disabled=!0,"function"===typeof t.target[t.type]&&t.target[t.type](),e.disabled=!1)}return!t.defaultPrevented}function Ql(e,t,i){if(Array.isArray(t))return Fl(Ql,e,t,i);const n=function(){Gl(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||jl(),Wl(e,t,n)}function Kl(e,t,i){const n=function(){Gl(e,t,n),i.apply(this,arguments)};n.guid=i.guid=i.guid||jl(),Wl(e,t,n)}var Zl=Object.freeze({__proto__:null,fixEvent:ql,on:Wl,off:Gl,trigger:Xl,one:Ql,any:Kl});const Yl=30,Jl=function(e,t,i){t.guid||(t.guid=jl());const n=t.bind(e);return n.guid=i?i+"_"+t.guid:t.guid,n},$l=function(e,t){let i=Qn().performance.now();const n=function(...n){const s=Qn().performance.now();s-i>=t&&(e(...n),i=s)};return n},eu=function(e,t,i,n=Qn()){let s;const r=()=>{n.clearTimeout(s),s=null},o=function(){const r=this,o=arguments;let a=function(){s=null,a=null,i||e.apply(r,o)};!s&&i&&e.apply(r,o),n.clearTimeout(s),s=n.setTimeout(a,t)};return o.cancel=r,o};var tu=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Yl,bind_:Jl,throttle:$l,debounce:eu});let iu;class nu{on(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Wl(this,e,t),this.addEventListener=i}off(e,t){Gl(this,e,t)}one(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Ql(this,e,t),this.addEventListener=i}any(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Kl(this,e,t),this.addEventListener=i}trigger(e){const t=e.type||e;"string"===typeof e&&(e={type:t}),e=ql(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Xl(this,e)}queueTrigger(e){iu||(iu=new Map);const t=e.type||e;let i=iu.get(this);i||(i=new Map,iu.set(this,i));const n=i.get(t);i.delete(t),Qn().clearTimeout(n);const s=Qn().setTimeout((()=>{i.delete(t),0===i.size&&(i=null,iu.delete(this)),this.trigger(e)}),0);i.set(t,s)}}nu.prototype.allowedEvents_={},nu.prototype.addEventListener=nu.prototype.on,nu.prototype.removeEventListener=nu.prototype.off,nu.prototype.dispatchEvent=nu.prototype.trigger;const su=e=>"function"===typeof e.name?e.name():"string"===typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,ru=e=>e instanceof nu||!!e.eventBusEl_&&["on","one","off","trigger"].every((t=>"function"===typeof e[t])),ou=(e,t)=>{ru(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},au=e=>"string"===typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length,lu=(e,t,i)=>{if(!e||!e.nodeName&&!ru(e))throw new Error(`Invalid target for ${su(t)}#${i}; must be a DOM node or evented object.`)},uu=(e,t,i)=>{if(!au(e))throw new Error(`Invalid event type for ${su(t)}#${i}; must be a non-empty string or array.`)},cu=(e,t,i)=>{if("function"!==typeof e)throw new Error(`Invalid listener for ${su(t)}#${i}; must be a function.`)},du=(e,t,i)=>{const n=t.length<3||t[0]===e||t[0]===e.eventBusEl_;let s,r,o;return n?(s=e.eventBusEl_,t.length>=3&&t.shift(),[r,o]=t):[s,r,o]=t,lu(s,e,i),uu(r,e,i),cu(o,e,i),o=Jl(e,o),{isTargetingSelf:n,target:s,type:r,listener:o}},hu=(e,t,i,n)=>{lu(e,e,t),e.nodeName?Zl[t](e,i,n):e[t](i,n)},pu={on(...e){const{isTargetingSelf:t,target:i,type:n,listener:s}=du(this,e,"on");if(hu(i,"on",n,s),!t){const e=()=>this.off(i,n,s);e.guid=s.guid;const t=()=>this.off("dispose",e);t.guid=s.guid,hu(this,"on","dispose",e),hu(i,"on","dispose",t)}},one(...e){const{isTargetingSelf:t,target:i,type:n,listener:s}=du(this,e,"one");if(t)hu(i,"one",n,s);else{const e=(...t)=>{this.off(i,n,e),s.apply(null,t)};e.guid=s.guid,hu(i,"one",n,e)}},any(...e){const{isTargetingSelf:t,target:i,type:n,listener:s}=du(this,e,"any");if(t)hu(i,"any",n,s);else{const e=(...t)=>{this.off(i,n,e),s.apply(null,t)};e.guid=s.guid,hu(i,"any",n,e)}},off(e,t,i){if(!e||au(e))Gl(this.eventBusEl_,e,t);else{const n=e,s=t;lu(n,this,"off"),uu(s,this,"off"),cu(i,this,"off"),i=Jl(this,i),this.off("dispose",i),n.nodeName?(Gl(n,s,i),Gl(n,"dispose",i)):ru(n)&&(n.off(s,i),n.off("dispose",i))}},trigger(e,t){lu(this.eventBusEl_,this,"trigger");const i=e&&"string"!==typeof e?e.type:e;if(!au(i))throw new Error(`Invalid event type for ${su(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Xl(this.eventBusEl_,e,t)}};function mu(e,t={}){const{eventBusKey:i}=t;if(i){if(!e[i].nodeName)throw new Error(`The eventBusKey "${i}" does not refer to an element.`);e.eventBusEl_=e[i]}else e.eventBusEl_=tl("span",{className:"vjs-event-bus"});return Object.assign(e,pu),e.eventedCallbacks&&e.eventedCallbacks.forEach((e=>{e()})),e.on("dispose",(()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&Bl.has(e)&&Bl.delete(e)})),Qn().setTimeout((()=>{e.eventBusEl_=null}),0)})),e}const gu={state:{},setState(e){let t;return"function"===typeof e&&(e=e()),ka(e,((e,i)=>{this.state[i]!==e&&(t=t||{},t[i]={from:this.state[i],to:e}),this.state[i]=e})),t&&ru(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function _u(e,t){return Object.assign(e,gu),e.state=Object.assign({},e.state,t),"function"===typeof e.handleStateChanged&&ru(e)&&e.on("statechanged",e.handleStateChanged),e}const fu=function(e){return"string"!==typeof e?e:e.replace(/./,(e=>e.toLowerCase()))},yu=function(e){return"string"!==typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},vu=function(e,t){return yu(e)===yu(t)};var bu=Object.freeze({__proto__:null,toLowerCase:fu,toTitleCase:yu,titleCaseEquals:vu});class wu{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Ea({},this.options_),t=this.options_=Ea(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const t=e&&e.id&&e.id()||"no_player";this.id_=`${t}_component_${jl()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((e=>this.addClass(e))),["on","off","one","any","trigger"].forEach((e=>{this[e]=void 0})),!1!==t.evented&&(mu(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),_u(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}on(e,t){}off(e,t){}one(e,t){}any(e,t){}trigger(e){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=Ea(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return tl(e,t,i)}localize(e,t,i=e){const n=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),r=s&&s[n],o=n&&n.split("-")[0],a=s&&s[o];let l=i;return r&&r[e]?l=r[e]:a&&a[e]&&(l=a[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,i){const n=t[i-1];let s=n;return"undefined"===typeof n&&(s=e),s}))),l}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce(((e,t)=>e.concat(t)),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}addChild(e,t={},i=this.children_.length){let n,s;if("string"===typeof e){s=yu(e);const i=t.componentClass||s;t.name=s;const r=wu.getComponent(i);if(!r)throw new Error(`Component ${i} does not exist`);if("function"!==typeof r)return null;n=new r(this.player_||this,t)}else n=e;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(i,0,n),n.parentComponent_=this,"function"===typeof n.id&&(this.childIndex_[n.id()]=n),s=s||n.name&&yu(n.name()),s&&(this.childNameIndex_[s]=n,this.childNameIndex_[fu(s)]=n),"function"===typeof n.el&&n.el()){let e=null;this.children_[i+1]&&(this.children_[i+1].el_?e=this.children_[i+1].el_:Ja(this.children_[i+1])&&(e=this.children_[i+1])),this.contentEl().insertBefore(n.el(),e)}return n}removeChild(e){if("string"===typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[yu(e.name())]=null,this.childNameIndex_[fu(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,i=e=>{const i=e.name;let n=e.opts;if(void 0!==t[i]&&(n=t[i]),!1===n)return;!0===n&&(n={}),n.playerOptions=this.options_.playerOptions;const s=this.addChild(i,n);s&&(this[i]=s)};let n;const s=wu.getComponent("Tech");n=Array.isArray(e)?e:Object.keys(e),n.concat(Object.keys(this.options_).filter((function(e){return!n.some((function(t){return"string"===typeof t?e===t:e===t.name}))}))).map((t=>{let i,n;return"string"===typeof t?(i=t,n=e[i]||this.options_[i]||{}):(i=t.name,n=t),{name:i,opts:n}})).filter((e=>{const t=wu.getComponent(e.opts.componentClass||yu(e.name));return t&&!s.isTech(t)})).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))}triggerReady(){this.isReady_=!0,this.setTimeout((function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)}$(e,t){return xl(e,t||this.contentEl())}$$(e,t){return Sl(e,t||this.contentEl())}hasClass(e){return sl(this.el_,e)}addClass(...e){rl(this.el_,...e)}removeClass(...e){ol(this.el_,...e)}toggleClass(e,t){al(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return cl(this.el_,e)}setAttribute(e,t){dl(this.el_,e,t)}removeAttribute(e){hl(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(void 0!==t)return null!==t&&t===t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;const n=this.el_.style[e],s=n.indexOf("px");return-1!==s?parseInt(n.slice(0,s),10):parseInt(this.el_["offset"+yu(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=El(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const i=`offset${yu(e)}`;t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(Jn().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const i=10,n=200;let s;this.on("touchstart",(function(i){1===i.touches.length&&(t={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},e=Qn().performance.now(),s=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)s=!1;else if(t){const n=e.touches[0].pageX-t.pageX,r=e.touches[0].pageY-t.pageY,o=Math.sqrt(n*n+r*r);o>i&&(s=!1)}}));const r=function(){s=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",(function(i){if(t=null,!0===s){const t=Qn().performance.now()-e;t<n&&(i.preventDefault(),this.trigger("tap"))}}))}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Jl(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));const i=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=Jl(this,e),this.clearTimersOnDispose_(),i=Qn().setTimeout((()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()}),t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Qn().clearTimeout(e)),e}setInterval(e,t){e=Jl(this,e),this.clearTimersOnDispose_();const i=Qn().setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Qn().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=Jl(this,e),t=Qn().requestAnimationFrame((()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()})),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=Jl(this,t);const i=this.requestAnimationFrame((()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)}));return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),Qn().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((([e,t])=>{this[e].forEach(((e,i)=>this[t](i)))})),this.clearingTimersOnDispose_=!1})))}static registerComponent(e,t){if("string"!==typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const i=wu.getComponent("Tech"),n=i&&i.isTech(t),s=wu===t||wu.prototype.isPrototypeOf(t.prototype);if(n||!s){let t;throw t=n?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${t}.`)}e=yu(e),wu.components_||(wu.components_={});const r=wu.getComponent("Player");if("Player"===e&&r&&r.players){const e=r.players,t=Object.keys(e);if(e&&t.length>0&&t.map((t=>e[t])).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return wu.components_[e]=t,wu.components_[fu(e)]=t,t}static getComponent(e){if(e&&wu.components_)return wu.components_[e]}}function ku(e,t,i){if("number"!==typeof t||t<0||t>i)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${i}).`)}function Tu(e,t,i,n){return ku(e,n,i.length-1),i[n][t]}function xu(e){let t;return t=void 0===e||0===e.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Tu.bind(null,"start",0,e),end:Tu.bind(null,"end",1,e)},Qn().Symbol&&Qn().Symbol.iterator&&(t[Qn().Symbol.iterator]=()=>(e||[]).values()),t}function Su(e,t){return Array.isArray(e)?xu(e):void 0===e||void 0===t?xu():xu([[e,t]])}wu.registerComponent("Component",wu);const Eu=function(e,t){e=e<0?0:e;let i=Math.floor(e%60),n=Math.floor(e/60%60),s=Math.floor(e/3600);const r=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=n=i="-"),s=s>0||o>0?s+":":"",n=((s||r>=10)&&n<10?"0"+n:n)+":",i=i<10?"0"+i:i,s+n+i};let Au=Eu;function Cu(e){Au=e}function Iu(){Au=Eu}function Pu(e,t=e){return Au(e,t)}var Nu=Object.freeze({__proto__:null,createTimeRanges:Su,createTimeRange:Su,setFormatTime:Cu,resetFormatTime:Iu,formatTime:Pu});function Du(e,t){let i,n,s=0;if(!t)return 0;e&&e.length||(e=Su(0,0));for(let r=0;r<e.length;r++)i=e.start(r),n=e.end(r),n>t&&(n=t),s+=n-i;return s/t}function Lu(e){if(e instanceof Lu)return e;"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:xa(e)&&("number"===typeof e.code&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=Lu.defaultMessages[this.code]||"")}Lu.prototype.code=0,Lu.prototype.message="",Lu.prototype.status=null,Lu.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Lu.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let VT=0;VT<Lu.errorTypes.length;VT++)Lu[Lu.errorTypes[VT]]=VT,Lu.prototype[Lu.errorTypes[VT]]=VT;function Ou(e){return void 0!==e&&null!==e&&"function"===typeof e.then}function Bu(e){Ou(e)&&e.then(null,(e=>{}))}const Uu=function(e){const t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(((t,i,n)=>(e[i]&&(t[i]=e[i]),t)),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))});return t},Vu=function(e){const t=e.$$("track"),i=Array.prototype.map.call(t,(e=>e.track)),n=Array.prototype.map.call(t,(function(e){const t=Uu(e.track);return e.src&&(t.src=e.src),t}));return n.concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===i.indexOf(e)})).map(Uu))},Ru=function(e,t){return e.forEach((function(e){const i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((e=>i.addCue(e)))})),t.textTracks()};var ju={textTracksToJson:Vu,jsonToTextTracks:Ru,trackToJson_:Uu};const Mu="vjs-modal-dialog";class Fu extends wu{constructor(e,t){super(e,t),this.handleKeyDown_=e=>this.handleKeyDown(e),this.close_=e=>this.close(e),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=tl("div",{className:`${Mu}-content`},{role:"document"}),this.descEl_=tl("p",{className:`${Mu}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),il(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Mu} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"===typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"===typeof e){const t=this.closeable_=!!e;let i=this.getChild("closeButton");if(t&&!i){const e=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),kl(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);const s=this.getChild("closeButton");s&&i.appendChild(s.el_)}empty(){this.trigger("beforemodalempty"),vl(this.contentEl()),this.trigger("modalempty")}content(e){return"undefined"!==typeof e&&(this.content_=e),this.content_}conditionalFocus_(){const e=Zn().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),Jn().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!Jn().isEventKey(e,"Tab"))return;const t=this.focusableEls_(),i=this.el_.querySelector(":focus");let n;for(let s=0;s<t.length;s++)if(i===t[s]){n=s;break}Zn().activeElement===this.el_&&(n=0),e.shiftKey&&0===n?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(e=>(e instanceof Qn().HTMLAnchorElement||e instanceof Qn().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Qn().HTMLInputElement||e instanceof Qn().HTMLSelectElement||e instanceof Qn().HTMLTextAreaElement||e instanceof Qn().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Qn().HTMLIFrameElement||e instanceof Qn().HTMLObjectElement||e instanceof Qn().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")))}}Fu.prototype.options_={pauseOnOpen:!0,temporary:!0},wu.registerComponent("ModalDialog",Fu);class qu extends nu{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},ru(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,n=this.length;i<n;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,n=this.length;i<n;i++){const n=this[i];if(n.id===e){t=n;break}}return t}}qu.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const VT in qu.prototype.allowedEvents_)qu.prototype["on"+VT]=null;const zu=function(e,t){for(let i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)};class Hu extends qu{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){zu(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&zu(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,zu(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const Wu=function(e,t){for(let i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)};class Gu extends qu{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Wu(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set(){}})}addTrack(e){e.selected&&Wu(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Wu(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class Xu extends qu{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_);const t=["metadata","chapters"];-1===t.indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Qu{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"===typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"===typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class Ku{constructor(e){Ku.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let i=0;const n=e.length;this.cues_=e,this.length_=e.length;const s=function(e){""+e in this||Object.defineProperty(this,""+e,{get(){return this.cues_[e]}})};if(t<n)for(i=t;i<n;i++)s.call(this,i)}getCueById(e){let t=null;for(let i=0,n=this.length;i<n;i++){const n=this[i];if(n.id===e){t=n;break}}return t}}const Zu={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Yu={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ju={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},$u={disabled:"disabled",hidden:"hidden",showing:"showing"};class ec extends nu{constructor(e={}){super();const t={id:e.id||"vjs_track_"+jl(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const n in t)Object.defineProperty(this,n,{get(){return t[n]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(e){e!==i&&(i=e,this.trigger("labelchange"))}})}}const tc=function(e){const t=["protocol","hostname","port","pathname","search","hash","host"],i=Zn().createElement("a");i.href=e;const n={};for(let s=0;s<t.length;s++)n[t[s]]=i[t[s]];return"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,"")),"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,"")),n.protocol||(n.protocol=Qn().location.protocol),n.host||(n.host=Qn().location.host),n},ic=function(e){if(!e.match(/^https?:\/\//)){const t=Zn().createElement("a");t.href=e,e=t.href}return e},nc=function(e){if("string"===typeof e){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,i=t.exec(e);if(i)return i.pop().toLowerCase()}return""},sc=function(e,t=Qn().location){const i=tc(e),n=":"===i.protocol?t.protocol:i.protocol,s=n+i.host!==t.protocol+t.host;return s};var rc=Object.freeze({__proto__:null,parseUrl:tc,getAbsoluteURL:ic,getFileExtension:nc,isCrossOrigin:sc});const oc=function(e,t){const i=new(Qn().WebVTT.Parser)(Qn(),Qn().vttjs,Qn().WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),n.length>0&&(Qn().console&&Qn().console.groupCollapsed&&Qn().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),n.forEach((e=>ya.error(e))),Qn().console&&Qn().console.groupEnd&&Qn().console.groupEnd()),i.flush()},ac=function(e,t){const i={uri:e},n=sc(e);n&&(i.cors=n);const s="use-credentials"===t.tech_.crossOrigin();s&&(i.withCredentials=s),is()(i,Jl(this,(function(e,i,n){if(e)return ya.error(e,i);t.loaded_=!0,"function"!==typeof Qn().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(e=>{if("vttjserror"!==e.type)return oc(n,t);ya.error(`vttjs failed to load, stopping trying to process ${t.src}`)})):oc(n,t)})))};class lc extends ec{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=Ea(e,{kind:Ju[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=$u[t.mode]||"disabled";const n=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const s=new Ku(this.cues_),r=new Ku(this.activeCues_);let o=!1;this.timeupdateHandler=Jl(this,(function(e={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}));const a=()=>{this.stopTracking()};this.tech_.one("dispose",a),"disabled"!==i&&this.startTracking(),Object.defineProperties(this,{default:{get(){return n},set(){}},mode:{get(){return i},set(e){$u[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||ac(this.src,this),this.stopTracking(),"disabled"!==i&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return r;const e=this.tech_.currentTime(),t=[];for(let i=0,n=this.cues.length;i<n;i++){const n=this.cues[i];n.startTime<=e&&n.endTime>=e&&t.push(n)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(let i=0;i<t.length;i++)-1===this.activeCues_.indexOf(t[i])&&(o=!0);return this.activeCues_=t,r.setCues_(this.activeCues_),r},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&ac(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(Qn().vttjs&&!(e instanceof Qn().vttjs.VTTCue)){t=new(Qn().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const i in e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}const i=this.tech_.textTracks();for(let n=0;n<i.length;n++)i[n]!==this&&i[n].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;while(t--){const i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}lc.prototype.allowedEvents_={cuechange:"cuechange"};class uc extends ec{constructor(e={}){const t=Ea(e,{kind:Yu[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(e){"boolean"===typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class cc extends ec{constructor(e={}){const t=Ea(e,{kind:Zu[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(e){"boolean"===typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class dc extends nu{constructor(e={}){let t;super();const i=new lc(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=dc.NONE,i.addEventListener("loadeddata",(()=>{t=dc.LOADED,this.trigger({type:"load",target:this})}))}}dc.prototype.allowedEvents_={load:"load"},dc.NONE=0,dc.LOADING=1,dc.LOADED=2,dc.ERROR=3;const hc={audio:{ListClass:Hu,TrackClass:uc,capitalName:"Audio"},video:{ListClass:Gu,TrackClass:cc,capitalName:"Video"},text:{ListClass:Xu,TrackClass:lc,capitalName:"Text"}};Object.keys(hc).forEach((function(e){hc[e].getterName=`${e}Tracks`,hc[e].privateName=`${e}Tracks_`}));const pc={remoteText:{ListClass:Xu,TrackClass:lc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Qu,TrackClass:dc,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},mc=Object.assign({},hc,pc);function gc(e,t,i,n,s={}){const r=e.textTracks();s.kind=t,i&&(s.label=i),n&&(s.language=n),s.tech=e;const o=new mc.text.TrackClass(s);return r.addTrack(o),o}pc.names=Object.keys(pc),hc.names=Object.keys(hc),mc.names=[].concat(pc.names).concat(hc.names);class _c extends wu{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=e=>this.onDurationChange(e),this.trackProgress_=e=>this.trackProgress(e),this.trackCurrentTime_=e=>this.trackCurrentTime(e),this.stopTrackingCurrentTime_=e=>this.stopTrackingCurrentTime(e),this.disposeSourceHandler_=e=>this.disposeSourceHandler(e),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",(function(){this.hasStarted_=!0})),this.on("loadstart",(function(){this.hasStarted_=!1})),mc.names.forEach((t=>{const i=mc[t];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])})),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((t=>{!1===e[`native${t}Tracks`]&&(this[`featuresNative${t}Tracks`]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new mc.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",(()=>this.setTimeout((()=>this.triggerSourceset(e)),1))),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Jl(this,(function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Su(0,0)}bufferedPercent(){return Du(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(hc.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach((e=>{const t=this[`${e}Tracks`]()||[];let i=t.length;while(i--){const n=t[i];"text"===e&&this.removeRemoteTextTrack(n),t.removeTrack(n)}}))}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;while(t--){const i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new Lu(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Su(0,0):Su()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){hc.names.forEach((e=>{const t=hc[e],i=()=>{this.trigger(`${e}trackchange`)},n=this[t.getterName]();n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),this.on("dispose",(()=>{n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)}))}))}addWebVttScript_(){if(!Qn().WebVTT)if(Zn().body.contains(this.el())){if(!this.options_["vtt.js"]&&Sa(ss())&&Object.keys(ss()).length>0)return void this.trigger("vttjsloaded");const e=Zn().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",(()=>{e.onload=null,e.onerror=null})),Qn().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),i=t=>e.addTrack(t.track),n=t=>e.removeTrack(t.track);t.on("addtrack",i),t.on("removetrack",n),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),r=()=>{s();for(let t=0;t<e.length;t++){const i=e[t];i.removeEventListener("cuechange",s),"showing"===i.mode&&i.addEventListener("cuechange",s)}};r(),e.addEventListener("change",r),e.addEventListener("addtrack",r),e.addEventListener("removetrack",r),this.on("dispose",(function(){t.off("addtrack",i),t.off("removetrack",n),e.removeEventListener("change",r),e.removeEventListener("addtrack",r),e.removeEventListener("removetrack",r);for(let t=0;t<e.length;t++){const i=e[t];i.removeEventListener("cuechange",s)}}))}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return gc(this,e,t,i)}createRemoteTextTrack(e){const t=Ea(e,{tech:this});return new pc.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const i=this.createRemoteTextTrack(e);return"boolean"!==typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!1===t&&this.ready((()=>this.autoRemoteTextTracks_.addTrack(i.track))),i}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=jl();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",(()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())}))):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return _c.canPlayType(e.type)}static isTech(e){return e.prototype instanceof _c||e instanceof _c||e===_c}static registerTech(e,t){if(_c.techs_||(_c.techs_={}),!_c.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!_c.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!_c.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=yu(e),_c.techs_[e]=t,_c.techs_[fu(e)]=t,"Tech"!==e&&_c.defaultTechOrder_.push(e),t}static getTech(e){if(e)return _c.techs_&&_c.techs_[e]?_c.techs_[e]:(e=yu(e),Qn()&&Qn().videojs&&Qn().videojs[e]?(ya.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),Qn().videojs[e]):void 0)}}mc.names.forEach((function(e){const t=mc[e];_c.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),_c.prototype.featuresVolumeControl=!0,_c.prototype.featuresMuteControl=!0,_c.prototype.featuresFullscreenResize=!1,_c.prototype.featuresPlaybackRate=!1,_c.prototype.featuresProgressEvents=!1,_c.prototype.featuresSourceset=!1,_c.prototype.featuresTimeupdateEvents=!1,_c.prototype.featuresNativeTextTracks=!1,_c.prototype.featuresVideoFrameCallback=!1,_c.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){let n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===i&&(i=n.length),n.splice(i,0,t)},e.canPlayType=function(t){const i=e.sourceHandlers||[];let n;for(let e=0;e<i.length;e++)if(n=i[e].canPlayType(t),n)return n;return""},e.selectSourceHandler=function(t,i){const n=e.sourceHandlers||[];let s;for(let e=0;e<n.length;e++)if(s=n[e].canHandleSource(t,i),s)return n[e];return null},e.canPlaySource=function(t,i){const n=e.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""};const t=["seekable","seeking","duration"];t.forEach((function(e){const t=this[e];"function"===typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){let i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:ya.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},wu.registerComponent("Tech",_c),_c.registerTech("Tech",_c),_c.defaultTechOrder_=[];const fc={},yc={},vc={};function bc(e,t){fc[e]=fc[e]||[],fc[e].push(t)}function wc(e,t,i){e.setTimeout((()=>Lc(t,fc[t.type],i,e)),1)}function kc(e,t){e.forEach((e=>e.setTech&&e.setTech(t)))}function Tc(e,t,i){return e.reduceRight(Ic(i),t[i]())}function xc(e,t,i,n){return t[i](e.reduce(Ic(i),n))}function Sc(e,t,i,n=null){const s="call"+yu(i),r=e.reduce(Ic(s),n),o=r===vc,a=o?null:t[i](r);return Pc(e,i,a,o),a}const Ec={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Ac={setCurrentTime:1,setMuted:1,setVolume:1},Cc={play:1,pause:1};function Ic(e){return(t,i)=>t===vc?vc:i[e]?i[e](t):t}function Pc(e,t,i,n){for(let s=e.length-1;s>=0;s--){const r=e[s];r[t]&&r[t](n,i)}}function Nc(e){yc[e.id()]=null}function Dc(e,t){const i=yc[e.id()];let n=null;if(void 0===i||null===i)return n=t(e),yc[e.id()]=[[t,n]],n;for(let s=0;s<i.length;s++){const[e,r]=i[s];e===t&&(n=r)}return null===n&&(n=t(e),i.push([t,n])),n}function Lc(e={},t=[],i,n,s=[],r=!1){const[o,...a]=t;if("string"===typeof o)Lc(e,fc[o],i,n,s,r);else if(o){const t=Dc(n,o);if(!t.setSource)return s.push(t),Lc(e,a,i,n,s,r);t.setSource(Object.assign({},e),(function(o,l){if(o)return Lc(e,a,i,n,s,r);s.push(t),Lc(l,e.type===l.type?a:fc[l.type],i,n,s,r)}))}else a.length?Lc(e,a,i,n,s,r):r?i(e,s):Lc(e,fc["*"],i,n,s,!0)}const Oc={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Bc=function(e=""){const t=nc(e),i=Oc[t.toLowerCase()];return i||""},Uc=(e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;const i=e.cache_.sources.filter((e=>e.src===t));if(i.length)return i[0].type;const n=e.$$("source");for(let s=0;s<n.length;s++){const e=n[s];if(e.type&&e.src&&e.src===t)return e.type}return Bc(t)},Vc=function(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){e=Vc(e),Array.isArray(e)?t=t.concat(e):xa(e)&&t.push(e)})),e=t}else e="string"===typeof e&&e.trim()?[Rc({src:e})]:xa(e)&&"string"===typeof e.src&&e.src&&e.src.trim()?[Rc(e)]:[];return e};function Rc(e){if(!e.type){const t=Bc(e.src);t&&(e.type=t)}return e}class jc extends wu{constructor(e,t,i){const n=Ea({createEl:!1},t);if(super(e,n,i),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let s=0,r=t.playerOptions.techOrder;s<r.length;s++){const t=yu(r[s]);let i=_c.getTech(t);if(t||(i=wu.getComponent(t)),i&&i.isSupported()){e.loadTech_(t);break}}}}wu.registerComponent("MediaLoader",jc);class Mc extends wu{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=e=>this.handleMouseOver(e),this.handleMouseOut_=e=>this.handleMouseOut(e),this.handleClick_=e=>this.handleClick(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&ya.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;const n=tl(e,t,i);return n.appendChild(tl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=tl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,il(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){Jn().isEventKey(e,"Space")||Jn().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}wu.registerComponent("ClickableComponent",Mc);class Fc extends Mc{constructor(e,t){super(e,t),this.update(),this.update_=e=>this.update(e),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return tl("div",{className:"vjs-poster"})}crossOrigin(e){if("undefined"===typeof e)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){e?(this.$("img")||this.el_.appendChild(tl("picture",{className:"vjs-poster",tabIndex:-1},{},tl("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e):this.el_.textContent=""}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Bu(this.player_.play()):this.player_.pause())}}Fc.prototype.crossorigin=Fc.prototype.crossOrigin,wu.registerComponent("PosterImage",Fc);const qc="#222",zc="#ccc",Hc={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Wc(e,t){let i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function Gc(e,t,i){try{e.style[t]=i}catch(ST){return}}class Xc extends wu{constructor(e,t,i){super(e,t,i);const n=e=>this.updateDisplay(e);e.on("loadstart",(e=>this.toggleDisplay(e))),e.on("texttrackchange",n),e.on("loadedmetadata",(e=>this.preselectTrack(e))),e.ready(Jl(this,(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",n),e.on("playerresize",n);const t=Qn().screen.orientation||Qn(),i=Qn().screen.orientation?"change":"orientationchange";t.addEventListener(i,n),e.on("dispose",(()=>t.removeEventListener(i,n)));const s=this.options_.playerOptions.tracks||[];for(let e=0;e<s.length;e++)this.player_.addRemoteTextTrack(s[e],!0);this.preselectTrack()})))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let n,s,r;for(let o=0;o<t.length;o++){const a=t[o];i&&i.enabled&&i.language&&i.language===a.language&&a.kind in e?a.kind===i.kind?r=a:r||(r=a):i&&!i.enabled?(r=null,n=null,s=null):a.default&&("descriptions"!==a.kind||n?a.kind in e&&!s&&(s=a):n=a)}r?r.mode="showing":s?s.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"===typeof Qn().WebVTT&&Qn().WebVTT.processCues(Qn(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const t=[];for(let i=0;i<e.length;++i){const n=e[i];"showing"===n.mode&&t.push(n)}return void this.updateForTrack(t)}let i=null,n=null,s=e.length;while(s--){const t=e[s];"showing"===t.mode&&("descriptions"===t.kind?i=t:n=t)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):i&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),i=e.activeCues;let n=i.length;while(n--){const e=i[n];if(!e)continue;const s=e.displayState;if(t.color&&(s.firstChild.style.color=t.color),t.textOpacity&&Gc(s.firstChild,"color",Wc(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(s.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Gc(s.firstChild,"backgroundColor",Wc(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Gc(s,"backgroundColor",Wc(t.windowColor,t.windowOpacity)):s.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?s.firstChild.style.textShadow=`2px 2px 3px ${qc}, 2px 2px 4px ${qc}, 2px 2px 5px ${qc}`:"raised"===t.edgeStyle?s.firstChild.style.textShadow=`1px 1px ${qc}, 2px 2px ${qc}, 3px 3px ${qc}`:"depressed"===t.edgeStyle?s.firstChild.style.textShadow=`1px 1px ${zc}, 0 1px ${zc}, -1px -1px ${qc}, 0 -1px ${qc}`:"uniform"===t.edgeStyle&&(s.firstChild.style.textShadow=`0 0 4px ${qc}, 0 0 4px ${qc}, 0 0 4px ${qc}, 0 0 4px ${qc}`)),t.fontPercent&&1!==t.fontPercent){const e=Qn().parseFloat(s.style.fontSize);s.style.fontSize=e*t.fontPercent+"px",s.style.height="auto",s.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Hc[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!==typeof Qn().WebVTT||e.every((e=>!e.activeCues)))return;const t=[];for(let i=0;i<e.length;++i){const n=e[i];for(let e=0;e<n.activeCues.length;++e)t.push(n.activeCues[e])}Qn().WebVTT.processCues(Qn(),t,this.el_);for(let i=0;i<e.length;++i){const t=e[i];for(let e=0;e<t.activeCues.length;++e){const n=t.activeCues[e].displayState;rl(n,"vjs-text-track-cue","vjs-text-track-cue-"+(t.language?t.language:i)),t.language&&dl(n,"lang",t.language)}this.player_.textTrackSettings&&this.updateDisplayState(t)}}}wu.registerComponent("TextTrackDisplay",Xc);class Qc extends wu{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=tl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(i),n}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}wu.registerComponent("LoadingSpinner",Qc);class Kc extends Mc{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);const n=tl(e,t,i);return n.appendChild(tl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(e,t={}){const i=this.constructor.name;return ya.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),wu.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){Jn().isEventKey(e,"Space")||Jn().isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}wu.registerComponent("Button",Kc);class Zc extends Kc{constructor(e,t){super(e,t),this.mouseused_=!1,this.on("mousedown",(e=>this.handleMouseDown(e)))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return Bu(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(!n)return void this.player_.tech(!0).focus();const s=()=>n.focus();Ou(t)?t.then(s,(()=>{})):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}Zc.prototype.controlText_="Play Video",wu.registerComponent("BigPlayButton",Zc);class Yc extends Kc{constructor(e,t){super(e,t),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){Jn().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}wu.registerComponent("CloseButton",Yc);class Jc extends Kc{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.on(e,"play",(e=>this.handlePlay(e))),this.on(e,"pause",(e=>this.handlePause(e))),t.replay&&this.on(e,"ended",(e=>this.handleEnded(e)))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Bu(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(e=>this.handleSeeked(e)))}}Jc.prototype.controlText_="Play",wu.registerComponent("PlayToggle",Jc);class $c extends wu{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended"],(e=>this.updateContent(e))),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=tl("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(i),this.contentEl_=tl("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=Pu(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,ya.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Zn().createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))})))}updateContent(e){}}$c.prototype.labelText_="Time",$c.prototype.controlText_="Time",wu.registerComponent("TimeDisplay",$c);class ed extends $c{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}ed.prototype.labelText_="Current Time",ed.prototype.controlText_="Current Time",wu.registerComponent("CurrentTimeDisplay",ed);class td extends $c{constructor(e,t){super(e,t);const i=e=>this.updateContent(e);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}td.prototype.labelText_="Duration",td.prototype.controlText_="Duration",wu.registerComponent("DurationDisplay",td);class id extends wu{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}}wu.registerComponent("TimeDivider",id);class nd extends $c{constructor(e,t){super(e,t),this.on(e,"durationchange",(e=>this.updateContent(e)))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(tl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!==typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}nd.prototype.labelText_="Remaining Time",nd.prototype.controlText_="Remaining Time",wu.registerComponent("RemainingTimeDisplay",nd);class sd extends wu{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",(e=>this.updateShowing(e)))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=tl("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(tl("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(Zn().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}wu.registerComponent("LiveDisplay",sd);class rd extends Kc{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=e=>this.updateLiveEdgeStatus(e),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=tl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function od(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))}rd.prototype.controlText_="Seek to live, currently playing live",wu.registerComponent("SeekToLive",rd);var ad=Object.freeze({__proto__:null,clamp:od});class ld extends wu{constructor(e,t){super(e,t),this.handleMouseDown_=e=>this.handleMouseDown(e),this.handleMouseUp_=e=>this.handleMouseUp(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.handleClick_=e=>this.handleClick(e),this.handleMouseMove_=e=>this.handleMouseMove(e),this.update_=e=>this.update(e),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Ua||e.preventDefault(),pl(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;ml(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",(()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"}))),e}getProgress(){return Number(od(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=fl(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){Jn().isEventKey(e,"Left")||Jn().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Jn().isEventKey(e,"Right")||Jn().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}wu.registerComponent("Slider",ld);const ud=(e,t)=>od(e/t*100,0,100).toFixed(2)+"%";class cd extends wu{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",(e=>this.update(e)))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=tl("span",{className:"vjs-control-text"}),i=tl("span",{textContent:this.localize("Loaded")}),n=Zn().createTextNode(": ");return this.percentageEl_=tl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(n),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",(()=>{const e=this.player_.liveTracker,t=this.player_.buffered(),i=e&&e.isLive()?e.seekableEnd():this.player_.duration(),n=this.player_.bufferedEnd(),s=this.partEls_,r=ud(n,i);this.percent_!==r&&(this.el_.style.width=r,il(this.percentageEl_,r),this.percent_=r);for(let o=0;o<t.length;o++){const e=t.start(o),i=t.end(o);let r=s[o];r||(r=this.el_.appendChild(tl()),s[o]=r),r.dataset.start===e&&r.dataset.end===i||(r.dataset.start=e,r.dataset.end=i,r.style.left=ud(e,n),r.style.width=ud(i-e,n))}for(let o=s.length;o>t.length;o--)this.el_.removeChild(s[o-1]);s.length=t.length}))}}wu.registerComponent("LoadProgressBar",cd);class dd extends wu{constructor(e,t){super(e,t),this.update=$l(Jl(this,this.update),Yl)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){const n=_l(this.el_),s=gl(this.player_.el()),r=e.width*t;if(!s||!n)return;const o=e.left-s.left+r,a=e.width-r+(s.right-e.right);let l=n.width/2;o<l?l+=l-o:a<l&&(l=a),l<0?l=0:l>n.width&&(l=n.width),l=Math.round(l),this.el_.style.right=`-${l}px`,this.write(i)}write(e){il(this.el_,e)}updateTime(e,t,i,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",(()=>{let s;const r=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const e=this.player_.liveTracker.liveWindow(),i=e-t*e;s=(i<1?"":"-")+Pu(i,e)}else s=Pu(i,r);this.update(e,t,s),n&&n()}))}}wu.registerComponent("TimeTooltip",dd);class hd extends wu{constructor(e,t){super(e,t),this.update=$l(Jl(this,this.update),Yl)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const i=this.getChild("timeTooltip");if(!i)return;const n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,n)}}hd.prototype.options_={children:[]},Ga||Da||hd.prototype.options_.children.push("timeTooltip"),wu.registerComponent("PlayProgressBar",hd);class pd extends wu{constructor(e,t){super(e,t),this.update=$l(Jl(this,this.update),Yl)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(()=>{this.el_.style.left=e.width*t+"px"}))}}pd.prototype.options_={children:["timeTooltip"]},wu.registerComponent("MouseTimeDisplay",pd);const md=5,gd=12;class _d extends ld{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Jl(this,this.update),this.update=$l(this.update_,Yl),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Zn()&&"visibilityState"in Zn()&&this.on(Zn(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===Zn().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Yl))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===Zn().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",(()=>{const e=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let n=this.player_.duration();i&&i.isLive()&&(n=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),this.currentTime_===e&&this.duration_===n||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Pu(e,n),Pu(n,n)],"{1} of {2}")),this.currentTime_=e,this.duration_=n),this.bar&&this.bar.update(gl(this.el()),this.getProgress())})),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){Tl(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Tl(e))return;let i;t||this.player_.scrubbing()||this.player_.scrubbing(!0);const n=this.calculateDistance(e),s=this.player_.liveTracker;if(s&&s.isLive()){if(n>=.99)return void s.seekToLiveEdge();const e=s.seekableStart(),t=s.liveCurrentTime();if(i=e+n*s.liveWindow(),i>=t&&(i=t),i<=e&&(i=e+.1),i===1/0)return}else i=n*this.player_.duration(),i===this.player_.duration()&&(i-=.1);this.userSeek_(i)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Bu(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+md)}stepBack(){this.userSeek_(this.player_.currentTime()-md)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(Jn().isEventKey(e,"Space")||Jn().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Jn().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(Jn().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Jn()(e))){e.preventDefault(),e.stopPropagation();const i=10*(Jn().codes[Jn()(e)]-Jn().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else Jn().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-md*gd)):Jn().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+md*gd)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Zn()&&"visibilityState"in Zn()&&this.off(Zn(),"visibilitychange",this.toggleVisibility_),super.dispose()}}_d.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ga||Da||_d.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),wu.registerComponent("SeekBar",_d);class fd extends wu{constructor(e,t){super(e,t),this.handleMouseMove=$l(Jl(this,this.handleMouseMove),Yl),this.throttledHandleMouseSeek=$l(Jl(this,this.handleMouseSeek),Yl),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.handleMouseDownHandler_=e=>this.handleMouseDown(e),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const i=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(!i&&!n)return;const s=t.el(),r=_l(s);let o=fl(s,e).x;o=od(o,0,1),n&&n.update(r,o),i&&i.update(r,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach((e=>e.disable&&e.disable())),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Bu(this.player_.play())}}enable(){this.children().forEach((e=>e.enable&&e.enable())),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}fd.prototype.options_={children:["seekBar"]},wu.registerComponent("ProgressControl",fd);class yd extends Kc{constructor(e,t){super(e,t),this.on(e,["enterpictureinpicture","leavepictureinpicture"],(e=>this.handlePictureInPictureChange(e))),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],(e=>this.handlePictureInPictureEnabledChange(e))),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(()=>{const t="audio"===e.currentType().substring(0,5);t||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),this.hide()):this.show()})),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){Zn().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in Qn()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}yd.prototype.controlText_="Picture-in-Picture",wu.registerComponent("PictureInPictureToggle",yd);class vd extends Kc{constructor(e,t){super(e,t),this.on(e,"fullscreenchange",(e=>this.handleFullscreenChange(e))),!1===Zn()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}vd.prototype.controlText_="Fullscreen",wu.registerComponent("FullscreenToggle",vd);const bd=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))};class wd extends wu{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}wu.registerComponent("VolumeLevel",wd);class kd extends wu{constructor(e,t){super(e,t),this.update=$l(Jl(this,this.update),Yl)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,n){if(!i){const i=gl(this.el_),n=gl(this.player_.el()),s=e.width*t;if(!n||!i)return;const r=e.left-n.left+s,o=e.width-s+(n.right-e.right);let a=i.width/2;r<a?a+=a-r:o<a&&(a=o),a<0?a=0:a>i.width&&(a=i.width),this.el_.style.right=`-${a}px`}this.write(`${n}%`)}write(e){il(this.el_,e)}updateVolume(e,t,i,n,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(()=>{this.update(e,t,i,n.toFixed(0)),s&&s()}))}}wu.registerComponent("VolumeLevelTooltip",kd);class Td extends wu{constructor(e,t){super(e,t),this.update=$l(Jl(this,this.update),Yl)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){const n=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,n,(()=>{i?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"}))}}Td.prototype.options_={children:["volumeLevelTooltip"]},wu.registerComponent("MouseVolumeLevelDisplay",Td);class xd extends ld{constructor(e,t){super(e,t),this.on("slideractive",(e=>this.updateLastVolume_(e))),this.on(e,"volumechange",(e=>this.updateARIAAttributes(e))),e.ready((()=>this.updateARIAAttributes()))}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Tl(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const i=this.el(),n=gl(i),s=this.vertical();let r=fl(i,e);r=s?r.y:r.x,r=od(r,0,1),t.update(n,r,s)}Tl(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",(()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)}))}}xd.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Ga||Da||xd.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),xd.prototype.playerEvent="volumechange",wu.registerComponent("VolumeBar",xd);class Sd extends wu{constructor(e,t={}){t.vertical=t.vertical||!1,("undefined"===typeof t.volumeBar||Sa(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),bd(this,e),this.throttledHandleMouseMove=$l(Jl(this,this.handleMouseMove),Yl),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.on("mousedown",(e=>this.handleMouseDown(e))),this.on("touchstart",(e=>this.handleMouseDown(e))),this.on("mousemove",(e=>this.handleMouseMove(e))),this.on(this.volumeBar,["focus","slideractive"],(()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")})),this.on(this.volumeBar,["blur","sliderinactive"],(()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")}))}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}Sd.prototype.options_={children:["volumeBar"]},wu.registerComponent("VolumeControl",Sd);const Ed=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))};class Ad extends Kc{constructor(e,t){super(e,t),Ed(this,e),this.on(e,["loadstart","volumechange"],(e=>this.update(e)))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){const e=i<.1?.1:i;this.player_.volume(e),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;Ga&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2),ol(this.el_,[0,1,2,3].reduce(((e,t)=>e+`${t?" ":""}vjs-vol-${t}`),"")),rl(this.el_,`vjs-vol-${t}`)}updateControlText_(){const e=this.player_.muted()||0===this.player_.volume(),t=e?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}Ad.prototype.controlText_="Mute",wu.registerComponent("MuteToggle",Ad);class Cd extends wu{constructor(e,t={}){"undefined"!==typeof t.inline?t.inline=t.inline:t.inline=!0,("undefined"===typeof t.volumeControl||Sa(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=e=>this.handleKeyPress(e),this.on(e,["loadstart"],(e=>this.volumePanelState_(e))),this.on(this.muteToggle,"keyup",(e=>this.handleKeyPress(e))),this.on(this.volumeControl,"keyup",(e=>this.handleVolumeControlKeyUp(e))),this.on("keydown",(e=>this.handleKeyPress(e))),this.on("mouseover",(e=>this.handleMouseOver(e))),this.on("mouseout",(e=>this.handleMouseOut(e))),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){Jn().isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Wl(Zn(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Gl(Zn(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){Jn().isEventKey(e,"Esc")&&this.handleMouseOut()}}Cd.prototype.options_={children:["muteToggle","volumeControl"]},wu.registerComponent("VolumePanel",Cd);class Id extends Kc{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),i=this.player_.liveTracker,n=i&&i.isLive()?i.seekableEnd():this.player_.duration();let s;s=t+this.skipTime<=n?t+this.skipTime:n,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}wu.registerComponent("SkipForward",Id);class Pd extends Kc{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),i=this.player_.liveTracker,n=i&&i.isLive()&&i.seekableStart();let s;s=n&&t-this.skipTime<=n?n:t>=this.skipTime?t-this.skipTime:0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Pd.prototype.controlText_="Skip Backward",wu.registerComponent("SkipBackward",Pd);class Nd extends wu{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",(e=>this.handleKeyDown(e))),this.boundHandleBlur_=e=>this.handleBlur(e),this.boundHandleTapClick_=e=>this.handleTapClick(e)}addEventListenerForItem(e){e instanceof wu&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof wu&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"===typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=tl(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Wl(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Zn().activeElement;if(!this.children().some((e=>e.el()===t))){const e=this.menuButton_;e&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const i=t.filter((t=>t.el()===e.target))[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}}handleKeyDown(e){Jn().isEventKey(e,"Left")||Jn().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Jn().isEventKey(e,"Right")||Jn().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice(),i=t.length&&t[0].hasClass("vjs-menu-title");i&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}wu.registerComponent("Menu",Nd);class Dd extends wu{constructor(e,t={}){super(e,t),this.menuButton_=new Kc(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=Kc.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const n=e=>this.handleClick(e);this.handleMenuKeyUp_=e=>this.handleMenuKeyUp(e),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",(e=>this.handleKeyDown(e))),this.on(this.menuButton_,"mouseenter",(()=>{this.addClass("vjs-hover"),this.menu.show(),Wl(Zn(),"keyup",this.handleMenuKeyUp_)})),this.on("mouseleave",(e=>this.handleMouseLeave(e))),this.on("keydown",(e=>this.handleSubmenuKeyDown(e)))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Nd(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=tl("li",{className:"vjs-menu-title",textContent:yu(this.options_.title),tabIndex:-1}),i=new wu(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";!0===this.options_.inline?e+="-inline":e+="-popup";const t=Kc.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Gl(Zn(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){Jn().isEventKey(e,"Esc")||Jn().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Jn().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Jn().isEventKey(e,"Up")||Jn().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(Jn().isEventKey(e,"Esc")||Jn().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(Jn().isEventKey(e,"Esc")||Jn().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Jn().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ga&&$a())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}wu.registerComponent("MenuButton",Dd);class Ld extends Dd{constructor(e,t){const i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;const n=Jl(this,this.update);i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),i.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",(function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n),i.removeEventListener("labelchange",n)}))}}wu.registerComponent("TrackButton",Ld);const Od=["Tab","Esc","Up","Down","Right","Left"];class Bd extends Mc{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;const n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i);return n.replaceChild(tl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(e){Od.some((t=>Jn().isEventKey(e,t)))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}wu.registerComponent("MenuItem",Bd);class Ud extends Bd{constructor(e,t){const i=t.track,n=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected="showing"===i.mode,super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...e)=>{this.handleTracksChange.apply(this,e)},r=(...e)=>{this.handleSelectedLanguageChange.apply(this,e)};if(e.on(["loadstart","texttrackchange"],s),n.addEventListener("change",s),n.addEventListener("selectedlanguagechange",r),this.on("dispose",(function(){e.off(["loadstart","texttrackchange"],s),n.removeEventListener("change",s),n.removeEventListener("selectedlanguagechange",r)})),void 0===n.onchange){let e;this.on(["tap","click"],(function(){if("object"!==typeof Qn().Event)try{e=new(Qn().Event)("change")}catch(t){}e||(e=Zn().createEvent("Event"),e.initEvent("change",!0,!0)),n.dispatchEvent(e)}))}this.handleTracksChange()}handleClick(e){const t=this.track,i=this.player_.textTracks();if(super.handleClick(e),i)for(let n=0;n<i.length;n++){const e=i[n];-1!==this.kinds.indexOf(e.kind)&&(e===t?"showing"!==e.mode&&(e.mode="showing"):"disabled"!==e.mode&&(e.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}wu.registerComponent("TextTrackMenuItem",Ud);class Vd extends Ud{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let i=!0;for(let n=0,s=t.length;n<s;n++){const e=t[n];if(this.options_.kinds.indexOf(e.kind)>-1&&"showing"===e.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let i=!0;for(let n=0,s=t.length;n<s;n++){const e=t[n];if(["captions","descriptions","subtitles"].indexOf(e.kind)>-1&&"showing"===e.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}wu.registerComponent("OffTextTrackMenuItem",Vd);class Rd extends Ld{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Ud){let i;this.label_&&(i=`${this.label_} off`),e.push(new Vd(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<n.length;s++){const i=n[s];if(this.kinds_.indexOf(i.kind)>-1){const n=new t(this.player_,{track:i,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});n.addClass(`vjs-${i.kind}-menu-item`),e.push(n)}}return e}}wu.registerComponent("TextTrackButton",Rd);class jd extends Bd{constructor(e,t){const i=t.track,n=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=n.text,t.selected=n.startTime<=s&&s<n.endTime,super(e,t),this.track=i,this.cue=n}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}wu.registerComponent("ChaptersTrackMenuItem",jd);class Md extends Rd{constructor(e,t,i){super(e,t,i),this.selectCurrentItem_=()=>{this.items.forEach((e=>{e.selected(this.track_.activeCues[0]===e.cue)}))}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(yu(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let i=0,n=t.length;i<n;i++){const n=t[i],s=new jd(this.player_,{track:this.track_,cue:n});e.push(s)}return e}}Md.prototype.kind_="chapters",Md.prototype.controlText_="Chapters",wu.registerComponent("ChaptersButton",Md);class Fd extends Rd{constructor(e,t,i){super(e,t,i);const n=e.textTracks(),s=Jl(this,this.handleTracksChange);n.addEventListener("change",s),this.on("dispose",(function(){n.removeEventListener("change",s)}))}handleTracksChange(e){const t=this.player().textTracks();let i=!1;for(let n=0,s=t.length;n<s;n++){const e=t[n];if(e.kind!==this.kind_&&"showing"===e.mode){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Fd.prototype.kind_="descriptions",Fd.prototype.controlText_="Descriptions",wu.registerComponent("DescriptionsButton",Fd);class qd extends Rd{constructor(e,t,i){super(e,t,i)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}qd.prototype.kind_="subtitles",qd.prototype.controlText_="Subtitles",wu.registerComponent("SubtitlesButton",qd);class zd extends Ud{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}wu.registerComponent("CaptionSettingsMenuItem",zd);class Hd extends Rd{constructor(e,t,i){super(e,t,i)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new zd(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}Hd.prototype.kind_="captions",Hd.prototype.controlText_="Captions",wu.registerComponent("CaptionsButton",Hd);class Wd extends Ud{createEl(e,t,i){const n=super.createEl(e,t,i),s=n.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(s.appendChild(tl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(tl("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}}wu.registerComponent("SubsCapsMenuItem",Wd);class Gd extends Rd{constructor(e,t={}){super(e,t),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(yu(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new zd(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,Wd),e}}Gd.prototype.kinds_=["captions","subtitles"],Gd.prototype.controlText_="Subtitles",wu.registerComponent("SubsCapsButton",Gd);class Xd extends Bd{constructor(e,t){const i=t.track,n=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const s=(...e)=>{this.handleTracksChange.apply(this,e)};n.addEventListener("change",s),this.on("dispose",(()=>{n.removeEventListener("change",s)}))}createEl(e,t,i){const n=super.createEl(e,t,i),s=n.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(s.appendChild(tl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(tl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let t=0;t<e.length;t++){const i=e[t];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}wu.registerComponent("AudioTrackMenuItem",Xd);class Qd extends Ld{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const n=t[i];e.push(new Xd(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e}}Qd.prototype.controlText_="Audio Track",wu.registerComponent("AudioTrackButton",Qd);class Kd extends Bd{constructor(e,t){const i=t.rate,n=parseFloat(i,10);t.label=i,t.selected=n===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=n,this.on(e,"ratechange",(e=>this.update(e)))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}Kd.prototype.contentElType="button",wu.registerComponent("PlaybackRateMenuItem",Kd);class Zd extends Dd{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",(e=>this.updateVisibility(e))),this.on(e,"ratechange",(e=>this.updateLabel(e))),this.on(e,"playbackrateschange",(e=>this.handlePlaybackRateschange(e)))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=tl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new Kd(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}Zd.prototype.controlText_="Playback Rate",wu.registerComponent("PlaybackRateMenuButton",Zd);class Yd extends wu{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}}wu.registerComponent("Spacer",Yd);class Jd extends Yd{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}wu.registerComponent("CustomControlSpacer",Jd);class $d extends wu{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}$d.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Zn()&&$d.prototype.options_.children.splice($d.prototype.options_.children.length-1,0,"pictureInPictureToggle"),wu.registerComponent("ControlBar",$d);class eh extends Fu{constructor(e,t){super(e,t),this.on(e,"error",(e=>this.open(e)))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}eh.prototype.options_=Object.assign({},Fu.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),wu.registerComponent("ErrorDisplay",eh);const th="vjs-text-track-settings",ih=["#000","Black"],nh=["#00F","Blue"],sh=["#0FF","Cyan"],rh=["#0F0","Green"],oh=["#F0F","Magenta"],ah=["#F00","Red"],lh=["#FFF","White"],uh=["#FF0","Yellow"],ch=["1","Opaque"],dh=["0.5","Semi-Transparent"],hh=["0","Transparent"],ph={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ih,lh,ah,rh,nh,uh,oh,sh]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[ch,dh,hh]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[lh,ih,ah,rh,nh,uh,oh,sh]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>"1.00"===e?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[ch,dh]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[hh,dh,ch]}};function mh(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function gh(e,t){const i=e.options[e.options.selectedIndex].value;return mh(i,t)}function _h(e,t,i){if(t)for(let n=0;n<e.options.length;n++)if(mh(e.options[n].value,i)===t){e.selectedIndex=n;break}}ph.windowColor.options=ph.backgroundColor.options;class fh extends Fu{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=tl("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",(()=>{this.saveSettings(),this.close()})),this.on(this.$(".vjs-default-button"),"click",(()=>{this.setDefaults(),this.updateDisplay()})),ka(ph,(e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",i="label"){const n=ph[e],s=n.id.replace("%s",this.id_),r=[t,s].join(" ").trim();return[`<${i} id="${s}" class="${"label"===i?"vjs-label":""}">`,this.localize(n.label),`</${i}>`,`<select aria-labelledby="${r}">`].concat(n.options.map((e=>{const t=s+"-"+e[1].replace(/\W+/g,"");return[`<option id="${t}" value="${e[0]}" `,`aria-labelledby="${r} ${t}">`,this.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return tl("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return tl("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return tl("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return Ta(ph,((e,t,i)=>{const n=gh(this.$(t.selector),t.parser);return void 0!==n&&(e[i]=n),e}),{})}setValues(e){ka(ph,((t,i)=>{_h(this.$(t.selector),e[i],t.parser)}))}setDefaults(){ka(ph,(e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t}))}restoreSettings(){let e;try{e=JSON.parse(Qn().localStorage.getItem(th))}catch(t){ya.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?Qn().localStorage.setItem(th,JSON.stringify(e)):Qn().localStorage.removeItem(th)}catch(t){ya.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()}handleLanguagechange(){this.fill()}}wu.registerComponent("TextTrackSettings",fh);class yh extends wu{constructor(e,t){let i=t.ResizeObserver||Qn().ResizeObserver;null===t.ResizeObserver&&(i=!1);const n=Ea({createEl:!i,reportTouchActivity:!1},t);super(e,n),this.ResizeObserver=t.ResizeObserver||Qn().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=eu((()=>{this.resizeHandler()}),100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const e=this.debouncedHandler_;let t=this.unloadListener_=function(){Gl(this,"resize",e),Gl(this,"unload",t),t=null};Wl(this.el_.contentWindow,"unload",t),Wl(this.el_.contentWindow,"resize",e)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}wu.registerComponent("ResizeManager",yh);const vh={trackingThreshold:20,liveTolerance:15};class bh extends wu{constructor(e,t){const i=Ea(vh,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",(e=>this.handleDurationchange(e))),this.on(this.player_,"canplay",(()=>this.toggleTracking()))}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(Qn().performance.now().toFixed(4)),i=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;const n=this.liveCurrentTime(),s=this.player_.currentTime();let r=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-s)>this.options_.liveTolerance;this.timeupdateSeen_&&n!==1/0||(r=!1),r!==this.behindLiveEdge_&&(this.behindLiveEdge_=r,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Yl),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;while(i--)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;while(i--)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"===typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}wu.registerComponent("LiveTracker",bh);class wh extends wu{constructor(e,t){super(e,t),this.on("statechanged",(e=>this.updateDom_())),this.updateDom_()}createEl(){return this.els={title:tl("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${jl()}`}),description:tl("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${jl()}`})},tl("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach((e=>{const n=this.state[e],s=this.els[e],r=i[e];vl(s),n&&il(s,n),t&&(t.removeAttribute(r),n&&t.setAttribute(r,s.id))})),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}wu.registerComponent("TitleBar",wh);const kh=e=>{const t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;const i=e.$$("source"),n=[];let s="";if(!i.length)return!1;for(let r=0;r<i.length;r++){const e=i[r].src;e&&-1===n.indexOf(e)&&n.push(e)}return!!n.length&&(1===n.length&&(s=n[0]),e.triggerSourceset(s),!0)},Th=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){const t=Zn().createElement(this.nodeName.toLowerCase());t.innerHTML=e;const i=Zn().createDocumentFragment();while(t.childNodes.length)i.appendChild(t.childNodes[0]);return this.innerText="",Qn().Element.prototype.appendChild.call(this,i),this.innerHTML}}),xh=(e,t)=>{let i={};for(let n=0;n<e.length;n++)if(i=Object.getOwnPropertyDescriptor(e[n],t),i&&i.set&&i.get)break;return i.enumerable=!0,i.configurable=!0,i},Sh=e=>xh([e.el(),Qn().HTMLMediaElement.prototype,Qn().Element.prototype,Th],"innerHTML"),Eh=function(e){const t=e.el();if(t.resetSourceWatch_)return;const i={},n=Sh(e),s=i=>(...n)=>{const s=i.apply(t,n);return kh(e),s};["append","appendChild","insertAdjacentHTML"].forEach((e=>{t[e]&&(i[e]=t[e],t[e]=s(i[e]))})),Object.defineProperty(t,"innerHTML",Ea(n,{set:s(n.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(i).forEach((e=>{t[e]=i[e]})),Object.defineProperty(t,"innerHTML",n)},e.one("sourceset",t.resetSourceWatch_)},Ah=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?ic(Qn().Element.prototype.getAttribute.call(this,"src")):""},set(e){return Qn().Element.prototype.setAttribute.call(this,"src",e),e}}),Ch=e=>xh([e.el(),Qn().HTMLMediaElement.prototype,Ah],"src"),Ih=function(e){if(!e.featuresSourceset)return;const t=e.el();if(t.resetSourceset_)return;const i=Ch(e),n=t.setAttribute,s=t.load;Object.defineProperty(t,"src",Ea(i,{set:n=>{const s=i.set.call(t,n);return e.triggerSourceset(t.src),s}})),t.setAttribute=(i,s)=>{const r=n.call(t,i,s);return/src/i.test(i)&&e.triggerSourceset(t.src),r},t.load=()=>{const i=s.call(t);return kh(e)||(e.triggerSourceset(""),Eh(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):kh(e)||Eh(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=s,t.setAttribute=n,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}};class Ph extends _c{constructor(e,t){super(e,t);const i=e.source;let n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,i&&(this.el_.currentSrc!==i.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const e=this.el_.childNodes;let t=e.length;const i=[];while(t--){const s=e[t],r=s.nodeName.toLowerCase();"track"===r&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(s),this.remoteTextTracks().addTrack(s.track),this.textTracks().addTrack(s.track),n||this.el_.hasAttribute("crossorigin")||!sc(s.src)||(n=!0)):i.push(s))}for(let n=0;n<i.length;n++)this.el_.removeChild(i[n])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&ya.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Ha||za)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ph.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){Ih(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const i=()=>{t=[];for(let i=0;i<e.length;i++){const n=e[i];"metadata"===n.kind&&t.push({track:n,storedMode:n.mode})}};i(),e.addEventListener("change",i),this.on("dispose",(()=>e.removeEventListener("change",i)));const n=()=>{for(let e=0;e<t.length;e++){const i=t[e];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(()=>{e.removeEventListener("change",i),e.removeEventListener("change",n),e.addEventListener("change",n)})),this.on("webkitendfullscreen",(()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",n)}))}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach((e=>{const t=this.el()[`${i}Tracks`];t.removeEventListener(e,this[`${i}TracksListeners_`][e])})),this[`featuresNative${e}Tracks`]=!t,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=hc[e],i=this.el()[t.getterName],n=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!i||!i.addEventListener)return;const s={change:t=>{const i={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(i),"text"===e&&this[pc.remoteText.getterName]().trigger(i)},addtrack(e){n.addTrack(e.track)},removetrack(e){n.removeTrack(e.track)}},r=function(){const e=[];for(let t=0;t<n.length;t++){let s=!1;for(let e=0;e<i.length;e++)if(i[e]===n[t]){s=!0;break}s||e.push(n[t])}while(e.length)n.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach((e=>{const t=s[e];i.addEventListener(e,t),this.on("dispose",(n=>i.removeEventListener(e,t)))})),this.on("loadstart",r),this.on("dispose",(e=>this.off("loadstart",r)))}proxyNativeTracks_(){hc.names.forEach((e=>{this.proxyNativeTracksForType_(e)}))}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),Ph.disposeMediaElement(e),e=t}else{e=Zn().createElement("video");const t=this.options_.tag&&ul(this.options_.tag),i=Ea({},t);Ha&&!0===this.options_.nativeControlsForTouch||delete i.controls,ll(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&dl(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){const n=t[i],s=this.options_[n];"undefined"!==typeof s&&(s?dl(e,n,n):hl(e,n),e[n]=s)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let e=!1;const t=function(){e=!0};this.on("loadstart",t);const i=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",t),this.off("loadedmetadata",i),e||this.trigger("loadstart")}))}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready((function(){t.forEach((function(e){this.trigger(e)}),this)}))}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Xa?this.el_.fastSeek(e):this.el_.currentTime=e}catch(ST){ya(ST,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Da&&Ua&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",(()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)}))}supportsFullScreen(){return"function"===typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Bu(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(ST){this.trigger("fullscreenerror",ST)}}),0);else try{e.webkitEnterFullScreen()}catch(ST){this.trigger("fullscreenerror",ST)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){Ph.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Zn().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let i=t.length;while(i--)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Qn().performance&&(e.creationTime=Qn().performance.now()),e}}Aa(Ph,"TEST_VID",(function(){if(!Ya())return;const e=Zn().createElement("video"),t=Zn().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e})),Ph.isSupported=function(){try{Ph.TEST_VID.volume=.5}catch(ST){return!1}return!(!Ph.TEST_VID||!Ph.TEST_VID.canPlayType)},Ph.canPlayType=function(e){return Ph.TEST_VID.canPlayType(e)},Ph.canPlaySource=function(e,t){return Ph.canPlayType(e.type)},Ph.canControlVolume=function(){try{const e=Ph.TEST_VID.volume;Ph.TEST_VID.volume=e/2+.1;const t=e!==Ph.TEST_VID.volume;return t&&Ga?(Qn().setTimeout((()=>{Ph&&Ph.prototype&&(Ph.prototype.featuresVolumeControl=e!==Ph.TEST_VID.volume)})),!1):t}catch(ST){return!1}},Ph.canMuteVolume=function(){try{const e=Ph.TEST_VID.muted;return Ph.TEST_VID.muted=!e,Ph.TEST_VID.muted?dl(Ph.TEST_VID,"muted","muted"):hl(Ph.TEST_VID,"muted","muted"),e!==Ph.TEST_VID.muted}catch(ST){return!1}},Ph.canControlPlaybackRate=function(){if(Da&&Ua&&Ra<58)return!1;try{const e=Ph.TEST_VID.playbackRate;return Ph.TEST_VID.playbackRate=e/2+.1,e!==Ph.TEST_VID.playbackRate}catch(ST){return!1}},Ph.canOverrideAttributes=function(){try{const e=()=>{};Object.defineProperty(Zn().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(Zn().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(Zn().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(Zn().createElement("audio"),"innerHTML",{get:e,set:e})}catch(ST){return!1}return!0},Ph.supportsNativeTextTracks=function(){return Xa||Ga&&Ua},Ph.supportsNativeVideoTracks=function(){return!(!Ph.TEST_VID||!Ph.TEST_VID.videoTracks)},Ph.supportsNativeAudioTracks=function(){return!(!Ph.TEST_VID||!Ph.TEST_VID.audioTracks)},Ph.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function([e,t]){Aa(Ph.prototype,e,(()=>Ph[t]()),!0)})),Ph.prototype.featuresVolumeControl=Ph.canControlVolume(),Ph.prototype.movingMediaElementInDOM=!Ga,Ph.prototype.featuresFullscreenResize=!0,Ph.prototype.featuresProgressEvents=!0,Ph.prototype.featuresTimeupdateEvents=!0,Ph.prototype.featuresVideoFrameCallback=!(!Ph.TEST_VID||!Ph.TEST_VID.requestVideoFrameCallback),Ph.disposeMediaElement=function(e){if(e){e.parentNode&&e.parentNode.removeChild(e);while(e.hasChildNodes())e.removeChild(e.firstChild);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(ST){}}()}},Ph.resetMediaElement=function(e){if(!e)return;const t=e.querySelectorAll("source");let i=t.length;while(i--)e.removeChild(t[i]);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(ST){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Ph.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Ph.prototype["set"+yu(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Ph.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){Ph.prototype["set"+yu(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Ph.prototype[e]=function(){return this.el_[e]()}})),_c.withSourceHandlers(Ph),Ph.nativeSourceHandler={},Ph.nativeSourceHandler.canPlayType=function(e){try{return Ph.TEST_VID.canPlayType(e)}catch(ST){return""}},Ph.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ph.nativeSourceHandler.canPlayType(e.type);if(e.src){const t=nc(e.src);return Ph.nativeSourceHandler.canPlayType(`video/${t}`)}return""},Ph.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},Ph.nativeSourceHandler.dispose=function(){},Ph.registerSourceHandler(Ph.nativeSourceHandler),_c.registerTech("Html5",Ph);const Nh=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Dh={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Lh=["tiny","xsmall","small","medium","large","xlarge","huge"],Oh={};Lh.forEach((e=>{const t="x"===e.charAt(0)?`x-${e.substring(1)}`:e;Oh[e]=`vjs-layout-${t}`}));const Bh={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Uh extends wu{constructor(e,t,i){if(e.id=e.id||t.id||`vjs_video_${jl()}`,t=Object.assign(Uh.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const i=e.closest("[lang]");i&&(t.language=i.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=e=>this.documentFullscreenChange_(e),this.boundFullWindowOnEscKey_=e=>this.fullWindowOnEscKey(e),this.boundUpdateStyleEl_=e=>this.updateStyleEl_(e),this.boundApplyInitTime_=e=>this.applyInitTime_(e),this.boundUpdateCurrentBreakpoint_=e=>this.updateCurrentBreakpoint_(e),this.boundHandleTechClick_=e=>this.handleTechClick_(e),this.boundHandleTechDoubleClick_=e=>this.handleTechDoubleClick_(e),this.boundHandleTechTouchStart_=e=>this.handleTechTouchStart_(e),this.boundHandleTechTouchMove_=e=>this.handleTechTouchMove_(e),this.boundHandleTechTouchEnd_=e=>this.handleTechTouchEnd_(e),this.boundHandleTechTap_=e=>this.handleTechTap_(e),this.isFullscreen_=!1,this.log=va(this.id_),this.fsApi_=da,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&ul(e),this.language(this.options_.language),t.languages){const e={};Object.getOwnPropertyNames(t.languages).forEach((function(i){e[i.toLowerCase()]=t.languages[i]})),this.languages_=e}else this.languages_=Uh.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach((e=>{if("function"!==typeof this[e])throw new Error(`plugin "${e}" does not exist`)})),this.scrubbing_=!1,this.el_=this.createEl(),mu(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Wl(Zn(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const n=Ea(this.options_);t.plugins&&Object.keys(t.plugins).forEach((e=>{this[e](t.plugins[e])})),t.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(t.playbackRates),this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Ha&&this.addClass("vjs-touch-enabled"),Ga||this.addClass("vjs-workinghover"),Uh.players[this.id_]=this;const s=ra.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",(e=>this.listenForUserActivity_(e))),this.on("keydown",(e=>this.handleKeyDown(e))),this.on("languagechange",(e=>this.handleLanguagechange(e))),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",(()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)}))}dispose(){this.trigger("dispose"),this.off("dispose"),Gl(Zn(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Gl(Zn(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Uh.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Nc(this),mc.names.forEach((e=>{const t=mc[e],i=this[t.getterName]();i&&i.off&&i.off()})),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e,t=this.tag,i=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const n="video-js"===this.tag.tagName.toLowerCase();i?e=this.el_=t.parentNode:n||(e=this.el_=super.createEl("div"));const s=ul(t);if(n){e=this.el_=t,t=this.tag=Zn().createElement("video");while(e.children.length)t.appendChild(e.firstChild);sl(e,"video-js")||rl(e,"video-js"),e.appendChild(t),i=this.playerElIngest_=e,Object.keys(e).forEach((i=>{try{t[i]=e[i]}catch(ST){}}))}if(t.setAttribute("tabindex","-1"),s.tabindex="-1",Ua&&Fa&&(t.setAttribute("role","application"),s.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(i){n&&"class"===i||e.setAttribute(i,s[i]),n&&t.setAttribute(i,s[i])})),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused"),!0!==Qn().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ll("vjs-styles-dimensions");const e=xl(".vjs-styles-defaults"),t=xl("head");t.insertBefore(this.styleEl_,e?e.nextSibling:t.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const r=t.getElementsByTagName("a");for(let o=0;o<r.length;o++){const e=r.item(o);rl(e,"vjs-hidden"),e.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!i&&t.parentNode.insertBefore(e,t),nl(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}crossOrigin(e){if("undefined"===typeof e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):ya.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const i=e+"_";if(void 0===t)return this[i]||0;if(""===t||"auto"===t)return this[i]=void 0,void this.updateStyleEl_();const n=parseFloat(t);isNaN(n)?ya.error(`Improper value "${t}" supplied for for ${e}`):(this[i]=n,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,ru(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),ou(this,(()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)}))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===Qn().VIDEOJS_NO_DYNAMIC_STYLE){const e="number"===typeof this.width_?this.width_:this.options_.width,t="number"===typeof this.height_?this.height_:this.options_.height,i=this.tech_&&this.tech_.el();return void(i&&(e>=0&&(i.width=e),t>=0&&(i.height=t)))}let e,t,i,n;i=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const s=i.split(":"),r=s[1]/s[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),Ol(this.styleEl_,`\n      .${n} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*r}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const i=yu(e),n=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(_c.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let s=this.autoplay();("string"===typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(s=!1);const r={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};mc.names.forEach((e=>{const t=mc[e];r[t.getterName]=this[t.privateName]})),Object.assign(r,this.options_[i]),Object.assign(r,this.options_[n]),Object.assign(r,this.options_[e.toLowerCase()]),this.tag&&(r.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(r.startTime=this.cache_.currentTime);const o=_c.getTech(e);if(!o)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new o(r),this.tech_.ready(Jl(this,this.handleTechReady_),!0),ju.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Nh.forEach((e=>{this.on(this.tech_,e,(t=>this[`handleTech${yu(e)}_`](t)))})),Object.keys(Dh).forEach((e=>{this.on(this.tech_,e,(t=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${Dh[e]}_`].bind(this),event:t}):this[`handleTech${Dh[e]}_`](t)}))})),this.on(this.tech_,"loadstart",(e=>this.handleTechLoadStart_(e))),this.on(this.tech_,"sourceset",(e=>this.handleTechSourceset_(e))),this.on(this.tech_,"waiting",(e=>this.handleTechWaiting_(e))),this.on(this.tech_,"ended",(e=>this.handleTechEnded_(e))),this.on(this.tech_,"seeking",(e=>this.handleTechSeeking_(e))),this.on(this.tech_,"play",(e=>this.handleTechPlay_(e))),this.on(this.tech_,"pause",(e=>this.handleTechPause_(e))),this.on(this.tech_,"durationchange",(e=>this.handleTechDurationChange_(e))),this.on(this.tech_,"fullscreenchange",((e,t)=>this.handleTechFullscreenChange_(e,t))),this.on(this.tech_,"fullscreenerror",((e,t)=>this.handleTechFullscreenError_(e,t))),this.on(this.tech_,"enterpictureinpicture",(e=>this.handleTechEnterPictureInPicture_(e))),this.on(this.tech_,"leavepictureinpicture",(e=>this.handleTechLeavePictureInPicture_(e))),this.on(this.tech_,"error",(e=>this.handleTechError_(e))),this.on(this.tech_,"posterchange",(e=>this.handleTechPosterChange_(e))),this.on(this.tech_,"textdata",(e=>this.handleTechTextData_(e))),this.on(this.tech_,"ratechange",(e=>this.handleTechRateChange_(e))),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||nl(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){mc.names.forEach((e=>{const t=mc[e];this[t.privateName]=this[t.getterName]()})),this.textTracksJson_=ju.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&ya.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!==typeof e)return;const t=()=>{const e=this.muted();this.muted(!0);const t=()=>{this.muted(e)};this.playTerminatedQueue_.push(t);const i=this.play();if(Ou(i))return i.catch((e=>{throw t(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${e||""}`)}))};let i;return"any"!==e||this.muted()?i="muted"!==e||this.muted()?this.play():t():(i=this.play(),Ou(i)&&(i=i.catch(t))),Ou(i)?i.then((()=>{this.trigger({type:"autoplay-success",autoplay:e})})).catch((()=>{this.trigger({type:"autoplay-failure",autoplay:e})})):void 0}updateSourceCaches_(e=""){let t=e,i="";"string"!==typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=Uc(this,t)),this.cache_.source=Ea({},e,{src:t,type:i});const n=this.cache_.sources.filter((e=>e.src&&e.src===t)),s=[],r=this.$$("source"),o=[];for(let a=0;a<r.length;a++){const e=ul(r[a]);s.push(e),e.src&&e.src===t&&o.push(e.src)}o.length&&!n.length?this.cache_.sources=s:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=e=>this.updateSourceCaches_(e);const i=this.currentSource().src,n=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==i)&&(t=()=>{}),t(n),e.src||this.tech_.any(["sourceset","loadstart"],(e=>{if("sourceset"===e.type)return;const t=this.techGet("currentSrc");this.lastSource_.tech=t,this.updateSourceCaches_(t)}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((e=>e.callback(e.event))),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Bu(this.play()):this.pause()))}handleTechDoubleClick_(e){if(!this.controls_)return;const t=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(t=>t.contains(e.target)));t||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const i=this.el();let n=Zn()[this.fsApi_.fullscreenElement]===i;!n&&i.matches?n=i.matches(":"+this.fsApi_.fullscreen):!n&&i.msMatchesSelector&&(n=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(()=>{this.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready((function(){if(e in Ac)return xc(this.middleware_,this.tech_,e,t);if(e in Cc)return Sc(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(ST){throw ya(ST),ST}}),!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in Ec)return Tc(this.middleware_,this.tech_,e);if(e in Cc)return Sc(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(ST){if(void 0===this.tech_[e])throw ya(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,ST),ST;if("TypeError"===ST.name)throw ya(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,ST),this.tech_.isReady_=!1,ST;throw ya(ST),ST}}}play(){return new Promise((e=>{this.play_(e)}))}play_(e=Bu){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),i=Boolean(Xa||Ga);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=e=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&i&&this.load());const n=this.techGet_("play"),s=i&&this.hasClass("vjs-ended");s&&this.resetProgressBar_(),null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||Su(0,0)}scrubbing(e){if("undefined"===typeof e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return"undefined"!==typeof e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return e&&e.length||(e=Su(0,0)),e}bufferedPercent(){return Du(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise(((i,n)=>{function s(){t.off("fullscreenerror",o),t.off("fullscreenchange",r)}function r(){s(),i()}function o(e,t){s(),n(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",o);const a=t.requestFullscreenHelper_(e);a&&(a.then(s,s),a.then(i,n))}))}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const e=this.el_[this.fsApi_.requestFullscreen](t);return e&&e.then((()=>this.isFullscreen(!0)),(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise(((t,i)=>{function n(){e.off("fullscreenerror",r),e.off("fullscreenchange",s)}function s(){n(),t()}function r(e,t){n(),i(t)}e.one("fullscreenchange",s),e.one("fullscreenerror",r);const o=e.exitFullscreenHelper_();o&&(o.then(n,n),o.then(t,i))}))}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Zn()[this.fsApi_.exitFullscreen]();return e&&Bu(e.then((()=>this.isFullscreen(!1)))),e}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Zn().documentElement.style.overflow,Wl(Zn(),"keydown",this.boundFullWindowOnEscKey_),Zn().documentElement.style.overflow="hidden",rl(Zn().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){Jn().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Gl(Zn(),"keydown",this.boundFullWindowOnEscKey_),Zn().documentElement.style.overflow=this.docOrigOverflow,ol(Zn().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&Qn().documentPictureInPicture){const e=Zn().createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(tl("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),Qn().documentPictureInPicture.requestWindow({initialAspectRatio:this.videoWidth()/this.videoHeight(),copyStyleSheets:!0}).then((t=>(this.el_.parentNode.insertBefore(e,this.el_),t.document.body.append(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),t.addEventListener("unload",(t=>{const i=t.target.querySelector(".video-js");e.replaceWith(i),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")})),t)))}return"pictureInPictureEnabled"in Zn()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return Qn().documentPictureInPicture&&Qn().documentPictureInPicture.window?(Qn().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in Zn()?Zn().exitPictureInPicture():void 0}handleKeyDown(e){const{userActions:t}=this.options_;if(!t||!t.hotkeys)return;const i=e=>{const t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;const i=["button","checkbox","hidden","radio","reset","submit"];if("input"===t)return-1===i.indexOf(e.type);const n=["textarea"];return-1!==n.indexOf(t)};i(this.el_.ownerDocument.activeElement)||("function"===typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=(e=>Jn().isEventKey(e,"f")),muteKey:n=(e=>Jn().isEventKey(e,"m")),playPauseKey:s=(e=>Jn().isEventKey(e,"k")||Jn().isEventKey(e,"Space"))}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const t=wu.getComponent("FullscreenToggle");!1!==Zn()[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)}else if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const t=wu.getComponent("MuteToggle");t.prototype.handleClick.call(this,e)}else if(s.call(this,e)){e.preventDefault(),e.stopPropagation();const t=wu.getComponent("PlayToggle");t.prototype.handleClick.call(this,e)}}canPlayType(e){let t;for(let i=0,n=this.options_.techOrder;i<n.length;i++){const s=n[i];let r=_c.getTech(s);if(r||(r=wu.getComponent(s)),r){if(r.isSupported()&&(t=r.canPlayType(e),t))return t}else ya.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map((e=>[e,_c.getTech(e)])).filter((([e,t])=>t?t.isSupported():(ya.error(`The "${e}" tech is undefined. Skipped browser support check for that tech.`),!1))),i=function(e,t,i){let n;return e.some((e=>t.some((t=>{if(n=i(e,t),n)return!0})))),n};let n;const s=e=>(t,i)=>e(i,t),r=([e,t],i)=>{if(t.canPlaySource(i,this.options_[e.toLowerCase()]))return{source:i,tech:e}};return n=this.options_.sourceOrder?i(e,t,s(r)):i(t,e,r),n||!1}handleSrc_(e,t){if("undefined"===typeof e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=Vc(e);if(i.length){if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),wc(this,i[0],((e,n)=>{this.middleware_=n,t||(this.cache_.sources=i),this.updateSourceCaches_(e);const s=this.src_(e);if(s)return i.length>1?this.handleSrc_(i.slice(1)):(this.changingSrc_=!1,this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void this.triggerReady());kc(n,this.tech_)})),i.length>1){const e=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},t=()=>{this.off("error",e)};this.one("error",e),this.one("playing",t),this.resetRetryOnError_=()=>{this.off("error",e),this.off("playing",t)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(vu(t.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready((()=>{this.changingSrc_=!1})),!1))}load(){this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Bu(e.then((()=>this.doReset_())))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),ru(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:i,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:s}=i||{};e&&e.updateContent(),t&&t.updateContent(),n&&n.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"===typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"===typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t="undefined"===typeof t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(aa("beforeerror").forEach((t=>{const i=t(this,e);xa(i)&&!Array.isArray(i)||"string"===typeof i||"number"===typeof i||null===i?e=i:this.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Lu(e),this.addClass("vjs-error"),ya.error(`(CODE:${this.error_.code} ${Lu.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),aa("error").forEach((e=>e(this,this.error_)))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i;const n=Jl(this,this.reportUserActivity),s=function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,n())},r=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},o=function(t){n(),this.clearInterval(e)};this.on("mousedown",r),this.on("mousemove",s),this.on("mouseup",o),this.on("mouseleave",o);const a=this.getChild("controlBar");let l;!a||Ga||Da||(a.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),a.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",n),this.on("keyup",n),this.setInterval((function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(l);const e=this.options_.inactivityTimeout;e<=0||(l=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}),250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach((e=>{e!==t&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),this.audioOnlyCache_.hiddenChildren.push(e))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((e=>e.show())),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!==typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then((()=>this.enableAudioOnlyUI_()))}return Promise.resolve().then((()=>this.disableAudioOnlyUI_()))}enablePosterModeUI_(){const e=this.tech_&&this.tech_;e.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){const e=this.tech_&&this.tech_;e.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){if("boolean"!==typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;if(this.audioPosterMode_=e,e){if(this.audioOnlyMode()){const e=this.audioOnlyMode(!1);return e.then((()=>{this.enablePosterModeUI_()}))}return Promise.resolve().then((()=>{this.enablePosterModeUI_()}))}return Promise.resolve().then((()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),ru(this)&&this.trigger("languagechange"))}languages(){return Ea(Uh.prototype.options_.languages,this.languages_)}toJSON(){const e=Ea(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let n=t[i];n=Ea(n),n.player=void 0,e.tracks[i]=n}return e}createModal(e,t){t=t||{},t.content=e||"";const i=new Fu(this,t);return this.addChild(i),i.on("dispose",(()=>{this.removeChild(i)})),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<Lh.length;i++){const n=Lh[i],s=this.breakpoints_[n];if(t<=s){if(e===n)return;e&&this.removeClass(Oh[e]),this.addClass(Oh[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},Bh,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){if(void 0===e)return this.responsive_;e=Boolean(e);const t=this.responsive_;return e!==t?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Oh[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!==typeof e)return;this.reset(),this.cache_.media=Ea(e);const{artist:i,artwork:n,description:s,poster:r,src:o,textTracks:a,title:l}=this.cache_.media;!n&&r&&(this.cache_.media.artwork=[{src:r,type:Bc(r)}]),o&&this.src(o),r&&this.poster(r),Array.isArray(a)&&a.forEach((e=>this.addRemoteTextTrack(e,!1))),this.titleBar&&this.titleBar.update({title:l,description:s||i||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),(e=>({kind:e.kind,label:e.label,language:e.language,src:e.src}))),n={src:t,textTracks:i};return e&&(n.poster=e,n.artwork=[{src:n.poster,type:Bc(n.poster)}]),n}return Ea(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},i=ul(e),n=i["data-setup"];if(sl(e,"vjs-fill")&&(i.fill=!0),sl(e,"vjs-fluid")&&(i.fluid=!0),null!==n){const[e,t]=es()(n||"{}");e&&ya.error(e),Object.assign(i,t)}if(Object.assign(t,i),e.hasChildNodes()){const i=e.childNodes;for(let e=0,n=i.length;e<n;e++){const n=i[e],s=n.nodeName.toLowerCase();"source"===s?t.sources.push(ul(n)):"track"===s&&t.tracks.push(ul(n))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((e=>"number"===typeof e))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}mc.names.forEach((function(e){const t=mc[e];Uh.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Uh.prototype.crossorigin=Uh.prototype.crossOrigin,Uh.players={};const Vh=Qn().navigator;Uh.prototype.options_={techOrder:_c.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Vh&&(Vh.languages&&Vh.languages[0]||Vh.userLanguage||Vh.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Uh.prototype[e]=function(){return this.techGet_(e)}})),Nh.forEach((function(e){Uh.prototype[`handleTech${yu(e)}_`]=function(){return this.trigger(e)}})),wu.registerComponent("Player",Uh);const Rh="plugin",jh="activePlugins_",Mh={},Fh=e=>Mh.hasOwnProperty(e),qh=e=>Fh(e)?Mh[e]:void 0,zh=(e,t)=>{e[jh]=e[jh]||{},e[jh][t]=!0},Hh=(e,t,i)=>{const n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)},Wh=function(e,t){const i=function(){Hh(this,{name:e,plugin:t,instance:null},!0);const i=t.apply(this,arguments);return zh(this,e),Hh(this,{name:e,plugin:t,instance:i}),i};return Object.keys(t).forEach((function(e){i[e]=t[e]})),i},Gh=(e,t)=>(t.prototype.name=e,function(...i){Hh(this,{name:e,plugin:t,instance:null},!0);const n=new t(...[this,...i]);return this[e]=()=>n,Hh(this,n.getEventHash()),n});class Xh{constructor(e){if(this.constructor===Xh)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),mu(this),delete this.trigger,_u(this,this.constructor.defaultState),zh(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Xl(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[jh][e]=!1,this.player=this.state=null,t[e]=Gh(e,Mh[e])}static isBasic(e){const t="string"===typeof e?qh(e):e;return"function"===typeof t&&!Xh.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if("string"!==typeof e)throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Fh(e))ya.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Uh.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if("function"!==typeof t)throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return Mh[e]=t,e!==Rh&&(Xh.isBasic(t)?Uh.prototype[e]=Wh(e,t):Uh.prototype[e]=Gh(e,t)),t}static deregisterPlugin(e){if(e===Rh)throw new Error("Cannot de-register base plugin.");Fh(e)&&(delete Mh[e],delete Uh.prototype[e])}static getPlugins(e=Object.keys(Mh)){let t;return e.forEach((e=>{const i=qh(e);i&&(t=t||{},t[e]=i)})),t}static getPluginVersion(e){const t=qh(e);return t&&t.VERSION||""}}function Qh(e,t){let i=!1;return function(...n){return i||ya.warn(e),i=!0,t.apply(this,n)}}function Kh(e,t,i,n){return Qh(`${t} is deprecated and will be removed in ${e}.0; please use ${i} instead.`,n)}Xh.getPlugin=qh,Xh.BASE_PLUGIN_NAME=Rh,Xh.registerPlugin(Rh,Xh),Uh.prototype.usingPlugin=function(e){return!!this[jh]&&!0===this[jh][e]},Uh.prototype.hasPlugin=function(e){return!!Fh(e)};const Zh=e=>0===e.indexOf("#")?e.slice(1):e;function Yh(e,t,i){let n=Yh.getPlayer(e);if(n)return t&&ya.warn(`Player "${e}" is already initialised. Options will not be applied.`),i&&n.ready(i),n;const s="string"===typeof e?xl("#"+Zh(e)):e;if(!Ja(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");s.ownerDocument.defaultView&&s.ownerDocument.body.contains(s)||ya.warn("The element supplied is not included in the DOM"),t=t||{},!0===t.restoreEl&&(t.restoreEl=(s.parentNode&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),aa("beforesetup").forEach((e=>{const i=e(s,Ea(t));xa(i)&&!Array.isArray(i)?t=Ea(t,i):ya.error("please return an object in beforesetup hooks")}));const r=wu.getComponent("Player");return n=new r(s,t,i),aa("setup").forEach((e=>e(n))),n}if(Yh.hooks_=oa,Yh.hooks=aa,Yh.hook=la,Yh.hookOnce=ca,Yh.removeHook=ua,!0!==Qn().VIDEOJS_NO_DYNAMIC_STYLE&&Ya()){let e=xl(".vjs-styles-defaults");if(!e){e=Ll("vjs-styles-defaults");const t=xl("head");t&&t.insertBefore(e,t.firstChild),Ol(e,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Nl(1,Yh),Yh.VERSION=ra,Yh.options=Uh.prototype.options_,Yh.getPlayers=()=>Uh.players,Yh.getPlayer=e=>{const t=Uh.players;let i;if("string"===typeof e){const n=Zh(e),s=t[n];if(s)return s;i=xl("#"+n)}else i=e;if(Ja(i)){const{player:e,playerId:n}=i;if(e||t[n])return e||t[n]}},Yh.getAllPlayers=()=>Object.keys(Uh.players).map((e=>Uh.players[e])).filter(Boolean),Yh.players=Uh.players,Yh.getComponent=wu.getComponent,Yh.registerComponent=(e,t)=>{_c.isTech(t)&&ya.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),wu.registerComponent.call(wu,e,t)},Yh.getTech=_c.getTech,Yh.registerTech=_c.registerTech,Yh.use=bc,Object.defineProperty(Yh,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Yh.middleware,"TERMINATOR",{value:vc,writeable:!1,enumerable:!0}),Yh.browser=Qa,Yh.obj=Ca,Yh.mergeOptions=Kh(9,"videojs.mergeOptions","videojs.obj.merge",Ea),Yh.defineLazyProperty=Kh(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Aa),Yh.bind=Kh(9,"videojs.bind","native Function.prototype.bind",Jl),Yh.registerPlugin=Xh.registerPlugin,Yh.deregisterPlugin=Xh.deregisterPlugin,Yh.plugin=(e,t)=>(ya.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Xh.registerPlugin(e,t)),Yh.getPlugins=Xh.getPlugins,Yh.getPlugin=Xh.getPlugin,Yh.getPluginVersion=Xh.getPluginVersion,Yh.addLanguage=function(e,t){return e=(""+e).toLowerCase(),Yh.options.languages=Ea(Yh.options.languages,{[e]:t}),Yh.options.languages[e]},Yh.log=ya,Yh.createLogger=va,Yh.time=Nu,Yh.createTimeRange=Kh(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Su),Yh.createTimeRanges=Kh(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Su),Yh.formatTime=Kh(9,"videojs.formatTime","videojs.time.formatTime",Pu),Yh.setFormatTime=Kh(9,"videojs.setFormatTime","videojs.time.setFormatTime",Cu),Yh.resetFormatTime=Kh(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Iu),Yh.parseUrl=Kh(9,"videojs.parseUrl","videojs.url.parseUrl",tc),Yh.isCrossOrigin=Kh(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",sc),Yh.EventTarget=nu,Yh.any=Kl,Yh.on=Wl,Yh.one=Ql,Yh.off=Gl,Yh.trigger=Xl,Yh.xhr=is(),Yh.TextTrack=lc,Yh.AudioTrack=uc,Yh.VideoTrack=cc,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((e=>{Yh[e]=function(){return ya.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),Al[e].apply(null,arguments)}})),Yh.computedStyle=Kh(9,"videojs.computedStyle","videojs.dom.computedStyle",El),Yh.dom=Al,Yh.fn=tu,Yh.num=ad,Yh.str=bu,Yh.url=rc;/*! @name videojs-contrib-quality-levels @version 3.0.0 @license Apache-2.0 */
class Jh{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(e){t.enabled_(e)}}),t}}class $h extends Yh.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const i=this.levels_.length;return t=new Jh(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,n=this.length;i<n;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){const i=this[t];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}$h.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const VT in $h.prototype.allowedEvents_)$h.prototype["on"+VT]=null;var ep="3.0.0";const tp=Yh.registerPlugin||Yh.plugin,ip=function(e,t){const i=e.qualityLevels,n=new $h,s=function(){n.dispose(),e.qualityLevels=i,e.off("dispose",s)};return e.on("dispose",s),e.qualityLevels=()=>n,e.qualityLevels.VERSION=ep,n},np=function(e){return ip(this,Yh.mergeOptions({},e))};tp("qualityLevels",np),np.VERSION=ep;/*! @name @videojs/http-streaming @version 3.0.2 @license Apache-2.0 */
const sp=us,rp=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,op=e=>Yh.log.debug?Yh.log.debug.bind(Yh,"VHS:",`${e} >`):function(){};function ap(...e){const t=Yh.obj||Yh,i=t.merge||t.mergeOptions;return i.apply(t,e)}function lp(...e){const t=Yh.time||Yh,i=t.createTimeRanges||t.createTimeRanges;return i.apply(t,e)}const up=1/30,cp=3*up,dp=function(e,t){const i=[];let n;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return lp(i)},hp=function(e,t){return dp(e,(function(e,i){return e-cp<=t&&i+cp>=t}))},pp=function(e,t){return dp(e,(function(e){return e-up>=t}))},mp=function(e){if(e.length<2)return lp();const t=[];for(let i=1;i<e.length;i++){const n=e.end(i-1),s=e.start(i);t.push([n,s])}return lp(t)},gp=function(e,t){let i=null,n=null,s=0;const r=[],o=[];if(!e||!e.length||!t||!t.length)return lp();let a=e.length;while(a--)r.push({time:e.start(a),type:"start"}),r.push({time:e.end(a),type:"end"});a=t.length;while(a--)r.push({time:t.start(a),type:"start"}),r.push({time:t.end(a),type:"end"});for(r.sort((function(e,t){return e.time-t.time})),a=0;a<r.length;a++)"start"===r[a].type?(s++,2===s&&(i=r[a].time)):"end"===r[a].type&&(s--,1===s&&(n=r[a].time)),null!==i&&null!==n&&(o.push([i,n]),i=null,n=null);return lp(o)},_p=e=>{const t=[];if(!e||!e.length)return"";for(let i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},fp=function(e,t,i=1){const n=e.length?e.end(e.length-1):0;return(n-t)/i},yp=e=>{const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},vp=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(let i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1},bp=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},wp=function(e,t){let i=0;if(!e||!e.length)return i;for(let n=0;n<e.length;n++){const s=e.start(n),r=e.end(n);t>r||(i+=t>s&&t<=r?r-t:r-s)}return i},kp=(e,t)=>{if(!t.preload)return t.duration;let i=0;return(t.parts||[]).forEach((function(e){i+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(i+=e.partTargetDuration)})),i},Tp=e=>(e.segments||[]).reduce(((e,t,i)=>(t.parts?t.parts.forEach((function(n,s){e.push({duration:n.duration,segmentIndex:i,partIndex:s,part:n,segment:t})})):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e)),[]),xp=e=>{const t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},Sp=({preloadSegment:e})=>{if(!e)return;const{parts:t,preloadHints:i}=e;let n=(i||[]).reduce(((e,t)=>e+("PART"===t.type?1:0)),0);return n+=t&&t.length?t.length:0,n},Ep=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;const i=xp(t).length>0;return i&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:i&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},Ap=function(e,t){let i=0,n=t-e.mediaSequence,s=e.segments[n];if(s){if("undefined"!==typeof s.start)return{result:s.start,precise:!0};if("undefined"!==typeof s.end)return{result:s.end-s.duration,precise:!0}}while(n--){if(s=e.segments[n],"undefined"!==typeof s.end)return{result:i+s.end,precise:!0};if(i+=kp(e,s),"undefined"!==typeof s.start)return{result:i+s.start,precise:!0}}return{result:i,precise:!1}},Cp=function(e,t){let i,n=0,s=t-e.mediaSequence;for(;s<e.segments.length;s++){if(i=e.segments[s],"undefined"!==typeof i.start)return{result:i.start-n,precise:!0};if(n+=kp(e,i),"undefined"!==typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},Ip=function(e,t,i){if("undefined"===typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;const n=Ap(e,t);if(n.precise)return n.result;const s=Cp(e,t);return s.precise?s.result:n.result+i},Pp=function(e,t,i){if(!e)return 0;if("number"!==typeof i&&(i=0),"undefined"===typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Qn()[1/0]}return Ip(e,t,i)},Np=function({defaultDuration:e,durationList:t,startIndex:i,endIndex:n}){let s=0;if(i>n&&([i,n]=[n,i]),i<0){for(let t=i;t<Math.min(0,n);t++)s+=e;i=0}for(let r=i;r<n;r++)s+=t[r].duration;return s},Dp=function(e,t,i,n){if(!e||!e.segments)return null;if(e.endList)return Pp(e);if(null===t)return null;t=t||0;let s=Ip(e,e.mediaSequence+e.segments.length,t);return i&&(n="number"===typeof n?n:Ep(null,e),s-=n),Math.max(0,s)},Lp=function(e,t,i){const n=!0,s=t||0,r=Dp(e,t,n,i);return null===r?lp():lp(s,r)},Op=function({playlist:e,currentTime:t,startingSegmentIndex:i,startingPartIndex:n,startTime:s,exactManifestTimings:r}){let o=t-s;const a=Tp(e);let l=0;for(let u=0;u<a.length;u++){const e=a[u];if(i===e.segmentIndex&&("number"!==typeof n||"number"!==typeof e.partIndex||n===e.partIndex)){l=u;break}}if(o<0){if(l>0)for(let t=l-1;t>=0;t--){const i=a[t];if(o+=i.duration,r){if(o<0)continue}else if(o+up<=0)continue;return{partIndex:i.partIndex,segmentIndex:i.segmentIndex,startTime:s-Np({defaultDuration:e.targetDuration,durationList:a,startIndex:l,endIndex:t})}}return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:t}}if(l<0){for(let i=l;i<0;i++)if(o-=e.targetDuration,o<0)return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:t};l=0}for(let u=l;u<a.length;u++){const t=a[u];if(o-=t.duration,r){if(o>0)continue}else if(o-up>=0)continue;return{partIndex:t.partIndex,segmentIndex:t.segmentIndex,startTime:s+Np({defaultDuration:e.targetDuration,durationList:a,startIndex:l,endIndex:u})}}return{segmentIndex:a[a.length-1].segmentIndex,partIndex:a[a.length-1].partIndex,startTime:t}},Bp=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Up=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Vp=function(e){const t=Bp(e);return!e.disabled&&!t},Rp=function(e){return e.disabled},jp=function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},Mp=function(e,t){return t.attributes&&t.attributes[e]},Fp=function(e,t,i,n=0){if(!Mp("BANDWIDTH",i))return NaN;const s=e*i.attributes.BANDWIDTH;return(s-8*n)/t},qp=(e,t)=>{if(1===e.playlists.length)return!0;const i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((e=>!!Vp(e)&&(e.attributes.BANDWIDTH||0)<i)).length},zp=(e,t)=>!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri)))),Hp=function(e,t){const i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{};let n=!1;for(const s in i){for(const e in i[s])if(n=t(i[s][e]),n)break;if(n)break}return!!n},Wp=e=>{if(!e||!e.playlists||!e.playlists.length){const t=Hp(e,(e=>e.playlists&&e.playlists.length||e.uri));return t}for(let t=0;t<e.playlists.length;t++){const i=e.playlists[t],n=i.attributes&&i.attributes.CODECS;if(n&&n.split(",").every((e=>Ps(e))))continue;const s=Hp(e,(e=>zp(i,e)));if(!s)return!1}return!0};var Gp={liveEdgeDelay:Ep,duration:Pp,seekable:Lp,getMediaInfoForTime:Op,isEnabled:Vp,isDisabled:Rp,isExcluded:Bp,isIncompatible:Up,playlistEnd:Dp,isAes:jp,hasAttribute:Mp,estimateSegmentRequestTime:Fp,isLowestEnabledRendition:qp,isAudioOnly:Wp,playlistMatch:zp,segmentDurationWithParts:kp};const{log:Xp}=Yh,Qp=(e,t)=>`${e}-${t}`,Kp=(e,t,i)=>`placeholder-uri-${e}-${t}-${i}`,Zp=({onwarn:e,oninfo:t,manifestString:i,customTagParsers:n=[],customTagMappers:s=[],llhls:r})=>{const o=new Ts;e&&o.on("warn",e),t&&o.on("info",t),n.forEach((e=>o.addParser(e))),s.forEach((e=>o.addTagMapper(e))),o.push(i),o.end();const a=o.manifest;if(r||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){a.hasOwnProperty(e)&&delete a[e]})),a.segments&&a.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!a.targetDuration){let t=10;a.segments&&a.segments.length&&(t=a.segments.reduce(((e,t)=>Math.max(e,t.duration)),0)),e&&e(`manifest has no targetDuration defaulting to ${t}`),a.targetDuration=t}const l=xp(a);if(l.length&&!a.partTargetDuration){const t=l.reduce(((e,t)=>Math.max(e,t.duration)),0);e&&(e(`manifest has no partTargetDuration defaulting to ${t}`),Xp.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),a.partTargetDuration=t}return a},Yp=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((i=>{if(e.mediaGroups[i])for(const n in e.mediaGroups[i])for(const s in e.mediaGroups[i][n]){const r=e.mediaGroups[i][n][s];t(r,i,n,s)}}))},Jp=({playlist:e,uri:t,id:i})=>{e.id=i,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},$p=e=>{let t=e.playlists.length;while(t--){const i=e.playlists[t];Jp({playlist:i,id:Qp(t,i.uri)}),i.resolvedUri=sp(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||Xp.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},em=e=>{Yp(e,(t=>{t.uri&&(t.resolvedUri=sp(e.uri,t.uri))}))},tm=(e,t)=>{const i=Qp(0,t),n={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Qn().location.href,resolvedUri:Qn().location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return n.playlists[i]=n.playlists[0],n.playlists[t]=n.playlists[0],n},im=(e,t,i=Kp)=>{e.uri=t;for(let s=0;s<e.playlists.length;s++)if(!e.playlists[s].uri){const t=`placeholder-uri-${s}`;e.playlists[s].uri=t}const n=Wp(e);Yp(e,((t,s,r,o)=>{if(!t.playlists||!t.playlists.length){if(n&&"AUDIO"===s&&!t.uri)for(let t=0;t<e.playlists.length;t++){const i=e.playlists[t];if(i.attributes&&i.attributes.AUDIO&&i.attributes.AUDIO===r)return}t.playlists=[cs({},t)]}t.playlists.forEach((function(t,n){const a=i(s,r,o,t),l=Qp(n,a);t.uri?t.resolvedUri=t.resolvedUri||sp(e.uri,t.uri):(t.uri=0===n?a:l,t.resolvedUri=t.uri),t.id=t.id||l,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),$p(e),em(e)},{EventTarget:nm}=Yh,sm=(e,t)=>{if(t.endList||!t.serverControl)return e;const i={};if(t.serverControl.canBlockReload){const{preloadSegment:e}=t;let n=t.mediaSequence+t.segments.length;if(e){const s=e.parts||[],r=Sp(t)-1;r>-1&&r!==s.length-1&&(i._HLS_part=r),(r>-1||s.length)&&n--}i._HLS_msn=n}if(t.serverControl&&t.serverControl.canSkipUntil&&(i._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const t=new(Qn().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){i.hasOwnProperty(e)&&t.searchParams.set(e,i[e])})),e=t.toString()}return e},rm=(e,t)=>{if(!e)return t;const i=ap(e,t);if(e.preloadHints&&!t.preloadHints&&delete i.preloadHints,e.parts&&!t.parts)delete i.parts;else if(e.parts&&t.parts)for(let n=0;n<t.parts.length;n++)e.parts&&e.parts[n]&&(i.parts[n]=ap(e.parts[n],t.parts[n]));return!e.skipped&&t.skipped&&(i.skipped=!1),e.preload&&!t.preload&&(i.preload=!1),i},om=(e,t,i)=>{const n=e.slice(),s=t.slice();i=i||0;const r=[];let o;for(let a=0;a<s.length;a++){const e=n[a+i],t=s[a];e?(o=e.map||o,r.push(rm(e,t))):(o&&!t.map&&(t.map=o),r.push(t))}return r},am=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=sp(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=sp(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=sp(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=sp(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((e=>{e.resolvedUri||(e.resolvedUri=sp(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((e=>{e.resolvedUri||(e.resolvedUri=sp(t,e.uri))}))},lm=function(e){const t=e.segments||[],i=e.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(let e=0;e<i.preloadHints.length;e++)if("MAP"===i.preloadHints[e].type)return t;i.duration=e.targetDuration,i.preload=!0,t.push(i)}return t},um=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,cm=(e,t,i=um)=>{const n=ap(e,{}),s=n.playlists[t.id];if(!s)return null;if(i(s,t))return null;t.segments=lm(t);const r=ap(s,t);if(r.preloadSegment&&!t.preloadSegment&&delete r.preloadSegment,s.segments){if(t.skip){t.segments=t.segments||[];for(let e=0;e<t.skip.skippedSegments;e++)t.segments.unshift({skipped:!0})}r.segments=om(s.segments,t.segments,t.mediaSequence-s.mediaSequence)}r.segments.forEach((e=>{am(e,r.resolvedUri)}));for(let o=0;o<n.playlists.length;o++)n.playlists[o].id===t.id&&(n.playlists[o]=r);return n.playlists[t.id]=r,n.playlists[t.uri]=r,Yp(e,((e,i,n,s)=>{if(e.playlists)for(let o=0;o<e.playlists.length;o++)t.id===e.playlists[o].id&&(e.playlists[o]=r)})),n},dm=(e,t)=>{const i=e.segments||[],n=i[i.length-1],s=n&&n.parts&&n.parts[n.parts.length-1],r=s&&s.duration||n&&n.duration;return t&&r?1e3*r:500*(e.partTargetDuration||e.targetDuration||10)};class hm extends nm{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=op("PlaylistLoader");const{withCredentials:n=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=n;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=sp(this.main.uri,e.uri);this.llhls&&(t=sm(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},((e,t)=>{if(this.request)return e?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}))}playlistRequestError(e,t,i){const{uri:n,id:s}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${n}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return Zp({onwarn:({message:t})=>this.logger_(`m3u8-parser warn for ${e}: ${t}`),oninfo:({message:t})=>this.logger_(`m3u8-parser info for ${e}: ${t}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:i,id:n}){this.request=null,this.state="HAVE_METADATA";const s=t||this.parseManifest_({url:i,manifestString:e});s.lastRequest=Date.now(),Jp({playlist:s,uri:i,id:n});const r=cm(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,r?(this.main=r,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(dm(this.media(),!!r)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),Qn().clearTimeout(this.mediaUpdateTimeout),Qn().clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"===typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(Qn().clearTimeout(this.finalRenditionTimeout),t){const t=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=Qn().setTimeout(this.media.bind(this,e,!1),t))}const i=this.state,n=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(dm(e,!0)),n){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},((t,n)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=rp(e.resolvedUri,n),t)return this.playlistRequestError(this.request,e,i);this.haveMetadata({playlistString:n.responseText,url:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")}}))}}pause(){this.mediaUpdateTimeout&&(Qn().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(Qn().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const e=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Qn().setTimeout((()=>{this.mediaUpdateTimeout=null,this.load()}),e)}else this.started?t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(Qn().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Qn().setTimeout((()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)}),e))}start(){if(this.started=!0,"object"===typeof this.src)return this.src.uri||(this.src.uri=Qn().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((()=>{this.setupInitialPlaylist(this.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},((e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=rp(this.src,t);const i=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(i)}))}srcUri(){return"string"===typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,im(this.main,this.srcUri()),e.playlists.forEach((e=>{e.segments=lm(e),e.segments.forEach((t=>{am(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||Qn().location.href;this.main=tm(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:pm}=Yh,mm=function(e,t,i,n){const s="arraybuffer"===e.responseType?e.response:e.responseText;!t&&s&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=s.byteLength||s.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===i.statusCode||206===i.statusCode||0===i.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(s||e.responseText)))),n(t,e)},gm=function(){const e=function e(t,i){t=ap({timeout:45e3},t);const n=e.beforeRequest||Yh.Vhs.xhr.beforeRequest;if(n&&"function"===typeof n){const e=n(t);e&&(t=e)}const s=!0===Yh.Vhs.xhr.original?pm:Yh.Vhs.xhr,r=s(t,(function(e,t){return mm(r,e,t,i)})),o=r.abort;return r.abort=function(){return r.aborted=!0,o.apply(r,arguments)},r.uri=t.uri,r.requestTime=Date.now(),r};return e.original=!0,e},_m=function(e){let t;const i=e.offset;return t="bigint"===typeof e.offset||"bigint"===typeof e.length?Qn().BigInt(e.offset)+Qn().BigInt(e.length)-Qn().BigInt(1):e.offset+e.length-1,"bytes="+i+"-"+t},fm=function(e){const t={};return e.byterange&&(t.Range=_m(e.byterange)),t},ym=function(e,t){return e.start(t)+"-"+e.end(t)},vm=function(e,t){const i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},bm=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},wm=function(e){const t={};return Object.keys(e).forEach((i=>{const n=e[i];qs(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n})),t},km=function(e){const t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Tm=function(e){return e.resolvedUri},xm=e=>{const t=Array.prototype.slice.call(e),i=16;let n,s,r="";for(let o=0;o<t.length/i;o++)n=t.slice(o*i,o*i+i).map(vm).join(""),s=t.slice(o*i,o*i+i).map(bm).join(""),r+=n+" "+s+"\n";return r},Sm=({bytes:e})=>xm(e),Em=e=>{let t,i="";for(t=0;t<e.length;t++)i+=ym(e,t)+" ";return i};var Am=Object.freeze({__proto__:null,createTransferableMessage:wm,initSegmentId:km,segmentKeyId:Tm,hexDump:xm,tagDump:Sm,textRanges:Em});const Cm=.25,Im=(e,t)=>{if(!t.dateTimeObject)return null;const i=t.videoTimingInfo.transmuxerPrependedSeconds,n=t.videoTimingInfo.transmuxedPresentationStart,s=n+i,r=e-s;return new Date(t.dateTimeObject.getTime()+1e3*r)},Pm=e=>e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds,Nm=(e,t)=>{let i;try{i=new Date(e)}catch(ST){return null}if(!t||!t.segments||0===t.segments.length)return null;let n=t.segments[0];if(i<n.dateTimeObject)return null;for(let l=0;l<t.segments.length-1;l++){n=t.segments[l];const e=t.segments[l+1].dateTimeObject;if(i<e)break}const s=t.segments[t.segments.length-1],r=s.dateTimeObject,o=s.videoTimingInfo?Pm(s.videoTimingInfo):s.duration+s.duration*Cm,a=new Date(r.getTime()+1e3*o);return i>a?null:(i>r&&(n=s),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Gp.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})},Dm=(e,t)=>{if(!t||!t.segments||0===t.segments.length)return null;let i,n=0;for(let r=0;r<t.segments.length;r++)if(i=t.segments[r],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,e<=n)break;const s=t.segments[t.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+s.duration*Cm)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},Lm=(e,t)=>{let i,n;try{i=new Date(e),n=new Date(t)}catch(ST){}const s=i.getTime(),r=n.getTime();return(r-s)/1e3},Om=e=>{if(!e.segments||0===e.segments.length)return!1;for(let t=0;t<e.segments.length;t++){const i=e.segments[t];if(!i.dateTimeObject)return!1}return!0},Bm=({playlist:e,time:t,callback:i})=>{if(!i)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===t)return i({message:"getProgramTime: playlist and time must be provided"});const n=Dm(t,e);if(!n)return i({message:"valid programTime was not found"});if("estimate"===n.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:n.estimatedStart});const s={mediaSeconds:t},r=Im(t,n.segment);return r&&(s.programDateTime=r.toISOString()),i(null,s)},Um=({programTime:e,playlist:t,retryCount:i=2,seekTo:n,pauseAfterSeek:s=!0,tech:r,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if("undefined"===typeof e||!t||!n)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!r.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!Om(t))return o({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const a=Nm(e,t);if(!a)return o({message:`${e} was not found in the stream`});const l=a.segment,u=Lm(l.dateTimeObject,e);if("estimate"===a.type)return 0===i?o({message:`${e} is not buffered yet. Try again`}):(n(a.estimatedStart+u),void r.one("seeked",(()=>{Um({programTime:e,playlist:t,retryCount:i-1,seekTo:n,pauseAfterSeek:s,tech:r,callback:o})})));const c=l.start+u,d=()=>o(null,r.currentTime());r.one("seeked",d),s&&r.pause(),n(c)},Vm=(e,t)=>{if(4===e.readyState)return t()},Rm=(e,t,i)=>{let n,s=[],r=!1;const o=function(e,t,n,s){return t.abort(),r=!0,i(e,t,n,s)},a=function(e,t){if(r)return;if(e)return o(e,t,"",s);const i=t.responseText.substring(s&&s.byteLength||0,t.responseText.length);if(s=Ys(s,Zs(i,!0)),n=n||Do(s),s.length<10||n&&s.length<n+2)return Vm(t,(()=>o(e,t,"",s)));const a=ia(s);return"ts"===a&&s.length<188||!a&&s.length<376?Vm(t,(()=>o(e,t,"",s))):o(null,t,a,s)},l={uri:e,beforeSend(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function({total:t,loaded:i}){return mm(e,null,{statusCode:e.status},a)}))}},u=t(l,(function(e,t){return mm(u,e,t,a)}));return u},{EventTarget:jm}=Yh,Mm=function(e,t){if(!um(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let i=0;i<e.segments.length;i++){const n=e.segments[i],s=t.segments[i];if(n.uri!==s.uri)return!1;if(!n.byterange&&!s.byterange)continue;const r=n.byterange,o=s.byterange;if(r&&!o||!r&&o)return!1;if(r.offset!==o.offset||r.length!==o.length)return!1}return!0},Fm=(e,t,i,n)=>{const s=n.attributes.NAME||i;return`placeholder-uri-${e}-${t}-${s}`},qm=({mainXml:e,srcUrl:t,clientOffset:i,sidxMapping:n,previousManifest:s})=>{const r=So(e,{manifestUri:t,clientOffset:i,sidxMapping:n,previousManifest:s});return im(r,t,Fm),r},zm=(e,t)=>{Yp(e,((i,n,s,r)=>{r in t.mediaGroups[n][s]||delete e.mediaGroups[n][s][r]}))},Hm=(e,t,i)=>{let n=!0,s=ap(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let r=0;r<t.playlists.length;r++){const e=t.playlists[r];if(e.sidx){const t=Nr(e.sidx);i&&i[t]&&i[t].sidx&&kr(e,i[t].sidx,e.sidx.resolvedUri)}const o=cm(s,e,Mm);o&&(s=o,n=!1)}return Yp(t,((e,t,i,r)=>{if(e.playlists&&e.playlists.length){const o=e.playlists[0].id,a=cm(s,e.playlists[0],Mm);a&&(s=a,r in s.mediaGroups[t][i]||(s.mediaGroups[t][i][r]=e),s.mediaGroups[t][i][r].playlists[0]=s.playlists[o],n=!1)}})),zm(s,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(n=!1),n?null:s},Wm=(e,t)=>{const i=Boolean(!e.map&&!t.map),n=i||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return n&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Gm=(e,t)=>{const i={};for(const n in e){const s=e[n],r=s.sidx;if(r){const e=Nr(r);if(!t[e])break;const n=t[e].sidxInfo;Wm(n,r)&&(i[e]=t[e])}}return i},Xm=(e,t)=>{const i=Gm(e.playlists,t);let n=i;return Yp(e,((e,i,s,r)=>{if(e.playlists&&e.playlists.length){const i=e.playlists;n=ap(n,Gm(i,t))}})),n};class Qm extends jm{constructor(e,t,i={},n){super(),this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);const{withCredentials:s=!1}=i;if(this.vhs_=t,this.withCredentials=s,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",(()=>{this.refreshXml_()})),this.on("mediaupdatetimeout",(()=>{this.refreshMedia_(this.media().id)})),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=op("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,i){return!this.request||(this.request=null,e?(this.error="object"!==typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,i&&(this.state=i),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,i){const n=e.sidx&&Nr(e.sidx);if(!e.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n])return void(this.mediaRequest_=Qn().setTimeout((()=>i(!1)),0));const s=rp(e.sidx.resolvedUri),r=(s,r)=>{if(this.requestErrored_(s,r,t))return;const o=this.mainPlaylistLoader_.sidxMapping_;let a;try{a=Io()(Hs(r.response).subarray(8))}catch(ST){return void this.requestErrored_(ST,r,t)}return o[n]={sidxInfo:e.sidx,sidx:a},kr(e,a,e.sidx.resolvedUri),i(!0)};this.request=Rm(s,this.vhs_.xhr,((t,i,n,o)=>{if(t)return r(t,i);if(!n||"mp4"!==n)return r({status:i.status,message:`Unsupported ${n||"unknown"} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},i);const{offset:a,length:l}=e.sidx.byterange;if(o.length>=l+a)return r(t,{response:o.subarray(a,a+l),status:i.status,uri:i.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:fm({byterange:e.sidx.byterange})},r)}))}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Qn().clearTimeout(this.minimumUpdatePeriodTimeout_),Qn().clearTimeout(this.mediaRequest_),Qn().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"===typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,(i=>{this.haveMetadata({startingState:t,playlist:e})})))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),"HAVE_MAIN_MANIFEST"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Qn().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(Qn().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){Qn().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const e=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Qn().setTimeout((()=>this.load()),e)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_(((e,t)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})):this.mediaRequest_=Qn().setTimeout((()=>this.haveMain_()),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},((t,i)=>{if(this.requestErrored_(t,i))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const n=i.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=rp(this.mainPlaylistLoader_.srcUrl,i),n?(this.handleMain_(),void this.syncClientServerClock_((()=>e(i,n)))):e(i,n)}))}syncClientServerClock_(e){const t=Eo(this.mainPlaylistLoader_.mainXml_);return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:sp(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},((i,n)=>{if(!this.request)return;if(i)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let s;s="HEAD"===t.method?n.responseHeaders&&n.responseHeaders.date?Date.parse(n.responseHeaders.date):this.mainLoaded_:Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=qm({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=Hm(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Qn().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!==typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Qn().setTimeout((()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)}refreshXml_(){this.requestMain_(((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=Xm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,(e=>{this.refreshMedia_(this.media().id)})))}))}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const e=()=>{this.media().endList||(this.mediaUpdateTimeout=Qn().setTimeout((()=>{this.trigger("mediaupdatetimeout"),e()}),dm(this.media(),Boolean(i))))};e()}this.trigger("loadedplaylist")}}var Km={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Zm=e=>{const t=new Uint8Array(new ArrayBuffer(e.length));for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer},Ym=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Jm=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(ST){const i=new BlobBuilder;return i.append(e),URL.createObjectURL(i.getBlob())}},$m=function(e){return function(){const t=Jm(e),i=Ym(new Worker(t));i.objURL=t;const n=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(t),n.call(this)},i}},eg=function(e){return`var browserWorkerPolyFill = ${Ym.toString()};\nbrowserWorkerPolyFill(self);\n`+e},tg=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},ig=eg(tg((function(){var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:"undefined"!==typeof self?self:{},t=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var n;return!!e[t]&&(n=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(n,1),n>-1)},this.trigger=function(t){var i,n,s,r;if(i=e[t],i)if(2===arguments.length)for(s=i.length,n=0;n<s;++n)i[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(s=i.length,n=0;n<s;++n)i[n].apply(this,r)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var n,s,r,o,a,l,u,c,d,h,p,m,g,_,f,y,v,b,w,k,T,x,S,E,A,C,I,P,N,D,L,O,B,U,V,R,j=t,M=Math.pow(2,32),F=function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.getBigUint64?(t=i.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):i.getUint32(0)*M+i.getUint32(4)},q={getUint64:F,MAX_UINT32:M},z=q.MAX_UINT32;(function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);E=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),A=new Uint8Array([0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),N={video:I,audio:P},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),B=new Uint8Array([0,0,0,0,0,0,0,0]),U=B,V=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=B,D=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),n=function(e){var t,i,n,s=[],r=0;for(t=1;t<arguments.length;t++)s.push(arguments[t]);t=s.length;while(t--)r+=s[t].byteLength;for(i=new Uint8Array(r+8),n=new DataView(i.buffer,i.byteOffset,i.byteLength),n.setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<s.length;t++)i.set(s[t],r),r+=s[t].byteLength;return i},s=function(){return n(S.dinf,n(S.dref,O))},r=function(e){return n(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},o=function(){return n(S.ftyp,E,A,E,C)},y=function(e){return n(S.hdlr,N[e])},a=function(e){return n(S.mdat,e)},f=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),n(S.mdhd,t)},_=function(e){return n(S.mdia,f(e),y(e.type),u(e))},l=function(e){return n(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},u=function(e){return n(S.minf,"video"===e.type?n(S.vmhd,D):n(S.smhd,L),s(),b(e))},c=function(e,t){var i=[],s=t.length;while(s--)i[s]=k(t[s]);return n.apply(null,[S.moof,l(e)].concat(i))},d=function(e){var t=e.length,i=[];while(t--)i[t]=m(e[t]);return n.apply(null,[S.moov,p(4294967295)].concat(i).concat(h(e)))},h=function(e){var t=e.length,i=[];while(t--)i[t]=T(e[t]);return n.apply(null,[S.mvex].concat(i))},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(S.mvhd,t)},v=function(e){var t,i,s=e.samples||[],r=new Uint8Array(4+s.length);for(i=0;i<s.length;i++)t=s[i].flags,r[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return n(S.sdtp,r)},b=function(e){return n(S.stbl,w(e),n(S.stts,R),n(S.stsc,U),n(S.stsz,V),n(S.stco,B))},function(){var e,t;w=function(i){return n(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?e(i):t(i))},e=function(e){var t,i,s=e.sps||[],r=e.pps||[],o=[],a=[];for(t=0;t<s.length;t++)o.push((65280&s[t].byteLength)>>>8),o.push(255&s[t].byteLength),o=o.concat(Array.prototype.slice.call(s[t]));for(t=0;t<r.length;t++)a.push((65280&r[t].byteLength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));if(i=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([s.length],o,[r.length],a))),n(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],u=e.sarRatio[1];i.push(n(S.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return n.apply(null,i)},t=function(e){return n(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))}}(),g=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return n(S.tkhd,t)},k=function(e){var t,i,s,r,o,a,l;return t=n(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/z),l=Math.floor(e.baseMediaDecodeTime%z),i=n(S.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,l>>>24&255,l>>>16&255,l>>>8&255,255&l])),o=92,"audio"===e.type?(s=x(e,o),n(S.traf,t,i,s)):(r=v(e),s=x(e,r.length+o),n(S.traf,t,i,s,r))},m=function(e){return e.duration=e.duration||4294967295,n(S.trak,g(e),_(e))},T=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),n(S.trex,t)},function(){var e,t,i;i=function(e,t){var i=0,n=0,s=0,r=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(s=4),void 0!==e[0].compositionTimeOffset&&(r=8)),[0,0,i|n|s|r,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var s,r,o,a,l,u;for(a=e.samples||[],t+=20+16*a.length,o=i(a,t),r=new Uint8Array(o.length+16*a.length),r.set(o),s=o.length,u=0;u<a.length;u++)l=a[u],r[s++]=(4278190080&l.duration)>>>24,r[s++]=(16711680&l.duration)>>>16,r[s++]=(65280&l.duration)>>>8,r[s++]=255&l.duration,r[s++]=(4278190080&l.size)>>>24,r[s++]=(16711680&l.size)>>>16,r[s++]=(65280&l.size)>>>8,r[s++]=255&l.size,r[s++]=l.flags.isLeading<<2|l.flags.dependsOn,r[s++]=l.flags.isDependedOn<<6|l.flags.hasRedundancy<<4|l.flags.paddingValue<<1|l.flags.isNonSyncSample,r[s++]=61440&l.flags.degradationPriority,r[s++]=15&l.flags.degradationPriority,r[s++]=(4278190080&l.compositionTimeOffset)>>>24,r[s++]=(16711680&l.compositionTimeOffset)>>>16,r[s++]=(65280&l.compositionTimeOffset)>>>8,r[s++]=255&l.compositionTimeOffset;return n(S.trun,r)},e=function(e,t){var s,r,o,a,l,u;for(a=e.samples||[],t+=20+8*a.length,o=i(a,t),s=new Uint8Array(o.length+8*a.length),s.set(o),r=o.length,u=0;u<a.length;u++)l=a[u],s[r++]=(4278190080&l.duration)>>>24,s[r++]=(16711680&l.duration)>>>16,s[r++]=(65280&l.duration)>>>8,s[r++]=255&l.duration,s[r++]=(4278190080&l.size)>>>24,s[r++]=(16711680&l.size)>>>16,s[r++]=(65280&l.size)>>>8,s[r++]=255&l.size;return n(S.trun,s)},x=function(i,n){return"audio"===i.type?e(i,n):t(i,n)}}();var H,W,G,X,Q,K,Z,Y,J={ftyp:o,mdat:a,moof:c,moov:d,initSegment:function(e){var t,i=o(),n=d(e);return t=new Uint8Array(i.byteLength+n.byteLength),t.set(i),t.set(n,i.byteLength),t}},$=function(e){var t,i,n=[],s=[];for(s.byteLength=0,s.nalCount=0,s.duration=0,n.byteLength=0,t=0;t<e.length;t++)i=e[t],"access_unit_delimiter_rbsp"===i.nalUnitType?(n.length&&(n.duration=i.dts-n.dts,s.byteLength+=n.byteLength,s.nalCount+=n.length,s.duration+=n.duration,s.push(n)),n=[i],n.byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return s.length&&(!n.duration||n.duration<=0)&&(n.duration=s[s.length-1].duration),s.byteLength+=n.byteLength,s.nalCount+=n.length,s.duration+=n.duration,s.push(n),s},ee=function(e){var t,i,n=[],s=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,s.byteLength=0,s.nalCount=0,s.duration=0,s.pts=e[0].pts,s.dts=e[0].dts,t=0;t<e.length;t++)i=e[t],i.keyFrame?(n.length&&(s.push(n),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.duration+=n.duration),n=[i],n.nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return s.length&&n.duration<=0&&(n.duration=s[s.length-1].duration),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.duration+=n.duration,s.push(n),s},te=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ie=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},ne=function(e,t){var i=ie();return i.dataOffset=t,i.compositionTimeOffset=e.pts-e.dts,i.duration=e.duration,i.size=4*e.length,i.size+=e.byteLength,e.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},se=function(e,t){var i,n,s,r,o,a=t||0,l=[];for(i=0;i<e.length;i++)for(r=e[i],n=0;n<r.length;n++)o=r[n],s=ne(o,a),a+=s.size,l.push(s);return l},re=function(e){var t,i,n,s,r,o,a=0,l=e.byteLength,u=e.nalCount,c=l+4*u,d=new Uint8Array(c),h=new DataView(d.buffer);for(t=0;t<e.length;t++)for(s=e[t],i=0;i<s.length;i++)for(r=s[i],n=0;n<r.length;n++)o=r[n],h.setUint32(a,o.data.byteLength),a+=4,d.set(o.data,a),a+=o.data.byteLength;return d},oe=function(e,t){var i,n=t||0,s=[];return i=ne(e,n),s.push(i),s},ae=function(e){var t,i,n=0,s=e.byteLength,r=e.length,o=s+4*r,a=new Uint8Array(o),l=new DataView(a.buffer);for(t=0;t<e.length;t++)i=e[t],l.setUint32(n,i.data.byteLength),n+=4,a.set(i.data,n),n+=i.data.byteLength;return a},le={groupNalsIntoFrames:$,groupFramesIntoGops:ee,extendFirstKeyFrame:te,generateSampleTable:se,concatenateNalData:re,generateSampleTableForFrame:oe,concatenateNalDataForFrame:ae},ue=[33,16,5,32,164,27],ce=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],de=function(e){var t=[];while(e--)t.push(0);return t},he=function(e){return Object.keys(e).reduce((function(t,i){return t[i]=new Uint8Array(e[i].reduce((function(e,t){return e.concat(t)}),[])),t}),{})},pe=function(){if(!H){var e={96e3:[ue,[227,64],de(154),[56]],88200:[ue,[231],de(170),[56]],64e3:[ue,[248,192],de(240),[56]],48e3:[ue,[255,192],de(268),[55,148,128],de(54),[112]],44100:[ue,[255,192],de(268),[55,163,128],de(84),[112]],32e3:[ue,[255,192],de(268),[55,234],de(226),[112]],24e3:[ue,[255,192],de(268),[55,255,128],de(268),[111,112],de(126),[224]],16e3:[ue,[255,192],de(268),[55,255,128],de(268),[111,255],de(269),[223,108],de(195),[1,192]],12e3:[ce,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,253,128],de(259),[56]],11025:[ce,de(268),[3,127,248],de(268),[6,255,240],de(268),[13,255,224],de(268),[27,255,192],de(268),[55,175,128],de(108),[112]],8e3:[ce,de(268),[3,121,16],de(47),[7]]};H=he(e)}return H},me=9e4;W=function(e){return e*me},G=function(e,t){return e*t},X=function(e){return e/me},Q=function(e,t){return e/t},K=function(e,t){return W(Q(e,t))},Z=function(e,t){return G(X(e),t)},Y=function(e,t,i){return X(i?e:e-t)};var ge={ONE_SECOND_IN_TS:me,secondsToVideoTs:W,secondsToAudioTs:G,videoTsToSeconds:X,audioTsToSeconds:Q,audioTsToVideoTs:K,videoTsToAudioTs:Z,metadataTsToSeconds:Y},_e=pe,fe=ge,ye=function(e){var t,i,n=0;for(t=0;t<e.length;t++)i=e[t],n+=i.data.byteLength;return n},ve=function(e,t,i,n){var s,r,o,a,l=0,u=0,c=0,d=0;if(t.length&&(s=fe.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),l=Math.ceil(fe.ONE_SECOND_IN_TS/(e.samplerate/1024)),i&&n&&(u=s-Math.max(i,n),c=Math.floor(u/l),d=c*l),!(c<1||d>fe.ONE_SECOND_IN_TS/2))){for(r=_e()[e.samplerate],r||(r=t[0].data),o=0;o<c;o++)a=t[0],t.splice(0,0,{data:r,dts:a.dts-l,pts:a.pts-l});return e.baseMediaDecodeTime-=Math.floor(fe.videoTsToAudioTs(d,e.samplerate)),d}},be=function(e,t,i){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},we=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},ke=function(e){var t,i,n=0,s=new Uint8Array(ye(e));for(t=0;t<e.length;t++)i=e[t],s.set(i.data,n),n+=i.data.byteLength;return s},Te={prefixWithSilence:ve,trimAdtsFramesByEarliestDts:be,generateSampleTable:we,concatenateFrameData:ke},xe=ge.ONE_SECOND_IN_TS,Se=function(e,t){"number"===typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"===typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ee=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Ae=function(e,t){var i,n,s=e.minSegmentDts;return t||(s-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=s,i=Math.max(0,i),"audio"===e.type&&(n=e.samplerate/xe,i*=n,i=Math.floor(i)),i},Ce={clearDtsInfo:Ee,calculateTrackBaseMediaDecodeTime:Ae,collectDtsInfo:Se},Ie=4,Pe=128,Ne=function(e){var t=0,i={payloadType:-1,payloadSize:0},n=0,s=0;while(t<e.byteLength){if(e[t]===Pe)break;while(255===e[t])n+=255,t++;n+=e[t++];while(255===e[t])s+=255,t++;if(s+=e[t++],!i.payload&&n===Ie){var r=String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6]);if("GA94"===r){i.payloadType=n,i.payloadSize=s,i.payload=e.subarray(t,t+s);break}i.payload=void 0}t+=s,n=0,s=0}return i},De=function(e){return 181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Le=function(e,t){var i,n,s,r,o=[];if(!(64&t[0]))return o;for(n=31&t[0],i=0;i<n;i++)s=3*i,r={type:3&t[s+2],pts:e},4&t[s+2]&&(r.ccData=t[s+3]<<8|t[s+4],o.push(r));return o},Oe=function(e){var t,i,n=e.byteLength,s=[],r=1;while(r<n-2)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var o=0;for(r=0;r<t;o++,r++)o===s[0]&&(o++,s.shift()),i[r]=e[o];return i},Be={parseSei:Ne,parseUserData:De,parseCaptionPackets:Le,discardEmulationPreventionBytes:Oe,USER_DATA_REGISTERED_ITU_T_T35:Ie},Ue=j,Ve=Be,Re=function(e){e=e||{},Re.prototype.init.call(this),this.parse708captions_="boolean"!==typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ze(0,0),new Ze(0,1),new Ze(1,0),new Ze(1,1)],this.parse708captions_&&(this.cc708Stream_=new He({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Re.prototype=new Ue,Re.prototype.push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=Ve.parseSei(e.escapedRBSP),t.payload&&t.payloadType===Ve.USER_DATA_REGISTERED_ITU_T_T35&&(i=Ve.parseUserData(t),i)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=Ve.parseCaptionPackets(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Re.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},Re.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},Re.prototype.flush=function(){return this.flushStream("flush")},Re.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Re.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},Re.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Re.prototype.setsChannel1Active=function(e){return 4096===(30720&e.ccData)},Re.prototype.setsChannel2Active=function(e){return 6144===(30720&e.ccData)},Re.prototype.setsTextOrXDSActive=function(e){return 256===(28928&e.ccData)||4138===(30974&e.ccData)||6186===(30974&e.ccData)},Re.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var je={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Me=function(e){var t=je[e]||e;return 4096&e&&e===t?"":String.fromCharCode(t)},Fe=function(e){return 32<=e&&e<=127||160<=e&&e<=255},qe=function(e){this.windowNum=e,this.reset()};qe.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},qe.prototype.getText=function(){return this.rows.join("\n")},qe.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},qe.prototype.newLine=function(e){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);while(this.rows.length>this.virtualRowCount)this.rows.shift(),this.rowIdx--},qe.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},qe.prototype.addText=function(e){this.rows[this.rowIdx]+=e},qe.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var ze=function(e,t,i){this.serviceNum=e,this.text="",this.currentWindow=new qe(-1),this.windows=[],this.stream=i,"string"===typeof t&&this.createTextDecoder(t)};ze.prototype.init=function(e,t){this.startPts=e;for(var i=0;i<8;i++)this.windows[i]=new qe(i),"function"===typeof t&&(this.windows[i].beforeRowOverflow=t)},ze.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},ze.prototype.createTextDecoder=function(e){if("undefined"===typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var He=function(e){e=e||{},He.prototype.init.call(this);var t,i=this,n=e.captionServices||{},s={};Object.keys(n).forEach((e=>{t=n[e],/^SERVICE/.test(e)&&(s[e]=t.encoding)})),this.serviceEncodings=s,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(i.new708Packet(),i.add708Bytes(e)):(null===i.current708Packet&&i.new708Packet(),i.add708Bytes(e))}};He.prototype=new Ue,He.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},He.prototype.add708Bytes=function(e){var t=e.ccData,i=t>>>8,n=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},He.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,i=null,n=null,s=0,r=t[s++];for(e.seq=r>>6,e.sizeCode=63&r;s<t.length;s++)r=t[s++],i=r>>5,n=31&r,7===i&&n>0&&(r=t[s++],i=r),this.pushServiceBlock(i,s,n),n>0&&(s+=n-1)},He.prototype.pushServiceBlock=function(e,t,i){var n,s=t,r=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,s));s<t+i&&s<r.length;s++)n=r[s],Fe(n)?s=this.handleText(s,o):24===n?s=this.multiByteCharacter(s,o):16===n?s=this.extendedCommands(s,o):128<=n&&n<=135?s=this.setCurrentWindow(s,o):152<=n&&n<=159?s=this.defineWindow(s,o):136===n?s=this.clearWindows(s,o):140===n?s=this.deleteWindows(s,o):137===n?s=this.displayWindows(s,o):138===n?s=this.hideWindows(s,o):139===n?s=this.toggleWindows(s,o):151===n?s=this.setWindowAttributes(s,o):144===n?s=this.setPenAttributes(s,o):145===n?s=this.setPenColor(s,o):146===n?s=this.setPenLocation(s,o):143===n?o=this.reset(s,o):8===n?o.currentWindow.backspace():12===n?o.currentWindow.clearText():13===n?o.currentWindow.pendingNewLine=!0:14===n?o.currentWindow.clearText():141===n&&s++},He.prototype.extendedCommands=function(e,t){var i=this.current708Packet.data,n=i[++e];return Fe(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},He.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},He.prototype.initService=function(e,t){var i,n="SERVICE"+e,s=this;return n in this.serviceEncodings&&(i=this.serviceEncodings[n]),this.services[e]=new ze(e,i,s),this.services[e].init(this.getPts(t),(function(t){s.flushDisplayed(t,s.services[e])})),this.services[e]},He.prototype.handleText=function(e,t,i){var n,s,r=i&&i.isExtended,o=i&&i.isMultiByte,a=this.current708Packet.data,l=r?4096:0,u=a[e],c=a[e+1],d=t.currentWindow;return t.textDecoder_&&!r?(o?(s=[u,c],e++):s=[u],n=t.textDecoder_.decode(new Uint8Array(s))):n=Me(l|u),d.pendingNewLine&&!d.isEmpty()&&d.newLine(this.getPts(e)),d.pendingNewLine=!1,d.addText(n),e},He.prototype.multiByteCharacter=function(e,t){var i=this.current708Packet.data,n=i[e+1],s=i[e+2];return Fe(n)&&Fe(s)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},He.prototype.setCurrentWindow=function(e,t){var i=this.current708Packet.data,n=i[e],s=7&n;return t.setCurrentWindow(s),e},He.prototype.defineWindow=function(e,t){var i=this.current708Packet.data,n=i[e],s=7&n;t.setCurrentWindow(s);var r=t.currentWindow;return n=i[++e],r.visible=(32&n)>>5,r.rowLock=(16&n)>>4,r.columnLock=(8&n)>>3,r.priority=7&n,n=i[++e],r.relativePositioning=(128&n)>>7,r.anchorVertical=127&n,n=i[++e],r.anchorHorizontal=n,n=i[++e],r.anchorPoint=(240&n)>>4,r.rowCount=15&n,n=i[++e],r.columnCount=63&n,n=i[++e],r.windowStyle=(56&n)>>3,r.penStyle=7&n,r.virtualRowCount=r.rowCount+1,e},He.prototype.setWindowAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],s=t.currentWindow.winAttr;return n=i[++e],s.fillOpacity=(192&n)>>6,s.fillRed=(48&n)>>4,s.fillGreen=(12&n)>>2,s.fillBlue=3&n,n=i[++e],s.borderType=(192&n)>>6,s.borderRed=(48&n)>>4,s.borderGreen=(12&n)>>2,s.borderBlue=3&n,n=i[++e],s.borderType+=(128&n)>>5,s.wordWrap=(64&n)>>6,s.printDirection=(48&n)>>4,s.scrollDirection=(12&n)>>2,s.justify=3&n,n=i[++e],s.effectSpeed=(240&n)>>4,s.effectDirection=(12&n)>>2,s.displayEffect=3&n,e},He.prototype.flushDisplayed=function(e,t){for(var i=[],n=0;n<8;n++)t.windows[n].visible&&!t.windows[n].isEmpty()&&i.push(t.windows[n].getText());t.endPts=e,t.text=i.join("\n\n"),this.pushCaption(t),t.startPts=e},He.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},He.prototype.displayWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],s=this.getPts(e);this.flushDisplayed(s,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},He.prototype.hideWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],s=this.getPts(e);this.flushDisplayed(s,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},He.prototype.toggleWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],s=this.getPts(e);this.flushDisplayed(s,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},He.prototype.clearWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],s=this.getPts(e);this.flushDisplayed(s,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},He.prototype.deleteWindows=function(e,t){var i=this.current708Packet.data,n=i[++e],s=this.getPts(e);this.flushDisplayed(s,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},He.prototype.setPenAttributes=function(e,t){var i=this.current708Packet.data,n=i[e],s=t.currentWindow.penAttr;return n=i[++e],s.textTag=(240&n)>>4,s.offset=(12&n)>>2,s.penSize=3&n,n=i[++e],s.italics=(128&n)>>7,s.underline=(64&n)>>6,s.edgeType=(56&n)>>3,s.fontStyle=7&n,e},He.prototype.setPenColor=function(e,t){var i=this.current708Packet.data,n=i[e],s=t.currentWindow.penColor;return n=i[++e],s.fgOpacity=(192&n)>>6,s.fgRed=(48&n)>>4,s.fgGreen=(12&n)>>2,s.fgBlue=3&n,n=i[++e],s.bgOpacity=(192&n)>>6,s.bgRed=(48&n)>>4,s.bgGreen=(12&n)>>2,s.bgBlue=3&n,n=i[++e],s.edgeRed=(48&n)>>4,s.edgeGreen=(12&n)>>2,s.edgeBlue=3&n,e},He.prototype.setPenLocation=function(e,t){var i=this.current708Packet.data,n=i[e],s=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,n=i[++e],s.row=15&n,n=i[++e],s.column=63&n,e},He.prototype.reset=function(e,t){var i=this.getPts(e);return this.flushDisplayed(i,t),this.initService(t.serviceNum,e)};var We={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ge=function(e){return null===e?"":(e=We[e]||e,String.fromCharCode(e))},Xe=14,Qe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ke=function(){var e=[],t=Xe+1;while(t--)e.push("");return e},Ze=function(e,t){Ze.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,s,r;if(t=32639&e.ccData,t!==this.lastControlCode_){if(4096===(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,s=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ke();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ke();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ke()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,s))n=(3&n)<<8,r=Ge(n|s),this[this.mode_](e.pts,r),this.column_++;else if(this.isExtCharacter(n,s))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),n=(3&n)<<8,r=Ge(n|s),this[this.mode_](e.pts,r),this.column_++;else if(this.isMidRowCode(n,s))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14===(14&s)&&this.addFormatting(e.pts,["i"]),1===(1&s)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,s))this.column_+=3&s;else if(this.isPAC(n,s)){var o=Qe.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&s&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16===(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(s)&&14===(14&s)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===s&&(s=null),r=Ge(n),r+=Ge(s),this[this.mode_](e.pts,r),this.column_+=r.length)}else this.lastControlCode_=null}};Ze.prototype=new Ue,Ze.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(ST){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ze.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ke(),this.nonDisplayed_=Ke(),this.lastControlCode_=null,this.column_=0,this.row_=Xe,this.rollUpRows_=2,this.formatting_=[]},Ze.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ze.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ze.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ze.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ze.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ze.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ze.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ze.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ze.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=Xe,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ke(),this.displayed_=Ke()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ze.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,i)},Ze.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Ze.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},Ze.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},Ze.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<Xe+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ze.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var Ye={CaptionStream:Re,Cea608Stream:Ze,Cea708Stream:He},Je={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},$e=j,et=8589934592,tt=4294967296,it="shared",nt=function(e,t){var i=1;e>t&&(i=-1);while(Math.abs(t-e)>tt)e+=i*et;return e},st=function(e){var t,i;st.prototype.init.call(this),this.type_=e||it,this.push=function(e){this.type_!==it&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=nt(e.dts,i),e.pts=nt(e.pts,i),t=e.dts,this.trigger("data",e))},this.flush=function(){i=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};st.prototype=new $e;var rt,ot={TimestampRolloverStream:st,handleRollover:nt},at=(e,t,i)=>{if(!e)return-1;for(var n=i;n<e.length;n++)if(e[n]===t)return n;return-1},lt={typedArrayIndexOf:at},ut=lt.typedArrayIndexOf,ct={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},dt=function(e,t,i){var n,s="";for(n=t;n<i;n++)s+="%"+("00"+e[n].toString(16)).slice(-2);return s},ht=function(e,t,i){return decodeURIComponent(dt(e,t,i))},pt=function(e,t,i){return unescape(dt(e,t,i))},mt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},gt={APIC:function(e){var t,i,n=1,s="--\x3e";e.data[0]===ct.Utf8&&(t=ut(e.data,0,n),t<0||(e.mimeType=pt(e.data,n,t),n=t+1,e.pictureType=e.data[n],n++,i=ut(e.data,0,n),i<0||(e.description=ht(e.data,n,i),n=i+1,e.mimeType===s?e.url=pt(e.data,n,e.data.length):e.pictureData=e.data.subarray(n,e.data.length))))},"T*":function(e){e.data[0]===ct.Utf8&&(e.value=ht(e.data,1,e.data.length).replace(/\0*$/,""),e.values=e.value.split("\0"))},TXXX:function(e){var t;e.data[0]===ct.Utf8&&(t=ut(e.data,0,1),-1!==t&&(e.description=ht(e.data,1,t),e.value=ht(e.data,t+1,e.data.length).replace(/\0*$/,""),e.data=e.value))},"W*":function(e){e.url=pt(e.data,0,e.data.length).replace(/\0.*$/,"")},WXXX:function(e){var t;e.data[0]===ct.Utf8&&(t=ut(e.data,0,1),-1!==t&&(e.description=ht(e.data,1,t),e.url=pt(e.data,t+1,e.data.length).replace(/\0.*$/,"")))},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=pt(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}},_t=function(e){var t,i,n=10,s=0,r=[];if(!(e.length<10||e[0]!=="I".charCodeAt(0)||e[1]!=="D".charCodeAt(0)||e[2]!=="3".charCodeAt(0))){s=mt(e.subarray(6,10)),s+=10;var o=64&e[5];o&&(n+=4,n+=mt(e.subarray(10,14)),s-=mt(e.subarray(16,20)));do{if(t=mt(e.subarray(n+4,n+8)),t<1)break;i=String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3]);var a={id:i,data:e.subarray(n+10,n+t+10)};a.key=a.id,gt[a.id]?gt[a.id](a):"T"===a.id[0]?gt["T*"](a):"W"===a.id[0]&&gt["W*"](a),r.push(a),n+=10,n+=t}while(n<s);return r}},ft={parseId3Frames:_t,parseSyncSafeInteger:mt,frameParsers:gt},yt=j,vt=Je,bt=ft;rt=function(e){var t,i={descriptor:e&&e.descriptor},n=0,s=[],r=0;if(rt.prototype.init.call(this),this.dispatchType=vt.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,o,a,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(r=0,s.length=0),0===s.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(s.push(e),r+=e.data.byteLength,1===s.length&&(n=bt.parseSyncSafeInteger(e.data.subarray(6,10)),n+=10),!(r<n)){for(t={data:new Uint8Array(n),frames:[],pts:s[0].pts,dts:s[0].dts},l=0;l<n;)t.data.set(s[0].data.subarray(0,n-l),l),l+=s[0].data.byteLength,r-=s[0].data.byteLength,s.shift();i=10,64&t.data[5]&&(i+=4,i+=bt.parseSyncSafeInteger(t.data.subarray(10,14)),n-=bt.parseSyncSafeInteger(t.data.subarray(16,20)));do{if(o=bt.parseSyncSafeInteger(t.data.subarray(i+4,i+8)),o<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(u=String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),a={id:u,data:t.data.subarray(i+10,i+o+10)},a.key=a.id,bt.frameParsers[a.id]?bt.frameParsers[a.id](a):"T"===a.id[0]?bt.frameParsers["T*"](a):"W"===a.id[0]&&bt.frameParsers["W*"](a),"com.apple.streaming.transportStreamTimestamp"===a.owner){var c=a.data,d=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;d*=4,d+=3&c[7],a.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=a.timeStamp,t.dts=a.timeStamp),this.trigger("timestamp",a)}t.frames.push(a),i+=10,i+=o}while(i<n);this.trigger("data",t)}}},rt.prototype=new yt;var wt,kt,Tt,xt=rt,St=j,Et=Ye,At=Je,Ct=ot.TimestampRolloverStream,It=188,Pt=71;wt=function(){var e=new Uint8Array(It),t=0;wt.prototype.init.call(this),this.push=function(i){var n,s=0,r=It;t?(n=new Uint8Array(i.byteLength+t),n.set(e.subarray(0,t)),n.set(i,t),t=0):n=i;while(r<n.byteLength)n[s]!==Pt||n[r]!==Pt?(s++,r++):(this.trigger("data",n.subarray(s,r)),s+=It,r+=It);s<n.byteLength&&(e.set(n.subarray(s),0),t=n.byteLength-s)},this.flush=function(){t===It&&e[0]===Pt&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}},wt.prototype=new St,kt=function(){var e,t,i,n;kt.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,n){var s=0;n.payloadUnitStartIndicator&&(s+=e[s]+1),"pat"===n.type?t(e.subarray(s),n):i(e.subarray(s),n)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],n.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=n.pmtPid},i=function(e,t){var i,s,r,o;if(1&e[5]){n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=(15&e[1])<<8|e[2],s=3+i-4,r=(15&e[10])<<8|e[11],o=12+r;while(o<s){var a=e[o],l=(31&e[o+1])<<8|e[o+2];a===At.H264_STREAM_TYPE&&null===n.programMapTable.video?n.programMapTable.video=l:a===At.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio=l:a===At.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][l]=a),o+=5+((15&e[o+3])<<8|e[o+4])}t.programMapTable=n.programMapTable}},this.push=function(t){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(n+=t[n]+1),0===i.pid)i.type="pat",e(t.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid){i.type="pmt",e(t.subarray(n),i),this.trigger("data",i);while(this.packetsWaitingForPmt.length)this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,i]):this.processPes_(t,n,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=At.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=At.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}},kt.prototype=new St,kt.STREAM_TYPES={h264:27,adts:15},Tt=function(){var e,t=this,i=!1,n={data:[],size:0},s={data:[],size:0},r={data:[],size:0},o=function(e,t){var i;const n=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===n&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!==(4&e[6]),i=e[7],192&i&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&i&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))},a=function(e,i,n){var s,r=new Uint8Array(e.size),a={type:i},l=0,u=0,c=!1;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,l=0;l<e.data.length;l++)s=e.data[l],r.set(s.data,u),u+=s.data.byteLength;o(r,a),c="video"===i||a.packetLength<=e.size,(n||c)&&(e.size=0,e.data.length=0),c&&t.trigger("data",a)}};Tt.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var e,t;switch(o.streamType){case At.H264_STREAM_TYPE:e=n,t="video";break;case At.ADTS_STREAM_TYPE:e=s,t="audio";break;case At.METADATA_STREAM_TYPE:e=r,t="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(o),e.size+=o.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};e=o.programMapTable,null!==e.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),i=!0,t.trigger("data",n)}})[o.type]()},this.reset=function(){n.size=0,n.data.length=0,s.size=0,s.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(n,"video"),a(s,"audio"),a(r,"timed-metadata")},this.flush=function(){if(!i&&e){var n={type:"metadata",tracks:[]};null!==e.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",n)}i=!1,this.flushStreams_(),this.trigger("done")}},Tt.prototype=new St;var Nt={PAT_PID:0,MP2T_PACKET_LENGTH:It,TransportPacketStream:wt,TransportParseStream:kt,ElementaryStream:Tt,TimestampRolloverStream:Ct,CaptionStream:Et.CaptionStream,Cea608Stream:Et.Cea608Stream,Cea708Stream:Et.Cea708Stream,MetadataStream:xt};for(var Dt in At)At.hasOwnProperty(Dt)&&(Nt[Dt]=At[Dt]);var Lt,Ot=Nt,Bt=j,Ut=ge.ONE_SECOND_IN_TS,Vt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Lt=function(e){var t,i=0;Lt.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:`adts skiping bytes ${e} to ${t} in frame ${i} outside syncword`})},this.push=function(n){var s,r,o,a,l,u=0;if(e||(i=0),"audio"===n.type){var c;t&&t.length?(o=t,t=new Uint8Array(o.byteLength+n.data.byteLength),t.set(o),t.set(n.data,o.byteLength)):t=n.data;while(u+7<t.length)if(255===t[u]&&240===(246&t[u+1])){if("number"===typeof c&&(this.skipWarn_(c,u),c=null),r=2*(1&~t[u+1]),s=(3&t[u+3])<<11|t[u+4]<<3|(224&t[u+5])>>5,a=1024*(1+(3&t[u+6])),l=a*Ut/Vt[(60&t[u+2])>>>2],t.byteLength-u<s)break;this.trigger("data",{pts:n.pts+i*l,dts:n.dts+i*l,sampleCount:a,audioobjecttype:1+(t[u+2]>>>6&3),channelcount:(1&t[u+2])<<2|(192&t[u+3])>>>6,samplerate:Vt[(60&t[u+2])>>>2],samplingfrequencyindex:(60&t[u+2])>>>2,samplesize:16,data:t.subarray(u+7+r,u+s)}),i++,u+=s}else"number"!==typeof c&&(c=u),u++;"number"===typeof c&&(this.skipWarn_(c,u),c=null),t=t.subarray(u)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},Lt.prototype=new Bt;var Rt,jt=Lt;Rt=function(e){var t=e.byteLength,i=0,n=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+n},this.loadWord=function(){var s=e.byteLength-t,r=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");r.set(e.subarray(s,s+o)),i=new DataView(r.buffer).getUint32(0),n=8*o,t-=o},this.skipBits=function(e){var s;n>e?(i<<=e,n-=e):(e-=n,s=Math.floor(e/8),e-=8*s,t-=s,this.loadWord(),i<<=e,n-=e)},this.readBits=function(e){var s=Math.min(n,e),r=i>>>32-s;return n-=s,n>0?i<<=s:t>0&&this.loadWord(),s=e-s,s>0?r<<s|this.readBits(s):r},this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e)if(0!==(i&2147483648>>>e))return i<<=e,n-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Mt,Ft,qt,zt=Rt,Ht=j,Wt=zt;Ft=function(){var e,t,i=0;Ft.prototype.init.call(this),this.push=function(n){var s;t?(s=new Uint8Array(t.byteLength+n.data.byteLength),s.set(t),s.set(n.data,t.byteLength),t=s):t=n.data;for(var r=t.byteLength;i<r-3;i++)if(1===t[i+2]){e=i+5;break}while(e<r)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));do{e++}while(1!==t[e]&&e<r);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3;break}t=t.subarray(i),e-=i,i=0},this.reset=function(){t=null,i=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Ft.prototype=new Ht,qt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Mt=function(){var e,t,i,n,s,r,o,a=new Ft;Mt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,n=e.dts,a.push(e))},a.on("data",(function(o){var a={trackId:t,pts:i,dts:n,data:o,nalUnitTypeCode:31&o[0]};switch(a.nalUnitTypeCode){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=s(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=s(o.subarray(1)),a.config=r(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp";break}e.trigger("data",a)})),a.on("done",(function(){e.trigger("done")})),a.on("partialdone",(function(){e.trigger("partialdone")})),a.on("reset",(function(){e.trigger("reset")})),a.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){a.flush()},this.partialFlush=function(){a.partialFlush()},this.reset=function(){a.reset()},this.endTimeline=function(){a.endTimeline()},o=function(e,t){var i,n,s=8,r=8;for(i=0;i<e;i++)0!==r&&(n=t.readExpGolomb(),r=(s+n+256)%256),s=0===r?s:r},s=function(e){var t,i,n=e.byteLength,s=[],r=1;while(r<n-2)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var o=0;for(r=0;r<t;o++,r++)o===s[0]&&(o++,s.shift()),i[r]=e[o];return i},r=function(e){var t,i,n,s,r,a,l,u,c,d,h,p,m,g=0,_=0,f=0,y=0,v=[1,1];if(t=new Wt(e),i=t.readUnsignedByte(),s=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),qt[i]&&(r=t.readUnsignedExpGolomb(),3===r&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==r?8:12,m=0;m<h;m++)t.readBoolean()&&o(m<6?16:64,t);if(t.skipUnsignedExpGolomb(),a=t.readUnsignedExpGolomb(),0===a)t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),m=0;m<l;m++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),d=t.readBits(1),0===d&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb(),f=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(p=t.readUnsignedByte(),p){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()];break}v&&(v[0],v[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:s,width:16*(u+1)-2*g-2*_,height:(2-d)*(c+1)*16-2*f-2*y,sarRatio:v}}},Mt.prototype=new Ht;var Gt,Xt={H264Stream:Mt,NalByteStream:Ft},Qt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Kt=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],n=e[t+5],s=(16&n)>>4;return i=i>=0?i:0,s?i+20:i+10},Zt=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=Kt(e,t),Zt(e,t))},Yt=function(e){var t=Zt(e,0);return e.length>=t+2&&255===(255&e[t])&&240===(240&e[t+1])&&16===(22&e[t+1])},Jt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},$t=function(e,t,i){var n,s="";for(n=t;n<i;n++)s+="%"+("00"+e[n].toString(16)).slice(-2);return s},ei=function(e,t,i){return unescape($t(e,t,i))},ti=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3,s=6144&e[t+3];return s|n|i},ii=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240===(240&e[t+1])?"audio":null},ni=function(e){var t=0;while(t+5<e.length){if(255===e[t]&&240===(246&e[t+1]))return Qt[(60&e[t+2])>>>2];t++}return null},si=function(e){var t,i,n,s;t=10,64&e[5]&&(t+=4,t+=Jt(e.subarray(10,14)));do{if(i=Jt(e.subarray(t+4,t+8)),i<1)return null;if(s=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]),"PRIV"===s){n=e.subarray(t+10,t+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){var o=ei(n,0,r);if("com.apple.streaming.transportStreamTimestamp"===o){var a=n.subarray(r+1),l=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return l*=4,l+=3&a[7],l}break}}t+=10,t+=i}while(t<e.byteLength);return null},ri={isLikelyAacData:Yt,parseId3TagSize:Kt,parseAdtsSize:ti,parseType:ii,parseSampleRate:ni,parseAacTimestamp:si},oi=j,ai=ri;Gt=function(){var e=new Uint8Array,t=0;Gt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(i){var n,s,r,o,a=0,l=0;e.length?(o=e.length,e=new Uint8Array(i.byteLength+o),e.set(e.subarray(0,o)),e.set(i,o)):e=i;while(e.length-l>=3)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!==(255&e[l])||240!==(240&e[l+1]))l++;else{if(e.length-l<7)break;if(a=ai.parseAdtsSize(e,l),l+a>e.length)break;r={type:"audio",data:e.subarray(l,l+a),pts:t,dts:t},this.trigger("data",r),l+=a}else{if(e.length-l<10)break;if(a=ai.parseId3TagSize(e,l),l+a>e.length)break;s={type:"timed-metadata",data:e.subarray(l,l+a)},this.trigger("data",s),l+=a}n=e.length-l,e=n>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}},Gt.prototype=new oi;var li,ui,ci,di,hi=Gt,pi=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],mi=pi,gi=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],_i=gi,fi=j,yi=J,vi=le,bi=Te,wi=Ce,ki=Ot,Ti=ge,xi=jt,Si=Xt.H264Stream,Ei=hi,Ai=ri.isLikelyAacData,Ci=ge.ONE_SECOND_IN_TS,Ii=mi,Pi=_i,Ni=function(e,t){t.stream=e,this.trigger("log",t)},Di=function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++){var s=i[n];"headOfPipeline"!==s&&t[s].on&&t[s].on("log",Ni.bind(e,s))}},Li=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},Oi=function(e,t,i,n,s,r){var o=i-t,a=n-t,l=s-i;return{start:{dts:e,pts:e+o},end:{dts:e+a,pts:e+l},prependedContentDuration:r,baseMediaDecodeTime:e}};ui=function(e,t){var i,n=[],s=0,r=0,o=1/0;t=t||{},i=t.firstSequenceNumber||0,ui.prototype.init.call(this),this.push=function(t){wi.collectDtsInfo(e,t),e&&Ii.forEach((function(i){e[i]=t[i]})),n.push(t)},this.setEarliestDts=function(e){s=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){r=e},this.flush=function(){var a,l,u,c,d,h,p;0!==n.length?(a=bi.trimAdtsFramesByEarliestDts(n,e,s),e.baseMediaDecodeTime=wi.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),p=bi.prefixWithSilence(e,a,r,o),e.samples=bi.generateSampleTable(a),u=yi.mdat(bi.concatenateFrameData(a)),n=[],l=yi.moof(i,[e]),c=new Uint8Array(l.byteLength+u.byteLength),i++,c.set(l),c.set(u,l.byteLength),wi.clearDtsInfo(e),d=Math.ceil(1024*Ci/e.samplerate),a.length&&(h=a.length*d,this.trigger("segmentTimingInfo",Oi(Ti.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),a[0].dts,a[0].pts,a[0].dts+h,a[0].pts+h,p||0)),this.trigger("timingInfo",{start:a[0].pts,end:a[0].pts+h})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){wi.clearDtsInfo(e),n=[],this.trigger("reset")}},ui.prototype=new fi,li=function(e,t){var i,n,s,r=[],o=[];t=t||{},i=t.firstSequenceNumber||0,li.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){wi.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],Pi.forEach((function(t){e[t]=n[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||s||(s=t.data,e.pps=[t.data]),r.push(t)},this.flush=function(){var n,s,a,l,u,c,d,h,p=0;while(r.length){if("access_unit_delimiter_rbsp"===r[0].nalUnitType)break;r.shift()}if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=vi.groupNalsIntoFrames(r),a=vi.groupFramesIntoGops(n),a[0][0].keyFrame||(s=this.getGopForFusion_(r[0],e),s?(p=s.duration,a.unshift(s),a.byteLength+=s.byteLength,a.nalCount+=s.nalCount,a.pts=s.pts,a.dts=s.dts,a.duration+=s.duration):a=vi.extendFirstKeyFrame(a)),o.length){var m;if(m=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a),!m)return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");wi.clearDtsInfo(e),a=m}wi.collectDtsInfo(e,a),e.samples=vi.generateSampleTable(a),u=yi.mdat(vi.concatenateNalData(a)),e.baseMediaDecodeTime=wi.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=a[0],h=a[a.length-1],this.trigger("segmentTimingInfo",Oi(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:a[0].pts,end:a[a.length-1].pts+a[a.length-1].duration}),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=yi.moof(i,[e]),c=new Uint8Array(l.byteLength+u.byteLength),i++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),r=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){wi.clearDtsInfo(e),n=void 0,s=void 0},this.getGopForFusion_=function(t){var i,n,s,r,o,a=45e3,l=1e4,u=1/0;for(o=0;o<this.gopCache_.length;o++)r=this.gopCache_[o],s=r.gop,e.pps&&Li(e.pps[0],r.pps[0])&&e.sps&&Li(e.sps[0],r.sps[0])&&(s.dts<e.timelineStartInfo.dts||(i=t.dts-s.dts-s.duration,i>=-l&&i<=a&&(!n||u>i)&&(n=r,u=i)));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,s,r,a,l,u;r=e.byteLength,a=e.nalCount,l=e.duration,t=i=0;while(t<o.length&&i<e.length){if(n=o[t],s=e[i],n.pts===s.pts)break;s.pts>n.pts?t++:(i++,r-=s.byteLength,a-=s.nalCount,l-=s.duration)}return 0===i?e:i===e.length?null:(u=e.slice(i),u.byteLength=r,u.duration=l,u.nalCount=a,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,i,n,s,r,a,l;t=o.length-1,i=e.length-1,r=null,a=!1;while(t>=0&&i>=0){if(n=o[t],s=e[i],n.pts===s.pts){a=!0;break}n.pts>s.pts?t--:(t===o.length-1&&(r=i),i--)}if(!a&&null===r)return null;if(l=a?i:r,0===l)return e;var u=e.slice(l),c=u.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){o=e}},li.prototype=new fi,di=function(e,t){this.numberOfTracks=0,this.metadataStream=t,e=e||{},"undefined"!==typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"===typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,di.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},di.prototype=new fi,di.prototype.flush=function(e){var t,i,n,s,r=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,Pi.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Ii.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,n=yi.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(n.byteLength),o.initSegment.set(n),o.data=new Uint8Array(this.pendingBytes),s=0;s<this.pendingBoxes.length;s++)o.data.set(this.pendingBoxes[s],r),r+=this.pendingBoxes[s].byteLength;for(s=0;s<this.pendingCaptions.length;s++)t=this.pendingCaptions[s],t.startTime=Ti.metadataTsToSeconds(t.startPts,a,this.keepOriginalTimestamps),t.endTime=Ti.metadataTsToSeconds(t.endPts,a,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(s=0;s<this.pendingMetadata.length;s++)i=this.pendingMetadata[s],i.cueTime=Ti.metadataTsToSeconds(i.pts,a,this.keepOriginalTimestamps),o.metadata.push(i);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),s=0;s<o.captions.length;s++)t=o.captions[s],this.trigger("caption",t);for(s=0;s<o.metadata.length;s++)i=o.metadata[s],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},di.prototype.setRemux=function(e){this.remuxTracks=e},ci=function(e){var t,i,n=this,s=!0;ci.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var s={};this.transmuxPipeline_=s,s.type="aac",s.metadataStream=new ki.MetadataStream,s.aacStream=new Ei,s.audioTimestampRolloverStream=new ki.TimestampRolloverStream("audio"),s.timedMetadataTimestampRolloverStream=new ki.TimestampRolloverStream("timed-metadata"),s.adtsStream=new xi,s.coalesceStream=new di(e,s.metadataStream),s.headOfPipeline=s.aacStream,s.aacStream.pipe(s.audioTimestampRolloverStream).pipe(s.adtsStream),s.aacStream.pipe(s.timedMetadataTimestampRolloverStream).pipe(s.metadataStream).pipe(s.coalesceStream),s.metadataStream.on("timestamp",(function(e){s.aacStream.setTimestamp(e.timeStamp)})),s.aacStream.on("data",(function(r){"timed-metadata"!==r.type&&"audio"!==r.type||s.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"},s.coalesceStream.numberOfTracks++,s.audioSegmentStream=new ui(i,e),s.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),s.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),s.adtsStream.pipe(s.audioSegmentStream).pipe(s.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t}))})),s.coalesceStream.on("data",this.trigger.bind(this,"data")),s.coalesceStream.on("done",this.trigger.bind(this,"done")),Di(this,s)},this.setupTsPipeline=function(){var s={};this.transmuxPipeline_=s,s.type="ts",s.metadataStream=new ki.MetadataStream,s.packetStream=new ki.TransportPacketStream,s.parseStream=new ki.TransportParseStream,s.elementaryStream=new ki.ElementaryStream,s.timestampRolloverStream=new ki.TimestampRolloverStream,s.adtsStream=new xi,s.h264Stream=new Si,s.captionStream=new ki.CaptionStream(e),s.coalesceStream=new di(e,s.metadataStream),s.headOfPipeline=s.packetStream,s.packetStream.pipe(s.parseStream).pipe(s.elementaryStream).pipe(s.timestampRolloverStream),s.timestampRolloverStream.pipe(s.h264Stream),s.timestampRolloverStream.pipe(s.adtsStream),s.timestampRolloverStream.pipe(s.metadataStream).pipe(s.coalesceStream),s.h264Stream.pipe(s.captionStream).pipe(s.coalesceStream),s.elementaryStream.on("data",(function(r){var o;if("metadata"===r.type){o=r.tracks.length;while(o--)t||"video"!==r.tracks[o].type?i||"audio"!==r.tracks[o].type||(i=r.tracks[o],i.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(t=r.tracks[o],t.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime);t&&!s.videoSegmentStream&&(s.coalesceStream.numberOfTracks++,s.videoSegmentStream=new li(t,e),s.videoSegmentStream.on("log",n.getLogTrigger_("videoSegmentStream")),s.videoSegmentStream.on("timelineStartInfo",(function(t){i&&!e.keepOriginalTimestamps&&(i.timelineStartInfo=t,s.audioSegmentStream.setEarliestDts(t.dts-n.baseMediaDecodeTime))})),s.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),s.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),s.videoSegmentStream.on("baseMediaDecodeTime",(function(e){i&&s.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),s.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),s.h264Stream.pipe(s.videoSegmentStream).pipe(s.coalesceStream)),i&&!s.audioSegmentStream&&(s.coalesceStream.numberOfTracks++,s.audioSegmentStream=new ui(i,e),s.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),s.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),s.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),s.adtsStream.pipe(s.audioSegmentStream).pipe(s.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!t})}})),s.coalesceStream.on("data",this.trigger.bind(this,"data")),s.coalesceStream.on("id3Frame",(function(e){e.dispatchType=s.metadataStream.dispatchType,n.trigger("id3Frame",e)})),s.coalesceStream.on("caption",this.trigger.bind(this,"caption")),s.coalesceStream.on("done",this.trigger.bind(this,"done")),Di(this,s)},this.setBaseMediaDecodeTime=function(n){var s=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,wi.clearDtsInfo(i),s.audioTimestampRolloverStream&&s.audioTimestampRolloverStream.discontinuity()),t&&(s.videoSegmentStream&&(s.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,wi.clearDtsInfo(t),s.captionStream.reset()),s.timestampRolloverStream&&s.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var i=this.transmuxPipeline_;e.remux=t,i&&i.coalesceStream&&i.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(i){i.stream=e,t.trigger("log",i)}},this.push=function(e){if(s){var t=Ai(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),s=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){s=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ci.prototype=new fi;var Bi,Ui={Transmuxer:ci,VideoSegmentStream:li,AudioSegmentStream:ui,AUDIO_PROPERTIES:Ii,VIDEO_PROPERTIES:Pi,generateSegmentTimingInfo:Oi},Vi=function(e){return e>>>0},Ri=function(e){return("00"+e.toString(16)).slice(-2)},ji={toUnsigned:Vi,toHexString:Ri},Mi=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3]),t},Fi=Mi,qi=ji.toUnsigned,zi=Fi,Hi=function(e,t){var i,n,s,r,o,a=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=qi(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),s=zi(e.subarray(i+4,i+8)),r=n>1?i+n:e.byteLength,s===t[0]&&(1===t.length?a.push(e.subarray(i+8,r)):(o=Hi(e.subarray(i+8,r),t.slice(1)),o.length&&(a=a.concat(o)))),i=r;return a},Wi=Hi,Gi=ji.toUnsigned,Xi=q.getUint64,Qi=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Xi(e.subarray(4)):t.baseMediaDecodeTime=Gi(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},Ki=Qi,Zi=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Yi=Zi,Ji=Yi,$i=function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),s=1&i.flags[2],r=4&i.flags[2],o=1&i.flags[1],a=2&i.flags[1],l=4&i.flags[1],u=8&i.flags[1],c=n.getUint32(4),d=8;s&&(i.dataOffset=n.getInt32(d),d+=4),r&&c&&(t={flags:Ji(e.subarray(d,d+4))},d+=4,o&&(t.duration=n.getUint32(d),d+=4),a&&(t.size=n.getUint32(d),d+=4),u&&(1===i.version?t.compositionTimeOffset=n.getInt32(d):t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t),c--);while(c--)t={},o&&(t.duration=n.getUint32(d),d+=4),a&&(t.size=n.getUint32(d),d+=4),l&&(t.flags=Ji(e.subarray(d,d+4)),d+=4),u&&(1===i.version?t.compositionTimeOffset=n.getInt32(d):t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t);return i},en=$i,tn=function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},s=1&n.flags[2],r=2&n.flags[2],o=8&n.flags[2],a=16&n.flags[2],l=32&n.flags[2],u=65536&n.flags[0],c=131072&n.flags[0];return t=8,s&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),r&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),o&&(n.defaultSampleDuration=i.getUint32(t),t+=4),a&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),u&&(n.durationIsEmpty=!0),!s&&c&&(n.baseDataOffsetIsMoof=!0),n},nn=tn;Bi="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};var sn,rn,on,an,ln,un,cn,dn=Bi,hn=Be.discardEmulationPreventionBytes,pn=Ye.CaptionStream,mn=Wi,gn=Ki,_n=en,fn=nn,yn=dn,vn=function(e,t){for(var i=e,n=0;n<t.length;n++){var s=t[n];if(i<s.size)return s;i-=s.size}return null},bn=function(e,t,i){var n,s,r,o,a=new DataView(e.buffer,e.byteOffset,e.byteLength),l={logs:[],seiNals:[]};for(s=0;s+4<e.length;s+=r)if(r=a.getUint32(s),s+=4,!(r<=0))switch(31&e[s]){case 6:var u=e.subarray(s+1,s+1+r),c=vn(s,t);if(n={nalUnitType:"sei_rbsp",size:r,data:u,escapedRBSP:hn(u),trackId:i},c)n.pts=c.pts,n.dts=c.dts,o=c;else{if(!o){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+s+" for trackId "+i+". See mux.js#223."});break}n.pts=o.pts,n.dts=o.dts}l.seiNals.push(n);break}return l},wn=function(e,t,i){var n=t,s=i.defaultSampleDuration||0,r=i.defaultSampleSize||0,o=i.trackId,a=[];return e.forEach((function(e){var t=_n(e),i=t.samples;i.forEach((function(e){void 0===e.duration&&(e.duration=s),void 0===e.size&&(e.size=r),e.trackId=o,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"===typeof n?(e.pts=n+yn.BigInt(e.compositionTimeOffset),n+=yn.BigInt(e.duration)):(e.pts=n+e.compositionTimeOffset,n+=e.duration)})),a=a.concat(i)})),a},kn=function(e,t){var i=mn(e,["moof","traf"]),n=mn(e,["mdat"]),s={},r=[];return n.forEach((function(e,t){var n=i[t];r.push({mdat:e,traf:n})})),r.forEach((function(e){var i,n,r=e.mdat,o=e.traf,a=mn(o,["tfhd"]),l=fn(a[0]),u=l.trackId,c=mn(o,["tfdt"]),d=c.length>0?gn(c[0]).baseMediaDecodeTime:0,h=mn(o,["trun"]);t===u&&h.length>0&&(i=wn(h,d,l),n=bn(r,i,u),s[u]||(s[u]={seiNals:[],logs:[]}),s[u].seiNals=s[u].seiNals.concat(n.seiNals),s[u].logs=s[u].logs.concat(n.logs))})),s},Tn=function(e,t,i){var n;if(null===t)return null;n=kn(e,t);var s=n[t]||{};return{seiNals:s.seiNals,logs:s.logs,timescale:i}},xn=function(){var e,t,i,n,s,r,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new pn,o=!0,r=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/n,e.endTime=e.endPts/n,s.captions.push(e),s.captionStreams[e.stream]=!0})),e.on("log",(function(e){s.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===typeof t&&0===Object.keys(t).length)&&(i!==e[0]||n!==t[i])},this.parse=function(e,r,o){var a;if(!this.isInitialized())return null;if(!r||!o)return null;if(this.isNewInit(r,o))i=r[0],n=o[i];else if(null===i||!n)return t.push(e),null;while(t.length>0){var l=t.shift();this.parse(l,r,o)}return a=Tn(e,i,n),a&&a.logs&&(s.logs=s.logs.concat(a.logs)),null!==a&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),s):s.logs.length?{logs:s.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;r?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){s.captions=[],s.captionStreams={},s.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=null,n=null,s?this.clearParsedCaptions():s={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Sn=xn,En=function(e){var t=0,i=String.fromCharCode(e[t]),n="";while("\0"!==i)n+=i,t++,i=String.fromCharCode(e[t]);return n+=i,n},An={uint8ToCString:En},Cn=An.uint8ToCString,In=q.getUint64,Pn=function(e){var t,i,n,s,r,o,a,l,u=4,c=e[0];if(0===c){t=Cn(e.subarray(u)),u+=t.length,i=Cn(e.subarray(u)),u+=i.length;var d=new DataView(e.buffer);n=d.getUint32(u),u+=4,r=d.getUint32(u),u+=4,o=d.getUint32(u),u+=4,a=d.getUint32(u),u+=4}else if(1===c){d=new DataView(e.buffer);n=d.getUint32(u),u+=4,s=In(e.subarray(u)),u+=8,o=d.getUint32(u),u+=4,a=d.getUint32(u),u+=4,t=Cn(e.subarray(u)),u+=t.length,i=Cn(e.subarray(u)),u+=i.length}l=new Uint8Array(e.subarray(u,e.byteLength));var h={scheme_id_uri:t,value:i,timescale:n||1,presentation_time:s,presentation_time_delta:r,event_duration:o,id:a,message_data:l};return Dn(c,h)?h:void 0},Nn=function(e,t,i,n){return e||0===e?e/t:n+i/t},Dn=function(e,t){var i="\0"!==t.scheme_id_uri,n=0===e&&Ln(t.presentation_time_delta)&&i,s=1===e&&Ln(t.presentation_time)&&i;return!(e>1)&&n||s},Ln=function(e){return void 0!==e||null!==e},On={parseEmsgBox:Pn,scaleTime:Nn},Bn=ji.toUnsigned,Un=ji.toHexString,Vn=Wi,Rn=Fi,jn=On,Mn=nn,Fn=en,qn=Ki,zn=q.getUint64,Hn=dn,Wn=ft.parseId3Frames;sn=function(e){var t={},i=Vn(e,["moov","trak"]);return i.reduce((function(e,t){var i,n,s,r,o;return i=Vn(t,["tkhd"])[0],i?(n=i[0],s=0===n?12:20,r=Bn(i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3]),o=Vn(t,["mdia","mdhd"])[0],o?(n=o[0],s=0===n?12:20,e[r]=Bn(o[s]<<24|o[s+1]<<16|o[s+2]<<8|o[s+3]),e):null):null}),t)},rn=function(e,t){var i;i=Vn(t,["moof","traf"]);var n=i.reduce((function(t,i){var n,s=Vn(i,["tfhd"])[0],r=Bn(s[4]<<24|s[5]<<16|s[6]<<8|s[7]),o=e[r]||9e4,a=Vn(i,["tfdt"])[0],l=new DataView(a.buffer,a.byteOffset,a.byteLength);let u;return n=1===a[0]?zn(a.subarray(4,12)):l.getUint32(4),"bigint"===typeof n?u=n/Hn.BigInt(o):"number"!==typeof n||isNaN(n)||(u=n/o),u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),u<t&&(t=u),t}),1/0);return"bigint"===typeof n||isFinite(n)?n:0},on=function(e,t){var i,n=Vn(t,["moof","traf"]),s=0,r=0;if(n&&n.length){var o=Vn(n[0],["tfhd"])[0],a=Vn(n[0],["trun"])[0],l=Vn(n[0],["tfdt"])[0];if(o){var u=Mn(o);i=u.trackId}if(l){var c=qn(l);s=c.baseMediaDecodeTime}if(a){var d=Fn(a);d.samples&&d.samples.length&&(r=d.samples[0].compositionTimeOffset||0)}}var h=e[i]||9e4;"bigint"===typeof s&&(r=Hn.BigInt(r),h=Hn.BigInt(h));var p=(s+r)/h;return"bigint"===typeof p&&p<Number.MAX_SAFE_INTEGER&&(p=Number(p)),p},an=function(e){var t=Vn(e,["moov","trak"]),i=[];return t.forEach((function(e){var t=Vn(e,["mdia","hdlr"]),n=Vn(e,["tkhd"]);t.forEach((function(e,t){var s,r,o,a=Rn(e.subarray(8,12)),l=n[t];"vide"===a&&(s=new DataView(l.buffer,l.byteOffset,l.byteLength),r=s.getUint8(0),o=0===r?s.getUint32(12):s.getUint32(20),i.push(o))}))})),i},un=function(e){var t=e[0],i=0===t?12:20;return Bn(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])},ln=function(e){var t=Vn(e,["moov","trak"]),i=[];return t.forEach((function(e){var t,n,s={},r=Vn(e,["tkhd"])[0];r&&(t=new DataView(r.buffer,r.byteOffset,r.byteLength),n=t.getUint8(0),s.id=0===n?t.getUint32(12):t.getUint32(20));var o=Vn(e,["mdia","hdlr"])[0];if(o){var a=Rn(o.subarray(8,12));s.type="vide"===a?"video":"soun"===a?"audio":a}var l=Vn(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);s.codec=Rn(u.subarray(4,8));var c,d,h=Vn(u,[s.codec])[0];h&&(/^[asm]vc[1-9]$/i.test(s.codec)?(c=h.subarray(78),d=Rn(c.subarray(4,8)),"avcC"===d&&c.length>11?(s.codec+=".",s.codec+=Un(c[9]),s.codec+=Un(c[10]),s.codec+=Un(c[11])):s.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(s.codec)?(c=h.subarray(28),d=Rn(c.subarray(4,8)),"esds"===d&&c.length>20&&0!==c[19]?(s.codec+="."+Un(c[19]),s.codec+="."+Un(c[20]>>>2&63).replace(/^0/,"")):s.codec="mp4a.40.2"):s.codec=s.codec.toLowerCase())}var p=Vn(e,["mdia","mdhd"])[0];p&&(s.timescale=un(p)),i.push(s)})),i},cn=function(e,t=0){var i=Vn(e,["emsg"]);return i.map((e=>{var i=jn.parseEmsgBox(new Uint8Array(e)),n=Wn(i.message_data);return{cueTime:jn.scaleTime(i.presentation_time,i.timescale,i.presentation_time_delta,t),duration:jn.scaleTime(i.event_duration,i.timescale),frames:n}}))};var Gn={findBox:Vn,parseType:Rn,timescale:sn,startTime:rn,compositionStartTime:on,videoTrackIds:an,tracks:ln,getTimescaleFromMediaHeader:un,getEmsgID3:cn},Xn=Je,Qn=function(e){var t=31&e[1];return t<<=8,t|=e[2],t},Kn=function(e){return!!(64&e[1])},Zn=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Yn=function(e,t){var i=Qn(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},Jn=function(e){var t=Kn(e),i=4+Zn(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},$n=function(e){var t={},i=Kn(e),n=4+Zn(e);if(i&&(n+=e[n]+1),1&e[n+5]){var s,r,o;s=(15&e[n+1])<<8|e[n+2],r=3+s-4,o=(15&e[n+10])<<8|e[n+11];var a=12+o;while(a<r){var l=n+a;t[(31&e[l+1])<<8|e[l+2]]=e[l],a+=5+((15&e[l+3])<<8|e[l+4])}return t}},es=function(e,t){var i=Qn(e),n=t[i];switch(n){case Xn.H264_STREAM_TYPE:return"video";case Xn.ADTS_STREAM_TYPE:return"audio";case Xn.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},ts=function(e){var t=Kn(e);if(!t)return null;var i=4+Zn(e);if(i>=e.byteLength)return null;var n,s=null;return n=e[i+7],192&n&&(s={},s.pts=(14&e[i+9])<<27|(255&e[i+10])<<20|(254&e[i+11])<<12|(255&e[i+12])<<5|(254&e[i+13])>>>3,s.pts*=4,s.pts+=(6&e[i+13])>>>1,s.dts=s.pts,64&n&&(s.dts=(14&e[i+14])<<27|(255&e[i+15])<<20|(254&e[i+16])<<12|(255&e[i+17])<<5|(254&e[i+18])>>>3,s.dts*=4,s.dts+=(6&e[i+18])>>>1)),s},is=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},ns=function(e){for(var t,i=4+Zn(e),n=e.subarray(i),s=0,r=0,o=!1;r<n.byteLength-3;r++)if(1===n[r+2]){s=r+5;break}while(s<n.byteLength)switch(n[s]){case 0:if(0!==n[s-1]){s+=2;break}if(0!==n[s-2]){s++;break}r+3!==s-2&&(t=is(31&n[r+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0));do{s++}while(1!==n[s]&&s<n.length);r=s-2,s+=3;break;case 1:if(0!==n[s-1]||0!==n[s-2]){s+=3;break}t=is(31&n[r+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0),r=s-2,s+=3;break;default:s+=3;break}return n=n.subarray(r),s-=r,r=0,n&&n.byteLength>3&&(t=is(31&n[r+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0)),o},ss={parseType:Yn,parsePat:Jn,parsePmt:$n,parsePayloadUnitStartIndicator:Kn,parsePesType:es,parsePesTime:ts,videoPacketContainsKeyFrame:ns},rs=Je,os=ot.handleRollover,as={};as.ts=ss,as.aac=ri;var ls=ge.ONE_SECOND_IN_TS,us=188,cs=71,ds=function(e,t){var i,n,s=0,r=us;while(r<e.byteLength)if(e[s]!==cs||e[r]!==cs)s++,r++;else{switch(i=e.subarray(s,r),n=as.ts.parseType(i,t.pid),n){case"pat":t.pid=as.ts.parsePat(i);break;case"pmt":var o=as.ts.parsePmt(i);t.table=t.table||{},Object.keys(o).forEach((function(e){t.table[e]=o[e]}));break}s+=us,r+=us}},hs=function(e,t,i){var n,s,r,o,a,l=0,u=us,c=!1;while(u<=e.byteLength)if(e[l]!==cs||e[u]!==cs&&u!==e.byteLength)l++,u++;else{switch(n=e.subarray(l,u),s=as.ts.parseType(n,t.pid),s){case"pes":r=as.ts.parsePesType(n,t.table),o=as.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&o&&(a=as.ts.parsePesTime(n),a&&(a.type="audio",i.audio.push(a),c=!0));break}if(c)break;l+=us,u+=us}u=e.byteLength,l=u-us,c=!1;while(l>=0)if(e[l]!==cs||e[u]!==cs&&u!==e.byteLength)l--,u--;else{switch(n=e.subarray(l,u),s=as.ts.parseType(n,t.pid),s){case"pes":r=as.ts.parsePesType(n,t.table),o=as.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&o&&(a=as.ts.parsePesTime(n),a&&(a.type="audio",i.audio.push(a),c=!0));break}if(c)break;l-=us,u-=us}},ps=function(e,t,i){var n,s,r,o,a,l,u,c,d=0,h=us,p=!1,m={data:[],size:0};while(h<e.byteLength)if(e[d]!==cs||e[h]!==cs)d++,h++;else{switch(n=e.subarray(d,h),s=as.ts.parseType(n,t.pid),s){case"pes":if(r=as.ts.parsePesType(n,t.table),o=as.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(o&&!p&&(a=as.ts.parsePesTime(n),a&&(a.type="video",i.video.push(a),p=!0)),!i.firstKeyFrame)){if(o&&0!==m.size){l=new Uint8Array(m.size),u=0;while(m.data.length)c=m.data.shift(),l.set(c,u),u+=c.byteLength;if(as.ts.videoPacketContainsKeyFrame(l)){var g=as.ts.parsePesTime(l);g?(i.firstKeyFrame=g,i.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}m.size=0}m.data.push(n),m.size+=n.byteLength}break}if(p&&i.firstKeyFrame)break;d+=us,h+=us}h=e.byteLength,d=h-us,p=!1;while(d>=0)if(e[d]!==cs||e[h]!==cs)d--,h--;else{switch(n=e.subarray(d,h),s=as.ts.parseType(n,t.pid),s){case"pes":r=as.ts.parsePesType(n,t.table),o=as.ts.parsePayloadUnitStartIndicator(n),"video"===r&&o&&(a=as.ts.parsePesTime(n),a&&(a.type="video",i.video.push(a),p=!0));break}if(p)break;d-=us,h-=us}},ms=function(e,t){if(e.audio&&e.audio.length){var i=t;("undefined"===typeof i||isNaN(i))&&(i=e.audio[0].dts),e.audio.forEach((function(e){e.dts=os(e.dts,i),e.pts=os(e.pts,i),e.dtsTime=e.dts/ls,e.ptsTime=e.pts/ls}))}if(e.video&&e.video.length){var n=t;if(("undefined"===typeof n||isNaN(n))&&(n=e.video[0].dts),e.video.forEach((function(e){e.dts=os(e.dts,n),e.pts=os(e.pts,n),e.dtsTime=e.dts/ls,e.ptsTime=e.pts/ls})),e.firstKeyFrame){var s=e.firstKeyFrame;s.dts=os(s.dts,n),s.pts=os(s.pts,n),s.dtsTime=s.dts/ls,s.ptsTime=s.pts/ls}}},gs=function(e){var t,i=!1,n=0,s=null,r=null,o=0,a=0;while(e.length-a>=3){var l=as.aac.parseType(e,a);switch(l){case"timed-metadata":if(e.length-a<10){i=!0;break}if(o=as.aac.parseId3TagSize(e,a),o>e.length){i=!0;break}null===r&&(t=e.subarray(a,a+o),r=as.aac.parseAacTimestamp(t)),a+=o;break;case"audio":if(e.length-a<7){i=!0;break}if(o=as.aac.parseAdtsSize(e,a),o>e.length){i=!0;break}null===s&&(t=e.subarray(a,a+o),s=as.aac.parseSampleRate(t)),n++,a+=o;break;default:a++;break}if(i)return null}if(null===s||null===r)return null;var u=ls/s,c={audio:[{type:"audio",dts:r,pts:r},{type:"audio",dts:r+1024*n*u,pts:r+1024*n*u}]};return c},_s=function(e){var t={pid:null,table:null},i={};for(var n in ds(e,t),t.table)if(t.table.hasOwnProperty(n)){var s=t.table[n];switch(s){case rs.H264_STREAM_TYPE:i.video=[],ps(e,t,i),0===i.video.length&&delete i.video;break;case rs.ADTS_STREAM_TYPE:i.audio=[],hs(e,t,i),0===i.audio.length&&delete i.audio;break}}return i},fs=function(e,t){var i,n=as.aac.isLikelyAacData(e);return i=n?gs(e):_s(e),i&&(i.audio||i.video)?(ms(i,t),i):null},ys={inspect:fs,parseAudioPes_:hs};const vs=function(e,t){t.on("data",(function(t){const i=t.initSegment;t.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};const n=t.data;t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){const i={start:{decode:ge.videoTsToSeconds(t.start.dts),presentation:ge.videoTsToSeconds(t.start.pts)},end:{decode:ge.videoTsToSeconds(t.end.dts),presentation:ge.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:ge.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=ge.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})})),t.on("audioSegmentTimingInfo",(function(t){const i={start:{decode:ge.videoTsToSeconds(t.start.dts),presentation:ge.videoTsToSeconds(t.start.pts)},end:{decode:ge.videoTsToSeconds(t.end.dts),presentation:ge.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:ge.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(i.prependedContentDuration=ge.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:i})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ge.videoTsToSeconds(t.start),end:ge.videoTsToSeconds(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ge.videoTsToSeconds(t.start),end:ge.videoTsToSeconds(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))};class bs{constructor(e,t){this.options=t||{},this.self=e,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ui.Transmuxer(this.options),vs(this.self,this.transmuxer)}pushMp4Captions(e){this.captionParser||(this.captionParser=new Sn,this.captionParser.init());const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),i=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:i&&i.captions||[],logs:i&&i.logs||[],data:t.buffer},[t.buffer])}probeMp4StartTime({timescales:e,data:t}){const i=Gn.startTime(e,t);this.self.postMessage({action:"probeMp4StartTime",startTime:i,data:t},[t.buffer])}probeMp4Tracks({data:e}){const t=Gn.tracks(e);this.self.postMessage({action:"probeMp4Tracks",tracks:t,data:e},[e.buffer])}probeTs({data:e,baseStartTime:t}){const i="number"!==typeof t||isNaN(t)?void 0:t*ge.ONE_SECOND_IN_TS,n=ys.inspect(e,i);let s=null;n&&(s={hasVideo:n.video&&2===n.video.length||!1,hasAudio:n.audio&&2===n.audio.length||!1},s.hasVideo&&(s.videoStart=n.video[0].ptsTime),s.hasAudio&&(s.audioStart=n.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:s,data:e},[e.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(e){const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}reset(){this.transmuxer.reset()}setTimestampOffset(e){const t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ge.secondsToVideoTs(t)))}setAudioAppendStart(e){this.transmuxer.setAudioAppendStart(Math.ceil(ge.secondsToVideoTs(e.appendStart)))}setRemux(e){this.transmuxer.setRemux(e.remux)}flush(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new bs(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new bs(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}})));var ng=$m(ig);const sg=(e,t,i)=>{const{type:n,initSegment:s,captions:r,captionStreams:o,metadata:a,videoFrameDtsTime:l,videoFramePtsTime:u}=e.data.segment;t.buffer.push({captions:r,captionStreams:o,metadata:a});const c=e.data.segment.boxes||{data:e.data.segment.data},d={type:n,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};"undefined"!==typeof l&&(d.videoFrameDtsTime=l),"undefined"!==typeof u&&(d.videoFramePtsTime=u),i(d)},rg=({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)},og=(e,t)=>{t.gopInfo=e.data.gopInfo},ag=e=>{const{transmuxer:t,bytes:i,audioAppendStart:n,gopsToAlignWith:s,remux:r,onData:o,onTrackInfo:a,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:d,onId3:h,onCaptions:p,onDone:m,onEndedTimeline:g,onTransmuxerLog:_,isEndOfTimeline:f}=e,y={buffer:[]};let v=f;const b=i=>{t.currentTransmux===e&&("data"===i.data.action&&sg(i,y,o),"trackinfo"===i.data.action&&a(i.data.trackInfo),"gopInfo"===i.data.action&&og(i,y),"audioTimingInfo"===i.data.action&&l(i.data.audioTimingInfo),"videoTimingInfo"===i.data.action&&u(i.data.videoTimingInfo),"videoSegmentTimingInfo"===i.data.action&&c(i.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===i.data.action&&d(i.data.audioSegmentTimingInfo),"id3Frame"===i.data.action&&h([i.data.id3Frame],i.data.id3Frame.dispatchType),"caption"===i.data.action&&p(i.data.caption),"endedtimeline"===i.data.action&&(v=!1,g()),"log"===i.data.action&&_(i.data.log),"transmuxed"===i.data.type&&(v||(t.onmessage=null,rg({transmuxedData:y,callback:m}),lg(t))))};if(t.onmessage=b,n&&t.postMessage({action:"setAudioAppendStart",appendStart:n}),Array.isArray(s)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),"undefined"!==typeof r&&t.postMessage({action:"setRemux",remux:r}),i.byteLength){const e=i instanceof ArrayBuffer?i:i.buffer,n=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:e,byteOffset:n,byteLength:i.byteLength},[e])}f&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},lg=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"===typeof e.currentTransmux?e.currentTransmux():ag(e.currentTransmux))},ug=(e,t)=>{e.postMessage({action:t}),lg(e)},cg=(e,t)=>{if(!t.currentTransmux)return t.currentTransmux=e,void ug(t,e);t.transmuxQueue.push(ug.bind(null,t,e))},dg=e=>{cg("reset",e)},hg=e=>{cg("endTimeline",e)},pg=e=>{if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void ag(e);e.transmuxer.transmuxQueue.push(e)},mg=e=>{const t=new ng;t.currentTransmux=null,t.transmuxQueue=[];const i=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)),t.postMessage({action:"init",options:e}),t};var gg={reset:dg,endTimeline:hg,transmux:pg,createTransmuxer:mg};const _g=function(e){const t=e.transmuxer,i=e.endAction||e.action,n=e.callback,s=cs({},e,{endAction:null,transmuxer:null,callback:null}),r=s=>{s.data.action===i&&(t.removeEventListener("message",r),s.data.data&&(s.data.data=new Uint8Array(s.data.data,e.byteOffset||0,e.byteLength||s.data.data.byteLength),e.data&&(e.data=s.data.data)),n(s.data))};if(t.addEventListener("message",r),e.data){const i=e.data instanceof ArrayBuffer;s.byteOffset=i?0:e.data.byteOffset,s.byteLength=e.data.byteLength;const n=[i?e.data:e.data.buffer];t.postMessage(s,n)}else t.postMessage(s)},fg={FAILURE:2,TIMEOUT:-101,ABORTED:-102},yg=e=>{e.forEach((e=>{e.abort()}))},vg=e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}),bg=e=>{const t=e.target,i=Date.now()-t.requestTime,n={bandwidth:1/0,bytesReceived:0,roundTripTime:i||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n},wg=(e,t)=>t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:fg.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:fg.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:fg.FAILURE,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:fg.FAILURE,xhr:t}:null,kg=(e,t,i)=>(n,s)=>{const r=s.response,o=wg(n,s);if(o)return i(o,e);if(16!==r.byteLength)return i({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:fg.FAILURE,xhr:s},e);const a=new DataView(r),l=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]);for(let e=0;e<t.length;e++)t[e].bytes=l;return i(null,e)},Tg=(e,t)=>{const i=ia(e.map.bytes);if("mp4"!==i){const n=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:`Found unsupported ${i||"unknown"} container for initialization segment at URL: ${n}`,code:fg.FAILURE})}_g({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:i,data:n})=>(e.map.bytes=n,i.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"===typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null))})},xg=({segment:e,finishProcessingFn:t})=>(i,n)=>{const s=wg(i,n);if(s)return t(s,e);const r=new Uint8Array(n.response);if(e.map.key)return e.map.encryptedBytes=r,t(null,e);e.map.bytes=r,Tg(e,(function(i){if(i)return i.xhr=n,i.status=n.status,t(i,e);t(null,e)}))},Sg=({segment:e,finishProcessingFn:t,responseType:i})=>(n,s)=>{const r=wg(n,s);if(r)return t(r,e);const o="arraybuffer"!==i&&s.responseText?Zm(s.responseText.substring(e.lastReachedChar||0)):s.response;return e.stats=vg(s),e.key?e.encryptedBytes=new Uint8Array(o):e.bytes=new Uint8Array(o),t(null,e)},Eg=({segment:e,bytes:t,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h})=>{const p=e.map&&e.map.tracks||{},m=Boolean(p.audio&&p.video);let g=n.bind(null,e,"audio","start");const _=n.bind(null,e,"audio","end");let f=n.bind(null,e,"video","start");const y=n.bind(null,e,"video","end"),v=()=>pg({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:m,onData:t=>{t.type="combined"===t.type?"video":t.type,c(e,t)},onTrackInfo:t=>{i&&(m&&(t.isMuxed=!0),i(e,t))},onAudioTimingInfo:e=>{g&&"undefined"!==typeof e.start&&(g(e.start),g=null),_&&"undefined"!==typeof e.end&&_(e.end)},onVideoTimingInfo:e=>{f&&"undefined"!==typeof e.start&&(f(e.start),f=null),y&&"undefined"!==typeof e.end&&y(e.end)},onVideoSegmentTimingInfo:e=>{s(e)},onAudioSegmentTimingInfo:e=>{r(e)},onId3:(t,i)=>{o(e,t,i)},onCaptions:t=>{a(e,[t])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:h,onDone:t=>{d&&(t.type="combined"===t.type?"video":t.type,d(null,e,t))}});_g({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:n=>{e.bytes=t=n.data;const s=n.result;s&&(i(e,{hasAudio:s.hasAudio,hasVideo:s.hasVideo,isMuxed:m}),i=null,s.hasAudio&&!m&&g(s.audioStart),s.hasVideo&&f(s.videoStart),g=null,f=null),v()}})},Ag=({segment:e,bytes:t,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h})=>{let p=new Uint8Array(t);if(na(p)){e.isFmp4=!0;const{tracks:s}=e.map,r={isFmp4:!0,hasVideo:!!s.video,hasAudio:!!s.audio};s.audio&&s.audio.codec&&"enca"!==s.audio.codec&&(r.audioCodec=s.audio.codec),s.video&&s.video.codec&&"encv"!==s.video.codec&&(r.videoCodec=s.video.codec),s.video&&s.audio&&(r.isMuxed=!0),i(e,r);const o=t=>{c(e,{data:p,type:r.hasAudio&&!r.isMuxed?"audio":"video"}),t&&t.length&&a(e,t),d(null,e,{})};_g({action:"probeMp4StartTime",timescales:e.map.timescales,data:p,transmuxer:e.transmuxer,callback:({data:i,startTime:a})=>{t=i.buffer,e.bytes=p=i,r.hasAudio&&!r.isMuxed&&n(e,"audio","start",a),r.hasVideo&&n(e,"video","start",a),s.video&&i.byteLength&&e.transmuxer?_g({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:p,timescales:e.map.timescales,trackIds:[s.video.id],callback:i=>{t=i.data.buffer,e.bytes=p=i.data,i.logs.forEach((function(e){h(ap(e,{stream:"mp4CaptionParser"}))})),o(i.captions)}}):o()}})}else if(e.transmuxer){if("undefined"===typeof e.container&&(e.container=ia(p)),"ts"!==e.container&&"aac"!==e.container)return i(e,{hasAudio:!1,hasVideo:!1}),void d(null,e,{});Eg({segment:e,bytes:t,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h})}else d(null,e,{})},Cg=function({id:e,key:t,encryptedBytes:i,decryptionWorker:n},s){const r=t=>{if(t.data.source===e){n.removeEventListener("message",r);const e=t.data.decrypted;s(new Uint8Array(e.bytes,e.byteOffset,e.byteLength))}};let o;n.addEventListener("message",r),o=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),n.postMessage(wm({source:e,encrypted:i,key:o,iv:t.iv}),[i.buffer,o.buffer])},Ig=({decryptionWorker:e,segment:t,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h})=>{Cg({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e},(e=>{t.bytes=e,Ag({segment:t,bytes:t.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h})}))},Pg=({activeXhrs:e,decryptionWorker:t,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h})=>{let p=0,m=!1;return(g,_)=>{if(!m){if(g)return m=!0,yg(e),d(g,_);if(p+=1,p===e.length){const p=function(){if(_.encryptedBytes)return Ig({decryptionWorker:t,segment:_,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h});Ag({segment:_,bytes:_.bytes,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:h})};if(_.endOfAllRequests=Date.now(),_.map&&_.map.encryptedBytes&&!_.map.bytes)return Cg({decryptionWorker:t,id:_.requestId+"-init",encryptedBytes:_.map.encryptedBytes,key:_.map.key},(t=>{_.map.bytes=t,Tg(_,(t=>{if(t)return yg(e),d(t,_);p()}))}));p()}}}},Ng=({loadendState:e,abortFn:t})=>i=>{const n=i.target;n.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)},Dg=({segment:e,progressFn:t,trackInfoFn:i,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>i=>{const n=i.target;if(!n.aborted)return e.stats=ap(e.stats,bg(i)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(i,e)},Lg=({xhr:e,xhrOptions:t,decryptionWorker:i,segment:n,abortFn:s,progressFn:r,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:m,doneFn:g,onTransmuxerLog:_})=>{const f=[],y=Pg({activeXhrs:f,decryptionWorker:i,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:m,doneFn:g,onTransmuxerLog:_});if(n.key&&!n.key.bytes){const i=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&i.push(n.map.key);const s=ap(t,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),r=kg(n,i,y),o=e(s,r);f.push(o)}if(n.map&&!n.map.bytes){const i=n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri);if(i){const i=ap(t,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),s=kg(n,[n.map.key],y),r=e(i,s);f.push(r)}const s=ap(t,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:fm(n.map)}),r=xg({segment:n,finishProcessingFn:y}),o=e(s,r);f.push(o)}const v=ap(t,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:fm(n)}),b=Sg({segment:n,finishProcessingFn:y,responseType:v.responseType}),w=e(v,b);w.addEventListener("progress",Dg({segment:n,progressFn:r,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:m})),f.push(w);const k={};return f.forEach((e=>{e.addEventListener("loadend",Ng({loadendState:k,abortFn:s}))})),()=>yg(f)},Og=op("CodecUtils"),Bg=function(e){const t=e.attributes||{};if(t.CODECS)return Cs(t.CODECS)},Ug=(e,t)=>{const i=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]},Vg=(e,t)=>{if(!Ug(e,t))return!0;const i=t.attributes||{},n=e.mediaGroups.AUDIO[i.AUDIO];for(const s in n)if(!n[s].uri&&!n[s].playlists)return!0;return!1},Rg=function(e){const t={};return e.forEach((({mediaType:e,type:i,details:n})=>{t[e]=t[e]||[],t[e].push(As(`${i}${n}`))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return Og(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]})),t},jg=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},Mg=function(e,t){const i=t.attributes||{},n=Rg(Bg(t)||[]);if(Ug(e,t)&&!n.audio&&!Vg(e,t)){const t=Rg(Is(e,i.AUDIO)||[]);t.audio&&(n.audio=t.audio)}return n},Fg=op("PlaylistSelector"),qg=function(e){if(!e||!e.playlist)return;const t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},zg=function(e,t){if(!e)return"";const i=Qn().getComputedStyle(e);return i?i[t]:""},Hg=function(e,t){const i=e.slice();e.sort((function(e,n){const s=t(e,n);return 0===s?i.indexOf(e)-i.indexOf(n):s}))},Wg=function(e,t){let i,n;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||Qn().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||Qn().Number.MAX_VALUE,i-n},Gg=function(e,t){let i,n;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||Qn().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||Qn().Number.MAX_VALUE,i===n&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n};let Xg=function(e,t,i,n,s,r){if(!e)return;const o={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:s};let a=e.playlists;Gp.isAudioOnly(e)&&(a=r.getAudioTrackPlaylists_(),o.audioOnly=!0);let l=a.map((e=>{let t;const i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return t=e.attributes&&e.attributes.BANDWIDTH,t=t||Qn().Number.MAX_VALUE,{bandwidth:t,width:i,height:n,playlist:e}}));Hg(l,((e,t)=>e.bandwidth-t.bandwidth)),l=l.filter((e=>!Gp.isIncompatible(e.playlist)));let u=l.filter((e=>Gp.isEnabled(e.playlist)));u.length||(u=l.filter((e=>!Gp.isDisabled(e.playlist))));const c=u.filter((e=>e.bandwidth*Km.BANDWIDTH_VARIANCE<t));let d=c[c.length-1];const h=c.filter((e=>e.bandwidth===d.bandwidth))[0];if(!1===s){const e=h||u[0]||l[0];if(e&&e.playlist){let t="sortedPlaylistReps";return h&&(t="bandwidthBestRep"),u[0]&&(t="enabledPlaylistReps"),Fg(`choosing ${qg(e)} using ${t} with options`,o),e.playlist}return Fg("could not choose a playlist with options",o),null}const p=c.filter((e=>e.width&&e.height));Hg(p,((e,t)=>e.width-t.width));const m=p.filter((e=>e.width===i&&e.height===n));d=m[m.length-1];const g=m.filter((e=>e.bandwidth===d.bandwidth))[0];let _,f,y,v;if(g||(_=p.filter((e=>e.width>i||e.height>n)),f=_.filter((e=>e.width===_[0].width&&e.height===_[0].height)),d=f[f.length-1],y=f.filter((e=>e.bandwidth===d.bandwidth))[0]),r.leastPixelDiffSelector){const e=p.map((e=>(e.pixelDiff=Math.abs(e.width-i)+Math.abs(e.height-n),e)));Hg(e,((e,t)=>e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff)),v=e[0]}const b=v||y||g||h||u[0]||l[0];if(b&&b.playlist){let e="sortedPlaylistReps";return v?e="leastPixelDiffRep":y?e="resolutionPlusOneRep":g?e="resolutionBestRep":h?e="bandwidthBestRep":u[0]&&(e="enabledPlaylistReps"),Fg(`choosing ${qg(b)} using ${e} with options`,o),b.playlist}return Fg("could not choose a playlist with options",o),null};const Qg=function(){const e=this.useDevicePixelRatio&&Qn().devicePixelRatio||1;return Xg(this.playlists.main,this.systemBandwidth,parseInt(zg(this.tech_.el(),"width"),10)*e,parseInt(zg(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},Kg=function(e){let t=-1,i=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const n=this.useDevicePixelRatio&&Qn().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(t=e*this.systemBandwidth+(1-e)*t,i=this.systemBandwidth),Xg(this.playlists.main,t,parseInt(zg(this.tech_.el(),"width"),10)*n,parseInt(zg(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)}},Zg=function(e){const{main:t,currentTime:i,bandwidth:n,duration:s,segmentDuration:r,timeUntilRebuffer:o,currentTimeline:a,syncController:l}=e,u=t.playlists.filter((e=>!Gp.isIncompatible(e)));let c=u.filter(Gp.isEnabled);c.length||(c=u.filter((e=>!Gp.isDisabled(e))));const d=c.filter(Gp.hasAttribute.bind(null,"BANDWIDTH")),h=d.map((e=>{const t=l.getSyncPoint(e,s,a,i),u=t?1:2,c=Gp.estimateSegmentRequestTime(r,n,e),d=c*u-o;return{playlist:e,rebufferingImpact:d}})),p=h.filter((e=>e.rebufferingImpact<=0));return Hg(p,((e,t)=>Wg(t.playlist,e.playlist))),p.length?p[0]:(Hg(h,((e,t)=>e.rebufferingImpact-t.rebufferingImpact)),h[0]||null)},Yg=function(){const e=this.playlists.main.playlists.filter(Gp.isEnabled);Hg(e,((e,t)=>Wg(e,t)));const t=e.filter((e=>!!Mg(this.playlists.main,e).video));return t[0]||null},Jg=e=>{let t,i=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((e=>{t.set(e,i),i+=e.byteLength}))),t},$g=function(e,t,i){if(!e[i]){t.trigger({type:"usage",name:"vhs-608"});let n=i;/^cc708_/.test(i)&&(n="SERVICE"+i.split("_")[1]);const s=t.textTracks().getTrackById(n);if(s)e[i]=s;else{const s=t.options_.vhs&&t.options_.vhs.captionServices||{};let r=i,o=i,a=!1;const l=s[n];l&&(r=l.label,o=l.language,a=l.default),e[i]=t.addRemoteTextTrack({kind:"captions",id:n,default:a,label:r,language:o},!1).track}}},e_=function({inbandTextTracks:e,captionArray:t,timestampOffset:i}){if(!t)return;const n=Qn().WebKitDataCue||Qn().VTTCue;t.forEach((t=>{const s=t.stream;e[s].addCue(new n(t.startTime+i,t.endTime+i,t.text))}))},t_=function(e){Object.defineProperties(e.frame,{id:{get(){return Yh.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get(){return Yh.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get(){return Yh.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},i_=({inbandTextTracks:e,metadataArray:t,timestampOffset:i,videoDuration:n})=>{if(!t)return;const s=Qn().WebKitDataCue||Qn().VTTCue,r=e.metadataTrack_;if(!r)return;if(t.forEach((e=>{const t=e.cueTime+i;!("number"!==typeof t||Qn().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((e=>{const i=new s(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,t_(i),r.addCue(i)}))})),!r.cues||!r.cues.length)return;const o=r.cues,a=[];for(let c=0;c<o.length;c++)o[c]&&a.push(o[c]);const l=a.reduce(((e,t)=>{const i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e}),{}),u=Object.keys(l).sort(((e,t)=>Number(e)-Number(t)));u.forEach(((e,t)=>{const i=l[e],s=Number(u[t+1])||n;i.forEach((e=>{e.endTime=s}))}))},n_=(e,t,i)=>{e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},s_=function(e,t,i){let n,s;if(i&&i.cues){n=i.cues.length;while(n--)s=i.cues[n],s.startTime>=e&&s.endTime<=t&&i.removeCue(s)}},r_=function(e){const t=e.cues;if(t)for(let i=0;i<t.length;i++){const n=[];let s=0;for(let e=0;e<t.length;e++)t[i].startTime===t[e].startTime&&t[i].endTime===t[e].endTime&&t[i].text===t[e].text&&(s++,s>1&&n.push(t[e]));n.length&&n.forEach((t=>e.removeCue(t)))}},o_=(e,t,i)=>{if("undefined"===typeof t||null===t||!e.length)return[];const n=Math.ceil((t-i+3)*sa.ONE_SECOND_IN_TS);let s;for(s=0;s<e.length;s++)if(e[s].pts>n)break;return e.slice(s)},a_=(e,t,i)=>{if(!t.length)return e;if(i)return t.slice();const n=t[0].pts;let s=0;for(s;s<e.length;s++)if(e[s].pts>=n)break;return e.slice(0,s).concat(t)},l_=(e,t,i,n)=>{const s=Math.ceil((t-n)*sa.ONE_SECOND_IN_TS),r=Math.ceil((i-n)*sa.ONE_SECOND_IN_TS),o=e.slice();let a=e.length;while(a--)if(e[a].pts<=r)break;if(-1===a)return o;let l=a+1;while(l--)if(e[l].pts<=s)break;return l=Math.max(l,0),o.splice(l,a-l+1),o},u_=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;const i=Object.keys(e).sort(),n=Object.keys(t).sort();if(i.length!==n.length)return!1;for(let s=0;s<i.length;s++){const r=i[s];if(r!==n[s])return!1;if(e[r]!==t[r])return!1}return!0},c_=22,d_=function(e,t,i){t=t||[];const n=[];let s=0;for(let r=0;r<t.length;r++){const o=t[r];if(e===o.timeline&&(n.push(r),s+=o.duration,s>i))return r}return 0===n.length?0:n[n.length-1]},h_=1,p_=500,m_=e=>"number"===typeof e&&isFinite(e),g_=1/60,__=(e,t,i)=>"main"===e&&t&&i?i.hasAudio||i.hasVideo?t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null,f_=(e,t,i)=>{let n=t-Km.BACK_BUFFER_LENGTH;e.length&&(n=Math.max(n,e.start(0)));const s=t-i;return Math.min(s,n)},y_=e=>{const{startOfSegment:t,duration:i,segment:n,part:s,playlist:{mediaSequence:r,id:o,segments:a=[]},mediaIndex:l,partIndex:u,timeline:c}=e,d=a.length-1;let h="mediaIndex/partIndex increment";e.getMediaInfoForTime?h=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(h+=` with independent ${e.independent}`);const p="number"===typeof u,m=e.segment.uri?"segment":"pre-segment",g=p?Sp({preloadSegment:n})-1:0;return`${m} [${r+l}/${r+d}]`+(p?` part [${u}/${g}]`:"")+` segment start/end [${n.start} => ${n.end}]`+(p?` part start/end [${s.start} => ${s.end}]`:"")+` startOfSegment [${t}]`+` duration [${i}]`+` timeline [${c}]`+` selected by [${h}]`+` playlist [${o}]`},v_=e=>`${e}TimingInfo`,b_=({segmentTimeline:e,currentTimeline:t,startOfSegment:i,buffered:n,overrideCheck:s})=>s||e!==t?e<t?i:n.length?n.end(n.length-1):i:null,w_=({timelineChangeController:e,currentTimeline:t,segmentTimeline:i,loaderType:n,audioDisabled:s})=>{if(t===i)return!1;if("audio"===n){const t=e.lastTimelineChange({type:"main"});return!t||t.to!==i}if("main"===n&&s){const t=e.pendingTimelineChange({type:"audio"});return!t||t.to!==i}return!1},k_=e=>{let t=0;return["video","audio"].forEach((function(i){const n=e[`${i}TimingInfo`];if(!n)return;const{start:s,end:r}=n;let o;"bigint"===typeof s||"bigint"===typeof r?o=Qn().BigInt(r)-Qn().BigInt(s):"number"===typeof s&&"number"===typeof r&&(o=r-s),"undefined"!==typeof o&&o>t&&(t=o)})),"bigint"===typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},T_=({segmentDuration:e,maxDuration:t})=>!!e&&Math.round(e)>t+up,x_=(e,t)=>{if("hls"!==t)return null;const i=k_({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!i)return null;const n=e.playlist.targetDuration,s=T_({segmentDuration:i,maxDuration:2*n}),r=T_({segmentDuration:i,maxDuration:n}),o=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${i} when the reported duration is ${e.duration} and the target duration is ${n}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||r?{severity:s?"warn":"info",message:o}:null};class S_ extends Yh.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!==typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=Yh.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",(()=>{this.isEndOfStream_()||(this.ended_=!1)})),this.fetchAtBuffer_=!1,this.logger_=op(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(e){e!==this.state_&&(this.logger_(`${this.state_} -> ${e}`),this.state_=e,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",(()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}))}createTransmuxer_(){return gg.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Qn().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Qn().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return"undefined"!==typeof e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&gg.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return lp();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:i,isMuxed:n}=e;if(i&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const i=km(e);let n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e}segmentKey(e,t=!1){if(!e)return null;const i=Tm(e);let n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(n||e).resolvedUri};return n&&(s.bytes=n.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(i&&(i.id?s=i.id:i.uri&&(s=i.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const r=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${r}]`),null!==this.mediaIndex)if(this.mediaIndex-=r,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const e=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!e.parts||!e.parts.length||!e.parts[this.partIndex])){const e=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=e}}n&&(n.mediaIndex-=r,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(Qn().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&gg.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=(()=>{}),n=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let s=1;const r=()=>{s--,0===s&&i()};!n&&this.audioDisabled_||(s++,this.sourceUpdater_.removeAudio(e,t,r)),(n||"main"===this.loaderType_)&&(this.gopBuffer_=l_(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,r));for(const o in this.inbandTextTracks_)s_(e,t,this.inbandTextTracks_[o]);s_(e,t,this.segmentMetadataTrack_),r()}monitorBuffer_(){this.checkBufferTimeout_&&Qn().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Qn().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Qn().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Qn().setTimeout(this.monitorBufferTick_.bind(this),p_)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&("number"===typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;const n="number"===typeof e&&t.segments[e],s=e+1===t.segments.length,r=!n||!n.parts||i+1===n.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&s&&r}chooseNextRequest_(){const e=this.buffered_(),t=bp(e)||0,i=wp(e,this.currentTime_()),n=!this.hasPlayed_()&&i>=1,s=i>=this.goalBufferLength_(),r=this.playlist_.segments;if(!r.length||n||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=d_(this.currentTimeline_,r,t);else if(null!==this.mediaIndex){const e=r[this.mediaIndex],i="number"===typeof this.partIndex?this.partIndex:-1;o.startOfSegment=e.end?e.end:t,e.parts&&e.parts[i+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=i+1):o.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:e,startTime:i,partIndex:n}=Gp.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,o.mediaIndex=e,o.startOfSegment=i,o.partIndex=n}const a=r[o.mediaIndex];let l=a&&"number"===typeof o.partIndex&&a.parts&&a.parts[o.partIndex];if(!a||"number"===typeof o.partIndex&&!l)return null;if("number"!==typeof o.partIndex&&a.parts&&(o.partIndex=0,l=a.parts[0]),!i&&l&&!l.independent)if(0===o.partIndex){const e=r[o.mediaIndex-1],t=e.parts&&e.parts.length&&e.parts[e.parts.length-1];t&&t.independent&&(o.mediaIndex-=1,o.partIndex=e.parts.length-1,o.independent="previous segment")}else a.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const u=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=r.length-1&&u&&!this.seeking_()?null:this.generateSegmentInfo_(o)}generateSegmentInfo_(e){const{independent:t,playlist:i,mediaIndex:n,startOfSegment:s,isSyncRequest:r,partIndex:o,forceTimestampOffset:a,getMediaInfoForTime:l}=e,u=i.segments[n],c="number"===typeof o&&u.parts[o],d={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||u.resolvedUri,mediaIndex:n,partIndex:c?o:null,isSyncRequest:r,startOfSegment:s,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:c&&c.duration||u.duration,segment:u,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},h="undefined"!==typeof a?a:this.isPendingTimestampOffset_;d.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:h});const p=bp(this.sourceUpdater_.audioBuffered());return"number"===typeof p&&(d.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(d.gopsToAlignWith=o_(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),d}timestampOffsetForSegment_(e){return b_(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,s=Gp.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),r=fp(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=r)return;const o=Zg({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:r,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const a=s-r,l=a-o.rebufferingImpact;let u=.5;r<=up&&(u=1),!o.playlist||o.playlist.uri===this.playlist_.uri||l<u||(this.bandwidth=o.playlist.attributes.BANDWIDTH*Km.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${y_(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},u_(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}handleTimingInfo_(e,t,i,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,r=v_(t);s[r]=s[r]||{},s[r][i]=n,this.logger_(`timinginfo: ${t} - ${i} - ${n}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");const i=this.pendingSegment_;if(!i.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach((e=>{s[e.stream]=s[e.stream]||{startTime:1/0,captions:[],endTime:0};const t=s[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)})),Object.keys(s).forEach((e=>{const{startTime:t,endTime:i,captions:r}=s[e],o=this.inbandTextTracks_;this.logger_(`adding cues from ${t} -> ${i} for ${e}`),$g(o,this.vhs_.tech_,e),s_(t,i,o[e]),e_({captionArray:r,inbandTextTracks:o,timestampOffset:n})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const n=this.pendingSegment_;if(!n.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));const s=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();n_(this.inbandTextTracks_,i,this.vhs_.tech_),i_({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:s,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach((e=>e())),this.metadataQueue_.caption.forEach((e=>e())),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach((e=>e()))}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach((e=>e()))}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!!e&&(!this.getCurrentMediaInfo_()||!w_({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:i,hasVideo:n,isMuxed:s}=t;return!(n&&!e.videoTimingInfo)&&(!(i&&!this.audioDisabled_&&!s&&!e.audioTimingInfo)&&!w_({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[v_(t.type)].start;else{const e=this.getCurrentMediaInfo_(),t="main"===this.loaderType_&&e&&e.hasVideo;let n;t&&(n=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t,firstVideoFrameTimeForData:n,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});const e=this.chooseNextRequest_();if(e.mediaIndex!==i.mediaIndex||e.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){"main"!==this.loaderType_||"number"!==typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:n}){if(i){const e=km(i);if(this.activeInitSegmentId_===e)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=e}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=n,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},n){const s=this.sourceUpdater_.audioBuffered(),r=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+yp(s).join(", ")),r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+yp(r).join(", "));const o=s.length?s.start(0):0,a=s.length?s.end(s.length-1):0,l=r.length?r.start(0):0,u=r.length?r.end(r.length-1):0;if(a-o<=h_&&u-l<=h_)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${yp(s).join(", ")}, video buffer: ${yp(r).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));const c=this.currentTime_(),d=c-h_;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${d}`),this.remove(0,d,(()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${h_}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=Qn().setTimeout((()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()}),1e3*h_)}),!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},n){n&&(n.code!==c_?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(`${t} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i}))}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:n,bytes:s}){if(!s){const e=[n];let t=n.byteLength;i&&(e.unshift(i),t+=i.byteLength),s=Jg({bytes:t,segments:e})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const n=this.pendingSegment_.segment,s=`${e}TimingInfo`;n[s]||(n[s]={}),n[s].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[s].transmuxedPresentationStart=i.start.presentation,n[s].transmuxedDecodeStart=i.start.decode,n[s].transmuxedPresentationEnd=i.end.presentation,n[s].transmuxedDecodeEnd=i.end.decode,n[s].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){const{type:i,data:n}=t;if(!n||!n.byteLength)return;if("audio"===i&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:s,data:n})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"===typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((()=>{const t=cs({},e,{forceTimestampOffset:!0});cs(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)}))}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),n=null!==this.mediaIndex,s=e.timeline!==this.currentTimeline_&&e.timeline>0,r=i||n&&s;this.logger_(`Requesting ${y_(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Lg({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:r,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:t,level:i,stream:n})=>{this.logger_(`${y_(e)} logged from transmuxer stream ${n} as a ${i}: ${t}`)}})}trimBackBuffer_(e){const t=f_(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,i=e.part,n={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},s=e.playlist.segments[e.mediaIndex-1];if(s&&s.timeline===t.timeline&&(s.videoTimingInfo?n.baseStartTime=s.videoTimingInfo.transmuxedDecodeEnd:s.audioTimingInfo&&(n.baseStartTime=s.audioTimingInfo.transmuxedDecodeEnd)),t.key){const i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=i}return t.map&&(n.map=this.initSegmentForMap(t.map)),n}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<g_?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${g_}`):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return;if(t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===fg.ABORTED)return;return this.pause(),e.code===fg.TIMEOUT?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=a_(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){"number"===typeof e.start&&"number"===typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:s,useVideoTimingInfo:r,videoTimingInfo:o,audioTimingInfo:a}){if("undefined"!==typeof e)return e;if(!r)return a.start;const l=t.segments[i-1];return 0!==i&&l&&"undefined"!==typeof l.start&&l.end===n+s?o.start:n}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:i,hasVideo:n,isMuxed:s}=t,r="main"===this.loaderType_&&n,o=!this.audioDisabled_&&i&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!==typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);r&&e.waitingOnAppends++,o&&e.waitingOnAppends++,r&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=__(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!==typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&"number"===typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"===typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),i="main"===this.loaderType_&&t&&t.hasVideo,n=i&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"===typeof n.end?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=x_(e,this.sourceType_);if(t&&("warn"===t.severity?Yh.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${y_(e)}`);this.logger_(`Appended ${y_(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,n=e.part,s=i.end&&this.currentTime_()-i.end>3*e.playlist.targetDuration,r=n&&n.end&&this.currentTime_()-n.end>3*e.playlist.partTargetDuration;if(s||r)return this.logger_(`bad ${s?"segment":"part"} ${y_(e)}`),void this.resetEverything();const o=null!==this.mediaIndex;o&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<g_)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${g_}`);const t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,i=t.start,n=t.end;if(!m_(i)||!m_(n))return;s_(i,n,this.segmentMetadataTrack_);const s=Qn().WebKitDataCue||Qn().VTTCue,r={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:n},o=JSON.stringify(r),a=new s(i,n,o);a.value=r,this.segmentMetadataTrack_.addCue(a)}}function E_(){}const A_=function(e){return"string"!==typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},C_=["video","audio"],I_=(e,t)=>{const i=t[`${e}Buffer`];return i&&i.updating||t.queuePending[e]},P_=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];if("mediaSource"===n.type)return null;if(n.type===e)return i}return null},N_=(e,t)=>{if(0===t.queue.length)return;let i=0,n=t.queue[i];if("mediaSource"!==n.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!I_(e,t)){if(n.type!==e){if(i=P_(e,t.queue),null===i)return;n=t.queue[i]}return t.queue.splice(i,1),t.queuePending[e]=n,n.action(e,t),n.doneFn?void 0:(t.queuePending[e]=null,void N_(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),n.action(t),n.doneFn&&n.doneFn(),N_("audio",t),N_("video",t))},D_=(e,t)=>{const i=t[`${e}Buffer`],n=A_(e);i&&(i.removeEventListener("updateend",t[`on${n}UpdateEnd_`]),i.removeEventListener("error",t[`on${n}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},L_=(e,t)=>e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t),O_={appendBuffer:(e,t,i)=>(n,s)=>{const r=s[`${n}Buffer`];if(L_(s.mediaSource,r)){s.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${n}Buffer`);try{r.appendBuffer(e)}catch(ST){s.logger_(`Error with code ${ST.code} `+(ST.code===c_?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${n}Buffer`),s.queuePending[n]=null,i(ST)}}},remove:(e,t)=>(i,n)=>{const s=n[`${i}Buffer`];if(L_(n.mediaSource,s)){n.logger_(`Removing ${e} to ${t} from ${i}Buffer`);try{s.remove(e,t)}catch(ST){n.logger_(`Remove ${e} to ${t} from ${i}Buffer failed`)}}},timestampOffset:e=>(t,i)=>{const n=i[`${t}Buffer`];L_(i.mediaSource,n)&&(i.logger_(`Setting ${t}timestampOffset to ${e}`),n.timestampOffset=e)},callback:e=>(t,i)=>{e()},endOfStream:e=>t=>{if("open"===t.mediaSource.readyState){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(ST){Yh.log.warn("Failed to call media source endOfStream",ST)}}},duration:e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(ST){Yh.log.warn("Failed to set media source duration",ST)}},abort:()=>(e,t)=>{if("open"!==t.mediaSource.readyState)return;const i=t[`${e}Buffer`];if(L_(t.mediaSource,i)){t.logger_(`calling abort on ${e}Buffer`);try{i.abort()}catch(ST){Yh.log.warn(`Failed to abort on ${e}Buffer`,ST)}}},addSourceBuffer:(e,t)=>i=>{const n=A_(e),s=Ds(t);i.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);const r=i.mediaSource.addSourceBuffer(s);r.addEventListener("updateend",i[`on${n}UpdateEnd_`]),r.addEventListener("error",i[`on${n}Error_`]),i.codecs[e]=t,i[`${e}Buffer`]=r},removeSourceBuffer:e=>t=>{const i=t[`${e}Buffer`];if(D_(e,t),L_(t.mediaSource,i)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(i)}catch(ST){Yh.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,ST)}}},changeType:e=>(t,i)=>{const n=i[`${t}Buffer`],s=Ds(e);L_(i.mediaSource,n)&&i.codecs[t]!==e&&(i.logger_(`changing ${t}Buffer codec from ${i.codecs[t]} to ${e}`),n.changeType(s),i.codecs[t]=e)}},B_=({type:e,sourceUpdater:t,action:i,doneFn:n,name:s})=>{t.queue.push({type:e,action:i,doneFn:n,name:s}),N_(e,t)},U_=(e,t)=>i=>{if(t.queuePending[e]){const i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[`${e}Error_`])}N_(e,t)};class V_ extends Yh.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>N_("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=op("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=U_("video",this),this.onAudioUpdateEnd_=U_("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){B_({type:"mediaSource",sourceUpdater:this,action:O_.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){B_({type:e,sourceUpdater:this,action:O_.abort(e),name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?B_({type:"mediaSource",sourceUpdater:this,action:O_.removeSourceBuffer(e),name:"removeSourceBuffer"}):Yh.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!Yh.browser.IE_VERSION&&!Yh.browser.IS_FIREFOX&&Qn().MediaSource&&Qn().MediaSource.prototype&&"function"===typeof Qn().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return Qn().SourceBuffer&&Qn().SourceBuffer.prototype&&"function"===typeof Qn().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?B_({type:e,sourceUpdater:this,action:O_.changeType(t),name:"changeType"}):Yh.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!==typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((t=>{const i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)}))}appendBuffer(e,t){const{segmentInfo:i,type:n,bytes:s}=e;if(this.processedAppend_=!0,"audio"===n&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${s.length} until video append`);const r=t;if(B_({type:n,sourceUpdater:this,action:O_.appendBuffer(s,i||{mediaIndex:-1},r),doneFn:t,name:"appendBuffer"}),"video"===n){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const e=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${e.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,e.forEach((e=>{this.appendBuffer.apply(this,e)}))}}audioBuffered(){return L_(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:lp()}videoBuffered(){return L_(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:lp()}buffered(){const e=L_(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=L_(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():gp(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=E_){B_({type:"mediaSource",sourceUpdater:this,action:O_.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=E_){"string"!==typeof e&&(e=void 0),B_({type:"mediaSource",sourceUpdater:this,action:O_.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=E_){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?B_({type:"audio",sourceUpdater:this,action:O_.remove(e,t),doneFn:i,name:"remove"}):i()}removeVideo(e,t,i=E_){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?B_({type:"video",sourceUpdater:this,action:O_.remove(e,t),doneFn:i,name:"remove"}):i()}updating(){return!(!I_("audio",this)&&!I_("video",this))}audioTimestampOffset(e){return"undefined"!==typeof e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(B_({type:"audio",sourceUpdater:this,action:O_.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return"undefined"!==typeof e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(B_({type:"video",sourceUpdater:this,action:O_.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&B_({type:"audio",sourceUpdater:this,action:O_.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&B_({type:"video",sourceUpdater:this,action:O_.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),C_.forEach((e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`]((()=>D_(e,this)))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const R_=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),j_=new Uint8Array("\n\n".split("").map((e=>e.charCodeAt(0))));class M_ extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class F_ extends S_{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return lp();const e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return lp([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;const i=km(e);let n=this.initSegments_[i];if(t&&!n&&e.bytes){const t=j_.byteLength+e.bytes.byteLength,s=new Uint8Array(t);s.set(e.bytes),s.set(j_,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return n||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return"undefined"===typeof e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){s_(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){while(e&&e.segment.empty){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===fg.TIMEOUT&&this.handleTimeout_(),e.code===fg.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=n.segment;if(s.map&&(s.map.bytes=t.map.bytes),n.bytes=t.bytes,"function"!==typeof Qn().WebVTT&&"function"===typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((()=>this.segmentRequestFinished_(e,t,i)),(()=>this.stopForError({message:"Error loading vtt.js"})));s.requested=!0;try{this.parseVTTCues_(n)}catch(ST){return void this.stopForError({message:ST.message})}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,n.cues.forEach((e=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(Qn().VTTCue)(e.startTime,e.endTime,e.text):e)})),r_(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,i=!1;if("function"!==typeof Qn().WebVTT)throw new M_;"function"===typeof Qn().TextDecoder?t=new(Qn().TextDecoder)("utf8"):(t=Qn().WebVTT.StringDecoder(),i=!0);const n=new(Qn().WebVTT.Parser)(Qn(),Qn().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=t=>{e.timestampmap=t},n.onparsingerror=e=>{Yh.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){let t=e.segment.map.bytes;i&&(t=R_(t)),n.parse(t)}let s=e.bytes;i&&(s=R_(s)),n.parse(s),n.flush()}updateTimeMapping_(e,t,i){const n=e.segment;if(!t)return;if(!e.cues.length)return void(n.empty=!0);const s=e.timestampmap,r=s.MPEGTS/sa.ONE_SECOND_IN_TS-s.LOCAL+t.mapping;if(e.cues.forEach((e=>{e.startTime+=r,e.endTime+=r})),!i.syncInfo){const t=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(t,s-n.duration)}}}}const q_=function(e,t){const i=e.cues;for(let n=0;n<i.length;n++){const e=i[n];if(t>=e.adStartTime&&t<=e.adEndTime)return e}return null},z_=function(e,t,i=0){if(!e.segments)return;let n,s=i;for(let r=0;r<e.segments.length;r++){const i=e.segments[r];if(n||(n=q_(t,s+i.duration/2)),n){if("cueIn"in i){n.endTime=s,n.adEndTime=s,s+=i.duration,n=null;continue}if(s<n.endTime){s+=i.duration;continue}n.endTime+=i.duration}else if("cueOut"in i&&(n=new(Qn().VTTCue)(s,s+i.duration,i.cueOut),n.adStartTime=s,n.adEndTime=s+parseFloat(i.cueOut),t.addCue(n)),"cueOutCont"in i){const[e,r]=i.cueOutCont.split("/").map(parseFloat);n=new(Qn().VTTCue)(s,s+i.duration,""),n.adStartTime=s-e,n.adEndTime=n.adStartTime+r,t.addCue(n)}s+=i.duration}},H_=86400,W_=[{name:"VOD",run:(e,t,i,n,s)=>{if(i!==1/0){const e={time:0,segmentIndex:0,partIndex:null};return e}return null}},{name:"ProgramDateTime",run:(e,t,i,n,s)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let r=null,o=null;const a=Tp(t);s=s||0;for(let l=0;l<a.length;l++){const i=t.endList||0===s?l:a.length-(l+1),n=a[i],u=n.segment,c=e.timelineToDatetimeMappings[u.timeline];if(!c||!u.dateTimeObject)continue;const d=u.dateTimeObject.getTime()/1e3;let h=d+c;if(u.parts&&"number"===typeof n.partIndex)for(let e=0;e<n.partIndex;e++)h+=u.parts[e].duration;const p=Math.abs(s-h);if(null!==o&&(0===p||o<p))break;o=p,r={time:h,segmentIndex:n.segmentIndex,partIndex:n.partIndex}}return r}},{name:"Segment",run:(e,t,i,n,s)=>{let r=null,o=null;s=s||0;const a=Tp(t);for(let l=0;l<a.length;l++){const e=t.endList||0===s?l:a.length-(l+1),i=a[e],u=i.segment,c=i.part&&i.part.start||u&&u.start;if(u.timeline===n&&"undefined"!==typeof c){const e=Math.abs(s-c);if(null!==o&&o<e)break;(!r||null===o||o>=e)&&(o=e,r={time:c,segmentIndex:i.segmentIndex,partIndex:i.partIndex})}}return r}},{name:"Discontinuity",run:(e,t,i,n,s)=>{let r=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length){let i=null;for(let n=0;n<t.discontinuityStarts.length;n++){const o=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,l=e.discontinuities[a];if(l){const e=Math.abs(s-l.time);if(null!==i&&i<e)break;(!r||null===i||i>=e)&&(i=e,r={time:l.time,segmentIndex:o,partIndex:null})}}}return r}},{name:"Playlist",run:(e,t,i,n,s)=>{if(t.syncInfo){const e={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return e}return null}}];class G_ extends Yh.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=op("SyncController")}getSyncPoint(e,t,i,n){const s=this.runStrategies_(e,t,i,n);return s.length?this.selectSyncPoint_(s,{key:"time",value:n}):null}getExpiredTime(e,t){if(!e||!e.segments)return null;const i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;const n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+Np({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,n){const s=[];for(let r=0;r<W_.length;r++){const o=W_[r],a=o.run(this,e,t,i,n);a&&(a.strategy=o.name,s.push({strategy:o.name,syncPoint:a}))}return s}selectSyncPoint_(e,t){let i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let r=1;r<e.length;r++){const o=Math.abs(e[r].syncPoint[t.key]-t.value);o<n&&(n=o,i=e[r].syncPoint,s=e[r].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+("number"===typeof i.partIndex?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,t){const i=t.mediaSequence-e.mediaSequence;if(i>H_)Yh.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);else for(let n=i-1;n>=0;n--){const i=e.segments[n];if(i&&"undefined"!==typeof i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),n=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:n.start}));const s=n.dateTimeObject;n.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[n.timeline]=-s.getTime()/1e3)}timestampOffsetForTimeline(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].time}mappingForTimeline(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){const n=e.segment,s=e.part;let r,o,a=this.timelines[e.timeline];if("number"===typeof e.timestampOffset)a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),r=e.startOfSegment,o=t.end+a.mapping;else{if(!a)return!1;r=t.start+a.mapping,o=t.end+a.mapping}return s&&(s.start=r,s.end=o),(!n.start||r<n.start)&&(n.start=r),n.end=o,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let n=0;n<t.discontinuityStarts.length;n++){const s=t.discontinuityStarts[n],r=t.discontinuitySequence+n+1,o=s-e.mediaIndex,a=Math.abs(o);if(!this.discontinuities[r]||this.discontinuities[r].accuracy>a){let n;n=o<0?i.start-Np({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):i.end+Np({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[r]={time:n,accuracy:a}}}}dispose(){this.trigger("dispose"),this.off()}}class X_ extends Yh.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return"number"===typeof t&&"number"===typeof i&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){return"number"===typeof t&&"number"===typeof i&&(this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Q_=eg(tg((function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(i,1),i>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else for(var s=Array.prototype.slice.call(arguments,1),r=t.length,o=0;o<r;++o)t[o].apply(this,s)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function t(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */const n=function(){const e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],s=i[4];let r,o,a;const l=[],u=[];let c,d,h,p,m,g;for(r=0;r<256;r++)u[(l[r]=r<<1^283*(r>>7))^r]=r;for(o=a=0;!n[o];o^=c||1,a=u[a]||1)for(p=a^a<<1^a<<2^a<<3^a<<4,p=p>>8^255&p^99,n[o]=p,s[p]=o,h=l[d=l[c=l[o]]],g=16843009*h^65537*d^257*c^16843008*o,m=257*l[p]^16843008*p,r=0;r<4;r++)t[r][o]=m=m<<24^m>>>8,i[r][p]=g=g<<24^g>>>8;for(r=0;r<5;r++)t[r]=t[r].slice(0),i[r]=i[r].slice(0);return e};let s=null;class r{constructor(e){let t,i,r;s||(s=n()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];const o=this._tables[0][4],a=this._tables[1],l=e.length;let u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");const c=e.slice(0),d=[];for(this._key=[c,d],t=l;t<4*l+28;t++)r=c[t-1],(t%l===0||8===l&&t%l===4)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[255&r],t%l===0&&(r=r<<8^r>>>24^u<<24,u=u<<1^283*(u>>7))),c[t]=c[t-l]^r;for(i=0;t;i++,t--)r=c[3&i?t:t-4],d[i]=t<=4||i<4?r:a[0][o[r>>>24]]^a[1][o[r>>16&255]]^a[2][o[r>>8&255]]^a[3][o[255&r]]}decrypt(e,t,i,n,s,r){const o=this._key[1];let a,l,u,c=e^o[0],d=n^o[1],h=i^o[2],p=t^o[3];const m=o.length/4-2;let g,_=4;const f=this._tables[1],y=f[0],v=f[1],b=f[2],w=f[3],k=f[4];for(g=0;g<m;g++)a=y[c>>>24]^v[d>>16&255]^b[h>>8&255]^w[255&p]^o[_],l=y[d>>>24]^v[h>>16&255]^b[p>>8&255]^w[255&c]^o[_+1],u=y[h>>>24]^v[p>>16&255]^b[c>>8&255]^w[255&d]^o[_+2],p=y[p>>>24]^v[c>>16&255]^b[d>>8&255]^w[255&h]^o[_+3],_+=4,c=a,d=l,h=u;for(g=0;g<4;g++)s[(3&-g)+r]=k[c>>>24]<<24^k[d>>16&255]<<16^k[h>>8&255]<<8^k[255&p]^o[_++],a=c,c=d,d=h,h=p,p=a}}class o extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},l=function(e,t,i){const n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),s=new r(Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),l=new Int32Array(o.buffer);let u,c,d,h,p,m,g,_,f;for(u=i[0],c=i[1],d=i[2],h=i[3],f=0;f<n.length;f+=4)p=a(n[f]),m=a(n[f+1]),g=a(n[f+2]),_=a(n[f+3]),s.decrypt(p,m,g,_,l,f),l[f]=a(l[f]^u),l[f+1]=a(l[f+1]^c),l[f+2]=a(l[f+2]^d),l[f+3]=a(l[f+3]^h),u=p,c=m,d=g,h=_;return o};class u{constructor(e,i,n,s){const r=u.STEP,l=new Int32Array(e.buffer),c=new Uint8Array(e.byteLength);let d=0;for(this.asyncStream_=new o,this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+r),i,n,c)),d=r;d<l.length;d+=r)n=new Uint32Array([a(l[d-4]),a(l[d-3]),a(l[d-2]),a(l[d-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+r),i,n,c));this.asyncStream_.push((function(){s(null,t(c))}))}static get STEP(){return 32e3}decryptChunk_(e,t,i,n){return function(){const s=l(e,t,i);n.set(s,e.byteOffset)}}}var c,d="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:"undefined"!==typeof self?self:{};c="undefined"!==typeof window?window:"undefined"!==typeof d?d:"undefined"!==typeof self?self:{};var h=c,p=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},m=h.BigInt||Number;m("0x1"),m("0x100"),m("0x10000"),m("0x1000000"),m("0x100000000"),m("0x10000000000"),m("0x1000000000000"),m("0x100000000000000"),m("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();const g=function(e){const t={};return Object.keys(e).forEach((i=>{const n=e[i];p(n)?t[i]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:t[i]=n})),t};self.onmessage=function(e){const t=e.data,i=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),n=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),s=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new u(i,n,s,(function(e,i){self.postMessage(g({source:t.source,decrypted:i}),[i.buffer])}))}})));var K_=$m(Q_);const Z_=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Y_=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},J_=(e,t)=>{t.activePlaylistLoader=e,e.load()},$_=(e,t)=>()=>{const{segmentLoaders:{[e]:i,main:n},mediaTypes:{[e]:s}}=t,r=s.activeTrack(),o=s.getActiveGroup(),a=s.activePlaylistLoader,l=s.lastGroup_;o&&l&&o.id===l.id||(s.lastGroup_=o,s.lastTrack_=r,Y_(i,s),o&&!o.isMainPlaylist&&(o.playlistLoader?(i.resyncLoader(),J_(o.playlistLoader,s)):a&&n.resetEverything()))},ef=(e,t)=>()=>{const{segmentLoaders:{[e]:i},mediaTypes:{[e]:n}}=t;n.lastGroup_=null,i.abort(),i.pause()},tf=(e,t)=>()=>{const{mainPlaylistLoader:i,segmentLoaders:{[e]:n,main:s},mediaTypes:{[e]:r}}=t,o=r.activeTrack(),a=r.getActiveGroup(),l=r.activePlaylistLoader,u=r.lastTrack_;if((!u||!o||u.id!==o.id)&&(r.lastGroup_=a,r.lastTrack_=o,Y_(n,r),a)){if(a.isMainPlaylist){if(!o||!u||o.id===u.id)return;const e=t.vhs.playlistController_,n=e.selectPlaylist();if(e.media()===n)return;return r.logger_(`track change. Switching main audio from ${u.id} to ${o.id}`),i.pause(),s.resetEverything(),void e.fastQualityChange_(n)}if("AUDIO"===e){if(!a.playlistLoader)return s.setAudio(!0),void s.resetEverything();n.setAudio(!0),s.setAudio(!1)}l!==a.playlistLoader?(n.track&&n.track(o),n.resetEverything(),J_(a.playlistLoader,r)):J_(a.playlistLoader,r)}},nf={AUDIO:(e,t)=>()=>{const{segmentLoaders:{[e]:i},mediaTypes:{[e]:n},excludePlaylist:s}=t;Y_(i,n);const r=n.activeTrack(),o=n.activeGroup(),a=(o.filter((e=>e.default))[0]||o[0]).id,l=n.tracks[a];if(r!==l){Yh.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const e in n.tracks)n.tracks[e].enabled=n.tracks[e]===l;n.onTrackChanged()}else s({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(e,t)=>()=>{const{segmentLoaders:{[e]:i},mediaTypes:{[e]:n}}=t;Yh.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Y_(i,n);const s=n.activeTrack();s&&(s.mode="disabled"),n.onTrackChanged()}},sf={AUDIO:(e,t,i)=>{if(!t)return;const{tech:n,requestOptions:s,segmentLoaders:{[e]:r}}=i;t.on("loadedmetadata",(()=>{const e=t.media();r.playlist(e,s),(!n.paused()||e.endList&&"none"!==n.preload())&&r.load()})),t.on("loadedplaylist",(()=>{r.playlist(t.media(),s),n.paused()||r.load()})),t.on("error",nf[e](e,i))},SUBTITLES:(e,t,i)=>{const{tech:n,requestOptions:s,segmentLoaders:{[e]:r},mediaTypes:{[e]:o}}=i;t.on("loadedmetadata",(()=>{const e=t.media();r.playlist(e,s),r.track(o.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&r.load()})),t.on("loadedplaylist",(()=>{r.playlist(t.media(),s),n.paused()||r.load()})),t.on("error",nf[e](e,i))}},rf={AUDIO:(e,t)=>{const{vhs:i,sourceType:n,segmentLoaders:{[e]:s},requestOptions:r,main:{mediaGroups:o},mediaTypes:{[e]:{groups:a,tracks:l,logger_:u}},mainPlaylistLoader:c}=t,d=Wp(c.main);o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}},d&&(o[e].main.default.playlists=c.main.playlists));for(const h in o[e]){a[h]||(a[h]=[]);for(const s in o[e][h]){let p,m=o[e][h][s];if(d?(u(`AUDIO group '${h}' label '${s}' is a main playlist`),m.isMainPlaylist=!0,p=null):p="vhs-json"===n&&m.playlists?new hm(m.playlists[0],i,r):m.resolvedUri?new hm(m.resolvedUri,i,r):m.playlists&&"dash"===n?new Qm(m.playlists[0],i,r,c):null,m=ap({id:s,playlistLoader:p},m),sf[e](e,m.playlistLoader,t),a[h].push(m),"undefined"===typeof l[s]){const e=new Yh.AudioTrack({id:s,kind:Z_(m),enabled:!1,language:m.language,default:m.default,label:s});l[s]=e}}}s.on("error",nf[e](e,t))},SUBTITLES:(e,t)=>{const{tech:i,vhs:n,sourceType:s,segmentLoaders:{[e]:r},requestOptions:o,main:{mediaGroups:a},mediaTypes:{[e]:{groups:l,tracks:u}},mainPlaylistLoader:c}=t;for(const d in a[e]){l[d]||(l[d]=[]);for(const r in a[e][d]){if(a[e][d][r].forced)continue;let h,p=a[e][d][r];if("hls"===s)h=new hm(p.resolvedUri,n,o);else if("dash"===s){const e=p.playlists.filter((e=>e.excludeUntil!==1/0));if(!e.length)return;h=new Qm(p.playlists[0],n,o,c)}else"vhs-json"===s&&(h=new hm(p.playlists?p.playlists[0]:p.resolvedUri,n,o));if(p=ap({id:r,playlistLoader:h},p),sf[e](e,p.playlistLoader,t),l[d].push(p),"undefined"===typeof u[r]){const e=i.addRemoteTextTrack({id:r,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:r},!1).track;u[r]=e}}}r.on("error",nf[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{const{tech:i,main:{mediaGroups:n},mediaTypes:{[e]:{groups:s,tracks:r}}}=t;for(const o in n[e]){s[o]||(s[o]=[]);for(const t in n[e][o]){const a=n[e][o][t];if(!/^(?:CC|SERVICE)/.test(a.instreamId))continue;const l=i.options_.vhs&&i.options_.vhs.captionServices||{};let u={label:t,language:a.language,instreamId:a.instreamId,default:a.default&&a.autoselect};if(l[u.instreamId]&&(u=ap(u,l[u.instreamId])),void 0===u.default&&delete u.default,s[o].push(ap({id:t},a)),"undefined"===typeof r[t]){const e=i.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default,language:u.language,label:u.label},!1).track;r[t]=e}}}}},of=(e,t)=>{for(let i=0;i<e.length;i++){if(zp(t,e[i]))return!0;if(e[i].playlists&&of(e[i].playlists,t))return!0}return!1},af=(e,t)=>i=>{const{mainPlaylistLoader:n,mediaTypes:{[e]:{groups:s}}}=t,r=n.media();if(!r)return null;let o=null;r.attributes[e]&&(o=s[r.attributes[e]]);const a=Object.keys(s);if(!o)if("AUDIO"===e&&a.length>1&&Wp(t.main))for(let e=0;e<a.length;e++){const t=s[a[e]];if(of(t,r)){o=t;break}}else s.main?o=s.main:1===a.length&&(o=s[a[0]]);return"undefined"===typeof i?o:null!==i&&o&&o.filter((e=>e.id===i.id))[0]||null},lf={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:i}}}=t;for(const e in i)if(i[e].enabled)return i[e];return null},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:i}}}=t;for(const e in i)if("showing"===i[e].mode||"hidden"===i[e].mode)return i[e];return null}},uf=(e,{mediaTypes:t})=>()=>{const i=t[e].activeTrack();return i?t[e].activeGroup(i):null},cf=e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{rf[t](t,e)}));const{mediaTypes:t,mainPlaylistLoader:i,tech:n,vhs:s,segmentLoaders:{["AUDIO"]:r,main:o}}=e;["AUDIO","SUBTITLES"].forEach((i=>{t[i].activeGroup=af(i,e),t[i].activeTrack=lf[i](i,e),t[i].onGroupChanged=$_(i,e),t[i].onGroupChanging=ef(i,e),t[i].onTrackChanged=tf(i,e),t[i].getActiveGroup=uf(i,e)}));const a=t.AUDIO.activeGroup();if(a){const e=(a.filter((e=>e.default))[0]||a[0]).id;t.AUDIO.tracks[e].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();const i=t.AUDIO.getActiveGroup();i.playlistLoader?(o.setAudio(!1),r.setAudio(!0)):o.setAudio(!0)}i.on("mediachange",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanged()))})),i.on("mediachanging",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanging()))}));const l=()=>{t.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"vhs-audio-change"})};n.audioTracks().addEventListener("change",l),n.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),s.on("dispose",(()=>{n.audioTracks().removeEventListener("change",l),n.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),n.clearTracks("audio");for(const u in t.AUDIO.tracks)n.audioTracks().addTrack(t.AUDIO.tracks[u])},df=()=>{const e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:E_,activeTrack:E_,getActiveGroup:E_,onGroupChanged:E_,onTrackChanged:E_,lastTrack_:null,logger_:op(`MediaGroups[${t}]`)}})),e},hf=120;let pf;const mf=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],gf=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},_f=function({currentPlaylist:e,buffered:t,currentTime:i,nextPlaylist:n,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:o,bufferBasedABR:a,log:l}){if(!n)return Yh.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${e&&e.id||"null"} -> ${n.id}`;if(!e)return l(`${u} as current playlist is not set`),!0;if(n.id===e.id)return!1;const c=Boolean(hp(t,i).length);if(!e.endList)return c||"number"!==typeof e.partTargetDuration?(l(`${u} as current playlist is live`),!0):(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const d=wp(t,i),h=a?Km.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Km.MAX_BUFFER_LOW_WATER_LINE;if(o<h)return l(`${u} as duration < max low water line (${o} < ${h})`),!0;const p=n.attributes.BANDWIDTH,m=e.attributes.BANDWIDTH;if(p<m&&(!a||d<r)){let e=`${u} as next bandwidth < current bandwidth (${p} < ${m})`;return a&&(e+=` and forwardBuffer < bufferHighWaterLine (${d} < ${r})`),l(e),!0}if((!a||p>m)&&d>=s){let e=`${u} as forwardBuffer >= bufferLowWaterLine (${d} >= ${s})`;return a&&(e+=` and next bandwidth > current bandwidth (${p} > ${m})`),l(e),!0}return l(`not ${u} as no switching criteria met`),!1};class ff extends Yh.EventTarget{constructor(e){super();const{src:t,withCredentials:i,tech:n,bandwidth:s,externVhs:r,useCueTags:o,playlistExclusionDuration:a,enableLowInitialPlaylist:l,sourceType:u,cacheEncryptionKeys:c,bufferBasedABR:d,leastPixelDiffSelector:h,captionServices:p}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:m}=e;null!==m&&"undefined"!==typeof m||(m=1/0),pf=r,this.bufferBasedABR=Boolean(d),this.leastPixelDiffSelector=Boolean(h),this.withCredentials=i,this.tech_=n,this.vhs_=n.vhs,this.sourceType_=u,this.useCueTags_=o,this.playlistExclusionDuration=a,this.maxPlaylistRetries=m,this.enableLowInitialPlaylist=l,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:m,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=df(),this.mediaSource=new(Qn().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=lp(),this.hasPlayed_=!1,this.syncController_=new G_(e),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new K_,this.sourceUpdater_=new V_(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new X_;const g={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:p,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:c,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};this.mainPlaylistLoader_="dash"===this.sourceType_?new Qm(t,this.vhs_,this.requestOptions_):new hm(t,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new S_(ap(g,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new S_(ap(g,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new F_(ap(g,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise(((e,t)=>{function i(){n.off("vttjserror",s),e()}function s(){n.off("vttjsloaded",i),t()}n.one("vttjsloaded",i),n.one("vttjserror",s),n.addWebVttScript_()}))}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",(()=>this.startABRTimer_())),this.tech_.on("pause",(()=>this.stopABRTimer_())),this.tech_.on("play",(()=>this.startABRTimer_()))),mf.forEach((e=>{this[e+"_"]=gf.bind(this,e)})),this.logger_=op("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const _="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(_,(()=>{const e=Date.now();this.tech_.one("loadeddata",(()=>{this.timeToLoadedData__=Date.now()-e,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends}))}))}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){const n=this.media(),s=n&&(n.id||n.uri),r=e.id||e.uri;s&&s!==r&&(this.logger_(`switch media ${s} -> ${r} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,i)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=Qn().setInterval((()=>this.checkABR_()),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Qn().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const i=e.mediaGroups.AUDIO,n=Object.keys(i);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const e=i.main||n.length&&i[n[0]];for(const t in e)if(e[t].default){s={label:t};break}}if(!s)return t;const r=[];for(const o in i)if(i[o][s.label]){const t=i[o][s.label];if(t.playlists&&t.playlists.length)r.push.apply(r,t.playlists);else if(t.uri)r.push(t);else if(e.playlists.length)for(let i=0;i<e.playlists.length;i++){const t=e.playlists[i];t.attributes&&t.attributes.AUDIO&&t.attributes.AUDIO===o&&r.push(t)}}return r.length?r:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;qp(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),cf({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(()=>{this.trigger("selectedinitialmedia")}))})),this.mainPlaylistLoader_.on("loadedplaylist",(()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t))return;this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial");const i="vhs-json"===this.sourceType_&&this.initialMedia_.segments;if(!i)return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)})),this.mainPlaylistLoader_.on("error",(()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainPlaylistLoader_.on("mediachanging",(()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()})),this.mainPlaylistLoader_.on("mediachange",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;qp(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})})),this.mainPlaylistLoader_.on("playlistunchanged",(()=>{const e=this.mainPlaylistLoader_.media();if("playlist-unchanged"===e.lastExcludeReason_)return;const t=this.stuckAtPlaylistEnd_(e);t&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))})),this.mainPlaylistLoader_.on("renditiondisabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})})),this.mainPlaylistLoader_.on("renditionenabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}))}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const i=e.mediaGroups||{};let n=!0;const s=Object.keys(i.AUDIO);for(const r in i.AUDIO)for(const e in i.AUDIO[r]){const t=i.AUDIO[r][e];t.uri||(n=!1)}n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),pf.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(i.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),n=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),r=this.tech_.buffered();return _f({buffered:r,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",(()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()})),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",(()=>{this.trigger("progress")})),this.mainSegmentLoader_.on("error",(()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainSegmentLoader_.on("appenderror",(()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("ended",(()=>{this.logger_("main segment loader ended"),this.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:hf}))}));const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}))}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e!==this.mainPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((()=>{Yh.browser.IE_VERSION||Yh.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){const e=this.seekable();if(!e.length)return!1;if(Yh.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(e.end(0)),this.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(e.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();"undefined"!==typeof e&&"function"===typeof e.then&&e.then(null,(e=>{}))}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){const t=this.seekable();if(!t.length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(null===i)return!1;const n=pf.Playlist.playlistEnd(e,i),s=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-s<=cp;const o=r.end(r.length-1);return o-s<=cp&&n-o<=cp}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const n=this.mainPlaylistLoader_.main.playlists,s=n.filter(Vp),r=1===s.length&&s[0]===e;if(1===n.length&&i!==1/0)return Yh.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(r);if(r){let t=!1;n.forEach((i=>{if(i===e)return;const n=i.excludeUntil;"undefined"!==typeof n&&n!==1/0&&(t=!0,delete i.excludeUntil)})),t&&(Yh.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;o=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*i,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const a=this.selectPlaylist();if(!a)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const l=t.internal?this.logger_:Yh.log.warn,u=t.message?" "+t.message:"";l(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${u} Switching to playlist ${a.id}.`),a.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),a.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const c=a.targetDuration/2*1e3||5e3,d="number"===typeof a.lastRequest&&Date.now()-a.lastRequest<=c;return this.switchMedia_(a,"exclude",r||d)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const i=[],n="all"===e;(n||"main"===e)&&i.push(this.mainPlaylistLoader_);const s=[];(n||"audio"===e)&&s.push("AUDIO"),(n||"subtitle"===e)&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach((e=>{const t=this.mediaTypes_[e]&&this.mediaTypes_[e].activePlaylistLoader;t&&i.push(t)})),["main","audio","subtitle"].forEach((t=>{const n=this[`${t}SegmentLoader_`];!n||e!==t&&"all"!==e||i.push(n)})),i.forEach((e=>t.forEach((t=>{"function"===typeof e[t]&&e[t]()}))))}setCurrentTime(e){const t=hp(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:pf.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let i=this.syncController_.getExpiredTime(t,this.duration());if(null===i)return;const n=this.mainPlaylistLoader_.main,s=pf.Playlist.seekable(t,i,pf.Playlist.liveEdgeDelay(n,t));if(0===s.length)return;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),i=this.syncController_.getExpiredTime(t,this.duration()),null===i)return;if(e=pf.Playlist.seekable(t,i,pf.Playlist.liveEdgeDelay(n,t)),0===e.length)return}let r,o;this.seekable_&&this.seekable_.length&&(r=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?this.seekable_=s:this.seekable_=lp([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):this.seekable_=s,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===o||(this.logger_(`seekable updated [${_p(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const e=this.seekable();if(!e.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1)))}const t=this.tech_.buffered();let i=pf.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((e=>{const t=this.mediaTypes_[e].groups;for(const i in t)t[i].forEach((e=>{e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=Mg(this.main(),t),n={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=i.video||e.main.videoCodec||Us),e.main.isMuxed&&(n.video+=`,${i.audio||e.main.audioCodec||Bs}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(n.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||Bs,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video)return void this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const r=(e,t)=>e?Ls(t):Os(t),o={};let a;if(["video","audio"].forEach((function(t){if(n.hasOwnProperty(t)&&!r(e[t].isFmp4,n[t])){const i=e[t].isFmp4?"browser":"muxer";o[i]=o[i]||[],o[i].push(n[t]),"audio"===t&&(a=i)}})),s&&a&&t.attributes.AUDIO){const e=t.attributes.AUDIO;this.main().playlists.forEach((i=>{const n=i.attributes&&i.attributes.AUDIO;n===e&&i!==t&&(i.excludeUntil=1/0)})),this.logger_(`excluding audio group ${e} as ${a} does not support codec(s): "${n.audio}"`)}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const e=[];if(["video","audio"].forEach((t=>{const i=(Cs(this.sourceUpdater_.codecs[t]||"")[0]||{}).type,s=(Cs(n[t]||"")[0]||{}).type;i&&s&&i.toLowerCase()!==s.toLowerCase()&&e.push(`"${this.sourceUpdater_.codecs[t]}" -> "${n[t]}"`)})),e.length)return void this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${e.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return n}{const e=Object.keys(o).reduce(((e,t)=>(e&&(e+=", "),e+=`${t} does not support codec(s): "${o[t].join(",")}"`,e)),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:e},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach((i=>{const n=e[i];if(-1!==t.indexOf(n.id))return;t.push(n.id);const s=Mg(this.main,n),r=[];!s.audio||Os(s.audio)||Ls(s.audio)||r.push(`audio codec ${s.audio}`),!s.video||Os(s.video)||Ls(s.video)||r.push(`video codec ${s.video}`),s.text&&"stpp.ttml.im1t"===s.text&&r.push(`text codec ${s.text}`),r.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${r.join(", ")}`))}))}excludeIncompatibleVariants_(e){const t=[],i=this.main().playlists,n=Rg(Cs(e)),s=jg(n),r=n.video&&Cs(n.video)[0]||null,o=n.audio&&Cs(n.audio)[0]||null;Object.keys(i).forEach((e=>{const n=i[e];if(-1!==t.indexOf(n.id)||n.excludeUntil===1/0)return;t.push(n.id);const a=[],l=Mg(this.mainPlaylistLoader_.main,n),u=jg(l);if(l.audio||l.video){if(u!==s&&a.push(`codec count "${u}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const e=l.video&&Cs(l.video)[0]||null,t=l.audio&&Cs(l.audio)[0]||null;e&&r&&e.type.toLowerCase()!==r.type.toLowerCase()&&a.push(`video codec "${e.type}" !== "${r.type}"`),t&&o&&t.type.toLowerCase()!==o.type.toLowerCase()&&a.push(`audio codec "${t.type}" !== "${o.type}"`)}a.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id}: ${a.join(" && ")}`))}}))}updateAdCues_(e){let t=0;const i=this.seekable();i.length&&(t=i.start(0)),z_(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Km.GOAL_BUFFER_LENGTH,i=Km.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Km.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Km.BUFFER_LOW_WATER_LINE,i=Km.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,Km.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Km.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?s:n)}bufferHighWaterLine(){return Km.BUFFER_HIGH_WATER_LINE}}const yf=(e,t,i)=>n=>{const s=e.main.playlists[t],r=Up(s),o=Vp(s);return"undefined"===typeof n?o:(n?delete s.disabled:s.disabled=!0,n===o||r||(i(),n?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),n)};class vf{constructor(e,t,i){const{playlistController_:n}=e,s=n.fastQualityChange_.bind(n);if(t.attributes){const e=t.attributes.RESOLUTION;this.width=e&&e.width,this.height=e&&e.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Mg(n.main(),t),this.playlist=t,this.id=i,this.enabled=yf(e.playlists,t.id,s)}}const bf=function(e){e.representations=()=>{const t=e.playlistController_.main(),i=Wp(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return i?i.filter((e=>!Up(e))).map(((t,i)=>new vf(e,t,t.id))):[]}},wf=["seeking","seeked","pause","playing","error"];class kf{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=op("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),r=this.playlistController_,o=["main","subtitle","audio"],a={};o.forEach((e=>{a[e]={reset:()=>this.resetSegmentDownloads_(e),updateend:()=>this.checkSegmentDownloads_(e)},r[`${e}SegmentLoader_`].on("appendsdone",a[e].updateend),r[`${e}SegmentLoader_`].on("playlistupdate",a[e].reset),this.tech_.on(["seeked","seeking"],a[e].reset)}));const l=e=>{["main","audio"].forEach((t=>{r[`${t}SegmentLoader_`][e]("appended",this.seekingAppendCheck_)}))};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),l("off"))},this.clearSeekingAppendCheck_=()=>l("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),l("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(wf,s),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(wf,s),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach((e=>{r[`${e}SegmentLoader_`].off("appendsdone",a[e].updateend),r[`${e}SegmentLoader_`].off("playlistupdate",a[e].reset),this.tech_.off(["seeked","seeking"],a[e].reset)})),this.checkCurrentTimeTimeout_&&Qn().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Qn().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Qn().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,i=t[`${e}SegmentLoader_`],n=i.buffered_(),s=vp(this[`${e}Buffered_`],n);this[`${e}Buffered_`]=n,s?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:yp(n)}),this[`${e}StalledDownloads_`]<10||(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+cp>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){const e=this.tech_.seeking();if(!e)return!1;const t=this.seekable(),i=this.tech_.currentTime(),n=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(n){const e=t.end(t.length-1);s=e}if(this.beforeSeekableWindow_(t,i)){const e=t.start(0);s=e+(e===t.end(0)?0:cp)}if("undefined"!==typeof s)return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${_p(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const r=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),a=r.audioBuffer?r.audioBuffered():null,l=r.videoBuffer?r.videoBuffered():null,u=this.media(),c=u.partTargetDuration?u.partTargetDuration:2*(u.targetDuration-up),d=[a,l];for(let p=0;p<d.length;p++){if(!d[p])continue;const e=wp(d[p],i);if(e<c)return!1}const h=pp(o,i);return 0!==h.length&&(s=h.start(0)+cp,this.logger_(`Buffered region starts (${h.start(0)})  just beyond seek point (${i}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),i=hp(t,e);return i.length&&e+3<=i.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const i=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${i}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered(),s=this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t});if(s)return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const r=pp(n,t);return r.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${r.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,i,n=!1){if(!e.length)return!1;let s=e.end(e.length-1)+cp;const r=!i.endList;return r&&n&&(s=e.end(e.length-1)+3*i.targetDuration),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let n;if(e.length&&t.length){const s=hp(e,i-3),r=hp(e,i),o=hp(t,i);o.length&&!r.length&&s.length&&(n={start:s.end(0),end:o.end(0)})}else{const t=pp(e,i);t.length||(n=this.gapFromVideoUnderflow_(e,i))}return!!n&&(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${i}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),i=this.tech_.currentTime(),n=pp(t,i);this.resetTimeUpdate_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+up),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const i=mp(e);for(let n=0;n<i.length;n++){const e=i.start(n),s=i.end(n);if(t-e<4&&t-e>2)return{start:e,end:s}}return null}}const Tf={errorInterval:30,getSource(e){const t=this.tech({IWillNotUseThisInPlugins:!0}),i=t.currentSource_||this.currentSource();return e(i)}},xf=function(e,t){let i=0,n=0;const s=ap(Tf,t);e.ready((()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})}));const r=function(){n&&e.currentTime(n)},o=function(t){null!==t&&void 0!==t&&(n=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",r),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},a=function(){if(Date.now()-i<1e3*s.errorInterval)e.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(s.getSource&&"function"===typeof s.getSource)return i=Date.now(),s.getSource.call(e,o);Yh.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function(){e.off("loadedmetadata",r),e.off("error",a),e.off("dispose",l)},u=function(t){l(),xf(e,t)};e.on("error",a),e.on("dispose",l),e.reloadSourceOnError=u},Sf=function(e){xf(this,e)};var Ef="3.0.2",Af="6.3.0",Cf="1.0.1",If="6.0.0",Pf="4.0.1";const Nf={PlaylistLoader:hm,Playlist:Gp,utils:Am,STANDARD_PLAYLIST_SELECTOR:Qg,INITIAL_PLAYLIST_SELECTOR:Yg,lastBandwidthSelector:Qg,movingAverageBandwidthSelector:Kg,comparePlaylistBandwidth:Wg,comparePlaylistResolution:Gg,xhr:gm()};Object.keys(Km).forEach((e=>{Object.defineProperty(Nf,e,{get(){return Yh.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),Km[e]},set(t){Yh.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),"number"!==typeof t||t<0?Yh.log.warn(`value of Vhs.${e} must be greater than or equal to 0`):Km[e]=t}})}));const Df="videojs-vhs",Lf=function(e,t){const i=t.media();let n=-1;for(let s=0;s<e.length;s++)if(e[s].id===i.id){n=s;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})},Of=function(e,t){t.representations().forEach((t=>{e.addQualityLevel(t)})),Lf(e,t.playlists)};Nf.canPlaySource=function(){return Yh.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Bf=(e,t,i)=>{if(!e)return e;let n={};t&&t.attributes&&t.attributes.CODECS&&(n=Rg(Cs(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(n.audio=i.attributes.CODECS);const s=Ds(n.video),r=Ds(n.audio),o={};for(const a in e)o[a]={},r&&(o[a].audioContentType=r),s&&(o[a].videoContentType=s),t.contentProtection&&t.contentProtection[a]&&t.contentProtection[a].pssh&&(o[a].pssh=t.contentProtection[a].pssh),"string"===typeof e[a]&&(o[a].url=e[a]);return ap(e,o)},Uf=(e,t)=>e.reduce(((e,i)=>{if(!i.contentProtection)return e;const n=t.reduce(((e,t)=>{const n=i.contentProtection[t];return n&&n.pssh&&(e[t]={pssh:n.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[]),Vf=({player:e,sourceKeySystems:t,audioMedia:i,mainPlaylists:n})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const s=i?n.concat([i]):n,r=Uf(s,Object.keys(t)),o=[],a=[];return r.forEach((t=>{a.push(new Promise(((t,i)=>{e.tech_.one("keysessioncreated",t)}))),o.push(new Promise(((i,n)=>{e.eme.initializeMediaKeys({keySystems:t},(e=>{e?n(e):i()}))})))})),Promise.race([Promise.all(o),Promise.race(a)])},Rf=({player:e,sourceKeySystems:t,media:i,audioMedia:n})=>{const s=Bf(t,i,n);return!!s&&(e.currentSource().keySystems=s,!(s&&!e.eme)||(Yh.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},jf=()=>{if(!Qn().localStorage)return null;const e=Qn().localStorage.getItem(Df);if(!e)return null;try{return JSON.parse(e)}catch(ST){return null}},Mf=e=>{if(!Qn().localStorage)return!1;let t=jf();t=t?ap(t,e):e;try{Qn().localStorage.setItem(Df,JSON.stringify(t))}catch(ST){return!1}return t},Ff=e=>0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e;Nf.supportsNativeHls=function(){if(!Zn()||!Zn().createElement)return!1;const e=Zn().createElement("video");if(!Yh.getTech("Html5").isSupported())return!1;const t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Nf.supportsNativeDash=function(){return!!(Zn()&&Zn().createElement&&Yh.getTech("Html5").isSupported())&&/maybe|probably/i.test(Zn().createElement("video").canPlayType("application/dash+xml"))}(),Nf.supportsTypeNatively=e=>"hls"===e?Nf.supportsNativeHls:"dash"===e&&Nf.supportsNativeDash,Nf.isSupported=function(){return Yh.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const qf=Yh.getComponent("Component");class zf extends qf{constructor(e,t,i){if(super(t,i.vhs),"number"===typeof i.initialBandwidth&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=op("VhsHandler"),t.options_&&t.options_.playerId){const e=Yh.getPlayer(t.options_.playerId);this.player_=e}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Zn(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(e=>{const t=Zn().fullscreenElement||Zn().webkitFullscreenElement||Zn().mozFullScreenElement||Zn().msFullscreenElement;t&&t.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()})),this.on(this.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),this.on(this.tech_,"error",(function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()})),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!==typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=jf();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=Km.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Km.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach((e=>{"undefined"!==typeof this.source_[e]&&(this.options_[e]=this.source_[e])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=Ff(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Nf,this.options_.sourceType=js(t),this.options_.seekTo=e=>{this.tech_.setCurrentTime(e)},this.playlistController_=new ff(this.options_);const i=ap({liveRangeSafeTimeDelta:cp},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new kf(i),this.playlistController_.on("error",(()=>{const e=Yh.players[this.tech_.options_.playerId];let t=this.playlistController_.error;"object"!==typeof t||t.code?"string"===typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));const n=this.options_.bufferBasedABR?Nf.movingAverageBandwidthSelector(.55):Nf.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=Nf.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(e){this.playlistController_.selectPlaylist=e.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let e=this.playlistController_.mainSegmentLoader_.bandwidth;const t=Qn().navigator.connection||Qn().navigator.mozConnection||Qn().navigator.webkitConnection,i=1e7;if(this.options_.useNetworkInformationApi&&t){const n=1e3*t.downlink*1e3;e=n>=i&&e>=i?Math.max(e,n):n}return e},set(e){this.playlistController_.mainSegmentLoader_.bandwidth=e,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const e=1/(this.bandwidth||1);let t;t=this.throughput>0?1/this.throughput:0;const i=Math.floor(1/(e+t));return i},set(){Yh.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>yp(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>yp(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",(()=>{this.options_.useBandwidthFromLocalStorage&&Mf({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})})),this.playlistController_.on("selectedinitialmedia",(()=>{bf(this)})),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",(()=>{this.setupEme_()})),this.on(this.playlistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.playlistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Qn().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Vf({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then((()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()})).catch((e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})}))}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Rf({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",(e=>{if("output-restricted"!==e.status)return;const t=this.playlistController_.main();if(!t||!t.playlists)return;const i=[];t.playlists.forEach((e=>{e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,i.push(e))})),i.length&&(Yh.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...i),this.playlistController_.fastQualityChange_())})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==Yh.browser.IE_VERSION&&t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=Yh.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",(()=>{Of(this.qualityLevels_,this)})),this.playlists.on("mediachange",(()=>{Lf(this.qualityLevels_,this.playlists)})))}static version(){return{"@videojs/http-streaming":Ef,"mux.js":Af,"mpd-parser":Cf,"m3u8-parser":If,"aes-decrypter":Pf}}version(){return this.constructor.version()}canChangeType(){return V_.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&Qn().URL.revokeObjectURL&&(Qn().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return Bm({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,n=2){return Um({programTime:e,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}const Hf={name:"videojs-http-streaming",VERSION:Ef,canHandleSource(e,t={}){const i=ap(Yh.options,t);return Hf.canPlayType(e.type,i)},handleSource(e,t,i={}){const n=ap(Yh.options,i);return t.vhs=new zf(e,t,n),t.vhs.xhr=gm(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t){const i=js(e);if(!i)return"";const n=Hf.getOverrideNative(t),s=Nf.supportsTypeNatively(i),r=!s||n;return r?"maybe":""},getOverrideNative(e={}){const{vhs:t={}}=e,i=!(Yh.browser.IS_ANY_SAFARI||Yh.browser.IS_IOS),{overrideNative:n=i}=t;return n}},Wf=()=>Ls("avc1.4d400d,mp4a.40.2");let Gf;Wf()&&Yh.getTech("Html5").registerSourceHandler(Hf,0),Yh.VhsHandler=zf,Yh.VhsSourceHandler=Hf,Yh.Vhs=Nf,Yh.use||Yh.registerComponent("Vhs",Nf),Yh.options.vhs=Yh.options.vhs||{},Yh.getPlugin&&Yh.getPlugin("reloadSourceOnError")||Yh.registerPlugin("reloadSourceOnError",Sf);var Xf={props:{user:Object,type_value:Object,item:Object},data(){return{preview_language:{en:{url_fail:"Url fail",preview_ended:"Preview ended, click to continue",preview_lasting:"Preview lasting "},"zh-CN":{url_fail:"此视频暂无法播放，请稍后再试",preview_ended:"试看已结束，点击继续",preview_lasting:"试看中…剩余 "},"zh-HK":{url_fail:"此視頻暫無法播放，請稍後再試",preview_ended:"試看已結束，點擊繼續",preview_lasting:"試看中…剩余 "}},show_trial_end_reminder:!1,encrypted_toggle_show:!1,check_encryption:!1,check_pay_status:!1,pay_toggle_show:!1,trial_viewing_time_num:0,show_trial_time:!1,show_video:!0,video_height:"200px",video_cover:""}},computed:{provide_toggle_show_c:function(){return this.provide_toggle_show()},present_language_c:function(){return this.present_language()},cover_file_url:function(){let e="",t=(0,A.mO)(this.item.typeValue);return this.item&&this.item.typeValue&&this.item.typeValue.cover_file_url&&t&&(e=p.v.qiniuUrl+"/"+this.item.typeValue.cover_file_url),e},video_html:function(){let e="video"+this.item.unid,t="";this.item&&this.item.typeValue&&this.item.typeValue.cover_file_url&&(t=p.v.qiniuUrl+"/"+this.item.typeValue.cover_file_url);let i=(0,A.mO)(this.item.typeValue),n="";return n=t&&i?'<video id="'+e+'" x5-video-player-type="h5-page" webkit-playsinline="true"  playsinline="true" poster="'+t+'"  class="video-js vjs-default-skin" style="width: 100%;height: 100%; object-fit: contain"></video>':'<video id="'+e+'" x5-video-player-type="h5-page" webkit-playsinline="true"  playsinline="true"  class="video-js vjs-default-skin" style="width: 100%;height: 100%; object-fit: contain"></video>',n},encrypt_icon:function(){return this.item&&this.item.typeValue?!(!this.item.typeValue.encrypted_browsing_password&&!this.item.typeValue.payment_amount):{}},encrypted_browsing_password:function(){return!!this.type_value.encrypted_browsing_password},trial_viewing_time:function(){if(this.type_value.trial_viewing_time){let e=Number(this.type_value.trial_viewing_time);return Number.isNaN(e)||e<5?5:e}return""},video_toggle_show_children:function(){return!!this.item&&(!!this.item.typeValue&&(!("object"!==typeof this.item.typeValue||!Object.hasOwnProperty.call(this.item.typeValue,"open_show"))&&this.item.typeValue.open_show))},is_allow_trial_viewing:function(){return!!this.item&&(!!this.item.typeValue&&(!("object"!==typeof this.item.typeValue||!Object.hasOwnProperty.call(this.item.typeValue,"is_allow_trial_viewing"))&&this.item.typeValue.is_allow_trial_viewing))}},methods:{searchArray(e){for(let t of e)if("video"===t.type&&!0===t.typeValue.open_show||"audio"===t.type||"playlist"===t.type)return!0;return!1},translate:function(e){return this.preview_language[this.present_language_c][e]},options(){const e=(0,A.Bm)(this.type_value);let t="";e.video_type&&"m3u8"==e.video_type&&(t="application/x-mpegURL"),e.video_type&&"mp4"==e.video_type&&(t="video/mp4");let i=e.video_url_origin;return i&&e.file_url&&i.includes("cjuhe.com")&&(i=p.v.qiniuUrl+"/"+e.file_url),{autoplay:this.type_value.autoplay,muted:this.type_value.mute,loop:!1,controls:!0,controlslist:"nofullscreen",preload:"auto",language:"zh-CN",fluid:!0,sources:[{type:t,src:i}],notSupportedMessage:this.translate("url_fail"),textTrackDisplay:!1,controlBar:{}}},playVideo:function(){let e="video"+this.item.unid,t=Yh(e);t&&t.play()},pauseVideo:function(){let e="video"+this.item.unid,t=Yh(e);t&&t.pause()},exitFullScreenVideo:function(){let e="video"+this.item.unid,t=Yh(e);t&&t.exitFullScreen()},Decryption:function(){this.encryptionToggleShow(!0)},encryptionToggleShow(e){this.encrypted_toggle_show=e,e&&(this.show_video=!1)},verifyPasswordSuccess(){this.check_encryption=!0,this.show_trial_end_reminder=!1,this.show_trial_time=!1,this.playVideo();let e="video"+this.item.unid,t=Yh(e);t&&(t.disablePictureInPicture(!1),t.controlBar.fullscreenToggle.enable(),t.controlBar.progressControl.enable()),this.show_video=!0},exitFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},cover_style(){let e={};return this.cover_file_url&&(e.backgroundUrl=this.cover_file_url),document.getElementById(`video${this.item.unid}`)&&(e.height=document.getElementById(`video${this.item.unid}`).clientHeight?document.getElementById(`video${this.item.unid}`).clientHeight+"px":"200px"),e}},mounted(){this.type_value.video_url_origin&&(Gf=Yh(`video${this.item.unid}`,this.options(""),(()=>{this.type_value.autoplay&&Gf.play()})),this.cover_file_url&&Gf.poster(this.cover_file_url),this.encrypted_browsing_password&&!this.check_encryption&&(Gf.disablePictureInPicture(!0),Gf.controlBar.fullscreenToggle.disable(),Gf.controlBar.progressControl.disable()),Gf.on("playing",(()=>{let e=this;if(this.encrypted_browsing_password)if(this.check_encryption)Gf.disablePictureInPicture(!1),Gf.controlBar.fullscreenToggle.enable(),Gf.controlBar.progressControl.enable();else{document.fullscreenElement&&(this.pauseVideo(),e.exitFullscreen()),document.pictureInPictureElement&&this.pauseVideo(),this.is_allow_trial_viewing&&(this.show_trial_time=!0),setTimeout((function(){e.pauseVideo(),e.encryptionToggleShow(!0),e.is_allow_trial_viewing&&(e.show_trial_end_reminder=!0,e.show_video=!1)}),1e3*e.trial_viewing_time),this.trial_viewing_time_num=e.trial_viewing_time;let t=setInterval((()=>{this.trial_viewing_time_num<=0?(clearInterval(t),t=null):this.trial_viewing_time_num-=1}).bind(this),1e3)}})),Gf.on("fullscreenchange",(()=>{this.encrypted_browsing_password&&(this.check_encryption?(Gf.disablePictureInPicture(!1),Gf.controlBar.fullscreenToggle.enable(),Gf.controlBar.progressControl.enable()):(document.fullscreenElement?(this.pauseVideo(),this.exitFullscreen()):Gf.exitFullScreen(),this.is_allow_trial_viewing&&(this.show_trial_time=!0),this.pauseVideo(),this.encryptionToggleShow(!0)))})),Gf.on("enterpictureinpicture",(()=>{Gf.controlBar.fullscreenToggle.show(),this.encrypted_browsing_password&&(this.check_encryption?(Gf.disablePictureInPicture(!1),Gf.controlBar.fullscreenToggle.enable(),Gf.controlBar.progressControl.enable()):(document.pictureInPictureElement&&this.pauseVideo(),this.is_allow_trial_viewing&&(this.show_trial_time=!0),this.pauseVideo(),this.encryptionToggleShow(!0)))})))},inject:["provide_toggle_show","present_language"],watch:{}};const Qf=(0,_.Z)(Xf,[["render",Gn],["__scopeId","data-v-041aff2a"]]);var Kf=Qf;const Zf=e=>((0,u.pushScopeId)("data-v-50c9c4b0"),e=e(),(0,u.popScopeId)(),e),Yf={style:{overflow:"hidden"}},Jf={key:0,style:{width:"100%",height:"100%",position:"relative","z-index":"1"}},$f=["src","allow"],ey=["src"],ty={key:1,src:Cn,class:"img-animation",style:{width:"43px",height:"43px",position:"absolute",top:"0",left:"0",bottom:"0",right:"0",margin:"auto"},alt:""},iy={class:"flexC",style:{"margin-top":"15px"}},ny=Zf((()=>(0,u.createElementVNode)("div",{style:{position:"absolute",margin:"auto",bottom:"0",right:"0",left:"0",top:"0",width:"20px",height:"4px","border-radius":"2px","background-color":"#333",transform:"rotate(45deg)"}},null,-1))),sy=Zf((()=>(0,u.createElementVNode)("div",{style:{position:"absolute",margin:"auto",bottom:"0",right:"0",left:"0",top:"0",width:"20px",height:"4px","border-radius":"2px","background-color":"#333",transform:"rotate(-45deg)"}},null,-1))),ry=[ny,sy];function oy(e,t,i,n,s,r){const o=Kf;return(0,u.openBlock)(),(0,u.createElementBlock)("div",Yf,[(0,u.createVNode)(u.Transition,{name:"drawer"},{default:(0,u.withCtx)((()=>[e.video_toggle_show?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,class:"video-height",style:(0,u.normalizeStyle)([{"border-radius":e.style_border},{height:`${e.calc_height}`},{width:"100%"},{overflow:"hidden"},{background:e.video_url_resolved?"#000":"#eaeaea"},{position:"relative"}])},[e.video_url_resolved?((0,u.openBlock)(),(0,u.createElementBlock)("div",Jf,["youtube"==e.video_data.video_type?((0,u.openBlock)(),(0,u.createElementBlock)("iframe",{key:0,class:"iframeyoutube",style:{width:"100%",height:"100%"},src:e.video_url_resolved,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",title:"YouTube video player",allow:`accelerometer;${e.video_data.mute?"mute;":""}${e.video_data.autoplay?"autoplay;":""}encrypted-media; gyroscope; picture-in-picture; web-share`,allowfullscreen:"true"},"\n          ",8,$f)):"bilibili"==e.video_data.video_type?((0,u.openBlock)(),(0,u.createElementBlock)("iframe",{key:1,class:"iframebilibili",style:{width:"100%",height:"100%"},src:e.video_url_resolved,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"}," ",8,ey)):((0,u.openBlock)(),(0,u.createBlock)(o,{key:2,type_value:e.type_value,item:e.item,index:e.index,user:e.user},null,8,["type_value","item","index","user"]))])):((0,u.openBlock)(),(0,u.createElementBlock)("img",ty))],4)):(0,u.createCommentVNode)("",!0)])),_:1}),(0,u.withDirectives)((0,u.createElementVNode)("div",iy,[(0,u.createElementVNode)("div",{style:{width:"28px",height:"28px",background:"#E1E1E1",position:"relative","border-radius":"50%"},onClick:t[0]||(t[0]=t=>e.toggleCloseVideo(!1))},ry)],512),[[u.vShow,e.video_toggle_show]])])}var ay={props:{item:Object,index:Number,user:Object,style_border:String,video_toggle_show:Boolean},data:function(){return{VideoComponent:null,encrypted_toggle_show:!1,check_encryption:!1,clickInfoCache:{}}},computed:{...(0,C.mapState)({showIndex:e=>e.page.local_user_data.showIndex}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},video_data:function(){if("video"==this.item.type||"uploadvideo"==this.item.type){const e=(0,A.Bm)(this.type_value);return e&&e.video_type?e:{}}return{}},title:function(){return this.type_value.title?this.type_value.title:""},video_url_resolved:function(){return this.video_data&&this.video_data.video_url_resolved?this.video_data.video_url_resolved:""},isPC:function(){return(0,A.Jv)().pc},calc_height(){if("mp4"==this.video_data.video_type||"m3u8"==this.video_data.video_type)return"auto";const e=document.getElementById("preview_container");if(!e)return;const t=e.clientWidth;let i="bilibili"==this.type_value.video_type&&this.isPC&&t>=768?1.16:1;const n=t*i;return n?.50625*n+"px":window.innerWidth*i*.50625+"px"},close_callback_c:function(){return this.close_callback()},video_toggle_show_children:function(){return!!this.item&&(!!this.item.typeValue&&(!("object"!==typeof this.item.typeValue||!Object.hasOwnProperty.call(this.item.typeValue,"open_show"))&&this.item.typeValue.open_show))},encrypt_icon:function(){return this.item&&this.item.typeValue?!(!this.item.typeValue.encrypted_browsing_password&&!this.item.typeValue.payment_amount):{}},encrypted_browsing_password:function(){return!!this.type_value.encrypted_browsing_password}},inject:["close_callback"],methods:{...(0,C.mapMutations)({updateUserState:"user/updateUserState"}),toggleCloseVideo(e){e||this.deleteVideoId();var t="youtube"==this.video_data.video_type||"bilibili"==this.video_data.video_type;t&&(0,A.Jv)().miniprogram||this.video_url_resolved&&(e&&this.close_callback_c||this.$emit("toggleShowEmit",e))},addCssTr(e){const t=`.height-enter-to,\n            .height-leave-from {\n              height: ${e}px;\n            }\n            `,i=document.createElement("style");i.innerHTML=t,document.head.appendChild(i)},deleteVideoId(){try{let e=Yh(`video${this.item.unid}`);e&&e.dispose()}catch(e){console.log("delete video id err")}}},watch:{"item.typeValue":{handler:function(e,t){e.action_type!==t.action_type?"on"==e.action_type&&e.open_show?this.toggleCloseVideo(!0):this.toggleCloseVideo(!1):e.open_show!==t.open_show&&(this.deleteVideoId(),e.open_show?this.toggleCloseVideo(!0):this.toggleCloseVideo(!1))},deep:!0}},mounted(){this.video_toggle_show_children&&"on"==this.item.typeValue.action_type&&this.toggleCloseVideo(!0)},created(){},updated:function(){},components:{VideojsComponent:Kf}},ly=ay;const uy=(0,_.Z)(ly,[["render",oy],["__scopeId","data-v-50c9c4b0"]]);var cy=uy,dy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAAXNSR0IArs4c6QAAAi1JREFUSEu91T3I1mUUx/HPz8yCIChpkIZAahGKKDUxEIcgJIdGc+kNeiZbkkIkGnIQMWgJXESsoUIbIioKBaOIp6kIjUIKFwMjw5cIesETR/7G89zetz23gtd4cV3fc87vvMWEU1W3YC2ewjrchlP4BPvwbZI/x33PuMuquhcv4zGcxlH8jttxP/rfu9iR5OdRxmXQqrobb2ElDmInTuIfLMFdeA1rcBibkpydC54HraobsQtb8DaeSfL3qCdVtXQw2PK8gDeS1KV3o9Bl+BK/YEOS366g+Qocwvd4IknrffGMQh8ZEvF0kjcnAS/dV1XL8GwnNMl3k6AzHQpWJfl6AdBNg0wPJ+kIx3ra+ryK1Uk641c8VbURH+DRJJ9eH2hVtb4v4pWh2I/9n6edTLyHjUk+/M/TAfbAUOhd7A/iY8yrvQkG7sR6fITPcSDJj6mq5Wgr9+CGBXg36Uk3xxE82dAu8vbwJexN8te04Kq6FduwFdsb+itmL1pIus+v6lTVHfgMJxp6YRgOM0nOXRURVdXDpnNxoaHds+9gLHRIZE+th1qzJMfHGZ4W2glsedqTn3r0JTk/Cp4WuhpfDZCWammSM9cE7c9V9XoXOPYk2X3N4Q/Q7rbF42brnIk1L1G9Z97Hc+PCWmg1DIO799cfnf0vWidsxg8d7UJBc94twn1DSe1vaHfTfnQTfDPsomm5Nw+bt5fj5oYuxuN4vucobpqWiG6aLruexbP/ApRsAnw37pRuAAAAAElFTkSuQmCC",hy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAcCAMAAABMOI/cAAAAWlBMVEUAAABXXGdYXGZXXmlzc3NYW2ZaXWhaYmlYW2daXmhcXWtXW2ZYW2dYW2dXW2ZbYGZhYW1XXGdYXGdYXWdYXGdXXGZYW2daXWhdYm5fZm1XXGdYXGdaYGdXW2YZumgVAAAAHXRSTlMA2LFJBpIyIpc5IPPF7uItCtW6ZqObg1gWEeR3JTQ31a0AAACuSURBVCjPndDbjsIgFEbhHweYIvTsccb1/q9pGmuthcTE72rDCiHZempdH2PvWr2zFbPKvt0ncN5a7yCty5EmPKbQcNTCQ9AsgF+Cw6l4MPj1c7PMke4VOuIyg1bg+9DB78N+wvyjT2SSl1qozUYNrYZpbflKd6q5KnOlFqgA1uFyKYcR/ovhD2IxJOiLYX843LLw8jkYgjIBoxPN+LMxNpxkBwqGaX/nardRnaU7gRETluFHIOQAAAAASUVORK5CYII=",py="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAASRJREFUSEvt1rEuREEYxfH/UWlQroRoeQCJZBuxJHgNpa28gMQLbBRCoRBRUOp0SyMqBYlCqZWoNeLIbnZuEPZ+I0sU93Y3OTO/mflm7lzxR48iju0lYDKS7WXuJV29z5dCtuvAZQaSohuSttNLBBoFDoGJIFYDpoBzSY0wFOy8iNluAjulkO0hYDgDsKTnlA9BtleBY2AsA+pEb4GGpKcodAasZCIpvibpIApdAPPAJnAUBE+AOaApaTcX6jaKQLbT4CqoW6Nq6YpVqHbdIDZDW9Lil1/vz4fvhwd2GjgFWpL2fw36bnAfLr5BzOjfQW1gAXgAHiM1AmaAEWBd0l50Rlu9KyJoFLEXYFbSTRTq1GwZGM+QXoFrSXf92pT+BWWAfaNv4ToGKgTZW5IAAAAASUVORK5CYII=",my="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJqADAAQAAAABAAAAJgAAAACE8iBbAAABx0lEQVRYCe1Xv0vDQBROUgclBUcFxa66uApuFkFc/BMS07UguDhK/oM4mDUkOOjoHyA4iDq5iIKd4pStSwmYwSR+EQMh7eXelVIc7iDcj++9d1++e7m7KIosUgGpgFSApIBKsmIY9Xq9/SzL1hnw2LCmaQPP857HgAkDUxOzLGs3TdPHCTEbh0Du1Pf9i0YjgAs8AxbebrffRqPRLfA1lk11PM/zFfQ3UB+h5hKbWrHqpJS2aZp9kLpUVfU+CIIuz4esmG3bWhRFi7yAJa7reu44zlfZF61JxAzDOAzD8BpvvEydIEkSBSq9Ysm7rusOqX6lnVY2mmrIfyJCqowFn+04joucEi4kxTDBUhEZX9Q5qivKLNhGbmC3g5f69aX4VG1IxCoOQ3zqn5U+s4nlT5ggASAtJSHOzE0kMVFJpWJSMVEFRO3nnmPYrHMKybkRa7VadzgFPnB6FCcCt4ju/NyALAPcXAfAtlh4fXxuitUn5vX/LTHSUiI3siJncWM4wx3rmPe2f/hm4UNN9npMEjE4PeDZw9PBRJ16kIb+N5L+qQFnQqQ7P8io+Cs6QJRVZqQaAJ8MQy+437/XINmVCkgFpAKzVOAHwJF+XtgQyM8AAAAASUVORK5CYII=",gy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADvklEQVRYCbWXO0xUQRSGd30sMUKhBuWhkmBiocFKYzRqIlGIELSysrIwsdNQ2NgRsKRCGrUn0UorYyIkRqDQWGhIbDQRBEUlPHxBkPX7d+9Z5453790F/ZN/Z+acf87MPXPvzGw6VSKy2WwG6Ul4Fu6DdQEpUpNwCr6ED+BQOp1eolw7GLgG9sM5WCrmEfbBHUkzSBcT0LkC33XYCTcHuhXKUfgYTkA9tVALd8FmeBiug8I32Au7y8oIg+upR6BhmspVuF1R44CmGnZC9TEMU0nMRi4uwgNwPOi5THkDVsUNGuWjT2XQ9xeloJhNUdqCDYGe3AbXOrYVnKusEKMdzkJBsaMzgaMCWtrVIX62ZUyIWMqqHkjQcuiLCgNjl7xAKWsPe/Mt7JfhK9ji+7Gdg2/hJd+nNvY2qCUVukIaDEr9V3lAT8jpNPAN5BTZ7A/KVnNR74BLge+W2f0Sv94nQWP9WQoa+s4FvbmVfkdr46uDr6GQmwTlGbgoA3gOt5jeL/FVQfs6+nJ+DBlom4y++Vig9SehiQjPYNHBLSiaKxIDvRMZrU2rWkBrX23CuBKdOwn1LWlwxUS7FdpytWzApr1dGGW3+pSvhn/psAfLkbA1dYe23hft+arrQSgKeEK894VWUME2g26I5mnYoRkNQqE70IQK7Gn4QYIy8S4UyGkQpzuINaQM6FQTxvNF+JcZS3sPa0fYk3L7zuHTOeHikdvw6mNBu04ZWAhmY0vhaaOb9GkM+qnYHa2KtqLX7igs6ClKAuL1COsdsWVOpnr8jis1Qeb8jLj+5aCR1QR0mdgLdaTG4SlOHbVRGPaM0h7zbG7TTtUpnduagLAzXxT91f2gVCRpG4NAk5qAvRDNCdEP4m9weNzRH3Xs0hTLlHWxvmP+RmSpMWHRkjVf1UtIP23HP6HQqgwMwnmo+gX4v3GRAbREGlNj57ZHO4y0S23LGRN+0JWdAfrozvEGCv2FIWi4x/HNgiOmQp8GaEh6gXORENudQ8dxTSi849SloXDWh0ReA91dOOCZI5voTkA7hLr+EuFUekag8B3qT8g/AbH2wy9Q0BjRnykOLYVdSpWmU2udATHOQ9vuFTucen8ABO61fIX2bZh40YiIs4l+vdCgwUu76CJUJmw5FOAjvAYb/YH8Nppa2AM/Q4NiRT55uX/NNN4L+BBOwxk4C/UV6OnEQ3AjFOyvWQ+H02LeVOavZg61T9i9kWoipFWfyKd2p1A0A65IdYJlKPRl6N4Q9fdch5rOlftwkCfWVS0RvwFxbFtuyI6igQAAAABJRU5ErkJggg==",_y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABYRJREFUWEe1V2lsVFUU/r73ppuyBLBKK0ukhYAG4w8J7sGFYCRsP0yn7QxLG2dKaTXFXQQnQGtCIkIKbWckhcxSpqjBgBghjUVxaeLCDxIXBGO0UmwjpZYKLX3vmDvTqZ12pjM2+v693O+c853lnnMukeTncrlSz56/+LAhspzA7YBkizBbiZNyAUAbgDMiODpvdvZJl8vVl4xqJgKtXVs69Vp//xaAhSIyIRE+dE50U+hlRvq2g/t2/z6aTFwC5eXlaR2dvZsAbBTBjWFPaQLSAuFHJFsFVF6DkCzQnC4mHwGxUES0MB49AHbOzc3eHi8iMQkor6/2G4chcs+ARx2aoMqiaQ0+X137aB6tW1ee+df1PjsgL0GQGSbIL5iRvipWNEYQyF+9/k4xjWMimAbAILjjhrSJr9fX7+hOKvwDoNLS0nGXuoxXQLyoIkKiVbfgicABz5mheqIIDOT7y5BxolsnrQ0+9wf/xvBwrNXmWCqCAICJigTTM+4eGolBAirn7Z19JwfC3mVJwYPD2Y6ViIqqaRqfQjBepWPu7KxFkZoYJGC1ObaKYPNAoS0P+j3HRnhjd5bAlDIBNjYGPCeGnuetdq6ggV3QWBX01b01XLbA7nzCMOUIAJ3EtqDfsyVcHwAGQn9OVTupVQX9dar6R3zWQmdQIHkkrmnUVjb46o4rUL7duUxE3hVBCoh9jX7PU3HkqwTysrodTM/IUakIEbDaHDUiWA+iY8oEy6yamporMRUUlWWjr69ZBHMiJAxSg2G8ByAVxDf6eP2xhtrazljyRUUvjO/pu3xe3Q6Ce4MBdxlVh/v+XFtHqMmQzzb63TtHy7V1GAmFFUE6gK/1CfrieMYjOvNszmcgsksV+bzc7JtYYC9ZYpjmhyr3GSmpU/fvr+5IVGxDSQxgkzKusMXFFZN7ensuhtIFLGGezbkXIqUkPg/6PffHMp63xpGj9fPeqDON2aYplaConv+cTi0q7BbilNdb91vMVNqcJ0RkMYk9tNqczSKySNNQedDneXW4gIgw3+ZsE+CWRJGJbjD8NRhwz4glk293bDdNbCLxMa02xw+qqDRqJQf9de441btHKMuiDAgsAoSmIYAuQs2JIZ8mh4M+T3FMfasdBWIgQPBH5hU6uwEZR+orgv5adU+T+gqK1s8yeo3zCpyqYabP5/klKcHwrVPd8X2AV5ImcOjQIf3o0aZbI0b6gRmmiVPqX9N5n0VkMN85OdmtLpcrOiJD2EUKPzS2k0mBkrXaHC0iWJicl/ysMeB+IB7Wai+xi2l6SZwdLEKC24MB9+Z4QnmFjtMA7kqGAMmvgn73grgEbI7XROAieTKpa6gU/ZcpsNqcTSLyKMiaqEaUQmYlWjgiXo21CMPtuKsDImm6pj0e1YqpaRuDvro3kwnzWAlY7Y6nxcRukn/Ozc3KjBpGBDtTdctsr3fvH4lIjIVAeOfo/Q6C20jUBv2e0hHjWOWl0e/ekJBA8YaZxrXrPyucBWnTA4Hq1kQy/+wc6Em3WHIPHKi5OGIhUXugrmlLI7N+NKVWm/NtCIxgwG1NZLxgjfMh05AmNYRGLCRKOHol41Vdl6UNXk9zIsXJnOev2XCH2X/9EwCTQbbcPCl1UXV1da+SjbuUqq1F0/SVDd7apmSMxO0fdseTMFkfbvdoTbdYFqjQR/CJ1nIhWa+N155PtGgMJ1BRUZHR1tFTKYKKkKfJrOURJcMfJiTbSb7BFL7TUF/702gRsdkcWf3QygBxisiUEJZsybDoq4Z6HjcCkYNYT7OwLp4m5bhAa6dpXjJ1XqbINBHMJzAfwIKBbWfwaZY5Ka0ykvPh5P+Xx6lqMoAE0i2WrbG8HkoiIYEIOPHznBcE+FYnj8zJmdqc7PP8b85A+B2acYVAAAAAAElFTkSuQmCC";const fy=e=>((0,u.pushScopeId)("data-v-4efbe72e"),e=e(),(0,u.popScopeId)(),e),yy={style:{width:"100%"}},vy=["id"],by={key:0},wy=["src"],ky=["src"],Ty={key:1},xy=["src"],Sy=["src"],Ey={style:{"vertical-align":"middle"}},Ay={key:2,src:dy,style:{"flex-shrink":"0",width:"12px",height:"14px","margin-right":"3px","margin-left":"11px",padding:"8px","vertical-align":"bottom"},alt:""},Cy={key:3,src:hy,style:{"flex-shrink":"0",width:"12px",height:"14px","margin-right":"3px","margin-left":"11px",padding:"8px","vertical-align":"bottom"},alt:""},Iy={key:4,src:py,style:{"flex-shrink":"0",width:"16px","margin-right":"5px","margin-left":"1px",padding:"2px 0 2px 16px","vertical-align":"bottom"},alt:""},Py={key:5,src:my,style:{"flex-shrink":"0",width:"20px","margin-right":"5px","margin-left":"1px",padding:"2px 0 2px 16px","vertical-align":"bottom"},alt:""},Ny={key:6,src:dy,style:{"flex-shrink":"0",width:"12px",height:"14px","margin-right":"3px","margin-left":"11px",padding:"8px","vertical-align":"bottom"},alt:""},Dy={key:7,src:hy,style:{"flex-shrink":"0",width:"12px",height:"14px","margin-right":"3px","margin-left":"11px",padding:"8px","vertical-align":"bottom"},alt:""},Ly={key:8,src:gy,style:{"flex-shrink":"0",width:"16px",height:"16px","margin-right":"0px","margin-left":"10px",padding:"6px 8px 5px","vertical-align":"bottom"},alt:""},Oy={key:9,src:_y,style:{"flex-shrink":"0",width:"16px",height:"16px","margin-right":"0px","margin-left":"10px",padding:"6px 8px 5px","vertical-align":"bottom"},alt:""},By={style:{display:"flex","justify-content":"center"}},Uy=fy((()=>(0,u.createElementVNode)("div",{style:{width:"100%","font-size":"12px","font-weight":"600","text-align":"center",color:"#969799","margin-top":"20px"}}," 扫一扫，查看更多 ",-1))),Vy={style:{width:"85vw",position:"relative","max-width":"320px"},class:"b"},Ry={style:{width:"100%","min-height":"193px","background-color":"white","border-radius":"16px"},class:"flexC flexD b"},jy={class:"flexLC flexD b",style:{width:"100%",flex:"1",padding:"0 3.5%"}},My={class:"fs16 bold",style:{"padding-top":"28px","padding-bottom":"18px"}},Fy={style:{"font-size":"14px","word-wrap":"break-word","word-break":"break-all","white-space":"pre-wrap",color:"#333333"}},qy={class:"flexBC pointer",style:{height:"48px","border-top":"1px solid #eee",width:"100%"}},zy={class:"fs16"};function Hy(e,t,i,n,s,a){const l=U.J,c=r.E,d=o.G,h=cy,p=Fn,m=An,g=B.Z,_=O.Z,f=_n,y=Jt,v=Ot,b=$e;return(0,u.openBlock)(),(0,u.createElementBlock)("div",yy,[e.item.enable?(0,u.withDirectives)(((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,class:(0,u.normalizeClass)(["flexLC default preview_border_style",["flexLC","default",e.hover_theme,e.has_buy_emphasis_button_time&&e.shake_checked_status?"shake_button":""]]),id:"module_"+(e.item.unid&&e.item.unid.length>10?e.item.unid.slice(-9):e.item.unid),style:(0,u.normalizeStyle)(e.my_theme_link_button_style),onClick:t[0]||(t[0]=(...t)=>e.linkClick&&e.linkClick(...t))},[e.getLinkIcon()&&".svg"==e.getLinkIcon().slice(-4)?((0,u.openBlock)(),(0,u.createElementBlock)("div",by,[e.getLinkIcon()&&"picpopup"!==e.item.type?((0,u.openBlock)(),(0,u.createElementBlock)("img",{key:0,style:(0,u.normalizeStyle)([{height:"42px",width:"42px","object-fit":"contain",fill:"red",stroke:"blue","vertical-align":"middle"},e.my_theme_link_icon_style]),src:e.getLinkIcon(),alt:""},null,12,wy)):(0,u.createCommentVNode)("",!0),e.getLinkIcon()&&"picpopup"==e.item.type?((0,u.openBlock)(),(0,u.createElementBlock)("img",{key:1,style:(0,u.normalizeStyle)([{height:"42px",width:"42px","object-fit":"cover","flex-shrink":"0","vertical-align":"middle"},e.my_theme_link_icon_style]),src:e.getLinkIcon(),alt:""},null,12,ky)):(0,u.createCommentVNode)("",!0)])):((0,u.openBlock)(),(0,u.createElementBlock)("div",Ty,[e.getLinkIcon()&&"picpopup"!==e.item.type?((0,u.openBlock)(),(0,u.createElementBlock)("img",{key:0,style:(0,u.normalizeStyle)([{height:"42px",width:"42px","object-fit":"contain","vertical-align":"middle"},e.my_theme_link_icon_style]),src:e.getLinkIcon(),alt:""},null,12,xy)):(0,u.createCommentVNode)("",!0),e.getLinkIcon()&&"picpopup"==e.item.type?((0,u.openBlock)(),(0,u.createElementBlock)("img",{key:1,style:(0,u.normalizeStyle)([{height:"42px",width:"42px","object-fit":"cover","flex-shrink":"0","vertical-align":"middle"},e.my_theme_link_icon_style]),src:e.getLinkIcon(),alt:""},null,12,Sy)):(0,u.createCommentVNode)("",!0)])),(0,u.createElementVNode)("div",{id:"title",style:(0,u.normalizeStyle)([{"padding-top":"7px","padding-bottom":"7px","font-size":"16px","font-weight":"bold","flex-grow":"1","word-wrap":"break-word","word-break":"break-all","white-space":"pre-wrap","line-height":"18px"},e.my_theme_link_title])},(0,u.toDisplayString)(e.title?e.title:" "),5),(0,u.createElementVNode)("div",Ey,["text"!==e.item.type&&"donate"!==e.item.type&&e.theme_has_arrow&&!e.encrypt_icon&&e.my_theme_link_icon_color_style?((0,u.openBlock)(),(0,u.createBlock)(l,{key:0,name:e.my_theme_link_arrow,style:{"flex-shrink":"0","margin-left":"10px",width:"16px",padding:"8px","vertical-align":"bottom",color:"white"}},null,8,["name"])):(0,u.createCommentVNode)("",!0),"text"===e.item.type||"donate"===e.item.type||!e.theme_has_arrow||e.encrypt_icon||e.my_theme_link_icon_color_style?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createBlock)(l,{key:1,name:e.my_theme_link_arrow,style:{"flex-shrink":"0","margin-left":"10px",width:"16px",padding:"8px","vertical-align":"bottom"}},null,8,["name"])),"text"!==e.item.type&&e.theme_has_arrow&&e.encrypt_icon&&e.my_theme_link_icon_color_style?((0,u.openBlock)(),(0,u.createElementBlock)("img",Ay)):(0,u.createCommentVNode)("",!0),"text"!==e.item.type&&e.theme_has_arrow&&e.encrypt_icon&&!e.my_theme_link_icon_color_style?((0,u.openBlock)(),(0,u.createElementBlock)("img",Cy)):(0,u.createCommentVNode)("",!0),"text"==e.item.type&&e.theme_has_arrow&&!e.encrypt_icon&&e.my_theme_link_icon_color_style?((0,u.openBlock)(),(0,u.createElementBlock)("img",Iy)):(0,u.createCommentVNode)("",!0),"text"!=e.item.type||!e.theme_has_arrow||e.encrypt_icon||e.my_theme_link_icon_color_style?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("img",Py)),"text"==e.item.type&&e.theme_has_arrow&&e.encrypt_icon&&e.my_theme_link_icon_color_style?((0,u.openBlock)(),(0,u.createElementBlock)("img",Ny)):(0,u.createCommentVNode)("",!0),"text"==e.item.type&&e.theme_has_arrow&&e.encrypt_icon&&!e.my_theme_link_icon_color_style?((0,u.openBlock)(),(0,u.createElementBlock)("img",Dy)):(0,u.createCommentVNode)("",!0),"donate"==e.item.type&&e.theme_has_arrow&&!e.encrypt_icon&&e.my_theme_link_icon_color_style?((0,u.openBlock)(),(0,u.createElementBlock)("img",Ly)):(0,u.createCommentVNode)("",!0),"donate"!=e.item.type||!e.theme_has_arrow||e.encrypt_icon||e.my_theme_link_icon_color_style?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("img",Oy))])],14,vy)),[[u.vShow,"audio"!==e.item.type&&"video"!==e.item.type&&"playlist"!==e.item.type&&"pdf"!==e.item.type&&"uploadvideo"!==e.item.type&&"collection"!==e.item.type||!e.video_toggle_show]]):(0,u.createCommentVNode)("",!0),"qrcode"==e.item.type?((0,u.openBlock)(),(0,u.createBlock)(d,{key:1,show:e.show_qrcode_popup,"onUpdate:show":t[1]||(t[1]=t=>e.show_qrcode_popup=t),closeable:"",teleport:"#app",style:(0,u.normalizeStyle)([{border:"0","border-radius":"4px"},{width:e.qrcodePopupWidth+"px","min-height":e.qrcodePopupWidth+60+"px"}])},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",By,[(0,u.createVNode)(c,{radius:"4",fit:"contain",style:(0,u.normalizeStyle)({width:.8*e.qrcodePopupWidth+"px","min-height":.8*e.qrcodePopupWidth+"px","margin-top":.15*e.qrcodePopupWidth+"px"}),src:e.qrcodeImage(e.type_value.qrcode_image_url),alt:""},null,8,["style","src"])]),Uy])),_:1},8,["show","style"])):(0,u.createCommentVNode)("",!0),(0,u.withDirectives)((0,u.createVNode)(h,{onToggleShowEmit:e.toggleShow,style_border:e.my_theme_link_icon_style.borderRadius,video_toggle_show:e.video_toggle_show,item:e.item,index:e.index,user:e.user},null,8,["onToggleShowEmit","style_border","video_toggle_show","item","index","user"]),[[u.vShow,e.video_toggle_show&&("video"==e.item.type||"uploadvideo"==e.item.type)]]),"audio"==e.item.type||"playlist"==e.item.type?(0,u.withDirectives)(((0,u.openBlock)(),(0,u.createBlock)(p,{key:2,onToggleShowEmit:e.toggleShow,video_toggle_show:e.video_toggle_show,style_border:e.my_theme_link_icon_style.borderRadius,item:e.item,index:e.index,user:e.user},null,8,["onToggleShowEmit","video_toggle_show","style_border","item","index","user"])),[[u.vShow,e.video_toggle_show]]):(0,u.createCommentVNode)("",!0),"text"==e.item.type&&e.text_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(m,{key:3,onTextToggleShowEmit:e.textToggleShow,text_toggle_show:e.text_toggle_show,item:e.item,index:e.index,user:e.user},null,8,["onTextToggleShowEmit","text_toggle_show","item","index","user"])):(0,u.createCommentVNode)("",!0),e.encrypted_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(g,{key:4,onEncryptedToggleShowEmit:e.encryptionToggleShow,encrypted_toggle_show:e.encrypted_toggle_show,onConfirm:e.verifyPasswordSuccess,item:e.item,index:e.index,user:e.user},null,8,["onEncryptedToggleShowEmit","encrypted_toggle_show","onConfirm","item","index","user"])):(0,u.createCommentVNode)("",!0),e.pay_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(_,{key:5,onPayToggleShowEmit:e.payToggleShow,pay_toggle_show:e.pay_toggle_show,item:e.item,index:e.index},null,8,["onPayToggleShowEmit","pay_toggle_show","item","index"])):(0,u.createCommentVNode)("",!0),e.donate_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(f,{key:6,onDonateToggleShowEmit:e.donateToggleShow,donate_toggle_show:e.donate_toggle_show,item:e.item,index:e.index,user:e.user},null,8,["onDonateToggleShowEmit","donate_toggle_show","item","index","user"])):(0,u.createCommentVNode)("",!0),"donate"==e.item.type&&e.leave_word_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(y,{key:7,onLeaveWordToggleShowEmit:e.leaveWordToggleShow,leave_word_toggle_show:e.leave_word_toggle_show,item:e.item,index:e.index,user:e.user},null,8,["onLeaveWordToggleShowEmit","leave_word_toggle_show","item","index","user"])):(0,u.createCommentVNode)("",!0),(0,u.withDirectives)(((0,u.openBlock)(),(0,u.createBlock)((0,u.resolveDynamicComponent)(e.PDF),{video_toggle_show:e.video_toggle_show,onToggleShowEmit:e.toggleShow,item:e.item,index:e.index,user:e.user},null,40,["video_toggle_show","onToggleShowEmit","item","index","user"])),[[u.vShow,e.video_toggle_show]]),"collection"==e.item.type?(0,u.withDirectives)(((0,u.openBlock)(),(0,u.createBlock)((0,u.resolveDynamicComponent)(e.Collection),{key:8,video_toggle_show:e.video_toggle_show,onToggleShowEmit:e.toggleShow,item:e.item,index:e.index,user:e.user},null,40,["video_toggle_show","onToggleShowEmit","item","index","user"])),[[u.vShow,e.video_toggle_show]]):(0,u.createCommentVNode)("",!0),e.module_share_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(v,{key:9,onModuleShareToggleShowEmit:e.moduleShareToggleShow,module_share_toggle_show:e.module_share_toggle_show,item:e.item,index:e.index,user:e.user},null,8,["onModuleShareToggleShowEmit","module_share_toggle_show","item","index","user"])):(0,u.createCommentVNode)("",!0),"picpopup"==e.item.type?((0,u.openBlock)(),(0,u.createBlock)(b,{key:10,ref:"popup",item:e.item},null,8,["item"])):(0,u.createCommentVNode)("",!0),(0,u.createVNode)(d,{onClickOverlay:t[3]||(t[3]=t=>e.copy_url_show=!1),show:e.copy_url_show,"onUpdate:show":t[4]||(t[4]=t=>e.copy_url_show=t),style:{"--van-popup-background-color":"transparent"},teleport:"#app"},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",Vy,[(0,u.createElementVNode)("div",Ry,[(0,u.createElementVNode)("div",jy,[(0,u.createElementVNode)("span",My,(0,u.toDisplayString)(e.translate("go_to_browser")),1),(0,u.createElementVNode)("span",Fy,(0,u.toDisplayString)(e.tmp_copy_url),1)]),(0,u.createElementVNode)("div",qy,[(0,u.createElementVNode)("div",{class:"flexC go",style:{width:"100%",height:"100%",color:"#7F49FC"},onClick:t[2]||(t[2]=t=>e.copyLink3Url(e.tmp_real_copy_url))},[(0,u.createElementVNode)("span",zy,(0,u.toDisplayString)(e.translate("copy")),1)])])])])])),_:1},8,["show"])])}const Wy={class:"preview-pdf",style:{cursor:"default"}},Gy={class:"flexC",style:{height:"40px",background:"#FFFFFF","border-radius":"4px 4px 0px 0px","border-bottom":"1px solid #DCD9E2"}},Xy={class:"fs14",style:{"font-family":"MicrosoftYaHei",color:"#585858"}},Qy=(0,u.createElementVNode)("div",null,null,-1),Ky=(0,u.createElementVNode)("img",{src:Cn,class:"img-animation",style:{width:"43px",height:"43px",position:"absolute",top:"0",left:"0",bottom:"0",right:"0",margin:"auto"},alt:""},null,-1),Zy={class:"fs16",style:{color:"white"}},Yy=(0,u.createElementVNode)("div",{class:"flexC",style:{"margin-top":"15px"}},[(0,u.createElementVNode)("div",{style:{width:"28px",height:"28px",background:"#E1E1E1",position:"relative","border-radius":"50%"}},[(0,u.createElementVNode)("div",{style:{position:"absolute",margin:"auto",bottom:"0",right:"0",left:"0",top:"0",width:"20px",height:"4px","border-radius":"2px","background-color":"#333",transform:"rotate(45deg)"}}),(0,u.createElementVNode)("div",{style:{position:"absolute",margin:"auto",bottom:"0",right:"0",left:"0",top:"0",width:"20px",height:"4px","border-radius":"2px","background-color":"#333",transform:"rotate(-45deg)"}})])],-1);function Jy(e,t,i,n,s,r){return(0,u.openBlock)(),(0,u.createElementBlock)("div",Wy,[(0,u.createElementVNode)("div",Gy,[(0,u.createElementVNode)("span",Xy,(0,u.toDisplayString)(e.title.length>14?e.title.slice(0,14)+"...":e.title),1)]),(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{padding:"16px",background:"white","min-height":"270px","border-radius":"0px 0px 4px 4px"},[{width:"100%"},{position:"relative"}]]),class:"flexD b flexBC"},[Qy,Ky,(0,u.withDirectives)((0,u.createElementVNode)("div",{class:"flexC pointer",onClick:t[0]||(t[0]=(...t)=>e.jump&&e.jump(...t)),style:{"margin-top":"16px",width:"100%",height:"45px",background:"#111723","border-radius":"11px"}},[(0,u.createElementVNode)("span",Zy,(0,u.toDisplayString)(e.translate("jumpout")),1)],512),[[u.vShow,!e.pdfloading]])]),Yy])}var $y={props:{item:Object,index:Number,user:Object,style_border:String,video_toggle_show:Boolean},data:function(){return{pdf:null,pages:[],preview_language:{"zh-HK":{jumpout:"開啟新頁面"},"zh-CN":{jumpout:"打开新页面"},en:{jumpout:"View"}},pdfloading:!0}},computed:{...(0,C.mapState)({local_index_show:e=>e.page.local_user_data}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},file_url_c(){return!!this.type_value.file_url&&p.v.qiniuUrl+"/"+this.type_value.file_url},pages_c(){return void 0===this.numOfPages?1:this.numOfPages},title:function(){return this.type_value.title?this.type_value.title:""},present_language(){let e=this.$i18n.locale||"zh-CN";return e=!this.user.setting||"en"!=this.user.setting.present_language&&"English"!=this.user.setting.present_language?this.user.setting&&"zh-HK"==this.user.setting.present_language?"zh-HK":"zh-CN":"en",e}},methods:{...(0,C.mapMutations)({updateLocalUserDataState:"page/updateLocalUserDataState"}),translate:function(e){return this.preview_language[this.present_language][e]},toggleClosePdf(e){this.$emit("toggleShowEmit",e)},jump(){window.open(p.v.qiniuUrl+"/"+this.type_value.file_url)}},watch:{},mounted(){},created:function(){},components:{}},ev=$y;const tv=(0,_.Z)(ev,[["render",Jy]]);var iv=tv,nv={props:{item:Object,index:Number,user:Object,tracker:Object},data:function(){return{video_toggle_show:!1,text_toggle_show:!1,show_qrcode_popup:!1,qrcodePopupWidth:.86*window.innerWidth>414?414:.86*window.innerWidth,PDF:null,Collection:null,check_encryption:!1,check_pay_status:!1,pay_toggle_show:!1,encrypted_toggle_show:!1,donate_toggle_show:!1,leave_word_toggle_show:!1,preview_language:{"zh-HK":{donate:"已打賞",go_to_browser:"復製鏈接，去瀏覽器中打開",copy:"立即復製",js_copy_success:"復製成功，請去瀏覽器中粘貼",js_copy_fail:"復製失敗，請去手動輸：",js_toast_fail:"失敗，請聯繫客服微信:link3cc888"},"zh-CN":{donate:"已打赏",go_to_browser:"复制链接，去浏览器中打开",copy:"立即复制",js_copy_success:"复制成功，请去浏览器中粘贴",js_copy_fail:"复制失败，请去手动输：",js_toast_fail:"失败，请联系客服微信:link3cc888"},en:{donate:"Reward Successful",go_to_browser:"Copy link, browser opens",copy:"Copy",js_copy_success:"Copy successful, please go to the browser to paste",js_copy_fail:"Copy failed, please input:",js_toast_fail:"Wrong. Please contact us with Wechat: link3cc888"}},module_share_toggle_show:!1,is_open_in_browser_wechat:!1,is_open_in_browser_qq:!1,is_open_in_browser_weibo:!1,is_open_in_browser_tiktok:!1,copy_url_show:!1,tmp_copy_url:"",tmp_real_copy_url:"",whiteUrls:["link3.cc","diangeapp.com","bfengtech.com","diange.cc","1688.com","taobao.com","tmall.com","alpay.com","baidu.com","sina.com.cn","weibo.com","weibo.cn","163.com","sohu.com","meituan.com","360.cn","live.com","amap.com","xiaohongshu.com","qq.com","chinanews.com.cn","people.com.cn","www.cctv.com","toutiao.com","douyin.com","kuaishou.com","ixigua.com","acfun.cn","bilibili.com","iqiyi.com","youku.com","jd.com","zhihu.com","apple.com","apple.com.cn","mi.com","huawei.com","oppo.com","vivo.com","meizu.com","microsoft.com","intel.cn","amd.com","asus.com.cn","asus.com","store.msi.cn","ymtc.com","bydglobal.com","geely.com","tesla.cn","tesla.com","chery.cn","ximalaya.com","qingting.fm","moegirl.org.cn","dingtalk.com","dianping.com","xinpianchang.com","51.la","jsj.top","seatable.cn","12306.cn","dorsett-yourrewards.com","h5gdsvip.com","ifree8.com","xinli001.com","judydoll.com","wfcd.gosenr.com","weybang.com","peopleapp.com","cippeexpo.com","colortechbio.com","bloomagebiotech.com","jfq668.com","gzgzgc.com","tcdi.net","dayinvoice.cn","mse-china.com","igucang.com","sd2000.com","szjmc.com","zjpark.com","gov.cn","gov.com","gov.hk","gov.mo","gov.tw",".org","org.com","org.cn","edu.cn"]}},computed:{...(0,C.mapState)({user_guest:e=>e.user.user_guest,module_id_reclick:e=>e.page.local_user_data.module_id_reclick,module_id_donate:e=>e.page.local_user_data.module_id_donate,theme_no_arrow:e=>e.page.state_theme.theme_no_arrow,ellipse_theme:e=>e.page.state_theme.ellipse_theme,align_center_theme:e=>e.page.state_theme.align_center_theme,temporary_user:e=>e.user.temporary_user,vertical_theme:e=>e.page.state_theme.vertical_theme,white_icon:e=>e.page.state_theme.white_icon,user_guest_orders:e=>e.user.user_guest.link3_orders}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},getPic(){return"picpopup"!==this.item.type||""==this.type_value.file_url?"":p.v.qiniuUrl+"/"+this.type_value.file_url},title:function(){return this.type_value.title?this.type_value.title:this.item.title?"该字段已弃用,放到了typeValue.title了"==this.item.title?"":this.item.title:""},nav_url:function(){return this.type_value.nav_url?this.type_value.nav_url:this.item.url?"该字段已弃用,放到了typeValue.nav_url了"==this.item.url?"":this.item.url:""},isPC:function(){return(0,A.Jv)().pc},theme_has_arrow:function(){let e=this.theme_no_arrow;return!(e.indexOf(this.user.theme)>=0)&&("custom"!=this.user.theme||!this.user.custom_button||"visible"==this.user.custom_button.right_arrow_visible)},encrypt_icon:function(){return!(!this.type_value.encrypted_browsing_password&&!this.type_value.payment_amount)&&!(!(!this.payment_amount||this.encrypted_browsing_password||de.Z.getToken()&&"undefined"!=de.Z.getToken())&&this.checkLink3OrdersStatus(this.item))},encrypted_browsing_password:function(){return!!this.type_value.encrypted_browsing_password},payment_amount:function(){return!!this.type_value.payment_amount},donate_leave_word_content:function(){return!!(this.type_value.leave_word&&this.type_value.leave_word.length>=1)},hover_theme:function(){let e=["theme29","theme30","theme32","theme4","theme3","theme31","theme34","theme35","theme36"];return e.indexOf(this.user.theme)>=0?e[e.indexOf(this.user.theme)]:"link_hover_pc"},my_theme_link_button_style:function(){let e={backgroundColor:"white",borderRadius:"4px",color:"#5e5e5e",minHeight:"30px",padding:"7px 7px 7px 6px"};this.getLinkIcon()||(e.padding="12px 14px 12px 14px"),"custom"==this.user.theme&&this.user.custom_button&&("rectangle"==this.user.custom_button.button_shape&&(e.borderRadius="4px"),"ellipse"==this.user.custom_button.button_shape&&(e.borderRadius="30px"),this.user.custom_button.button_background_color&&(e.backgroundColor=this.user.custom_button.button_background_color));let t=this.ellipse_theme;t.indexOf(this.user.theme)>=0&&(e.borderRadius="30px");let i=this.vertical_theme;if(i.indexOf(this.user.theme)>=0&&(e.borderRadius="0px"),"theme2"==this.user.theme){let t={borderRadius:"5px",boxShadow:"5px 5px 0px 1px #030505"};e={...e,...t}}if("theme7"==this.user.theme){let t={borderRadius:"5px",boxShadow:"5px 5px 0px 1px #D68867"};e={...e,...t}}if("theme14"==this.user.theme){let t={border:(0,A.Jv)().Safari||(0,A.Jv)().iPhone?"1.7px solid  #9d9d9d":"1px solid  #9d9d9d",backgroundColor:"rgba(0,0,0,0)"};e={...e,...t}}let n=["theme20","theme21","theme22","theme23","theme25","theme26","theme31","theme35"],s=["#ebeef1","#44e660","#2666d6","#2a3235","#e1f35d","#bef094","rgba(145,145,145,0.3)"];if(n.indexOf(this.user.theme)>=0){let t={backgroundColor:`${s[n.indexOf(this.user.theme)]}`};e={...e,...t}}let r=["theme15","themevip4","themevip5"],o=["#E8DBFE","#DBE5FE","#DFDFDF"];if(r.indexOf(this.user.theme)>=0){let t={border:(0,A.Jv)().Safari||(0,A.Jv)().iPhone?`1.7px solid ${o[r.indexOf(this.user.theme)]}`:`1px solid ${o[r.indexOf(this.user.theme)]}`,backgroundColor:"rgba(255,255,255,0.9)"};e={...e,...t}}let a=["theme29","theme30","theme4"];if(a.indexOf(this.user.theme)>=0){let t={border:(0,A.Jv)().Safari||(0,A.Jv)().iPhone?"1.7px solid  white":"1px solid  white",backgroundColor:"transparent"};e={...e,...t}}let l=["theme3"];if(l.indexOf(this.user.theme)>=0){let t={border:(0,A.Jv)().Safari||(0,A.Jv)().iPhone?"1.7px solid black":"1px solid black",backgroundColor:"transparent"};e={...e,...t}}return e},my_theme_link_icon_style:function(){let e={borderRadius:"4px"};"custom"==this.user.theme&&this.user.custom_button&&("rectangle"==this.user.custom_button.button_shape&&(e.borderRadius="4px"),"ellipse"==this.user.custom_button.button_shape&&(e.borderRadius="24px"));let t=this.ellipse_theme;t.indexOf(this.user.theme)>=0&&(e.borderRadius="24px");let i=["",""];i.indexOf(this.user.theme);let n=this.vertical_theme;return n.indexOf(this.user.theme)>=0&&(e.borderRadius="0px"),!this.getLinkIconStoreUrl()||0!=this.getLinkIconStoreUrl().indexOf("link3_icons/")&&0!=this.getLinkIconStoreUrl().indexOf("link3_icons_svg/")||(e.borderRadius="4px",e.width="28px",e.height="28px",e.marginLeft="7px",e.marginRight="7px",e.marginTop="7px",e.marginBottom="7px"),e},my_theme_link_icon_color_style:function(){let e=this.white_icon;return e.indexOf(this.user.theme)>=0},my_theme_link_title:function(){let e={color:"#333333",textAlign:"left"};"custom"==this.user.theme&&this.user.custom_button&&(this.user.custom_button.button_font_color&&(e.color=this.user.custom_button.button_font_color),this.user.custom_button.button_font_align&&(e.textAlign=this.user.custom_button.button_font_align));let t=["theme22","theme23","theme29","theme30","theme32","theme4","theme34","theme35","theme36"];t.indexOf(this.user.theme)>=0&&(e.color="white");let i=["theme31"];i.indexOf(this.user.theme)>=0&&(e.color="#333");let n=this.align_center_theme;n.indexOf(this.user.theme)>=0&&(e.textAlign="center");let s=this.getLinkIcon(),r=this.theme_has_arrow;return s&&"left"==e.textAlign&&r&&(e.paddingLeft="14px"),s&&"left"==e.textAlign&&!r&&(e.paddingLeft="14px"),s&&"center"==e.textAlign&&r&&(e.paddingRight="20px",e.paddingLeft="20px"),s&&"center"==e.textAlign&&!r&&(e.paddingRight="49px",e.paddingLeft="7px"),s&&"right"==e.textAlign&&r&&(e.paddingRight="7px",e.paddingLeft="7px"),s&&"right"==e.textAlign&&!r&&(e.paddingRight="7px",e.paddingLeft="7px"),!s&&"left"==e.textAlign&&r&&(e.paddingLeft="0px"),s||"left"!=e.textAlign||r||(e.paddingLeft="0px"),!s&&"center"==e.textAlign&&r&&(e.paddingLeft="62px",e.paddingRight="20px"),s||"center"!=e.textAlign||r||(e.paddingLeft="50px",e.paddingRight="50px"),!s&&e.textAlign,!s&&e.textAlign,e},my_theme_link_arrow:function(){let e="arrow";"custom"==this.user.theme&&this.user.custom_button&&(e="visible"==this.user.custom_button.right_arrow_visible?"arrow":"");let t=this.theme_no_arrow;t.indexOf(this.user.theme)>=0&&(e="");let i=["",""];i.indexOf(this.user.theme)>=0&&(e="");let n=["",""];return n.indexOf(this.user.theme)>=0&&(e=""),e},present_language_c:function(){return this.present_language()},has_buy_emphasis_button_time(){return!!(this.user&&this.user.setting&&this.user.setting.emphasis_button)},shake_checked_status(){return!!this.item&&(!!this.item.typeValue&&(!(!this.item.typeValue.emphasis_button||""==this.item.typeValue.emphasis_button)&&!(!this.item.typeValue.emphasis_button&&"shake"!=this.item.typeValue.emphasis_button)))},is_open_in_browser_popup:function(){if(!this.item)return!1;if(!this.item.typeValue)return!1;let e=this.item.typeValue;return 1==e.is_open_in_browser_qq&&(0,A.Jv)().qq?(this.is_open_in_browser_qq=!0,!0):1==e.is_open_in_browser_wechat&&((0,A.Jv)().weixin||(0,A.Jv)().wxwork)&&(0,A.Jv)().mobile?(this.is_open_in_browser_wechat=!0,!0):1==e.is_open_in_browser_weibo&&(0,A.Jv)().weibo?(this.is_open_in_browser_weibo=!0,!0):!(1!=e.is_open_in_browser_tiktok||!(0,A.Jv)().douyin)&&(this.is_open_in_browser_tiktok=!0,!0)},isMiniprogram(){return(0,A.Jv)().miniprogram}},methods:{...(0,C.mapMutations)({updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState"}),getLinkIconStoreUrl:function(){return this.item?this.type_value.icon_url?"none"==this.type_value.icon_url?null:this.type_value.icon_url:"social_icons"==this.item.urlType||"link3_icons"==this.item.urlType||"custom"==this.item.urlType||"link3_icons_svg"==this.item.urlType?this.item.custom_url_image:this.item.urlType&&"none"!=this.item.urlType?"social_icons/"+this.item.urlType+".png":null:null},getLinkIcon:function(){return(0,Ct.AW)(this.getLinkIconStoreUrl())},iconStyle:function(){let e=(0,Ct.AW)(this.getLinkIconStoreUrl()),t={maskImage:"url("+e+")"};return t},qrcodeImage:function(e){return(0,Ct.aW)(e)},updateAliyun(e){let t={action:e,unid:this.user.unid,system:(0,A.O3)(),client_ip:"",url:location.href,"user-agent":navigator.userAgent,referrer:document.referrer,module_title:this.title?this.title:"",module_type:this.item.type,module_unid:this.item.unid?this.item.unid:"0"};const i=this.$route.meta;i.directview&&this.user.unid&&("click"==e?this.tracker.send(t):this.tracker.sendImmediate(t))},verifyPasswordSuccess(){this.check_encryption=!0,this.linkClick()},checkLink3OrdersStatus(e){if(this.user_guest&&this.user_guest_orders){let t=this.user_guest_orders;return!(!t||!Array.isArray(t))&&(!!t.find((t=>t.module_id==e.unid&&t.price>0))||(this.user_guest.unid,this.user.unid,!1))}return!1},checkTemporaryUserLink3OrdersStatus(e){if(this.temporary_user&&""!==this.temporary_user.unid&&this.temporary_user.vip){let t=this.temporary_user.vip;return!(!t.link3_orders||!Array.isArray(t.link3_orders))&&(!!t.link3_orders.find((t=>t.module_id==e.unid&&t.price>0))||(this.temporary_user.unid,this.user.unid,!1))}return!1},linkClick:async function(){if(this.isMiniprogram){if(this.payment_amount)return this.updateAliyun("click"),void this.payToggleShow(!0);if(!this.item.type||""===this.item.type)return this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.nav_url?this.nav_url:p.v.link3PreviewPageUrl+"/"+this.user.username});if("url"==this.item.type&&(0,A.r8)(this.nav_url))console.log(this.nav_url);else{let e="";switch(this.item.type){case"uploadvideo":if(!(0,A.sg)(this.item.typeValue.video_url_origin))return;return e=(0,A.oK)(this.item.typeValue.video_url_origin),this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.item.typeValue.video_url_origin?e:p.v.link3PreviewPageUrl+"/"+this.user.username});case"url":if(!(0,A.sg)(this.nav_url))return;return e=(0,A.oK)(this.nav_url),this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.nav_url?e:p.v.link3PreviewPageUrl+"/"+this.user.username});case"video":if(!(0,A.sg)(this.item.typeValue.video_url_origin))return;return e=(0,A.oK)(this.item.typeValue.video_url_origin),this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.item.typeValue.video_url_origin?e:p.v.link3PreviewPageUrl+"/"+this.user.username});case"audio":if(!(0,A.sg)(this.item.typeValue.audio_url_origin))return;return e=(0,A.oK)(this.item.typeValue.audio_url_origin),this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.item.typeValue.audio_url_origin?e:p.v.link3PreviewPageUrl+"/"+this.user.username});case"playlist":if(!(0,A.sg)(this.item.typeValue.audio_url_origin))return;return e=(0,A.oK)(this.item.typeValue.audio_url_origin),this.updateAliyun("click"),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.item.typeValue.audio_url_origin?e:p.v.link3PreviewPageUrl+"/"+this.user.username})}}}try{if(this.payment_amount&&!this.encrypted_browsing_password){if(!this.checkLink3OrdersStatus(this.item)&&(this.openBuy(this.item.unid),this.payToggleShow(!0),!this.check_pay_status))return;if(""===this.user_guest.unid)return this.payToggleShow(!0),void this.openBuy(this.item.unid);if(!de.Z.getToken()||"undefined"==de.Z.getToken())return this.payToggleShow(!0),void this.openBuy(this.item.unid);{let e=await he.bG();if(!e)return!1;"0001"==e.code&&this.updateUserGuestState(e.data)}}if(this.check_pay_status=!1,this.encrypted_browsing_password)if("video"==this.item.type||"uploadvideo"==this.item.type){let e=(0,A.mO)(this.item.typeValue);if(!e&&(this.encryptionToggleShow(!0),!this.check_encryption))return}else if(this.encryptionToggleShow(!0),!this.check_encryption)return}catch(n){console.log(n)}if(this.check_encryption=!1,"donate"==this.item.type){if(""===this.user_guest.unid)return this.donateToggleShow(!0),void this.openDonate(this.item.unid);if(!de.Z.getToken()||"undefined"==de.Z.getToken())return this.donateToggleShow(!0),void this.openDonate(this.item.unid);{let e=await he.bG();if(!e)return!1;"0001"==e.code&&this.updateUserGuestState(e.data)}return this.updateAliyun("click"),this.donateToggleShow(!0),void this.openDonate(this.item.unid)}if(!this.item.type||"url"==this.item.type){let e;if(e=0==this.nav_url.indexOf("mailto:")?this.nav_url:(0,A.sg)(this.nav_url),!e)return;if(this.updateAliyun("click"),this.updateAliyun("leave"),this.is_open_in_browser_popup)return this.copy_url_show=!0,this.tmp_copy_url=this.nav_url,this.tmp_copy_url&&this.tmp_copy_url.length>30&&(this.tmp_copy_url=this.tmp_copy_url.slice(0,30)+"..."),void(this.tmp_real_copy_url=this.nav_url);let t=!1;for(let i=0;i<this.whiteUrls.length;i++)e.indexOf(this.whiteUrls[i])>=0&&(t=!0);return void((0,A.Jv)().iPhone?window.location.href=e:window.open(e))}if("qrcode"==this.item.type)return this.show_qrcode_popup=!0,void this.updateAliyun("click");if("text"==this.item.type)return this.updateAliyun("click"),void this.textToggleShow(!0);if("pdf"==this.item.type)return void(this.type_value.file_url&&(this.PDF=(0,u.shallowRef)((0,u.defineAsyncComponent)({loader:()=>i.e(196).then(i.bind(i,4196)),loadingComponent:iv,delay:0})),this.updateAliyun("click"),this.toggleShow(!0),this.updateLocalUserDataState({showIndex:this.index})));if("collection"==this.item.type&&(this.Collection=(0,u.shallowRef)((0,u.defineAsyncComponent)({loader:()=>i.e(105).then(i.bind(i,5105)),loadingComponent:iv,delay:0})),this.updateAliyun("click"),this.toggleShow(!0),this.updateLocalUserDataState({showIndex:this.index})),"picpopup"==this.item.type)return this.updateAliyun("click"),void this.$refs.popup.jumpto();if("video"==this.item.type||"uploadvideo"==this.item.type){this.updateAliyun("click");let e=(0,A.Bm)(this.type_value);return void("jump"==this.type_value.action_type||!e||void 0===e.video_url_resolved||this.isMiniprogram?this.type_value.video_url_origin&&this.type_value.video_url_origin.trim()&&(this.updateAliyun("leave"),window.open(this.type_value.video_url_origin)):(this.updateLocalUserDataState({showIndex:this.index}),this.toggleShow(!0)))}const e=["audio","playlist"];let t=e.includes(this.item.type);if(t){this.updateAliyun("click");let e=(0,A.uE)({...this.type_value,item_type:this.item.type});e&&Object.hasOwnProperty.call(e,"audio_url_resolved")&&void 0!==e.audio_url_resolved?(this.updateLocalUserDataState({showIndex:this.index}),this.toggleShow(!0)):this.type_value.audio_url_origin&&this.type_value.audio_url_origin.trim()&&(this.updateAliyun("leave"),window.open(this.type_value.audio_url_origin))}else;},toggleShow(e){this.video_toggle_show=e},textToggleShow(e){this.text_toggle_show=e},moduleShareToggleShow(e){this.module_share_toggle_show=e},encryptionToggleShow(e){this.encrypted_toggle_show=e},checkEncryptionToggleShow(){return!0},payToggleShow(e){this.pay_toggle_show=e},donateToggleShow(e){this.donate_toggle_show=e},openBuy(e){this.updateLocalUserDataState({show_buy_popup_link3:!1,show_buy_qrcode_link3:!1,show_donate_popup_link3:!1}),this.updateLocalUserDataState({show_buy_popup_link3:!0,buy_popup_goods_index_link3:e})},openDonate(e){this.updateLocalUserDataState({show_buy_popup_link3:!1,show_buy_qrcode_link3:!1,show_donate_popup_link3:!1}),this.updateLocalUserDataState({show_donate_popup_link3:!0,donate_popup_goods_index_link3:e})},leaveWordToggleShow(e){this.leave_word_toggle_show=e},translate:function(e){return this.preview_language[this.present_language_c][e]},shareLinkClick:function(e){e.stopPropagation(),this.moduleShareToggleShow(!0)},copyLink3Url:(0,A.Ds)((async function(e){(0,Ce.Z)(e)?ce.Toast.success(this.translate("js_copy_success")):ce.Toast.fail(this.translate("js_copy_fail")+e),this.copy_url_show=!1}),300)},provide(){return{provide_toggle_show:()=>this.video_toggle_show}},inject:["present_language"],watch:{module_id_reclick:{handler(e,t){e&&999999!==e&&e!==t&&e==this.item.unid&&(this.linkClick(),this.updateLocalUserDataState({module_id_reclick:999999}))}},module_id_donate:{handler(e,t){e&&999999!==e&&e!==t&&e==this.item.unid&&(-1!==e.indexOf("_donate_")&&(this.donate_leave_word_content?this.leaveWordToggleShow(!0):ce.Toast.success(this.translate("donate")),this.updateLocalUserDataState({show_buy_popup_link3:!1,show_donate_popup_link3:!1,show_donate_qrcode_link3:!1})),this.updateLocalUserDataState({module_id_donate:999999}))}}},created(){},mounted:function(){},updated(){},components:{PVideo:cy,PAudio:Fn,PText:An,PPicPopup:$e,PEncryptedPopup:B.Z,PBuyPopup:O.Z,PDonatePopup:_n,PDonate:Jt}},sv=nv;const rv=(0,_.Z)(sv,[["render",Hy],["__scopeId","data-v-4efbe72e"]]);var ov=rv;const av=e=>((0,u.pushScopeId)("data-v-20463a2e"),e=e(),(0,u.popScopeId)(),e),lv={style:{flex:"1",height:"100%",width:"100%","background-color":"#7f7f7f",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},uv={style:{flex:"1",height:"100%",width:"90%","max-width":"375px",color:"#fff",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},cv=av((()=>(0,u.createElementVNode)("div",{style:{width:"1px",height:"30px"}},null,-1))),dv={style:{"text-align":"center",width:"100%",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},hv={style:{position:"relative",display:"flex","flex-direction":"column","justify-content":"end",width:"100%"}},pv=av((()=>(0,u.createElementVNode)("div",{style:{width:"1px",height:"85px"}},null,-1))),mv={style:{"font-size":"18px"}},gv={style:{"font-size":"18px"}},_v=av((()=>(0,u.createElementVNode)("div",{style:{width:"1px",height:"30px"}},null,-1))),fv={style:{}},yv=av((()=>(0,u.createElementVNode)("div",{style:{width:"1px",height:"110px"}},null,-1))),vv={style:{"font-size":"18px"}},bv={style:{"margin-top":"12px","margin-bottom":"0px","text-align":"center","font-size":"18px","font-weight":"600"}},wv=av((()=>(0,u.createElementVNode)("div",{style:{width:"1px",height:"20px"}},null,-1))),kv=av((()=>(0,u.createElementVNode)("div",{style:{width:"1px",height:"200px"}},null,-1)));function Tv(e,t,i,n,s,o){const l=r.E,c=$t.z,d=a.Z;return(0,u.openBlock)(),(0,u.createElementBlock)("div",lv,[(0,u.createElementVNode)("div",uv,[cv,(0,u.createElementVNode)("div",dv,[(0,u.createElementVNode)("div",hv,[pv,(0,u.createElementVNode)("span",mv,(0,u.toDisplayString)(e.translate("click_on_the_upper_right_corner")),1),(0,u.createVNode)(l,{src:e.point_url,fit:"contain",width:"85",style:{position:"absolute",top:"0",right:"10px"}},null,8,["src"])]),(0,u.createElementVNode)("span",gv,(0,u.toDisplayString)(e.translate("select_open_in_browser")),1),_v,(0,u.createElementVNode)("div",fv,[(0,u.createVNode)(l,{src:e.borwser_url,fit:"contain",width:"48",height:"48",style:{}},null,8,["src"])]),(0,u.createElementVNode)("span",null,(0,u.toDisplayString)(e.translate("open_in_browser")),1),yv,(0,u.createElementVNode)("span",vv,(0,u.toDisplayString)(e.translate("copy_link_info")),1),(0,u.createElementVNode)("div",bv,(0,u.toDisplayString)(e.my_link3_username),1),wv,(0,u.createVNode)(c,{plain:"",type:"primary",style:{border:"1px solid #fff",width:"224px",height:"40px","line-height":"40px",color:"#7D3AED","border-radius":"22px","font-size":"14px","font-weight":"bold"},onClick:e.copyLink3},{default:(0,u.withCtx)((()=>[(0,u.createTextVNode)((0,u.toDisplayString)(e.translate("copy")),1)])),_:1},8,["onClick"]),kv,(0,u.createVNode)(d,{click_url:e.link3PreviewPageUrl(""),button_content:"免费制作Link3聚合页",button_more_content:"更多"},null,8,["click_url"])])])])}var xv={props:{},data:function(){return{preview_language:{"zh-HK":{click_on_the_upper_right_corner:"点击右上角“…”",select_open_in_browser:"选择“在浏览器打开”",open_in_browser:"在浏览器打开",copy_link_info:"或复制链接，到浏览器中打开",copy:"立即复制",js_copy_success:"复制成功，请去浏览器中粘贴",js_copy_fail:"复制失败，请去手动输：",js_toast_fail:"失败，请联系客服微信:link3cc888"},"zh-CN":{click_on_the_upper_right_corner:"点击右上角“…”",select_open_in_browser:"选择“在浏览器打开”",open_in_browser:"在浏览器打开",copy_link_info:"或复制链接，到浏览器中打开",copy:"立即复制",js_copy_success:"复制成功，请去浏览器中粘贴",js_copy_fail:"复制失败，请去手动输：",js_toast_fail:"失败，请联系客服微信:link3cc888"},en:{click_on_the_upper_right_corner:"点击右上角“…”",select_open_in_browser:"选择“在浏览器打开”",open_in_browser:"在浏览器打开",copy_link_info:"或复制链接，到浏览器中打开",copy:"立即复制",js_copy_success:"复制成功，请去浏览器中粘贴",js_copy_fail:"复制失败，请去手动输：",js_toast_fail:"失败，请联系客服微信:link3cc888"}}}},computed:{my_link3_username:function(){let e=window.location.hostname+window.location.pathname;return e&&e.length>30?e.slice(0,30)+"...":e},is_ios(){return!(!(0,A.Jv)().iPhone&&!(0,A.Jv)().MAC)},borwser_url(){let e=p.v.qiniuUrl+"/others/open_in_browser/android_browser@2x.png";return e},point_url(){let e=p.v.qiniuUrl+"/others/open_in_browser/point@2x.png";return e},present_language_c:function(){return this.present_language()},link3PreviewPageUrl(){return function(e){let t=p.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}}},inject:["present_language"],methods:{onRefresh:async function(){location.reload()},translate:function(e){return this.preview_language[this.present_language_c][e]},copyLink3:(0,A.Ds)((async function(){let e=window.location.href;(0,Ce.Z)(e)?ce.Toast.success({message:this.translate("js_copy_success"),className:"toastIndex"}):ce.Toast.fail({message:this.translate("js_copy_fail")+e,className:"toastIndex"})}),300)},created(){},mounted:function(){},components:{CreateMyLink3Button:a.Z}},Sv=xv;const Ev=(0,_.Z)(Sv,[["render",Tv],["__scopeId","data-v-20463a2e"]]);var Av=Ev,Cv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAABwCAYAAADG4PRLAAAAAXNSR0IArs4c6QAADldJREFUeF7tnQlwldUVx3/nBRKWAAKyKFBBWQNI8uI6aqsUqDpStTq1UtsCddRWbJUuQAtSUApWUerS4lrGFls70kU64hIWi05Bm5fEhCVhF5AdZE8CyW3ulwckIe+97/ve917u9+ydYTLAOef+z/1/N3c791zBh0UpmlFIL6Avin7hn/rvbYFMhDYo62cmigDCERSH6/w8DHyKopQAZVRTSgYbZBCVfmsO8QNgtY62HOXLKIaG/2QBzT3GXoVQhmIpwhJaskwGsM/jOjw3ZyyBKkRWTYOOopphwCVAmufeRzMoKKAIRR5pvCbZFCS1fpuVGUWgWkUHKrkTxfdQXGrTh2SJFSPMoznzZTC7klVprHqMIFAVcQVV/BQYiSI9Fugm/v+TCIuA2RLk/SbGQpMSqEJ8BZiMsn5N+rEsR5guQfKaCnyTEKhCDEPxMHBNUznucb0rwkTqnpnUklQCVQE9UfwWxdeT6mWyKtO/WpvzgAxmQ/KqTEJNqoR0KvgZ8EugZRKqbMoqyhFm0obHpA8ViQaS8B4YHudeQNE30c4YZV9YR4B7JZulicSVMAKV3gEJ8TDCFGs35ItYhOqaDYcZ5DBNhKpENEFCCFSrOY/jzAeuSwRo39kUltGCUZLFDq+xe06gNcOE+Sg6ew3W1/aE3Qh3SQ7veemHpwSqfMYALyZ928vLFkmsLb3feo8EecWrajwjUIWYiGKmV8BS2o4wSYLM8sLHuAlUCiHEk8CDXgDy1kazsLmT3pr1xtocgoyX2k1z1yUuAi3yCpiH4ruuEXit2OoSOPc+aPs1aH5+rfUTn8Ghd2DvXDj2X69rdG9PeJUcRsdDYnwE5vOUMT1P0qHHs9DxbpAIbikF+16CreNAGXN2O0dyecjtV+CaQKPGPE1e77ehjc1Vy+GlsP56c0iMY0x0RaAKMRbFy26/Gs/1uj8NnR9wZnb3M7DtR850EiktfN/N7NQxgaqA4VRb52HJPSGP1HgtBsCAEhCHmz2qGtYMgvI1iaTFie0qAtzgdJ3oiEBrh6WcQqMW6Xrc63S/k4Y6I7vnudrx0JSiF/styHayY2ObQKVIo4DFNUE/+hDWnDJwI2TogDQXpWITrLrQhWICVfS2Ww7D7O6d2icwxHQUUxII3YXpZpBTGXnWGcuinpUW6AgOw9aJwiMStA68YxZbBKoihlLFe8adKqS1hyH7YzoZVaCoA1QdiM+G19r6FCPAMDtHUTEJVOvI4DAlKHp7jTN+ewLZ5RBwGQdVXQmFLSC+zZD43WjMgrCeNgyKdSgcm8ACptacav0qMSg9sJpqY2DdJhGmSpDp0VopKoGqmIuopATQn6mZpe9yyLzaHbYjH0CZ0XFV5aQzKFqMTXQCQ7yF4gZ3rZMkrZ5/gQ53uKts/+uw+VvudJOlJSySIDdGqi4igSrEDSjeShZO1/V0mw1dxrtT3zUbtut4YsOLcKMErc2Ts0pkAvP5D3CF4a5B54eguz7NclG2jYfdej/e+LJCcrnSNoHh7bJ3jXdLAzznm3Dh6+6gbrwDPv+rO91kawUY0dg2W6M9UOXzb99ETbe+Cvp94K45S6+Gox+6002+1nLJ5csNqz2LQCuOU7Es+fhc1pjeEwZtcqdc0hMqt7jTbQot4dqGF2oaI/BNFCObAp+rOvVZoF7MRzrEjWRUb6PpRbw5B7ux3RcWSrD+tYR6BKpiulDJNuBUMElsoyZIDN4FzR1GMZ7YDcVdTEDvBMNJ0ule935ifQJDjEcx24lFI2T7h6BVjjMoxwpgbdCZjgnSwk8kaAWRWaU+gfl8Agw2AacjDBcthHY3OVLh84Ww0ZeXpIoll4vPIlAVEeQk+c5awRDpHr+HTvc5A7NnLmz9gTMdU6SbkStDCNXrgSqfx8G65uy/0nUynP+IM9yfTYGdjzrTMUf6Ccm1ruud+RWqQhSgyDYHowMkHcfABQ6j1beMhX1/cFCJQaJCoQSxBn1rDFRr6Mhx9qADdf1Y2oyAPu84Q75uBBz29J6Js/rjkdbR3C3ppPPY1BIY4jYUb8Rjs0l1W2RB1ipnEFYPhPLVznRMkhZulyALagnM5znghybhc4Ql0A6yP3ekQuE5UH3QmY5Z0r+TXO4/1QNXoxhgFj6HaIYcgbTW9pSqjkJRpj1ZU6WENRIkS8IJCI4ZE6jrtsGySqGFzWv45aWwur/bmkzRqyKDVmLlJFM4HEBM8aEOjj6Loc1Qe8AOL4F1X7Una7ZUlqgCbqGav5uN0wa6C16Fjt+xIQjs+yNsMedGnD3QjUgFuFX3wAkob26LugbiheL5M6HrRHuWds6CzybZkzVbaoIm8GUUY83GaQNdp3HQ4xkbgjrV6zjYqyfePi/CK5rAPBT+HxDa3QIX2RwJNtwKB//hc/asbZjFmsCVNdFnl/nem1aXQv+P7Lmx9jI49rE9WZOlhI80gatQ6BTG/i76Pvzg7fZ8KO5We2/e70VYLTW5XXRQyJf87gs6m5d1UynGvVNVFb6RpLNg+b58qnvg/poUkO1974p2YNBWSO8e3ZXKbVDSIyXcRTige6BO1+B1BvimaaB+K6D15dHrProSSs2PV7bZgCd0D6zwQZ5qe/70WgDtvxFd9sDfYNNt9uyZLiVU6B64F+hoOlZb+Oxkq9j9NGz7sS1zPhDap3vgZhQX+ABsbIhdfg7dHosut30C7PpNbFt+kBC26B5YrId/P+CNibH9t6HXn6KLbboLDuhUpilRSjSB/riFZKe9M6+FvjEyHJddB0f8c3MghtsrNIE6mGSEnfYxXiajDwwsiw5zVR+oWG+8KzYBvqvHwLko7rWpYLaYtIKco9ExFrQGpc+vU6AIz2sC/RlOH6n9hxyENP0KXSOl6hAUtUsB5sIu6DB7VchNVLEwZbzKWgst9JOCjZTUCKU441iAm/SJfB+qiTFw+Ije3nnQNsLp2KHFsN6vzzQ1wkGAvmK9hhlCDwqpsZ3WZQJ0i5COevtE2BVjneifb/UEQVqdCivUGQiH+Ad7FKQZvWHgusYFUmkGKhRJkOxTgb3mpE724ivq+wFkXlXf0pEPocxlQiAvMHltI8BTksP4UwTqK9Vvel1Hk9lrmVOb+CDQqhZC9TEovQqOFzYZJM8rTmOkZPOvWgL1I8OH0Gn/zMjC64W3ra+E86bVWtoxFY7qDaeUKVW0pYP04dDp20gpExuTMhxFdWSl5NYmYTpDYAGPUm297/f/YnoLBJghOUyuT2CqhNib3vhe4BMGShDrblzDLBUfGfj8txcup44N4WMJngkDrU9gAfdTzbOp420KehJgnORY9zmtUp/AVXSggh0pEyOTavwJlWRwngy0VgxnE6j/RYV4A0WKRP2kGIPCAglye12vzs6VVsQVnLRO6f1dMvpCejheufJTqEiB/fpmXClDWBGVwHAv1E8M+G/bPtAaOo+Hc+8+Q94pbzWJe1+C3U9CdYxDXxM/XSFPggxvCK3xfKF+SzmpvWp5MVz4T8joGb35KzbDxpvhuM4q5qPSSKrJsyYxdd3xVdLXjH7QfyWk2TxtrzoIay+HilK/MNhostfoBNa+UuaDtMtpMKAQWjqMjDxeAmt0YqqEPO/u7YchDJcgeY0ZjfXsgPnJXzuMhp4uU2ZtHgP753nb2F5bE96UIDdHMhudwAJ6Um1t2bT0Gpdn9nq/B21dzrcO5cH6s+YFnkHzwNBxAmRJDptdEWjNSPOtDW5z0/plH4eAy4dlqsuh0Nxvs+ZZtcmSy4xoH0LM5HZWIqBKilHYzKLjwXdn10TaOTAkzpfHitpDlcM0XXbxxSMnlJHOYBlkXf+LWGISaPVCvayAJcY9PycZkFMeTzNBgU58XhGfDa+19fNzMLRhhnrHk5gGywr9gtlUr7HGbc/OrdxIlZh7W3ea5Np7Mc5WD7R6oSKATkkCNt/6jpsaewZ6zIVOLm8G7HketjpM1WwPVTxSSwlaT7DausRvm0CLRBMfQda5Qgd8Eju5QcMm1ckO1lxsVs7QRD6CfMp/FWIYireNCoDq9jh0cZjue9cTsN1KO21KqUK4PtKCPRJIRz3wNIn5jKlJTeIwSXUi2ykNer0O7W2egh1YAJv0m4NG7cKMlVwc70i4IjA8M52IYmYiaXFmW6DrL6DLpMiJX3Wi110zYeevzXo3V5gkQXcJB10TaJGYj3kR3c26QodR0GZY/fPAw3mw/zU4udPZd5F46TmSy0Nuq4mPQJ3lvoB5KFIg+abbJoxDT3iVHEaLzkLvssRFYHh5IYSst3wedInhi6o2hyDj4yFPN1zcBNaZnRo2Jhr8XcQx5jX0yjMCw2Oinp2+aNQSwywe9VLhHgl6N4P3lMDw7FSf7cxH4fBBP7Na2nM0epEu3NXYO7jx1OU5gRaJesfmODqbjlnbbvG0VDy6wvu04E7JYkc8ZhrTTQiB4cmN3jt9GGGKcacYXrdiJHu1+5kzyGGaSGJ2DRJGYJ3JjT6KesHI88REEimsJ417ZQhLEltNIq2HbYdfh9Ebj/p03+gjcA+ao5wAs8hklvQh4QeNCe+BdRtE6RgbxdO+eiXbCaPCIprzgAxmgxO1eGSTSuDpX6u1IYtTgGviAW+Q7gqE6RJkUbIxNQmBDcZHPcnx67sVywnwiNdLAycfQZMSeJpIfaGmynq/d6QPrradRP+qhNl2YlackOFG1ggCTxOp7ydWcieK0SguceNQAnWKEebRnPkymF0JrMeRaaMIrDfh0Xf2hVEohqPITfr2XO0JQRGKPJrx51PPfjtq3SQIG0tgPTJr89jo9eRQhOvCL814ndtN71OWoViKsISWLNOPDCeBg7iq8AWBDT20EvQV0guhH9VWwHFfFL0AnSg0E6EN6vRPQTiC4rD1E+vPIf2GGVCGUIqygmjXxwqijaulE6T8P3z21Lh280MXAAAAAElFTkSuQmCC";const Iv=e=>((0,u.pushScopeId)("data-v-4831e95a"),e=e(),(0,u.popScopeId)(),e),Pv={class:"middle_page",style:{flex:"1",height:"100%",width:"100%","min-height":"600px",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},Nv={style:{flex:"1","text-align":"center",width:"90%","max-width":"720px","min-height":"570px",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},Dv=Iv((()=>(0,u.createElementVNode)("img",{src:Cv,style:{width:"56px","margin-top":"35px"}},null,-1))),Lv={style:{"margin-top":"20px","margin-bottom":"6px","text-align":"center","font-size":"18px","font-weight":"600",color:"#333"}},Ov=Iv((()=>(0,u.createElementVNode)("span",{style:{"font-size":"12px","margin-bottom":"0px",color:"#333"}},[(0,u.createTextVNode)(" 您访问的页面疑似存在违规内容被多位网友举报 "),(0,u.createElementVNode)("br"),(0,u.createTextVNode)(" 已被Link3平台自动拦截 "),(0,u.createElementVNode)("br"),(0,u.createTextVNode)(" 是否继续? ")],-1))),Bv=(0,u.createTextVNode)(" 继续访问 "),Uv={style:{position:"fixed","z-index":"10",bottom:"0px",width:"100%","text-align":"center",background:"#fff"}},Vv={class:"fs14",style:{"line-height":"18px","font-weight":"500",color:"#000"}},Rv=(0,u.createTextVNode)(" 您可加入Link3分类社群： "),jv=Iv((()=>(0,u.createElementVNode)("span",null,null,-1))),Mv={class:"fs14",style:{cursor:"pointer",color:"#7D3AED"}},Fv={href:"https://link3.cc/group",style:{color:"#7D3AED"}},qv=(0,u.createTextVNode)("link3.cc/groups "),zv=Iv((()=>(0,u.createElementVNode)("br",null,null,-1))),Hv=(0,u.createTextVNode)(" 寻找您感兴趣的Link3聚合页及创作者 "),Wv={class:"fs12",style:{"margin-top":"20px","line-height":"18px","margin-bottom":"20px",color:"#333"}},Gv=(0,u.createTextVNode)(" 如您是此页面的"),Xv=Iv((()=>(0,u.createElementVNode)("span",{style:{"font-size":"14px","font-weight":"500"}},"创建者",-1))),Qv=(0,u.createTextVNode)("，请添加管理员"),Kv=Iv((()=>(0,u.createElementVNode)("span",{style:{"font-size":"14px","font-weight":"500"}},"微信",-1))),Zv=Iv((()=>(0,u.createElementVNode)("span",null,null,-1))),Yv=Iv((()=>(0,u.createElementVNode)("br",null,null,-1))),Jv=(0,u.createTextVNode)(" 了解封禁原因及整改建议，并登录后台整改页面内容 "),$v=Iv((()=>(0,u.createElementVNode)("br",null,null,-1))),eb=(0,u.createTextVNode)(" 审核通过后即可解封 "),tb={style:{position:"fixed","z-index":"10",bottom:"66px",width:"100%","text-align":"center"}},ib=Iv((()=>(0,u.createElementVNode)("p",{style:{"margin-top":"24px","margin-bottom":"4px"}},"Link3.cc是人人都能使用的",-1))),nb=Iv((()=>(0,u.createElementVNode)("p",{style:{"margin-top":"4px"}},"新一代互联网聚合分享营销工具",-1))),sb=Iv((()=>(0,u.createElementVNode)("p",{style:{"margin-top":"12px"}},"加入Link3.cc，用一个页面实现你的推广需求！",-1)));function rb(e,t,i,n,s,r){const o=$t.z,l=U.J,c=a.Z;return(0,u.openBlock)(),(0,u.createElementBlock)(u.Fragment,null,[(0,u.createElementVNode)("div",Pv,[(0,u.createElementVNode)("div",Nv,[Dv,(0,u.createElementVNode)("div",Lv,(0,u.toDisplayString)(e.my_link3_username),1),Ov,(0,u.createVNode)(o,{plain:"",type:"primary",style:{border:"none","margin-top":"2px",width:"224px",height:"40px","line-height":"40px",color:"#7D3AED","border-radius":"22px","font-size":"14px","font-weight":"bold"},onClick:e.continueToVisit},{default:(0,u.withCtx)((()=>[Bv])),_:1},8,["onClick"])])]),(0,u.createElementVNode)("div",Uv,[(0,u.createElementVNode)("div",Vv,[Rv,jv,(0,u.createElementVNode)("span",Mv,[(0,u.createElementVNode)("a",Fv,[qv,(0,u.createVNode)(l,{name:"share-o",style:{color:"#7D3AED","vertical-align":"middle"}})])]),zv,Hv]),(0,u.createElementVNode)("div",Wv,[Gv,Xv,Qv,Kv,Zv,(0,u.createElementVNode)("span",{class:"fs14",style:{cursor:"pointer","font-weight":"600",color:"#04c160"},onClick:t[0]||(t[0]=(...t)=>e.copyInfo&&e.copyInfo(...t))}," link3service "),Yv,Jv,$v,eb]),(0,u.createElementVNode)("div",{class:"fs14",style:(0,u.normalizeStyle)([{width:"100%",height:"160px",position:"relative","background-size":"cover","background-repeat":"no-repeat","text-align":"center",color:"#000","font-weight":"500"},e.bgStyle])},[(0,u.createElementVNode)("div",tb,[ib,nb,sb,(0,u.createVNode)(c,{click_url:e.link3PreviewPageUrl(""),button_content:"免费制作Link3聚合页",button_more_content:"更多"},null,8,["click_url"])])],4)])],64)}class ob{constructor(e){this.expirationTimeInSeconds=e}setItem(e,t){const i=(new Date).getTime(),n=i+1e3*this.expirationTimeInSeconds;localStorage.setItem(e,`${t}|${n}`)}getItem(e){const t=localStorage.getItem(e);if(!t)return null;const[i,n]=t.split("|"),s=(new Date).getTime();return s>n?(localStorage.removeItem(e),null):i}}var ab=ob,lb={props:{},data:function(){return{}},computed:{my_link3_username:function(){let e=window.location.hostname+window.location.pathname;return e&&e.length>30?e.slice(0,30)+"...":e},bgStyle:function(){let e=p.v.qiniuUrl+"/others/open_in_browser/forbid_page_bg.png",t={backgroundImage:"url("+e+")"};return t},_qiniuUrl(){return p.v.qiniuUrl},link3PreviewPageUrl(){return function(e){let t=p.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}}},methods:{onRefresh:async function(){location.reload()},continueToVisit(){const e=new ab(10);e.setItem(window.location.href,!0),location.reload()},back(){window.history.back()},copyInfo:async function(){(0,Ce.Z)("link3service")?ce.Toast.success("已复制"):ce.Toast.success("复制失败")}},created(){},mounted:function(){},components:{CreateMyLink3Button:a.Z}},ub=lb;const cb=(0,_.Z)(ub,[["render",rb],["__scopeId","data-v-4831e95a"]]);var db=cb,hb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAABwCAYAAADG4PRLAAAAAXNSR0IArs4c6QAADTlJREFUeF7tnQnQFMUVx3+tBsEbUvFEIwY8AA0qHpSaKAoaCwXU8kA0QCyPKCpeiAEJIoICShTiGbVQjFrxJBUvQAxaghi88L4Qj4iJooi3MJn/N/OZZdljenZmt2eSV0UtFP263+v/9nb363cYMkgerAW0A7YFtgs/9e8NgPWA9cNP/X0NYDnwecGn/r4YeBV4Lfx808C3WZsOkwWBvQCYXwDdwz8dgR8lLPuKEMxH/bFmAbMNfJzwGIl35yyAHgikfsABQFdgzcS1r9yhBzwHzPBX+G0Gnqnz+JGGcwpAD9r4P2fHAL8GdoukQf0avQDcDEwzsKR+w1YeyQkAPdjT35/OAQ4BWrgyOWXk+B54wN9nJxp4rNGyNhRAD34JDA9/Jhs9F3HGn+Mfki4ywc9sQ6ghAHrBvnYhsE9DtE5+0LkhkFqZdaW6AujB1sAfgEPrqmX9BhOAgw28Wa8h6wKgF+xr5wK/A1rVS7kGjfM1MNbX81ID36QtQ+oAhvvcdeFlO219XOr/deAkA7pXpkapAegFFhDtcyNCa0hqSjjc8Urf4DAGGGVAhoLEKRUAPdhM9yVgv8QlzmaHs2WUMPDPpMVPHMDwhCnwNk5a2Iz39xHQ38AjSeqRKIAeDASub4DZK8k5SbMv/YyeaODGpAZJDEAPzg9PX0nJlud+hhkYl4SCNQPogfq4HDgzCYES7WMtvTr5tp7vZf1yjiYBZxmQ0Tw21QRgCJ4MvMfHliBpxq5d4eST4cADYfPNg94/+AAeegiuuQaefjrpEWvpbyowoBYQawXwCmdWXosWMHkynHACmDJqeR7ccAOcdhp868zb7SQDQ+J+C2ID6NSeJ/AefBD2i3hrefRROOggl0CMvSfGAtCDQcCf4n5rEue78koYPNiu26uugtNPt+NJt/Vv4pxOrQH0oEf4HlbvF/LS07fDDrBwIawhw48FrVwJnTvDyy9bMKXaVFeMX9neE60ADC0szzp1Sde+d+qp8WZ2ypRgP3SHdNnvYmOxiQygF/ikzCR4hHWH3noL2skhLQa9/TZss00MxlRZZHY7IKrt1AbAi0LDdKrSW3Wue55Ok+VOndU606lUByD37omjTfAQUJUiAegF7nyy4VluNFXHr61B69bwySe19dGmDSxdWlsfyXPrFUOrsOpTVFUAPVgbWAi0T17OGnvUyvv662AVxSGt3pYtQSvRPXoD6FztUTgKgCN93X7vnn6hRPnbAwuneqQBbV1lqSKAHvwsXH0tnQVwzhzYe+944j3+OOzjtF+V3DO0Csv62FQD8G+6m8SbnTpx3X47HHVUvMHuuAOOPjoeb/24HjBwcLnhygLoBcAJQLdp4kQ466x4Mor3HPkTO08Hm8CZeDWqBOCTBB7TbtOQIXC5XrNikIC/QvZ452mugW6RAQzNZQ87r5YEPPJI0E9hHNJP7513xuFsBE/PUma2kivQv/f9PTNe03vtBTqMxCEdfp54Ig5nI3jmmCDEbhVaDcDQj1PmnGzQ1luDTGJxSLzvvBOHs1E8+xYH1JQC8P4wSqhRQtqNq0u8LvO25jRd3nWJd+dhN4re001RWMIqAHqwCfAeQQhzdmjJEtjY0ovxo49gE6mbKZJzT9vC+MRiAHUen5gplSTsggWw8852Yj/zDOyyix2PG63PNoETWRMVA/g8sKMbclpIMX069OplwQCI59BMBkm9YGCn1QD0QF/Hf9jNgiOtr7468ESzIXmonXKKDYdLbXf198IFq6xAD8aHYc4uCRpNluHDYfToaG2bW40YARdfbMfjTusJJgjX++9PqBdkYejijowWkgwcCDdaeqsPGgQ33WQxiFNNnzXQtOk37YEe/Bj4V/Ge6JTIlYTp2TNw3LUh8TySaJyJzei1ttUD5k+Ux6YZwMP9Z4u/1Nprw/g7doQXX7QbvlMneOklOx63Wh9h4K5mAKcAv3VLPgtpNtwQPv3UggHYaCP47DM7Hrda/9HAqc0A6qu4g1vyWUqzfDmsu240pi++gPWURi3T9LKBjiZMQPBl5mP6Xn0VtlXuuwiktttvH6Gh003kCLyOAFROMssNxEHFZs6E7nKei0CzZsH++0do6HyTphXYB7jHeVGrCTh1Khx3XLVWwf/fcgsc705EXDShS7bqKwCHklC0aA2C1M46diycryDhCDRuHAwbFqGh802GCkBFGSnaKNukGAdFHEUhtVVcRPbpRgGoRG3Z3xD69IF7Iu4EffvCvfdmHz6YKQDn+d5nu2dem912g6eeiqbG7rvD/PnR2rrd6ikBqBOoTqLZJsXDv/9+NB222CKIm88+vSQA5RSyVeZ1UYCn3CPWrBJ3umJFEEuhAM/s02IBqPCe1tnXBXj3XWjbtrIq770HW26ZC3WBpQJQ6RqSzgDfmAmaOxf22KPy2PPmwZ7u+ytHnMDvBKByWsaMz4o4TL2a3XUXHHZY5dHuvhsO1+NLLugbAfhvgvfA7FOUbBVqc8YZ2dc10OBjAbgI+GkuNDrvPLj00sqqDB0Kl12WC3WBdwSg6iF0zoVGxx4Lt95aWZX+/WGasmHmghYKwGxEIUWZ7333BWVhqkTK5jQ7O5EDVdSeKwDlTNIzyvw436ZDB3hNtawqkNq8ofDzXNDDAvAaJefOhTrrrAN6ba9EerX/Uu/XuaBrBWA23enLzb/8XDZQsbMStGwZyH8mP3S2AJRP+vTc6PTKK7CdSgqWoHy4UhQq1ksAdgjr5uUDwxkzyrtLyO3iAFX9yQ1tKwAVSqZNIR/mNN3z9OJeivRiX+2emB1sv2tyapK8vl+MMhD+PDuyV5C0fXt4XUVTSlC+TqDPmSCzYROA7qROTuJbpJh5xc4XkmLh4yYESkKm5Pu4wgRJ05sAVOFFhVbngxTsKRB1rRDp2iBAn9UPTW7oEAN/bQZQ5269C7qRhTeJOe7Wza9YNCroaeRIeFIGp9yQnHrb+Ctw2Q8RurnxjckNRhUVmWfCJEyFACraUfX9/k/uz8AYE5SuXSXAMx8u9u5PfhISdjLQFBtXnORAfnmulf9OQuE89THfFLiBFgOo9O+T86RtDnU5zcAPbuXFALbxXyZUpDAfPjL5Q08OaJuZ4MbQRKVSbSnUOjdePznDUCHVRxTqVApA+dxl/9KkYM+tQn/lxYurP/RmA+luBlSz/gcql25S6RuyZ7bXY62SuKqCWTN4zaoKRFUuU3LYao++boI5wwRlj1ahcgCqOku2HEd22gnuuw+UQrISLVoEvXvD88oqlilaLdVkyT2wWaVMJX3VA648rqO+tuvVXh7ceuDNBpVM9loNQC1X99MuK5hFRmpVIrMhVTzr0gUU7OI+9TBBHOdqVK3sgPvJXwcMiJ8ySym6blYFWafpfgO9y0lYDUBtKDLZtHJWRaXLiusmIfeLHqudC1xS9SvFbprAe74kRSm9IwO3u2n9vvoqSJ0ch5SquZW7302//vZwA2MqqRYFQFll5H4fMYtOnJmMyaN0WbVWHlMFNNs0XTHFtWSTh/KOJgj/K0tVARRnmMl+lnPl59ZeO0h4Xgtp9X6jCDunSOHD3Ysz1JeSMBKAIYiqYKZKZm5RlKjcchK7G607ygcmUsU4GwBV/FFH2Yi1vuuEs1InnxQzMuDaa+1TNaevlqJzVPwxUhB/ZADDVbgZgQuiZY7/FLVWrlBZVaolNygWQfc/WW/cyhmaXhHkZv29wEb6oFMOUOPH21chmzABzm1KO+0KyaJwULkLezkhrVZgAYgD/dQklkmqU5wnrT4VwIoa+65YehW+cssKM8iAdRLvWACGP6fKLDc2RVjsulbpnQsuCJLYlUv8qlcIJcW75BLX6uYOMzETDsYGMATRPY/uTTeFfv0C60zhe6CsLrfdBh9+aPfFSL/1JAND4g5TK4DilzExF8k3405iDXxTgQGm6aodj2oCMFyF6kO1fM6MJ8L/LNckgtiG2OBp5moGsOBg49ae6Pb3IvaeV6xWYgCGq1Gn0+udumK4BaSuCieaBE/wiQIYgqh7ohKxuHPZdwNEXdL7l6qDW4t4iQMYgiiLjUB0y+xWy0zVxvsYcIwJfG4TpVQADEGU7fRCYIRzrxiJTmHFzmTP1HuejNOp+G6kBmDB4UYebtc5+Z6YLpDKJnSSX3laz3CpUeoAhqtRj8IyPOp13+kn8ARmWg+UyrIwzgSpPFOlugBYsBrlY3Nlpqpk203/A34KyMEG3rRji9+6rgAWAClPIu2N+8QX3SlOubtfZEAA1pUaAmDR/iggs1q3Yo5/5x2d9NXA5hvQUAALgFRAzTnhT6vroW2q5a6VNjGKz4oNGHHaOgFgAZCKTzxGBl6gaxyFUuSRZ54M99MMLElxHKuunQKwUPKwLF4/goicXRtgnpOR+bnQD+jPzWW/rWa3Do2dBbAITOWx0X1SBQJl3VFChqRzu+miLV9MORXp7jZbRYbrgEFNQ2QCwGINwwR97QDllZTDsf7o3wJatVXXL/iUjsuBz8NP/X2ZX7FtcQiYQpQE3BvVnGhrmumUmP8DY17pw1as6x0AAAAASUVORK5CYII=";const pb={class:"forbid_page",style:{flex:"1",height:"100%",width:"100%",display:"flex","flex-direction":"column","justify-content":"space-between","align-items":"center"}},mb={style:{flex:"1","text-align":"center",width:"90%","max-width":"720px","min-height":"570px",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},gb=(0,u.createElementVNode)("img",{src:hb,style:{width:"56px","margin-top":"35px"}},null,-1),_b={style:{"margin-top":"20px","margin-bottom":"6px","text-align":"center","font-size":"18px","font-weight":"600",color:"#333"}},fb=(0,u.createElementVNode)("span",{style:{"font-size":"12px","margin-bottom":"40px",color:"#333"}},[(0,u.createTextVNode)(" 您访问的页面疑似存在违规内容被多位网友举报 "),(0,u.createElementVNode)("br"),(0,u.createTextVNode)(" 现已被管理员临时封禁 ")],-1),yb={style:{position:"fixed","z-index":"10",bottom:"0px",width:"100%","text-align":"center",background:"#fff"}},vb={class:"fs14",style:{"line-height":"18px","font-weight":"500",color:"#000"}},bb=(0,u.createTextVNode)(" 您可加入Link3分类社群： "),wb=(0,u.createElementVNode)("span",null,null,-1),kb={class:"fs14",style:{cursor:"pointer",color:"#7D3AED"}},Tb={href:"https://link3.cc/group",style:{color:"#7D3AED"}},xb=(0,u.createTextVNode)("link3.cc/groups "),Sb=(0,u.createElementVNode)("br",null,null,-1),Eb=(0,u.createTextVNode)(" 寻找您感兴趣的Link3聚合页及创作者 "),Ab={class:"fs12",style:{"margin-top":"20px","line-height":"18px","margin-bottom":"20px",color:"#333"}},Cb=(0,u.createTextVNode)(" 如您是此页面的"),Ib=(0,u.createElementVNode)("span",{style:{"font-size":"14px","font-weight":"500"}},"创建者",-1),Pb=(0,u.createTextVNode)("，请添加管理员"),Nb=(0,u.createElementVNode)("span",{style:{"font-size":"14px","font-weight":"500"}},"微信",-1),Db=(0,u.createElementVNode)("span",null,null,-1),Lb=(0,u.createElementVNode)("br",null,null,-1),Ob=(0,u.createTextVNode)(" 了解封禁原因及整改建议，并登录后台整改页面内容 "),Bb=(0,u.createElementVNode)("br",null,null,-1),Ub=(0,u.createTextVNode)(" 审核通过后即可解封 "),Vb={style:{position:"fixed","z-index":"10",bottom:"66px",width:"100%","text-align":"center"}},Rb=(0,u.createElementVNode)("p",{style:{"margin-top":"24px","margin-bottom":"4px"}},"Link3.cc是人人都能使用的",-1),jb=(0,u.createElementVNode)("p",{style:{"margin-top":"4px"}},"新一代互联网聚合分享营销工具",-1),Mb=(0,u.createElementVNode)("p",{style:{"margin-top":"12px"}},"加入Link3.cc，用一个页面实现你的推广需求！",-1);function Fb(e,t,i,n,s,r){const o=U.J,l=a.Z;return(0,u.openBlock)(),(0,u.createElementBlock)(u.Fragment,null,[(0,u.createElementVNode)("div",pb,[(0,u.createElementVNode)("div",mb,[gb,(0,u.createElementVNode)("div",_b,(0,u.toDisplayString)(e.my_link3_username),1),fb])]),(0,u.createElementVNode)("div",yb,[(0,u.createElementVNode)("div",vb,[bb,wb,(0,u.createElementVNode)("span",kb,[(0,u.createElementVNode)("a",Tb,[xb,(0,u.createVNode)(o,{name:"share-o",style:{color:"#7D3AED","vertical-align":"middle"}})])]),Sb,Eb]),(0,u.createElementVNode)("div",Ab,[Cb,Ib,Pb,Nb,Db,(0,u.createElementVNode)("span",{class:"fs14",style:{cursor:"pointer","font-weight":"600",color:"#04c160"},onClick:t[0]||(t[0]=(...t)=>e.copyInfo&&e.copyInfo(...t))}," link3service "),Lb,Ob,Bb,Ub]),(0,u.createElementVNode)("div",{class:"fs14",style:(0,u.normalizeStyle)([{width:"100%",height:"160px",position:"relative","background-size":"cover","background-repeat":"no-repeat","text-align":"center",color:"#000","font-weight":"500"},e.bgStyle])},[(0,u.createElementVNode)("div",Vb,[Rb,jb,Mb,(0,u.createVNode)(l,{click_url:e.link3PreviewPageUrl(""),button_content:"免费制作Link3聚合页",button_more_content:"更多"},null,8,["click_url"])])],4)])],64)}var qb={props:{},data:function(){return{}},computed:{link3PreviewPageUrl(){return function(e){let t=p.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}},my_link3_username:function(){let e=window.location.hostname+window.location.pathname;return e&&e.length>30?e.slice(0,30)+"...":e},bgStyle:function(){let e=p.v.qiniuUrl+"/others/open_in_browser/forbid_page_bg.png",t={backgroundImage:"url("+e+")"};return t}},methods:{copyInfo:async function(){(0,Ce.Z)("link3service")?ce.Toast.success("已复制"):ce.Toast.success("复制失败")}},created(){},mounted:function(){},components:{CreateMyLink3Button:a.Z}},zb=qb;const Hb=(0,_.Z)(zb,[["render",Fb]]);var Wb=Hb;const Gb=e=>((0,u.pushScopeId)("data-v-16d183f6"),e=e(),(0,u.popScopeId)(),e),Xb={style:{flex:"1",height:"100%",width:"100%",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center","overflow-y":"scroll"}},Qb={style:{flex:"1","text-align":"center",width:"90%","max-width":"720px",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center"}},Kb=Gb((()=>(0,u.createElementVNode)("div",{style:{"margin-top":"40px","margin-bottom":"30px","text-align":"center"}},[(0,u.createTextVNode)(" 出错啦，^^"),(0,u.createElementVNode)("br"),(0,u.createTextVNode)("Page is gone. Please reload ")],-1))),Zb=(0,u.createTextVNode)(" 刷新/Reload "),Yb={style:{width:"100%","text-align":"left","margin-top":"10px"}},Jb=Gb((()=>(0,u.createElementVNode)("h4",null,"出错原因：",-1))),$b=Gb((()=>(0,u.createElementVNode)("li",null,"1.您访问的聚合页面的所有者(商家、大V...)修改了网址，每个人都可以用Link3制作一个聚合页面;",-1))),ew={style:{"padding-left":"20px","padding-top":"10px","padding-bottom":"10px"}},tw={style:{"font-weight":"200","font-size":"10px"}},iw=Gb((()=>(0,u.createElementVNode)("strong",null,"若已购买页面所有者的商品，找回页面入口方法：",-1))),nw=Gb((()=>(0,u.createElementVNode)("br",null,null,-1))),sw=(0,u.createTextVNode)(" 请"),rw=["href"],ow=(0,u.createTextVNode)(","),aw=Gb((()=>(0,u.createElementVNode)("br",null,null,-1))),lw=(0,u.createTextVNode)(" 进入"),uw=Gb((()=>(0,u.createElementVNode)("strong",null,"“我的”",-1))),cw=(0,u.createTextVNode)(",点击"),dw=Gb((()=>(0,u.createElementVNode)("strong",null,'"支出"',-1))),hw=(0,u.createTextVNode)(",找到商家的"),pw=Gb((()=>(0,u.createElementVNode)("strong",null,"新的Link3页入口",-1))),mw=(0,u.createTextVNode)("。"),gw=Gb((()=>(0,u.createElementVNode)("br",null,null,-1))),_w=Gb((()=>(0,u.createElementVNode)("li",null,"2.页面本身不存在；",-1))),fw=Gb((()=>(0,u.createElementVNode)("li",null,"3.你使用了代理上网，请关闭代理后刷新页面；",-1))),yw=Gb((()=>(0,u.createElementVNode)("b",{style:{"margin-top":"14px","text-align":"left"}},"注：Link3是一个为创作者(商家、大V、个人等)制作个人页面的平台，每个人都可以用Link3做一个聚合页面。",-1))),vw=Gb((()=>(0,u.createElementVNode)("h4",{style:{"margin-top":"40px"}},"接下来，你可以",-1))),bw={class:"link_button",href:"https://link3.cc",target:"_blank"},ww=Gb((()=>(0,u.createElementVNode)("span",null,"注册/登录Link3",-1))),kw=["href"],Tw=Gb((()=>(0,u.createElementVNode)("span",null,"Link3官网",-1))),xw=["href"],Sw=Gb((()=>(0,u.createElementVNode)("span",null,"查看帮助",-1))),Ew=Gb((()=>(0,u.createElementVNode)("h4",null,"更多",-1))),Aw=["href"],Cw=Gb((()=>(0,u.createElementVNode)("span",null,"不良信息举报",-1))),Iw=["href"],Pw=Gb((()=>(0,u.createElementVNode)("span",null,"提交失效Link3页面",-1))),Nw=Gb((()=>(0,u.createElementVNode)("div",{style:{"margin-top":"100px","margin-bottom":"10px"}},[(0,u.createTextVNode)(" 举报、纠错、咨询Link3、入群"),(0,u.createElementVNode)("br"),(0,u.createTextVNode)(" 扫一扫，添加Link3官方客服 ")],-1))),Dw=Gb((()=>(0,u.createElementVNode)("img",{src:"https://qiniu.production.link3.cc/others/guangfangkefu.jpg",alt:"",style:{width:"170px","padding-bottom":"160px"}},null,-1))),Lw={style:{position:"fixed","z-index":"10",bottom:"0px",width:"100%","text-align":"center",background:"#fff"}},Ow={style:{position:"fixed","z-index":"10",bottom:"66px",width:"100%","text-align":"center"}},Bw=Gb((()=>(0,u.createElementVNode)("p",{style:{"margin-top":"24px","margin-bottom":"4px"}},"Link3.cc是人人都能使用的",-1))),Uw=Gb((()=>(0,u.createElementVNode)("p",{style:{"margin-top":"4px"}},"新一代互联网聚合分享营销工具",-1))),Vw=Gb((()=>(0,u.createElementVNode)("p",{style:{"margin-top":"12px"}},"加入Link3.cc，用一个页面实现你的推广需求！",-1)));function Rw(e,t,i,n,s,r){const o=$t.z,l=U.J,c=a.Z;return(0,u.openBlock)(),(0,u.createElementBlock)("div",Xb,[(0,u.createElementVNode)("div",Qb,[Kb,(0,u.createVNode)(o,{plain:"",type:"primary",style:{"border-color":"#EBEDF0",width:"150px",height:"50px","line-height":"40px",color:"black"},onClick:e.onRefresh},{default:(0,u.withCtx)((()=>[Zb])),_:1},8,["onClick"]),(0,u.createElementVNode)("div",Yb,[Jb,(0,u.createElementVNode)("ul",null,[$b,(0,u.createElementVNode)("div",ew,[(0,u.createElementVNode)("div",tw,[iw,nw,sw,(0,u.createElementVNode)("strong",null,[(0,u.createElementVNode)("a",{href:e.link3PreviewPageUrl(""),target:"_blank"},"注册/登录Link3",8,rw)]),ow,aw,lw,uw,cw,dw,hw,pw,mw,gw])]),_w,fw])]),yw,vw,(0,u.createElementVNode)("a",bw,[ww,(0,u.createVNode)(l,{name:"arrow",style:{"flex-shrink":"0",width:"16px","padding-right":"8px"}})]),(0,u.createElementVNode)("a",{class:"link_button",href:e.link3PreviewPageUrl(""),target:"_blank"},[Tw,(0,u.createVNode)(l,{name:"arrow",style:{"flex-shrink":"0",width:"16px","padding-right":"8px"}})],8,kw),(0,u.createElementVNode)("a",{class:"link_button",href:e.link3PreviewPageUrl("")+"/help",target:"_blank"},[Sw,(0,u.createVNode)(l,{name:"arrow",style:{"flex-shrink":"0",width:"16px","padding-right":"8px"}})],8,xw),Ew,(0,u.createElementVNode)("a",{class:"link_button",href:e.link3PreviewPageUrl("")+"/reporterror",target:"_blank"},[Cw,(0,u.createVNode)(l,{name:"arrow",style:{"flex-shrink":"0",width:"16px","padding-right":"8px"}})],8,Aw),(0,u.createElementVNode)("a",{class:"link_button",href:e.link3PreviewPageUrl("")+"/reporterror",target:"_blank"},[Pw,(0,u.createVNode)(l,{name:"arrow",style:{"flex-shrink":"0",width:"16px","padding-right":"8px"}})],8,Iw),Nw,Dw]),(0,u.createElementVNode)("div",Lw,[(0,u.createElementVNode)("div",{class:"fs14",style:(0,u.normalizeStyle)([{width:"100%",height:"160px",position:"relative","background-size":"cover","background-repeat":"no-repeat","text-align":"center",color:"#000","font-weight":"500"},e.bgStyle])},[(0,u.createElementVNode)("div",Ow,[Bw,Uw,Vw,(0,u.createVNode)(c,{click_url:e.link3PreviewPageUrl(""),button_content:"免费制作Link3聚合页",button_more_content:"更多"},null,8,["click_url"])])],4)])])}var jw={props:{},data:function(){return{}},computed:{bgStyle:function(){let e=p.v.qiniuUrl+"/others/open_in_browser/forbid_page_bg.png",t={backgroundImage:"url("+e+")"};return t},_qiniuUrl(){return p.v.qiniuUrl},link3PreviewPageUrl(){return function(e){let t=p.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}}},methods:{onRefresh:async function(){location.reload()}},created(){},mounted:function(){},components:{CreateMyLink3Button:a.Z}},Mw=jw;const Fw=(0,_.Z)(Mw,[["render",Rw],["__scopeId","data-v-16d183f6"]]);var qw=Fw;const zw={style:{height:"100%",width:"100%","text-align":"center",margin:"auto"}},Hw=(0,u.createTextVNode)(" 正在进入..."),Ww=(0,u.createElementVNode)("br",null,null,-1),Gw=(0,u.createTextVNode)("loading... ");function Xw(e,t,i,n,s,r){const o=et.g;return(0,u.openBlock)(),(0,u.createElementBlock)("div",zw,[(0,u.createVNode)(o,{vertical:"",style:{"padding-top":"300px"}},{default:(0,u.withCtx)((()=>[Hw,Ww,Gw])),_:1})])}var Qw={props:{},data:function(){return{}},computed:{},methods:{},created(){},mounted:function(){},components:{}},Kw=Qw;const Zw=(0,_.Z)(Kw,[["render",Xw]]);var Yw=Zw,Jw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABItJREFUWEfNmHvo31MYx19vyj2kuY/czS1F2VxGxqTFXFKT1NJyV0z7Q64ZzS01oolI5NI0l2lJ1tzlOimKhuQeyj13b73nfNfx3ff7+X6+++3XPH9+zvM85/U55znPeZ4jWoptAfsDxwHjga2ArYGNga+AL4BPgaeAhZI+a+m6US2TNort9YELgHOBbQfpl3EDrwJXSVrU0qanWiOg7RnAbGCbEUzyHHChpDdWxUdPwLJqdwEn93Ca1VkKvAt8CfwAbFG2PFs/tofN78DZkuJzKFkJ0Hbi6vESb7Wzj4HrgUckfd5vFtuJ01OBs4D1uvRuAmZKyk+2kv8A2t4AeB7Yr7L+FbgUuEXSb628Ara3A24ApnXZXC3psrZ+VgCWUzofOKkyzkk8XtLrbR1269meWUDXrsZOkfRAG581YLZkXhfc+NWRLmwnlmugX4DdJX0yCHI5oO2NgPeBLYtBHExc1ZPXa1LbVwKXV2P3SJreFjCppI6LWZJuHGQ8zHgJoZeBA4rd34l1SW81+ZHttYCcys7qfQSMG+ZAtAW1PRFIXuzIPEnnDAI8GHihUjpP0q1tJx1Wz/azwKHFLgsztintZAWTCmYVg+SnGPTNc8MC9TjV5wNzq+8TJL3Sz28AFwNHFIWlkpJoR01s7wR8UE2QG+a2JsB3gD2LwnxJ3Yl1tcKWmM/V18mLsyVd0QT4LbBpUbhZUrZgVMV2LoBOAXKHpDOaAJPzOnfmdZIuGlW6f/NutjhbHblPUu7unpIY/BDYsYy2Sp4j/QHbPwO59yNzJeU67Av4InBQGV0safJIAZrsbSecElYduUTSnCbAe0t5FJ382RhJqWBGRWyfCCyonE+R9EQTYE7tg5XCVEmpB0dFbNcL8gewmaSfmgDT9HwNrFOUFkk6ZjTobOc6zQHZsPhfIqmTg3vHYL7afhg4odKYJOnp1Q1pOwn5zMpvas3HmubplFt7AakqOskzyTtXUN+lHxbe9iHAM9Ucy0pRkqqmr9QF6+3A6ZVm4jB/2OigDajtHUobunmlf7SkJwfZ14AxTmm/fWV0PzBjJKfa9rjShO1S+b1b0mmD4DLe3TTtCyQvdoI4OoGeJikJfSixnbi+u7w+1LZp6o+S9P0gh73azmOBh4B1K+Nc7ulX5kjKM0ej2E7VfA0wqUGxFWS/xn1C+t/SjNdz/FXa0oWlcc97TKdxTz99YHm72W3QT5Tx18pKftdPv+/Th+28wySpHt5ysn5q6aXTsKed7RQItW4jZJvHoynAtcA+Q4L+CTwKXCxpme08iSTN7NzDT+J8sqSVVnIgYJyVIvMwYGrZwk710z1Xrq6sSNLHnd09dYHMBVCf6I6PPC4d2Q3ZCrCbwnZSUmIub4SblOrkG+A9Sakv+0oJnUDu2kMpkFnJFdXOKgEOudUrqdtONR3IXocpL2dZyeWQawSwhE12YEmuux4/vAJyjQEWyIRIIPfoAfnm8pUc6XaN1L6UYIHsdJa1ywVrHLCsZF5oA5mqqpYf/xeABTKZIZB7V4Qv/W8AC+QYIEXtUcDbwPR/AIy3icMWKo5nAAAAAElFTkSuQmCC",$w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABLlJREFUSEu9ll1sVEUUx885M0shxIqAQaREYgxqDBCCRjEqRhKLYOILwZj4se3O7JauTVpfNGhMeRCMiWmMsvbeOxQVX7T6oEAg+oTRYGIiGlEe0PDlV4Nimoba3XvvHDPrXbKWu2X5ch7vOXN+c/535pyDMMXq6+ubPT4+vjyO48cAYAUiLgCAVgD4GQBOMPPHzLy7tbX1l4GBgb+nijXZhmnOHR0dC6WUeWbOZTKZ+dba1JiICM7GzHuZ2TPGfNQs/Byw1noVM78LAG0uMBFVY8Vx/BUAHCGiUWZeiIgrhRBzoiiq2pm5DAA7jTG6Gfh/wFrrdmbeAwAi2Xycmbe2t7ebDRs2xJMD5vP5Jcy8mZkfRMSZQgiIouhTIlrn+3441QHOgpVSDwDAJ4goEglfttZuGRoaGjtfBolKA0KI5W5vFEW7RkdH1w8PD1ca7a2Cu7q6FkVR9DkALHDSMvMjQRDscgqeD1qzK6XmAcAwIt7LXN32vDFmy1RgVEo5h+ecEyJuDYJgU7PAej+l1K0AsB8ArgWAX4nodt/3f0uLhcVicU65XD6MiM75WBzHS5uRt9HBlFJFKeUbTvIwDBtmjYVCYQ0R7XXPIoqiru3bt3sXk239Hq31UURcZK390xgzNzVjrfU7RPSEM65evVqm3d4LPYhSapOU8iWXtVPQ9/3vzikgWutviGiZtfbrIAhWXCgkzV9rfVsmkzkUx7ErMB1BELyVBj5NRNdYa98PguDRywFWSrniczJ5lv3GmM1p4HEimsHMb/u+n70c4M7OzuuFEA7syt4rvu8/mwY+TES3WGv3B0Fw/+UAb9y48UZE/CmRujcIgtfOASul9hDRWmutNcbUSuUl8bXWWSnlDldImHmV53mfpWWcFULscAZmfsjzvH2XRAUApdQXRHS3i+P7fmoHdFXLXYSjACCZ+YAxprrhYlehULgPEfe7bOM43mGM6Ux9x/l8PmOtHULEx5k5QsTOIAh2Xgw4m81Ol1J+CwCLk5a62PO8I6lg97FQKKyM43gvAFyNiH8R0T2e5/1wIfCenp6WiYmJ1wFAJ01isK2trae/v//fhj1pndVfa/2MlPLV5CaOCCGe9jzvg2bguVxuNhENIOKTybQyQUTrfd93vT11TR4EXpRSbnZTBTNXEHEfIuZ83/+jUQCtdacbBhCxLcm06srMxxDxLmPMyJQZ14yuzgLAC4g4w32TUrouc4CIPrTW/iilHA3DsDr6uHshhLiqNv4AwAQATHf7kr5+KpPJLC2VSr83lLreoLV+mJmLQog1yemrgdyFqa1kyAM37oRheAoR37TWHkTEABHnuuydPzMfb2lpWbdt27bv6xmpb8w59PX1zRgbG1tGRFlmfiqTyUyvnzbdQSqVykEiKkkpd5dKJScp53K5mxDxECK21El/Ytq0aXfWZ94QPFma3t7eWWfOnFkkhJgVRdGIMeZwo//uSmYYhl8mk0g1c9ebhRBLahNJ0+Bmbvek33UHALi5bV6d7CellGsHBwcPXTGwO0QyRDrZZ9bJ7uArryjYwYvF4g3lctnJfl3ttltrD1xxcJL58iiKXBecn3Ss0/8L2MG7u7sXViqV9wDgZvf+/wG6vTcTwpzRLwAAAABJRU5ErkJggg==",ek=i(5717),tk=i(2459),ik="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAYKADAAQAAAABAAAAYAAAAACpM19OAAALHUlEQVR4Ae2dW6wdVRnHOeVibbkWsBVb2kCAKhITAzWQcLPBAoltQSAQjFVUpK1Kow8WiCaVF24PUCAEE31B8cHEakL0QfHCpWCktsa2UiilRcMRShukF0rB1t//nJmTfaazvrXW7DX77Dl7f8k/M3ut9X3r//1nZq+ZNWufc9hhDbODBw8eD74Hngc7MvyF7XJwfMPSaRZdBJ4LdgKXqe6zzcqqIWwRdh7Y71K+pVxtLmtIWs2giaDHgn+1iOzbfU0+TchuQhNIwvG7YHoE1xmZT4RLv2mpApzJk4EG21iTz+TSoF1U2IQr4OvoNaWCZvKRb9+qKsAZfCTQ97nL/kiF4DL5Hlm1/573Q7xFLmWz8svZCpYt6nkhqwiAogNgg6HsujwubdYZ7RRjIG/b3wYqgGjzDVFVdUMeSvuetvPztv1toAII+qwh6hbqDs9DaR+ozGXP5m372wAFUPFCl5JZ+ZJiGMqXeHwuLPr0PzsUQMgnDDHfoO7DRVeVgTcNvyeKPv3PJQog4DnggCHkHSVuQ0X43GH4KeYnXb798kwBRHrMEHEXdSe4xFIdUBuXPeby7ZejAKrNBO+71KP8Pp9QamP4K/ZMX4yerUeclYZ471H3MZ84agPU1mUrfTF6sh61TgJ7XKpR/uNQYdTWiKM+TgqN1TPtEGWFIZoG0LNCxaDtbGAN5CtCY/VEO8TyTTn/MlYIYq4CLmvEVHVszpXbo9Iyl1JZ+ZzY4Ph9xhNzWWzMcdkekbxTzlUTJ/afjIPQn6qWsAi0yBBJVfPaOAC+qeovVY09LvwQ1zflvLbdROnDmqpeLw7t9tFYf5L3TTlf325y9OGbqv58u3001h9xrCnnV6gfmXKumqRigC3AZWM6VX1E1cRi/cj+GHzOBLOB7uk1MXYBcNl9AwMD/3NVhpYrBn1rCuNhh88F1Os2dz14EWwCL+G3i23tlvT7j0S0ykJzLRI4Ry74KRHZvKk4iLAvwsfZFF6avt4GTnY2OrTidYryA6KDIujza/A6wDaJVboCSEirzooC6/MZYGICZg+kEl9ciPUunDUHdGcEN50wQnGt6T5ivUx5fkDyg7OJft6JiD/U1HkF0InO5lkgP4MlcL4/jf267D8Enk0y/03ZAflo5bTO4Kkp4xZiDfJ55ICwn19BW8nHf9VA8kRwO1gNdKQ7bZq/ubqQVLKPxL4GWHNEdeUrLXXDcRuYUpoQFQuB9UqP6lpNc/U3lZJLWEgfXwMf1JqJHVyvVBeMSomCK4H1IsQO2V7tXtw1cXb2KFI1flBf4FdAY8NYmLS+UinqSfQ4tltB3b8ueZ8+XgH5d6S+H4W1fD/uY9txI3fdHX0atI5v2j8N1L2k8W36mKUD8H12fghS2VsEygef1juFLQj9QapO6oyDJro7PB0UD4w+p3yZ8wMdgNUEPR/EmM7mzSA/m0eERuSdMYGa1ha9ToSzDkTx4OiAxV41z+kA6N5VT6lltp3CsrP51aaczWVJ1VGWXTX66ioeGN26u66aXZoO3g5ctrgOsr0UE2EXu8SlfLsOwBqjge6Zv9pLgqXMFe1uAtZzxxodAD0cWKbJrC+mJNYLsdDsRiDtLFuuAzAV6CW1ZXpwua4XhEuRI1pdC3wPe2/RZnhahB29GLEuFaqHHtRGP8GlYDvOYqDTArBfghkmreePSp2CpYZDXqUVZ1eMcux/GFFA2gBp5LOlI06tO3h9x+dJvR7f57b69feHFhfMzbTxSajfPLsNb82G+kzL+y5yR+mtGmkBrGWVuZ63BylD6xW5h7HVMvDYJ+ig/pvUSBoAa0l8LuGKqLzwujv3NLZvU3duVOBx1Fi5A2ngs7srpU3U+32Rqdct7KcqddBgJ+Wc5c7GtPvbSpPQj5jhhyv1IucTbXXUIGflCkJeXj3Sdlp0pAm7nwCfDdJAy07GtSlHoFx9Js2c79yjRCLQBPAzX4/U/xtoRnBcmnLLcmRj2k+pnZBUBAJqhdkvzG6HK7eyOTVp510QTDkB5eYzaXR4LZQJrKXkv/YxoH4ziFmIVQvfVEGVS5YTG9OkTexLmTiadHAU+K1JY7jyRTZ1rsGJI16xtXIAysVn0uSoit3EudHRRPCkjxH1/wCut0FxnY5Ba3HPcmBj2u+pndhRinQ4GTxl0hquXMum7hUXyXMXZyDuPpMGk5ITCAlIx8eA53wMqf8NSHNLFkKszTbimnFmY5pyd71Pb5NFoDsEdKa8YNIcrmzMX66C7qKAfJSz1lSNvUFkCvi7h/SasWcaxoA8/ubJRbmWr/EM6yJ9KwidDDYaxA9QN7aXa0Da4gjE1WUbqIj5nUFAr4maQOyjQE/DLuv6+SKIn+0iT7lym5ZIrqEwSR+XWaw1SNS9BkGrznDraJXFcQ856vcLySzpnQlnhx5ElEDZo7jWhU4iAS1r7FoLyGEyOexPlUDSKwBSWpZXJr74bu528UUyE1frXstMi3aTzvimPgAfL2OdlW006rqtyuKadBxLfQAscv/sNpUNPhZX6yQzQpZXpT4AFjnrrCpnN3alFlfrJItmnPoAWOSssyqaeM0OFlfrJIumlewuiLsHDb57wIdKWByk7GgGuL0ldV1XRC6TILUblOnzHuW6E2r7V/xKPOUVcDrxysRXP/qdbCPEF9mM6zbtl5hyPK2kvFJRygNgXZrWd2ol4h1wsjhbX7VR1FIeAIuU9Z0aRbiDjS3O1skWRTHlAbBIWWdTFOEONrY4WydbFMWUB8AiZZ1NUYQ72NjibJ1sHaSYdcVdg94g7QYu644XFxHSkIheNLlMi3HL7pAiehhumuoK0Dog17+Mep27imR/+YTENV9/C9CL8FczaP8bINn7Bjjrl+yDDkWPpnyGo67zxSRu/XXC36VgRB9ak/QtoN9WuWw7Fd8ESdbmEEcH1mWXp8gr1RVQ6/c/Ciwk2Q1gJdAv1V2mJTAPgvWZj6tdaHnt40CqA2ANStbdhCkEIs4BT9FoFTjDbDy6UlPGq+QLzhtdFfXJ4m6ddFGdtN2YJPXHiFx2cWwHBJoFHgfWu1lXf8VyxdDCYv0tuyjD55JisJbPz0QFq7MxpHa2ECvuBr/AxvE4cA+o4691KaZ+9RN8R0bbjwCX7ahT0+DYsJvmYki5/nSN12gXMsAa3URVaRDXYB40UNNuhxF9qje5uhtA7lKDoL6/TcP3KvCSEcNVpQWzCzJscjUyytXnVSY5KmnztBHjUp9/7fWQW2oQfNRFAB8NsFZyrrD5rebIn9yk4RFAZ7XqYk0D9RyD54+MgEtcfh0rh9xDBsFbi0RoqwH25yB2gH0Xn7uA/mZpqVGnMUTf82obY+KiQX9WMTBly4xADxXbd/wz5P5gEPxcTog2erS/F8QOsPldTPCvbuhjJtCdT+xBFjfdBIys5mZ/HnDZk3l+Y7aF2aCLHeXTgQbYbwPrCZbqUvszpedWTU6+QDFiTVzFWdxnGM6uqYqqlOP9IOf6c5fvUPcF8LKRgKtKg+qCeDblHsRaCKoO1Ffj6/olfLIFWuXMA0ohl9IOGWADKAQ1gaQGas0TVRmoXTkeCOq8zkYw0+1gu5YPsMEPSVVzgmjVgbosR2uuqCrFOD9YrSxjFliWD7DR0wRxLA9tDb+ZoMpA3ZraA4dG7nAJbDRIhfypllbi2m9rgE2VJjyqDtTKeXoqHm3FgcjNIPSWT4Ohppe7yuCkp+rQgVq53txtCXwZUtaVUNsAm0oI+IcM1MrxK6n6TBoHYlOBHrbWgL3gDbAaLAbOJ9ikJBIEE1eg157PAD3n7AZ/BXpISzoB939O4IVSn2UniQAAAABJRU5ErkJggg==",nk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAvCAYAAABpG3MiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAI6ADAAQAAAABAAAALwAAAAB9TK6mAAACz0lEQVRYCe2YO2gUURSGMzGCJrBGQUR8NtEmK9r4ABGsoq2N1oqVIEFtFESTVuwULNJaiCBYqSBKJK5gLBQhIGl8YYwgvo0SdP1OnDv+O+zO7sx1d0Xmwp/7n3PPPf/ZM6/MdHR4jHK5vBBcBNNgv0cqv62I94BbQMegX9YMu1EvgDGtQvjxDCmzbUF0Mbgv4tXocLbsKXahuhQ8FPV7wp/Cp8Q+kyJ1ulBEloMJEbsBL4r9CN4P3orvHDxIp1QnmoSrwKSIlODdYKP4Ji0N9mbwSfwj8M46Eo0vk8y64IZ1oDcU3uKczM9dRvhOMCNrB9xa0txoxd/DJPbrB4IgeB/aeggizvpt1veC2TBuJpz9J36h3VMGwCLNhr0VuPFC14yzsB5si/ubYiOUWExa0UYPU9q8meK7dBe/dCX2drACdIPoPIDbGOd8uPab1v9LvqNE9cQif2J/AE/AXfJ9qVhn0xJwCfwASeO8biQw8TCx/iYpGWvvwBGXswtjAcZNsMk5WzjbLeIsNRTo0Gk7TAeBFmKX4Th4BeLjQdxRx77CesUViD0frANF4MYJChqxy28UuGF32TUuot5MbOJhStrP3j1gFrhxyK6mftk0RLueid00io517aoIFK2YuVt76Hwsi62gqtdrxei95msrKhAN97gw1zwtRGLaQ/NiavU970zemVodqOX3PWc+SmLl4m6cehXDLX0CqWEwBg43Lls9suKfq+ohyV4KOkWEwXt4dcZbPZYgLybWkMjMOxO1IkbyzsQaEpn/XGfcFwarcFlUZmtIQWS+WWemxbFbeFMp7yemrXqv7XFQAqtD5WME2QPvMpgKfX97ci9xJ0m8QZKXAsR34BgVZzuovav1dfKguwMZakcFoaZ9kdhHHX9eW+jQLnAdfAatGC8RuQDWukYEjriZRTux7GW92vcZF+Yzz32foROV32V8Mv73e38B5a7HJeVkRvQAAAAASUVORK5CYII=",sk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAvCAYAAABpG3MiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAI6ADAAQAAAABAAAALwAAAAB9TK6mAAAD30lEQVRYCe2YS0iUURTHnZf5Qi2QkMxVCUGjFAQRYUJG2kIrsswXRBRB0CYhCqLXulZRi6SFT0IQy6DMwgyzh218IEhtDCrbpKPlmI+x3xnn+7gzzDifMzYGzYU799xzzz3//5xz5n7zXVNMGK2kpCQ+Li6uBhf5JpPpYm1t7f0w3MVYQt1cWVmZaLPZHkOiiJ6In+Ls7GxHf3//21B9hkSmvLw82Ww2PwU0VwWGVAGEZiDUreqNyssmU1ZWttZisXQAvNMfCPq9drvdAqFOf+tL6ZZFhhpJi42NfQHgdo9TSUmGyAsLCyPopxGTGPfk5OQk9fX1dcia0WY2alhRUZFOsXYBlOPZ82x+fv60th+9A0L7mP/w6Kqpq9vIJs0m2GiITGlp6UbAXtG3iENA34yNjR1i1COLnFBXVzc4NzdXiPxT7LA/C6F7iIZwDBmRmhocbxIAWv/k5OSBtra2KWpnzaLKDeyWGxsb3xOxIvSSMiF0EkInNLulRkNk+Ka/PU4+Op3O/a2treMyd7lcegqw0WUIdbJ2DJNZsYOQU8ZgzRAZnBwHrAAiO5qbm0eDOZX1+vr6RxCyI+7iMGw0ssdqxIha+IVduxFb1QZCw+o8mGw0MsH8rMi6V2Q4WTM4WXfjeQN5TlDrQNAIe29DQ8MTo8gU7nls5VGhNhe+HRT5MFivPVF3r7vJcJiti4+Pv4vmCF2PFptUJ1KId1AYJoP9BezTvJx4JvwSRRqvqqq6QU3dkok5Ly+PsyzuOfJRmdMj2VIBuwmhqwJqzczMPMW4TSbSSI2Tb9TL+HVR4/X5wWsWfNKCnxQfMxv+s9DJL01rlyiRGkmTpMbd2PiJXOZzToxounBGwn8m0H7q6TBrDyAmHGzUT7GkZau2gQK9tlJENJ+BRgq3hbWH2jqk7EJG8uZuKAY0ORIjmdDxkFOFjF60RGYqEiQUDPfjQuYEwqITUQxWTYySCRT6aGSikQkUgUD6cGtmQnGsyorauBgWGf7bDHFyXqd3c2CeMw7r39Lrz5V/k6W1PGOuYCE97BZWZMJG93EQJeMTEH0ajYweCh8hGhmfgOjTfy4y2g1DjNVqXa/TjIDAG0GyAjNt5ij/rigKFflvi5IVFW9UHgc99ExBhlg112UTPGeaZ2dnv4lupRsXT/KOlMUf8Mv4ztb8877WY+L2Mpf0dGnK1RgJwsjQ0NBmy8DAwAg3k/KGn7caRMB0kImD7e3tn91XAVyRvuTu9h0LcmOQTghjI0DsCxhNMzMzFU1NTYOC533nscjATOpSqJkE8utvfdEqxE9qw8U1v0O9lwnR1X+07Q8n00L2x/mRbgAAAABJRU5ErkJggg==";const rk=e=>((0,u.pushScopeId)("data-v-f810305a"),e=e(),(0,u.popScopeId)(),e),ok={style:{width:"100%",height:"100%","font-size":"14px",color:"black",position:"relative",overflow:"auto"},class:"realpreview-contnet"},ak=["src"],lk={style:{display:"flex","flex-direction":"column","justify-content":"space-between","align-items":"center",height:"100%",overflow:"auto",position:"relative"}},uk={id:"preview_container",style:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center",width:"100%",height:"100%","max-width":"800px",margin:"auto",position:"relative"}},ck={style:{width:"100%","margin-top":"23px","margin-bottom":"8px",display:"flex","align-items":"center","justify-content":"space-between"}},dk={key:0,style:{width:"18px"},src:Jw,alt:""},hk={key:1,style:{width:"18px"},src:$w,alt:""},pk=rk((()=>(0,u.createElementVNode)("img",{style:{width:"18px",height:"18px"},src:ek,alt:""},null,-1))),mk=[pk],gk={style:{width:"18px",height:"18px"},src:tk,alt:""},_k={style:{width:"18px",height:"18px"},src:ik,alt:""},fk={key:0,style:{height:"18px"},src:nk,alt:""},yk={key:1,style:{height:"18px"},src:sk,alt:""},vk={class:"fs14",style:{cursor:"pointer"}},bk={key:3,style:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center","margin-top":"14px","padding-left":"5%","padding-right":"5%","white-space":"pre-wrap"}},wk=["onClick"],kk=["src"],Tk=["onClick"],xk=["src"],Sk=["onClick"],Ek=["src"],Ak=["onClick"],Ck=["src"],Ik={style:{flex:"1",display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start",width:"90%","padding-left":"5%","padding-right":"5%","padding-bottom":"20px","margin-top":"14px"}},Pk={key:4,style:{width:"100%","padding-top":"30px",display:"flex","flex-direction":"column","align-items":"center"}},Nk=["src"],Dk=["src"],Lk={key:0,class:"flexC fs12",style:{"padding-bottom":"12px"}},Ok=rk((()=>(0,u.createElementVNode)("div",{style:{height:"100px","min-height":"100px",width:"100%"}},null,-1))),Bk={style:{position:"relative",width:"720px","margin-left":"auto","margin-right":"auto"}},Uk={key:0,style:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"flex-end","padding-left":"5%","padding-right":"5%","padding-bottom":"30px","padding-top":"30px","box-sizing":"border-box",width:"100%"}},Vk={style:{"padding-top":"8px"}},Rk={style:{"padding-top":"4px"}},jk={class:"miniprogram main_container flexD flexBC"},Mk=rk((()=>(0,u.createElementVNode)("div",{class:"title flexC"},[(0,u.createElementVNode)("span",{class:"fs16 bold",style:{"line-height":"18px"}},"收藏成功")],-1))),Fk={class:"fs14",style:{"padding-top":"21px","padding-bottom":"12px",color:"#696969"}},qk=(0,u.createTextVNode)("请使用"),zk=rk((()=>(0,u.createElementVNode)("span",{class:"fs14 bold",style:{color:"#333"}}," 微信 ",-1))),Hk=(0,u.createTextVNode)("扫码打开小程序查看收藏"),Wk=[qk,zk,Hk],Gk={class:"item_container border-box flexC"},Xk=["src"],Qk={class:"buttonzone flexC",style:{width:"100%"}},Kk=rk((()=>(0,u.createElementVNode)("span",{class:"fs16"},"取消",-1))),Zk=[Kk],Yk=rk((()=>(0,u.createElementVNode)("span",{class:"fs16"},"前往小程序",-1))),Jk=[Yk],$k={class:"buttonzone flexC",style:{width:"100%"}},eT=rk((()=>(0,u.createElementVNode)("span",{class:"fs16"},"关闭",-1))),tT=[eT],iT={style:{display:"flex","justify-content":"center"}},nT={style:{display:"flex","justify-content":"center"}},sT={style:{width:"320px","min-height":"220px",background:"#FFFFFF",color:"#000","border-radius":"4px"},class:"flexD flexLC"},rT={class:"fs14",style:{"line-height":"14px","padding-top":"16px",color:"#7F7F7F","max-width":"280px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},oT={class:"bold fs17",style:{"padding-bottom":"0px","padding-top":"22px"}},aT={class:"fs14",style:{padding:"8px 10px 0px","line-height":"18px","max-width":"280px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},lT={class:"fs14",style:{"font-weight":"500",padding:"8px 10px 0px","line-height":"14px"}},uT={class:"fs14",style:{padding:"22px 10px 0px",color:"#7F7F7F","line-height":"14px"}},cT={style:{"font-size":"17px",color:"#FFFFFF","line-height":"26px"}},dT={style:{display:"flex","justify-content":"center"}},hT={class:"flexC buttonzone",style:{width:"100%"}},pT={class:"fs16",style:{color:"#7F49FC"}},mT={style:{display:"flex","justify-content":"center"}},gT={class:"main_container flexD flexBC popup_container"},_T={class:"title flexC fs16 bold"},fT={class:"item_container border-box flexC",style:{"flex-grow":"1"}},yT={class:"flexC buttonzone",style:{width:"100%"}},vT={class:"fs16",style:{color:"#7F49FC"}},bT=["href"];function wT(e,t,i,c,d,h){const p=Yw,m=qw,g=Wb,_=db,f=Av,v=Bt.Z,b=U.J,w=ov,k=Xe,T=Me.Z,x=je,S=Le,E=_e,A=L,C=y,I=l.Z,P=a.Z,N=o.G,D=r.E,O=s.Z,B=n.Z;return(0,u.openBlock)(),(0,u.createElementBlock)("div",ok,[e.custom_background_video_url?((0,u.openBlock)(),(0,u.createElementBlock)("video",{key:0,src:e.custom_background_video_url,autoplay:"",muted:"",loop:"",style:(0,u.normalizeStyle)([{position:"fixed","/* 保证视频充满屏幕 */\n        object-fit":"fill"},{width:(e.custom_background_video_width?e.custom_background_video_width:e.video_auto_width_height.width)+"px",height:(e.custom_background_video_height?e.custom_background_video_height:e.video_auto_width_height.height)+"px"}])},null,12,ak)):(0,u.createCommentVNode)("",!0),e.tokenclearflag?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,style:{position:"absolute",top:"0",left:"70px","z-index":"12",width:"30px",height:"30px","background-color":"#7C3AED",color:"#969799","font-size":"22px","font-weight":"bold"},onClick:t[0]||(t[0]=(...t)=>e.clearToken&&e.clearToken(...t))},"C")):(0,u.createCommentVNode)("",!0),"welcome_page"==e.pageStatus?((0,u.openBlock)(),(0,u.createBlock)(p,{key:2})):"error_page"!=e.pageStatus||e.is_hide_share_button?"forbid_page"!=e.pageStatus||e.is_hide_share_button?"middle_page"!=e.pageStatus||e.is_hide_share_button?"open_in_browser_page"!=e.pageStatus||e.is_hide_share_button?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:7,style:(0,u.normalizeStyle)([e.my_theme_background,{width:"100%",height:"100%"}]),ref:"preview_content_body"},[(0,u.createElementVNode)("div",lk,[(0,u.createElementVNode)("div",uk,[(0,u.createElementVNode)("div",ck,[e.is_hide_share_button?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,class:"flexLC",style:(0,u.normalizeStyle)([{overflow:"hidden","margin-left":"5%","border-radius":"20px"},e.share_icon_is_white?{background:"black"}:{background:"white"}])},[e.is_hide_share_button||e.is_hidden_search_icon?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,class:"flexLC",style:(0,u.normalizeStyle)([{"border-radius":"20px",cursor:"pointer",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",color:"#5e5e5e",width:"36px",height:"36px"},e.share_icon_is_white?{background:"black"}:{background:"white"}]),onClick:t[1]||(t[1]=(...t)=>e.showSearchPopup&&e.showSearchPopup(...t))},[e.share_icon_is_white?((0,u.openBlock)(),(0,u.createElementBlock)("img",dk)):((0,u.openBlock)(),(0,u.createElementBlock)("img",hk))],4)),e.is_hide_share_button||!e.bgmPlay||e.is_hidden_search_icon?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,style:(0,u.normalizeStyle)([{"margin-left":"0",cursor:"pointer",width:"1px",height:"10px","background-color":"#646464",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"},e.share_icon_is_white?{background:"white"}:{background:"#646464"}])},null,4)),!e.is_hide_share_button&&e.bgmPlay?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:2,class:"flexLC",style:(0,u.normalizeStyle)([{"border-radius":"20px",cursor:"pointer",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",color:"#5e5e5e",width:"36px",height:"36px"},e.share_icon_is_white?{background:"black"}:{background:"white"}])},[((0,u.openBlock)(),(0,u.createBlock)((0,u.resolveDynamicComponent)(e.BGM),{user:e.user,share_icon_is_white:e.share_icon_is_white},null,8,["user","share_icon_is_white"]))],4)):(0,u.createCommentVNode)("",!0)],4)),e.is_hide_share_button?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,class:"flexRC",style:(0,u.normalizeStyle)([{overflow:"hidden","margin-right":"5%","border-radius":"20px"},e.share_icon_is_white?{background:"black"}:{background:"white"}])},[e.is_hide_share_button?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,class:"flexLC",style:(0,u.normalizeStyle)([{"border-radius":"20px",cursor:"pointer",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",color:"#5e5e5e",width:"36px",height:"36px"},e.share_icon_is_white?{background:"black"}:{background:"white"}]),onClick:t[2]||(t[2]=t=>e.hasFavorite(e.init_favorite_icon))},[e.init_favorite_icon?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,style:(0,u.normalizeStyle)([{display:"flex","justify-content":"center","align-items":"center","text-align":"center",color:"#7D3AED"},e.share_icon_is_white?{color:"white"}:{color:"#7D3AED"}])},mk,4)):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,style:(0,u.normalizeStyle)([{display:"flex","align-items":"center","justify-content":"center","text-align":"center"},e.share_icon_is_white?{color:"white"}:{color:"black"}])},[(0,u.withDirectives)((0,u.createElementVNode)("img",gk,null,512),[[u.vShow,!e.share_icon_is_white]]),(0,u.withDirectives)((0,u.createElementVNode)("img",_k,null,512),[[u.vShow,e.share_icon_is_white]])],4))],4)),e.is_hide_share_button?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,style:(0,u.normalizeStyle)([{"margin-left":"0",cursor:"pointer",width:"1px",height:"10px",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"},e.share_icon_is_white?{background:"white"}:{background:"#646464"}])},null,4)),e.is_hide_share_button?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:2,class:"flexLC",style:(0,u.normalizeStyle)([{"border-radius":"20px",cursor:"pointer",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",color:"#5e5e5e",width:"36px",height:"36px"},e.share_icon_is_white?{background:"black"}:{background:"white"}]),onClick:t[3]||(t[3]=(...t)=>e.showShare&&e.showShare(...t))},[e.share_icon_is_white?((0,u.openBlock)(),(0,u.createElementBlock)("img",fk)):((0,u.openBlock)(),(0,u.createElementBlock)("img",yk))],4))],4))]),(0,u.createElementVNode)("div",{class:"pointer",style:{height:"96px",width:"96px","box-sizing":"border-box","margin-bottom":"8px"},onClick:t[4]||(t[4]=t=>e.popup_user_profile_avator=!0)},[(0,u.createVNode)(v,{width:"96",height:"96",radius:"50",fontSize:"40",user_data:e.user},null,8,["user_data"])]),e.user.profile_title?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,style:(0,u.normalizeStyle)([{"margin-top":"8px","font-weight":"900","font-size":"16px","text-align":"center",width:"90%","white-space":"pre-wrap"},{color:e.my_theme_title_color}])},(0,u.toDisplayString)(e.user.profile_title),5)):(0,u.createCommentVNode)("",!0),e.user.bio?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,style:(0,u.normalizeStyle)([{"margin-top":"4px","text-align":"center","word-break":"break-all",width:"90%","white-space":"pre-wrap","font-size":"14px"},{color:e.my_theme_bio_color}])},(0,u.toDisplayString)(e.user.bio),5)):(0,u.createCommentVNode)("",!0),!e.bio_hide&&e.user.username?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:2,onClick:t[5]||(t[5]=(...t)=>e.copyLink3&&e.copyLink3(...t)),class:"my_link3_class",style:(0,u.normalizeStyle)([{"margin-top":"12px","font-weight":"400",height:"16px",cursor:"pointer","text-align":"center",background:"rgba(237,237,237,0.2)",padding:"10px 12px 10px","border-radius":"23px",display:"flex","justify-content":"center","align-items":"center","box-shadow":"inset 0px -1px 2px 0px rgba(0,0,0,0.04)"},{color:e.my_theme_link3link_color}])},[(0,u.createElementVNode)("span",vk,[(0,u.createTextVNode)((0,u.toDisplayString)(e.link3PreviewPageUrl("remove_http_prefix")+"/"+(e.user.username?e.user.username:""))+" ",1),(0,u.createVNode)(b,{name:"share-o",style:{"margin-left":"4px"}})])],4)):(0,u.createCommentVNode)("",!0),e.should_show_social_icons?((0,u.openBlock)(),(0,u.createElementBlock)("div",bk,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.user.social_icons_links,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:i},["phone"==t.name&&t.enable?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,style:{"border-radius":"26px",height:"26px",width:"26px","background-color":"white",margin:"0 7px",display:"flex","align-items":"center","justify-content":"center"},onClick:i=>e.phoneClick(t.value)},[(0,u.createElementVNode)("img",{style:{height:"15px",width:"15px","object-fit":"contain",cursor:"pointer"},src:e.getIcon("link3_icons/phone@2x.png")},null,8,kk)],8,wk)):(0,u.createCommentVNode)("",!0),"email"==t.name&&t.enable?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,style:{"border-radius":"26px",height:"26px",width:"26px","background-color":"white",margin:"0 7px",display:"flex","align-items":"center","justify-content":"center"},onClick:i=>e.emailClick(t.value)},[(0,u.createElementVNode)("img",{style:{height:"18px",width:"18px","object-fit":"contain",cursor:"pointer"},src:e.getIcon("link3_icons/envelope@2x.png")},null,8,xk)],8,Tk)):(0,u.createCommentVNode)("",!0),"weixin"==t.name&&t.enable?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:2,style:{"border-radius":"26px",height:"26px",width:"26px","background-color":"white",margin:"0 7px"},onClick:i=>e.weixinClick(t.value)},[(0,u.createElementVNode)("img",{style:{height:"26px",width:"26px","object-fit":"contain","border-radius":"26px",cursor:"pointer"},src:e.getIcon("social_icons/weixin.png")},null,8,Ek)],8,Sk)):(0,u.createCommentVNode)("",!0),"qq"==t.name&&t.enable?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:3,style:{"border-radius":"26px",height:"26px",width:"26px","background-color":"white",margin:"0 7px"},onClick:i=>e.qqClick(t.value)},[(0,u.createElementVNode)("img",{style:{height:"26px",width:"26px","object-fit":"contain","border-radius":"26px",cursor:"pointer"},src:e.getIcon("social_icons/qq.png")},null,8,Ck)],8,Ak)):(0,u.createCommentVNode)("",!0)])))),128))])):(0,u.createCommentVNode)("",!0),(0,u.createElementVNode)("div",Ik,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.user.links,((t,i)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:i,style:{width:"100%"}},[!t||t.type&&"url"!=t.type&&"video"!=t.type&&"uploadvideo"!=t.type&&"audio"!=t.type&&"playlist"!=t.type&&"text"!=t.type&&"pdf"!=t.type&&"picpopup"!=t.type&&"donate"!=t.type&&"collection"!=t.type||!t.enable||e.isIndexInCollapse(i)?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createBlock)(w,{key:0,item:t,index:i,user:e.user,tracker:e.tracker,style:{cursor:"pointer","margin-top":"20px"}},null,8,["item","index","user","tracker"])),"qrcode"==t.type&&t.enable&&!e.isIndexInCollapse(i)?((0,u.openBlock)(),(0,u.createBlock)(w,{key:1,item:t,index:i,user:e.user,tracker:e.tracker,style:{cursor:"pointer","margin-top":"20px"}},null,8,["item","index","user","tracker"])):(0,u.createCommentVNode)("",!0),"header"==t.type&&t.enable&&!e.isIndexInCollapse(i)?((0,u.openBlock)(),(0,u.createBlock)(k,{key:2,item:t,index:i,user:e.user,style:{"margin-top":"35px"},onClick:n=>e.clickPHeader(t,i)},null,8,["item","index","user","onClick"])):(0,u.createCommentVNode)("",!0),"image_square"!=t.type&&"image_rectangle"!=t.type||!t.enable||e.isIndexInCollapse(i)?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createBlock)(T,{key:3,item:t,index:i,user:e.user,tracker:e.tracker,style_border:e.my_theme_link_border_style.borderRadius,is_banner_show_first_image:!e.is_banner_show_first_image,style:(0,u.normalizeStyle)([{"margin-top":"20px",overflow:"hidden"},{"border-radius":e.my_theme_link_border_style.borderRadius}])},null,8,["item","index","user","tracker","style_border","is_banner_show_first_image","style"])),"divider"==t.type&&t.enable&&!e.isIndexInCollapse(i)?((0,u.openBlock)(),(0,u.createBlock)(x,{key:4,item:t,index:i,user:e.user},null,8,["item","index","user"])):(0,u.createCommentVNode)("",!0),"picsingle"==t.type&&t.enable&&!e.isIndexInCollapse(i)?((0,u.openBlock)(),(0,u.createBlock)(S,{key:5,item:t,index:i,user:e.user,tracker:e.tracker,style_border:e.my_theme_link_border_style.borderRadius,style:{cursor:"pointer","margin-top":"20px"}},null,8,["item","index","user","tracker","style_border"])):(0,u.createCommentVNode)("",!0),"multiple_images"==t.type&&t.enable&&!e.isIndexInCollapse(i)?((0,u.openBlock)(),(0,u.createBlock)(E,{key:6,item:t,index:i,user:e.user,tracker:e.tracker,style:{cursor:"pointer","text-align":"center"}},null,8,["item","index","user","tracker"])):(0,u.createCommentVNode)("",!0),"baidu_map"==t.type&&t.enable&&!e.isIndexInCollapse(i)?((0,u.openBlock)(),(0,u.createBlock)(A,{key:7,item:t,index:i,user:e.user,tracker:e.tracker,style_border:e.my_theme_link_border_style.borderRadius,style:{cursor:"pointer","text-align":"center"}},null,8,["item","index","user","tracker","style_border"])):(0,u.createCommentVNode)("",!0)])))),128))]),e.is_hide_bottom_logo?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("div",Pk,[(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center","padding-bottom":"12px"},{color:e.my_theme_logo_color}])},[(0,u.withDirectives)((0,u.createElementVNode)("img",{onClick:t[6]||(t[6]=(...t)=>e.jumpClick&&e.jumpClick(...t)),class:"pointer",src:e._qiniuUrl+"/logo/logo.png",alt:"",srcset:"",style:{height:"18px",width:"18px","border-radius":"4px"}},null,8,Nk),[[u.vShow,!e.user_has_custom_bottom_logo]]),(0,u.withDirectives)((0,u.createElementVNode)("span",{onClick:t[7]||(t[7]=(...t)=>e.jumpClick&&e.jumpClick(...t)),class:"pointer",style:{"font-size":"14px","font-weight":"900","margin-left":"4px"}},"Link3.cc",512),[[u.vShow,!e.user_has_custom_bottom_logo]]),(0,u.withDirectives)((0,u.createElementVNode)("img",{onClick:t[8]||(t[8]=t=>e.popup_custom_bottom_logo=!0),src:e.custom_bottom_logo.logo,alt:"",srcset:"",style:{height:"18px",width:"18px","border-radius":"4px"},class:"pointer"},null,8,Dk),[[u.vShow,e.custom_bottom_logo.has&&e.custom_bottom_logo.logo]]),(0,u.withDirectives)((0,u.createElementVNode)("span",{onClick:t[9]||(t[9]=(...t)=>e.customJump&&e.customJump(...t)),class:(0,u.normalizeClass)(e.custom_bottom_logo.navurl?"pointer":""),style:(0,u.normalizeStyle)([{"font-size":"14px","font-weight":"900","margin-left":"4px"},{color:e.my_theme_logo_color}])},(0,u.toDisplayString)(e.custom_bottom_logo.name),7),[[u.vShow,e.custom_bottom_logo.has&&e.custom_bottom_logo.name]])],4),e.user_has_custom_bottom_logo?((0,u.openBlock)(),(0,u.createElementBlock)("div",Lk,[(0,u.createElementVNode)("span",{onClick:t[10]||(t[10]=(...t)=>e.jumpClick&&e.jumpClick(...t)),class:"fs12 pointer",style:{color:"#aaa"}},(0,u.toDisplayString)(e.translate("support")),1),(0,u.createElementVNode)("span",{onClick:t[11]||(t[11]=(...t)=>e.jumpClick&&e.jumpClick(...t)),class:"fs12 pointer",style:{"padding-left":"3px",color:"#aaa","margin-right":"10px"}},(0,u.toDisplayString)(e.link3PreviewPageUrl("remove_http_prefix")),1)])):(0,u.createCommentVNode)("",!0),(0,u.createElementVNode)("div",{onClick:t[12]||(t[12]=(...t)=>e.jumpComplaints&&e.jumpComplaints(...t)),style:{color:"#aaa","text-align":"center","font-size":"12px",width:"200px"},class:"pointer"},(0,u.toDisplayString)(e.translate("complaints")),1)])),e.is_show_bottom_ad?((0,u.openBlock)(),(0,u.createBlock)(C,{key:5,isVip:e.has_buy_hidden_create_my_link3||e.user_has_custom_bottom_logo,style:{width:"90%","margin-top":"40px"},from:"preview_bottom"},null,8,["isVip"])):(0,u.createCommentVNode)("",!0),Ok]),(0,u.createElementVNode)("div",{id:"js_pc_qr_code",class:"qr_code_pc_outer",style:(0,u.normalizeStyle)([{position:"fixed",left:"0",right:"0",top:"23px","text-align":"center","background-color":"red","font-size":"14px",display:"none"},e.pc_qr_code_style])},[(0,u.createElementVNode)("div",Bk,[(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{position:"absolute",right:"-194px",top:"0",width:"142px",height:"186px","border-radius":"8px",border:"1px solid rgba(255,255,255,0.3)",padding:"20px","word-wrap":"break-word","-webkit-hyphens":"auto","-ms-hyphens":"auto",hyphens:"auto","box-sizing":"border-box"},e.pc_qr_code_border_style])},[(0,u.createVNode)(I,{width:"102",height:"102",qr_image_logo:e.qr_image_logo,qr_url:e.my_link3,style:{"border-radius":"8px",overflow:"hidden"}},null,8,["qr_image_logo","qr_url"]),(0,u.createElementVNode)("span",{style:(0,u.normalizeStyle)([{display:"block","margin-top":"4px",opacity:"0.8"},{color:e.my_theme_title_color}])},(0,u.toDisplayString)(e.translate("scan_to")),5),(0,u.createElementVNode)("span",{style:(0,u.normalizeStyle)([{opacity:"0.8"},{color:e.my_theme_title_color}])},(0,u.toDisplayString)(e.translate("open_on_phone")),5)],4)])],4),e.is_show_qrcode?((0,u.openBlock)(),(0,u.createElementBlock)("div",Uk,[(0,u.createElementVNode)("div",null,[(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{"font-size":"18px","font-weight":"900",color:"#7C3AED"},e.my_theme_Link3cc])}," @Link3.cc ",4),(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{"font-size":"14px","font-weight":"200"},e.my_theme_slogan])},(0,u.toDisplayString)(e.translate("vu_desc")),5)]),(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"center","font-size":"10px","font-weight":"200"},e.my_theme_qrcode_desc])},[(0,u.createVNode)(I,{width:"100",height:"100",qr_image_logo:e.qr_image_logo,qr_url:e.my_link3},null,8,["qr_image_logo","qr_url"]),(0,u.createElementVNode)("div",Vk,(0,u.toDisplayString)(e.link3PreviewPageUrl("remove_http_prefix"))+"/"+(0,u.toDisplayString)(e.user.username),1),(0,u.createElementVNode)("div",Rk,(0,u.toDisplayString)(e.translate("vu_scan_qrcode")),1)],4)])):(0,u.createCommentVNode)("",!0),e.has_buy_hidden_create_my_link3||e.is_hide_bottom_button?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createBlock)(P,{key:1,click_url:e.createMyLink3Url,click_more_url:e.goToGroupUrl,button_content:e.translate("vu_create"),button_more_content:e.translate("vu_create_more"),style:(0,u.normalizeStyle)((!e.is_hide_bottom_logo&&e.user_has_custom_bottom_logo&&e.has_buy_hidden_create_my_link3,"bottom:28px"))},null,8,["click_url","click_more_url","button_content","button_more_content","style"]))])],4)):((0,u.openBlock)(),(0,u.createBlock)(f,{key:6})):((0,u.openBlock)(),(0,u.createBlock)(_,{key:5})):((0,u.openBlock)(),(0,u.createBlock)(g,{key:4})):((0,u.openBlock)(),(0,u.createBlock)(m,{key:3})),(0,u.createVNode)(N,{show:e.show_miniprogram_link,"onUpdate:show":t[16]||(t[16]=t=>e.show_miniprogram_link=t),style:{border:"0","border-radius":"16px"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",jk,[Mk,(0,u.withDirectives)((0,u.createElementVNode)("span",Fk,Wk,512),[[u.vShow,e.isPC]]),(0,u.withDirectives)((0,u.createElementVNode)("div",Gk," 前往Link3小程序，查看收藏夹 ",512),[[u.vShow,!e.isPC]]),(0,u.withDirectives)((0,u.createElementVNode)("img",{src:e.qiniuUrl+"/miniprogram/miniprogram_qrcode.jpg",style:{width:"120px",height:"120px","margin-bottom":"32px"},alt:""},null,8,Xk),[[u.vShow,e.isPC]]),(0,u.withDirectives)((0,u.createElementVNode)("div",Qk,[(0,u.createElementVNode)("div",{class:"b flexC",id:"bt-right",onClick:t[13]||(t[13]=t=>e.show_miniprogram_link=!1)},Zk),(0,u.createElementVNode)("div",{class:"b flexC",id:"bt-left",onClick:t[14]||(t[14]=t=>e.toMiddlePage())},Jk)],512),[[u.vShow,!e.isPC]]),(0,u.withDirectives)((0,u.createElementVNode)("div",$k,[(0,u.createElementVNode)("aside",{class:"b flexC",style:{width:"100%"},id:"bt-right",onClick:t[15]||(t[15]=t=>e.show_miniprogram_link=!1)},tT)],512),[[u.vShow,e.isPC]])])])),_:1},8,["show"]),e.is_hide_bottom_logo?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createBlock)(N,{key:8,show:e.popup_custom_bottom_logo,"onUpdate:show":t[17]||(t[17]=t=>e.popup_custom_bottom_logo=t),closeable:"",teleport:"#app",style:(0,u.normalizeStyle)([{border:"0","border-radius":"4px"},{width:e.qrcodePopupWidth+"px","min-height":e.qrcodePopupWidth+60+"px"}])},{default:(0,u.withCtx)((()=>[(0,u.withDirectives)((0,u.createElementVNode)("div",iT,[(0,u.createVNode)(D,{radius:"4",fit:"contain",style:(0,u.normalizeStyle)({width:Math.floor(.8*e.qrcodePopupWidth)+"px","min-height":Math.floor(.8*e.qrcodePopupWidth)+"px","margin-top":Math.floor(.15*e.qrcodePopupWidth)+"px"}),src:e.custom_bottom_logo.logo,alt:""},null,8,["style","src"])],512),[[u.vShow,e.custom_bottom_logo.has&&e.custom_bottom_logo.logo]])])),_:1},8,["show","style"])),e.is_hide_bottom_logo?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createBlock)(N,{key:9,show:e.popup_user_profile_avator,"onUpdate:show":t[18]||(t[18]=t=>e.popup_user_profile_avator=t),closeable:"",teleport:"#app",style:(0,u.normalizeStyle)([{border:"0","border-radius":"4px"},{width:e.qrcodePopupWidth+"px","min-height":e.qrcodePopupWidth+60+"px"}])},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",nT,[(0,u.createVNode)(v,{width:e.qrcodePopupWidthtoString("0.8"),height:e.qrcodePopupWidthtoString("0.8"),radius:"4",fontSize:"40",user_data:e.user,style:(0,u.normalizeStyle)({"margin-top":e.qrcodePopupWidthtoString("0.15")+"px"})},null,8,["width","height","user_data","style"])])])),_:1},8,["show","style"])),(0,u.createVNode)(O,{user:e.user,present_language:e.present_language,qr_image_logo:e.qr_image_logo,qr_url:e.my_link3},null,8,["user","present_language","qr_image_logo","qr_url"]),e.is_hide_bottom_button||e.is_hide_bottom_logo?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createBlock)(N,{key:10,show:e.show_auth_popup,"onUpdate:show":t[19]||(t[19]=t=>e.show_auth_popup=t),closeable:"",style:(0,u.normalizeStyle)([{border:"0","border-radius":"16px"},{width:e.bpopupWidth+"px","min-height":e.bpopupWidth+"px"}])},{default:(0,u.withCtx)((()=>[(0,u.createVNode)(B,{show:e.show_auth_popup,guest_info:e.user,onClosePAuthPageEmit:e.closePAuthPage},null,8,["show","guest_info","onClosePAuthPageEmit"])])),_:1},8,["show","style"])),(0,u.createVNode)(N,{show:e.show_miniprogram_popup,"onUpdate:show":t[21]||(t[21]=t=>e.show_miniprogram_popup=t),teleport:"#app",onClickOverlay:e.miniprogramPopupClose,"z-index":1002,style:{border:"0","--van-popup-background-color":"transparent"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",sT,[(0,u.createElementVNode)("span",rT,(0,u.toDisplayString)(e.my_link3_username),1),(0,u.createElementVNode)("span",oT,(0,u.toDisplayString)(e.translate("to_outside")),1),(0,u.createElementVNode)("span",aT,(0,u.toDisplayString)(e.show_miniprogram_content),1),(0,u.createElementVNode)("span",lT,(0,u.toDisplayString)(e.translate("to_brower")),1),(0,u.createElementVNode)("span",uT,(0,u.toDisplayString)(e.translate("to_brower_info")),1),(0,u.createElementVNode)("div",{class:"flexC pointer",onClick:t[20]||(t[20]=(...t)=>e.copyLink&&e.copyLink(...t)),style:{"margin-top":"12px","margin-bottom":"12px",width:"288px",height:"40px",background:"#07C160","border-radius":"4px"}},[(0,u.createElementVNode)("span",cT,(0,u.toDisplayString)(e.translate("to_explorer")),1)])])])),_:1},8,["show","onClickOverlay"]),e.show_popup_picture&&e.popup_picture_url?((0,u.openBlock)(),(0,u.createBlock)(N,{key:11,onClickOverlay:e.initPopupPictureClose,show:e.show_popup_picture,"onUpdate:show":t[23]||(t[23]=t=>e.show_popup_picture=t),teleport:"#app",style:(0,u.normalizeStyle)([{border:"none","border-radius":"16px","max-width":"95%","max-height":"80%","min-height":"100px"},{"min-width":e.popup_width}])},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",dT,[(0,u.createVNode)(D,{radius:"4",fit:"contain",style:(0,u.normalizeStyle)({"min-width":e.popup_width,"max-width":"95%","min-height":"100px",margin:"16px"}),src:e.qiniuUrl+"/"+e.popup_picture_url,alt:""},null,8,["style","src"])]),(0,u.createElementVNode)("div",hT,[(0,u.createElementVNode)("div",{class:"flexC bt-cancel",onClick:t[22]||(t[22]=(...t)=>e.initPopupPictureClose&&e.initPopupPictureClose(...t)),style:{width:"100%",height:"48px","font-size":"16px",color:"#FF2525","border-top":"1px solid #eee","box-sizing":"border-box","text-align":"center",cursor:"pointer"}},[(0,u.createElementVNode)("span",pT,(0,u.toDisplayString)(e.translate("js_confirm")),1)])])])),_:1},8,["onClickOverlay","show","style"])):(0,u.createCommentVNode)("",!0),e.show_popup_text&&e.initial_popup_text?((0,u.openBlock)(),(0,u.createBlock)(N,{key:12,onClickOverlay:e.initPopupTextClose,show:e.show_popup_text,"onUpdate:show":t[25]||(t[25]=t=>e.show_popup_text=t),teleport:"#app",style:{border:"0","border-radius":"16px"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",mT,[(0,u.createElementVNode)("div",gT,[(0,u.createElementVNode)("div",_T,[(0,u.createElementVNode)("span",null,(0,u.toDisplayString)(e.translate("js_notice")),1)]),(0,u.createElementVNode)("div",fT,(0,u.toDisplayString)(e.initial_popup_text),1),(0,u.createElementVNode)("div",yT,[(0,u.createElementVNode)("div",{class:"flexC bt-cancel",onClick:t[24]||(t[24]=(...t)=>e.initPopupTextClose&&e.initPopupTextClose(...t))},[(0,u.createElementVNode)("span",vT,(0,u.toDisplayString)(e.translate("js_confirm")),1)])])])])])),_:1},8,["onClickOverlay","show"])):(0,u.createCommentVNode)("",!0),(0,u.createElementVNode)("a",{style:{visibility:"hidden"},href:e.redirect_url,id:"redirectJumpId"},null,8,bT)])}var kT=i(5570),TT=i(9897),xT=i(689);function ST(e){this.message=e}ST.prototype=new Error,ST.prototype.name="InvalidCharacterError";var ET="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new ST("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,n,s=0,r=0,o="";n=t.charAt(r++);~n&&(i=s%4?64*i+n:n,s++%4)?o+=String.fromCharCode(255&i>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function AT(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(ET(e).replace(/(.)/g,(function(e,t){var i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(t)}catch(e){return ET(t)}}function CT(e){this.message=e}function IT(e,t){if("string"!=typeof e)throw new CT("Invalid token specified");var i=!0===(t=t||{}).header?0:1;try{return JSON.parse(AT(e.split(".")[i]))}catch(e){throw new CT("Invalid token specified: "+e.message)}}CT.prototype=new Error,CT.prototype.name="InvalidTokenError";var PT=IT;const NT={host:"cn-shanghai.log.aliyuncs.com",project:"link3",logstore:p.v.TrackerLogStore,time:2,count:1,topic:"topic",source:"source",tags:{tags:"tags"}},DT=new TT.ZP(NT);var LT={props:{user_data:Object,is_show_qrcode:Boolean,is_hide_share_button:Boolean,is_hide_bottom_logo:Boolean,is_hide_bottom_button:Boolean,is_hide_favorites_button:Boolean,is_banner_show_first_image:Boolean,is_show_bottom_ad:Boolean,custom_background_video_width:Number,custom_background_video_height:Number,close_callback:Boolean},data:function(){return{tokenclearflag:!1,user:this.user_data||{},pageStatus:"welcome_page",bpopupWidth:.86*window.innerWidth>375?375:.86*window.innerWidth,windowInnerHeight:window.innerHeight+"px",collapseIndexs:[],show_auth_popup:!1,custom_bottom_logo:{navurl:""},h5_interval_data:null,h5_interval_num:0,preview_language:{"zh-HK":{js_phone:"手機號",js_email:"電子郵箱",js_weixin:"微信號",js_qq:"QQ號",js_copy_desc:"複製",js_copy_success:"已復制，\n可直接去粘貼",program_copy_success:"已复制网址，请去浏览器中粘贴",js_copy_fail:"複製失敗，請手動輸出：",js_link3_title:"Link3-用一個鏈接，聚合、分享你的所有信息",vu_desc:"一個連結，聚合、分享所有",vu_create:"免費製作Link3聚合頁",vu_create_more:"更多",vu_scan_qrcode:"掃一掃查看更多",support:"技術支援:",collect:"收藏",Favorite:"已收藏",collection_failed:"收藏失敗",js_close:"關閉",js_notice:"提示",js_confirm:"確認",js_cancel:"取消",to_outside:"正在打開外鏈",to_brower:"微信小程序不支持訪問外鏈",to_brower_info:"復製網址到瀏覽器打開",to_explorer:"立即復製",scan_to:"掃一掃",open_on_phone:"在手機上打開",complaints:"舉報"},"zh-CN":{js_phone:"手机号",js_email:"电子邮箱",js_weixin:"微信号",js_qq:"QQ号",js_copy_desc:"复制",js_copy_success:"已复制，\n可直接去粘贴",program_copy_success:"已复制网址，请去浏览器中粘贴",js_copy_fail:"复制失败，请手动输出：",js_link3_title:"Link3-用一个链接，聚合、分享你的所有信息",vu_desc:"一个链接，聚合、分享所有",vu_create:"免费制作Link3聚合页",vu_create_more:"更多",vu_scan_qrcode:"扫一扫查看更多",support:"技术支持:",collect:"收藏",Favorite:"已收藏",collection_failed:"收藏失败",js_close:"关闭",js_notice:"提示",js_confirm:"确定",js_cancel:"取消",to_outside:"正在打开外链",to_brower:"微信小程序不支持访问外链",to_brower_info:"复制网址到浏览器打开",to_explorer:"立即复制",scan_to:"扫一扫",open_on_phone:"在手机上打开",complaints:"举报"},en:{js_phone:"Phone",js_email:"Email",js_weixin:"Wechat",js_qq:"QQ",js_copy_desc:"Copy",js_copy_success:"Copied!",program_copy_success:"Copied!",js_copy_fail:"Copy failed, please input:",js_link3_title:"Link3-Share everything in one simple Link3",vu_desc:"Share everying in Link3",vu_create:"Create Link3 in bio For FREE",vu_create_more:"More",vu_scan_qrcode:"Scan into Link3",support:"Powered by",collect:"Collect",Favorite:"Collected",collection_failed:"Collection failed",js_close:"Close",js_notice:"Prompt",js_confirm:"Confirm",js_cancel:"Cancel",to_outside:"Opening external link",to_brower:"WeChat mini program does not support accessing external links",to_brower_info:"Copy this link and open it in your browser",to_explorer:"Copy",scan_to:"Scan to",open_on_phone:"Open on phone",complaints:"Report"}},show_miniprogram_link:!1,tracker:DT,trackerflag:!1,redirectflag:!1,popup_custom_bottom_logo:!1,qrcodePopupWidth:.86*window.innerWidth>414?414:Math.floor(.86*window.innerWidth),hide_favorite_icon:!1,BGM:null,firstShowed:!1,popup_user_profile_avator:!1,show_popup_text:!1,show_popup_picture:!1,is_open_in_browser_wechat:!1,is_open_in_browser_qq:!1,is_open_in_browser_weibo:!1,is_open_in_browser_tiktok:!1,redirect_url:""}},provide(){return{present_language:()=>this.present_language,close_callback:()=>this.close_callback}},computed:{...(0,C.mapState)({auth:e=>e.user.auth,user_guest:e=>e.user.user_guest,user_favorite:e=>e.user.user,white_color_theme:e=>e.page.state_theme.white_font,theme_6F2D00_font_theme:e=>e.page.state_theme.theme_6F2D00_font,favorite_reclick:e=>e.page.local_user_data.favorite_reclick,show_miniprogram_popup:e=>e.page.local_user_data.show_miniprogram_popup,show_miniprogram_content:e=>e.page.local_user_data.show_miniprogram_content,temporary_user:e=>e.user.temporary_user,user_guest_orders:e=>e.user.user_guest.link3_orders,ellipse_theme:e=>e.page.state_theme.ellipse_theme,vertical_theme:e=>e.page.state_theme.vertical_theme,white_link3link_color_theme:e=>e.page.state_theme.white_link3link_color}),qiniuUrl(){if(p.v)return p.v.qiniuUrl},isPC:function(){return(0,A.Jv)().pc},qr_image_logo:function(){return(0,Ct.sQ)(this.user.profile_image)},my_link3:function(){return(0,A.UZ)(this.user.username)},present_language(){let e=this.$i18n.locale||"zh-CN";return e=!this.user.setting||"en"!=this.user.setting.present_language&&"English"!=this.user.setting.present_language?this.user.setting&&"zh-HK"==this.user.setting.present_language?"zh-HK":"zh-CN":"en",e},should_show_social_icons:function(){if(this.user.social_icons_links&&this.user.social_icons_links instanceof Array){let e=!1;return this.user.social_icons_links.forEach((t=>{t.enable&&(e=!0)})),e}return!1},share_icon_is_white:function(){let e=this.white_color_theme;return e.indexOf(this.user.theme)>=0},video_auto_width_height:function(){return this.$refs["preview_content_body"]?{width:this.$refs["preview_content_body"].offsetWidth,height:this.$refs["preview_content_body"].offsetHeight}:{}},custom_background_video_url:function(){return this.user.custom_background&&this.user.custom_background.custom_video&&"custom_video"==this.user.custom_background.type?(0,Ct.hu)(this.user.custom_background.custom_video):null},my_theme_background:function(){let e={backgroundColor:"#f0f0f0",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"};if("custom"==this.user.theme){let i=this.user.theme;if(0==i.indexOf("themevip")&&this.user&&this.user.vip&&this.user.vip.pay){let e=this.user.vip;if(!e.pay)return;let n=e.pay;var t=(new Date).getTime();for(const[s,r]of Object.entries(n))s===i&&r&&r.expiration_vip_time&&Number(r.expiration_vip_time)<=t&&this.updateUserState({theme:"default"})}if(this.user.custom_background){if("background_color_pure"==this.user.custom_background.type)return e.backgroundColor=this.user.custom_background.background_color,e;if("background_color_gradient"==this.user.custom_background.type){e.backgroundColor=this.user.custom_background.background_color;let t="top";return t="up"==this.user.custom_background.gradient_direction?"top":"bottom",e.backgroundImage="linear-gradient("+t+", #EBEDF0, "+this.user.custom_background.background_color+") ",e.backgroundImage="-webkit-linear-gradient("+t+", #EBEDF0, "+this.user.custom_background.background_color+") ",e}if("custom_image"==this.user.custom_background.type)return e.backgroundSize="cover",e.backgroundPosition="center",this.user.custom_background.custom_image&&(e.backgroundImage="url("+(0,Ct.hu)(this.user.custom_background.custom_image)+")"),e;if("custom_video"==this.user.custom_background.type)return e={},e}}"theme9"==this.user.theme&&(e.backgroundColor="black"),"theme10"==this.user.theme&&(e.backgroundColor="#7C3AED"),"theme11"==this.user.theme&&(e.backgroundColor="#e9c0e9");let i=["themevip1","themevip2","themevip3","theme15","themevip4","themevip5"];if(i.indexOf(this.user.theme)>=0){let t=(0,Ct.M_)(this.user.theme,"background.gif");t&&(e.backgroundImage="url("+t+")")}else if("custom"!=this.user.theme){let t=(0,Ct.M_)(this.user.theme,"background.png");t&&(e.backgroundImage="url("+t+")")}return"theme14"!=this.user.theme&&"theme31"!=this.user.theme&&"theme32"!=this.user.theme||(e.backgroundSize="cover",e.backgroundPosition="center"),e},my_theme_title_color:function(){let e="black";"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e=this.user.custom_font.font_color);let t=this.white_color_theme;t.indexOf(this.user.theme)>=0&&(e="white");let i=this.theme_6F2D00_font_theme;return i.indexOf(this.user.theme)>=0&&(e="#6F2D00"),e},my_theme_bio_color:function(){let e="rgb(0 0 0 / 60%)";"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e=this.user.custom_font.font_color);let t=this.white_color_theme;t.indexOf(this.user.theme)>=0&&(e="rgb(255 255 255)");let i=this.theme_6F2D00_font_theme;return i.indexOf(this.user.theme)>=0&&(e="#6F2D00"),e},my_theme_link3link_color:function(){let e="rgb(0 0 0 / 60%)";"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e=this.user.custom_font.font_color);let t=this.white_color_theme;t.indexOf(this.user.theme)>=0&&(e="rgb(255 255 255)");let i=this.theme_6F2D00_font_theme;return i.indexOf(this.user.theme)>=0&&(e="#6F2D00"),e},my_theme_logo_color:function(){let e="black";"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e=this.user.custom_font.font_color);let t=this.white_color_theme;return t.indexOf(this.user.theme)>=0&&(e="white"),e},my_theme_Link3cc:function(){let e={color:"#7C3AED"};"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e.color=this.user.custom_font.font_color);let t=this.white_color_theme;t.indexOf(this.user.theme)>=0&&(e.color="white");let i=["",""];return i.indexOf(this.user.theme)>=0&&(e.color="black"),e},my_theme_slogan:function(){let e={color:"black"};"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e.color=this.user.custom_font.font_color);let t=this.white_color_theme;return t.indexOf(this.user.theme)>=0&&(e.color="white"),e},my_theme_qrcode_desc:function(){let e={color:"black"};"custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color&&(e.color=this.user.custom_font.font_color);let t=this.white_color_theme;return t.indexOf(this.user.theme)>=0&&(e.color="white"),e},link3PreviewPageUrl(){return function(e){if((0,A.Jv)().miniprogram)return p.v.link3PreviewPageUrl;let t=p.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}},createMyLink3Url:function(){let e=p.v.link3PreviewPageUrl;return e},goToGroupUrl:function(){let e=p.v.link3PreviewPageUrl+"/group";return e},init_favorite_icon:function(){return this.user_guest&&this.user_guest.personal_setting&&this.initFavoriteList(this.user_guest.personal_setting),this.hide_favorite_icon},resolve_change:function(){if(this.user.links){let t=JSON.parse(JSON.stringify(this.user.links));for(let e=0;e<t.length;e++){let i=t[e];i&&("video"!=i.type&&"audio"!=i.type&&"pdf"!=i.type&&"collection"!=i.type&&"uploadvideo"!=i.type||("undefined"===typeof i.open_show&&(i.open_show=!1),!0!==i.open_show&&(i.open_show=!1)),i.openShow&&(i.open_show=i.openShow))}let i=t.findIndex((e=>{if("video"==e.type||"audio"==e.type||"pdf"==e.type||"collection"==e.type||"uploadvideo"==e.type){if(e.typeValue.open_show)return e.typeValue.open_show;if(e.typeValue.openShow)return e.typeValue.openShow}}));if(-1!==i){try{if("video"==t[i].type&&""===t[i].typeValue.video_url_origin)return void this.updateLocalUserDataState({showIndex:999999})}catch(e){}this.updateLocalUserDataState({showIndex:i})}return i}},has_buy_hidden_create_my_link3:function(){if(this.user&&this.user.vip&&this.user.vip.pay){let t=this.user.vip;if(!t.pay)return;let i=t.pay;var e=(new Date).getTime();if(i.hide_link3_button&&i.hide_link3_button.expiration_vip_time&&Number(i.hide_link3_button.expiration_vip_time)>=e)return!0}return this.is_hide_bottom_button},user_has_custom_bottom_logo:function(){if(!this.user||!this.user.vip||!this.user.vip.pay)return!1;let e=this.user.vip;if(!e.pay)return;let t=e.pay;var i=(new Date).getTime();if(t.customize_brand_info&&t.customize_brand_info.expiration_vip_time&&Number(t.customize_brand_info.expiration_vip_time)>=i){if(t.customize_brand_info&&(t.customize_brand_info.customize_brand_name||t.customize_brand_info.customize_brand_url)){this.custom_bottom_logo={logo:t.customize_brand_info.customize_brand_url,name:t.customize_brand_info.customize_brand_name,has:!0},this.custom_bottom_logo.logo&&(this.custom_bottom_logo.logo=p.v.qiniuUrl+"/"+this.custom_bottom_logo.logo);try{t.customize_brand_info.customize_brand_jump_link&&(this.custom_bottom_logo.navurl=t.customize_brand_info.customize_brand_jump_link)}catch(n){}}return!0}return!1},bio_hide:function(){if(!this.user||!this.user.vip||!this.user.vip.pay)return!1;let e=this.user.vip;if(!e.pay)return!1;let t=e.pay;var i=(new Date).getTime();if(t.customize_brand_info&&t.customize_brand_info.expiration_vip_time&&Number(t.customize_brand_info.expiration_vip_time)>=i){let e=this.user.setting;return!(!e||!e.bio_hide)&&e.bio_hide}return!1},bgmPlay:function(){let e=this.user.setting;return e&&Object.prototype.hasOwnProperty.call(e,"bgm_file_url")&&e.bgm_file_url&&this.user&&this.user.setting&&this.user.setting.bgm&&!this.close_callback?(this.BGM=(0,u.shallowRef)((0,u.defineAsyncComponent)({loader:()=>i.e(400).then(i.bind(i,6400)),delay:0})),!0):(this.BGM=null,!1)},has_baidu:function(){var e={};if(this.user.unid){let t=this.user.links;if(t)return t.forEach((t=>{"baidu_map"==t.type&&!0===t.enable&&(e=t)})),"{}"!==JSON.stringify(e)?(this.updatePageState({has_baidu:!0}),!0):(this.updatePageState({has_baidu:!1}),!1)}return this.updatePageState({has_baidu:!1}),!1},initial_popup_text:function(){if(this.user&&this.user.setting){let e=this.user.setting;return Object.prototype.hasOwnProperty.call(e,"initial_popup_text")?e.initial_popup_text:""}return""},initial_popup_text_status:function(){if(this.auth.is_reload&&this.user&&this.user.setting&&this.user.setting.initial_popup_text_status){let e=this.user.setting;return this.updateAuthState({is_reload:!1}),e.initial_popup_text_status}return!1},popup_picture_url:function(){if(this.user&&this.user.setting){let e=this.user.setting;return Object.prototype.hasOwnProperty.call(e,"popup_picture_url")?e.popup_picture_url:""}return""},initial_popup_picture_status:function(){if(this.auth.is_reload&&this.user&&this.user.setting){let e=this.user.setting;return!!Object.prototype.hasOwnProperty.call(e,"initial_popup_picture_status")&&(e.initial_popup_picture_status&&this.updateAuthState({is_reload:!1}),e.initial_popup_picture_status)}return!1},popup_width:function(){return(0,A.Jv)().pc?.8*this.qrcodePopupWidth+"px":.9*this.qrcodePopupWidth+"px"},is_open_in_browser_page:function(){return"/user"!=window.location.pathname&&(!(!this.user||!this.user.setting)&&(1==this.user.setting.is_open_in_browser_qq&&(0,A.Jv)().qq?(this.is_open_in_browser_qq=!0,!0):1==this.user.setting.is_open_in_browser_wechat&&((0,A.Jv)().weixin||(0,A.Jv)().wxwork)&&(0,A.Jv)().mobile?(this.is_open_in_browser_wechat=!0,!0):1==this.user.setting.is_open_in_browser_weibo&&(0,A.Jv)().weibo?(this.is_open_in_browser_weibo=!0,!0):!(1!=this.user.setting.is_open_in_browser_tiktok||!(0,A.Jv)().douyin)&&(this.is_open_in_browser_tiktok=!0,!0)))},check_open_initial_popop:function(){const e=new ab(10);return(!this.user||!this.user.setting||1!=this.user.setting.forbid_user)&&!(this.user&&this.user.setting&&1==this.user.setting.is_middle_page&&!e.getItem(window.location.href))},isMiniprogram(){return(0,A.Jv)().miniprogram},my_theme_link_border_style:function(){let e={borderRadius:"4px"};"custom"==this.user.theme&&this.user.custom_button&&("rectangle"==this.user.custom_button.button_shape&&(e.borderRadius="4px"),"ellipse"==this.user.custom_button.button_shape&&(e.borderRadius="24px"));let t=this.ellipse_theme;t.indexOf(this.user.theme)>=0&&(e.borderRadius="24px");let i=["",""];i.indexOf(this.user.theme);let n=this.vertical_theme;return n.indexOf(this.user.theme)>=0&&(e.borderRadius="0px"),e},my_link3_username:function(){let e=window.location.hostname+window.location.pathname;return e&&e.length>30?e.slice(0,30)+"...":e},pc_qr_code_style(){if(document.getElementsByClassName("realpreview-contnet")&&document.getElementsByClassName("realpreview-contnet").length>0){let e=document.getElementsByClassName("realpreview-contnet")[0].clientWidth,t={display:"none"};return(0,A.Jv)().pc&&e>=1199&&(t.display="block;"),t}},pc_qr_code_border_style(){let e={borderWidth:"1px",border:"solid",borderColor:"#0000004d"};if("custom"==this.user.theme&&this.user.custom_font&&this.user.custom_font.font_color)try{let t=this.user.custom_font.font_color;if(t&&9==t.length){let i="0x"+t.slice(-2),n=parseInt(i),s=parseInt(.3*n).toString(16),r=t.substring(0,7)+s;e.borderColor=r}}catch(n){e.borderColor=this.user.custom_font.font_color}let t=this.white_color_theme;t.indexOf(this.user.theme)>=0&&(e.borderColor="#ffffff4d");let i=this.theme_6F2D00_font_theme;return i.indexOf(this.user.theme)>=0&&(e.borderColor="#6F2D004d"),e},has_buy_redirect_time(){if(this.user&&this.user.vip&&this.user.vip.pay){let t=this.user.vip;if(!t.pay)return!1;if(!t.pay.open_redirect)return!1;let i=t.pay.open_redirect;var e=(new Date).getTime();return Number(i.expiration_vip_time)>=e}return!1},_qiniuUrl(){return p.v.qiniuUrl},check_hidden_search_icon_buyed_sataus:function(){if(this.user&&this.user.vip&&this.user.vip.pay){let e=this.user.vip;if(!e.pay||!e.pay.hidden_search_icon)return!1;let t=e.pay.hidden_search_icon,i=(new Date).getTime();return Number(t.expiration_vip_time)>=i}return!1},is_hidden_search_icon:function(){if(this.user&&this.user.setting){let e=this.user.setting;return!(!e.search_icon_setting||"is_hidden_search_icon"!=e.search_icon_setting||!this.check_hidden_search_icon_buyed_sataus)}return!1}},methods:{...(0,C.mapMutations)({updatePageState:"page/updatePageState",updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState",updateUserState:"user/updateUserState",updateSharePopupState:"page/updateSharePopupState",updateSearchPopupState:"page/updateSearchPopupState",updateTemporaryUserState:"user/updateTemporaryUserState",updateAuthState:"user/updateAuthState",updateUserGuestOrders:"user/updateUserGuestOrders"}),translate:function(e){return this.preview_language[this.present_language][e]},qrcodePopupWidthtoString(e){if(!this.qrcodePopupWidth)return"400";var t=this.qrcodePopupWidth;switch(e){case"0.8":t=Math.floor(.8*t);break;case"0.15":t=Math.floor(.15*t);break;default:break}return String(t)},getUserFromServer:async function(){let e=this.$route.params?this.$route.params.username:"";try{let t=await(0,h.nw)(e);if(t&&"0001"==t.code&&t.data){this.user=t.data,this.updateUserState({...this.user});const e=new ab(10);return this.user&&this.user.setting&&1==this.user.setting.forbid_user&&"/user"!=window.location.pathname?this.pageStatus="forbid_page":this.user&&this.user.setting&&1==this.user.setting.is_middle_page&&"/user"!=window.location.pathname&&!e.getItem(window.location.href)?this.pageStatus="middle_page":this.user&&this.user.setting&&this.is_open_in_browser_page&&"/user"!=window.location.pathname?this.pageStatus="open_in_browser_page":this.pageStatus="normal_page",t.data}return this.pageStatus="error_page",!1}catch(t){return this.pageStatus="error_page",!1}},getUserGuestFromServer:async function(){if(de.Z.getToken()&&de.Z.getToken().length>10){let t={};try{if(t=PT(de.Z.getToken()),!t.unid&&t.exp<Math.round((new Date).getTime()/1e3))return void de.Z.clear()}catch(e){return void console.log(e)}let i=await(0,h.nw)(t.unid);if(!i)return!1;if("0001"!=i.code||!i.data)return;{this.updateUserGuestState(i.data);let e=this.$route.params?this.$route.params.username:"",n=await(0,h.k5)(t.unid,e);"0001"==n.code&&n.data&&this.updateUserGuestOrders(n.data.vip_all.link3_orders)}}},jumpClick(){window.open(this.link3PreviewPageUrl(""))},jumpComplaints(){window.open(p.v.link3PreviewPageUrl+"/reporterror")},showShare:async function(){this.updateSharePopupState({show:!0,lang:this.present_language})},showQrcodePopup:async function(){this.updatePageState({link3_qr_popup:!0})},hasFavorite:(0,A.Ds)((async function(e){try{if(de.Z.getToken()&&de.Z.getToken().length>10){let n={};try{if(n=PT(de.Z.getToken()),!n.unid&&n.exp<Math.round((new Date).getTime()/1e3))return this.show_auth_popup=!0,this.pay_module_id=999999,void this.updateLocalUserDataState({favorite_reclick:!0,module_id_reclick:999999})}catch(i){return this.show_auth_popup=!0,this.pay_module_id=999999,this.updateLocalUserDataState({favorite_reclick:!0,module_id_reclick:999999}),void console.log(i)}if(await this.getUserGuestFromServer(),this.user_guest&&!this.user_guest.unid)return;this.hide_favorite_icon=!!e;let s=new Array,r=this.user.unid;this.user_guest.personal_setting&&this.user_guest.personal_setting.favorite&&"undefined"!==typeof this.user_guest.personal_setting.favorite&&this.user_guest.personal_setting.favorite.length>0&&(s=(0,A.I8)(this.user_guest.personal_setting.favorite,!1));var t=s.find((function(e){return e.c_unid===r}));Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};let o=!1;"undefined"!==typeof t?s.remove(t):(s?s.unshift({c_unid:r,create_time:Math.floor(Date.now())}):s=[{c_unid:r,create_time:Math.floor(Date.now())}],o=!0);let a={...this.user_guest.personal_setting,favorite:s},l=await he.gS({personal_setting:a});if(!l)return!1;if("0001"==l.code){e||((0,A.Jv)().miniprogram?ce.Toast.success(this.translate("Favorite")):this.show_miniprogram_link=!0);let t=await he.j3({c_unid:r,add:o});return t||console.error(t),void("0001"==t.code?this.updateUserGuestState({personal_setting:a}):console.error(t))}return void ce.Toast.fail(this.translate("collection_failed"))}this.show_auth_popup=!0,this.pay_module_id=999999,this.updateLocalUserDataState({favorite_reclick:!0,module_id_reclick:999999})}catch(n){console.log(n)}}),700),initFavoriteList:async function(e){if(e){let i=[];if(!e.favorite||"undefined"===typeof e.favorite)return!1;if(i=(0,A.I8)(e.favorite,!1),e){if(!e.favorite)return;let n=this.user.unid;var t=i.find((function(e){return e.c_unid===n}));this.hide_favorite_icon="undefined"!==typeof t}}return this.hide_favorite_icon},copyLink3:async function(){(0,Ce.Z)(p.v.link3PreviewPageUrl+"/"+this.user.username)?ce.Toast.success(this.translate("js_copy_success")):ce.Toast.success(this.translate("js_copy_fail")+p.v.link3PreviewPageUrl+"/"+this.user.username)},onRefresh:async function(){this.user_data||await this.getUserFromServer()},getIcon:function(e){return(0,Ct.AW)(e)},phoneClick:function(e){ce.Dialog.confirm({title:this.translate("js_phone"),message:e,confirmButtonText:this.translate("js_copy_desc")}).then((()=>{(0,Ce.Z)(e)?alert(this.translate("js_copy_success")):alert(this.translate("js_copy_fail")+e)})).catch((()=>{}))},emailClick:function(e){ce.Dialog.confirm({title:this.translate("js_email"),message:e,confirmButtonText:this.translate("js_copy_desc")}).then((()=>{(0,Ce.Z)(e)?alert(this.translate("js_copy_success")):alert(this.translate("js_copy_fail")+e)})).catch((()=>{}))},weixinClick:function(e){ce.Dialog.confirm({title:this.translate("js_weixin"),message:e,confirmButtonText:this.translate("js_copy_desc")}).then((()=>{(0,Ce.Z)(e)?alert(this.translate("js_copy_success")):alert(this.translate("js_copy_fail")+e)})).catch((()=>{}))},qqClick:function(e){ce.Dialog.confirm({title:this.translate("js_qq"),message:e,confirmButtonText:this.translate("js_copy_desc")}).then((()=>{(0,Ce.Z)(e)?alert(this.translate("js_copy_success")):alert(this.translate("js_copy_fail")+e)})).catch((()=>{}))},refreshCustomLogo(){if(this.has_buy_hidden_create_my_link3=this.is_hide_bottom_button,this.user&&this.user.vip&&this.user.vip.pay){let i=this.user.vip;if(!i.pay)return;let n=i.pay;var e=(new Date).getTime();if(n.hide_link3_button&&n.hide_link3_button.expiration_vip_time&&Number(n.hide_link3_button.expiration_vip_time)>=e&&(this.has_buy_hidden_create_my_link3=!0),n.customize_brand_info&&n.customize_brand_info.expiration_vip_time&&Number(n.customize_brand_info.expiration_vip_time)>=e){if(this.user_has_custom_bottom_logo=!0,n.customize_brand_info&&(n.customize_brand_info.customize_brand_name||n.customize_brand_info.customize_brand_url)){this.custom_bottom_logo={logo:n.customize_brand_info.customize_brand_url,name:n.customize_brand_info.customize_brand_name,has:!0},this.custom_bottom_logo.logo&&(this.custom_bottom_logo.logo=p.v.qiniuUrl+"/"+this.custom_bottom_logo.logo);try{n.customize_brand_info.customize_brand_jump_link&&(this.custom_bottom_logo.navurl=n.customize_brand_info.customize_brand_jump_link)}catch(t){}}let e=this.user.setting;this.bio_hide=!1,e&&Object.prototype.hasOwnProperty.call(e,"bio_hide")&&(this.bio_hide=!0)}}},refreshVipTheme(e){var t;if(this.user&&(t=e?e.theme:this.user.theme,t&&0==t.indexOf("themevip")&&this.user&&this.user.vip&&this.user.vip.pay)){let n=this.user.vip;if(!n.pay)return;let s=n.pay;var i=(new Date).getTime();for(const[r,o]of Object.entries(s))r===t&&o&&o.expiration_vip_time&&Number(o.expiration_vip_time)<=i&&(e?this.updateUserState({theme:"default"}):this.user.theme="default")}},customJump(){if(this.custom_bottom_logo.navurl){let e;if(e=(0,A.sg)(this.custom_bottom_logo.navurl),!e)return;if((0,A.Jv)().miniprogram)return void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:e});window.open(e)}},refreshBgm(){let e=this.user.setting;if(e&&Object.prototype.hasOwnProperty.call(e,"bgm_file_url")&&e.bgm_file_url)if(this.user&&this.user.vip&&this.user.vip.pay&&!this.close_callback){let e=this.user.vip;if(!e.pay)return;let n=e.pay.bgm;var t=(new Date).getTime();n&&n.expiration_vip_time&&Number(n.expiration_vip_time)>=t&&(this.bgmPlay=!0,this.BGM=(0,u.shallowRef)((0,u.defineAsyncComponent)({loader:()=>i.e(400).then(i.bind(i,6400)),delay:0})))}else this.clearBgm();else this.clearBgm()},firstShow(e,t){if(this.firstShowed||this.close_callback)return;let i=JSON.parse(JSON.stringify(e));if(i&&("video"!=i.typeValue.type&&"audio"!=i.typeValue.type&&"pdf"!=i.typeValue.type||("undefined"===typeof i.typeValue.open_show&&(i.typeValue.open_show=!1),!0!==i.typeValue.open_show&&(i.typeValue.open_show=!1)),i.typeValue.openShow&&(i.typeValue.open_show=i.typeValue.openShow),("video"==i.type||"audio"==i.type||"pdf"==i.type)&&i.typeValue.open_show)){if("video"==i.type&&""===i.typeValue.video_url_origin)return;this.firstShowed=!0,this.updateLocalUserDataState({showIndex:t})}},resolveChange(){if(this.user.links){let t=JSON.parse(JSON.stringify(this.user.links));for(let e=0;e<t.length;e++){let i=t[e];i&&("video"!=i.type&&"audio"!=i.type&&"pdf"!=i.type||("undefined"===typeof i.open_show&&(i.open_show=!1),!0!==i.open_show&&(i.open_show=!1)),i.openShow&&(i.open_show=i.openShow))}let i=t.findIndex((e=>{if(e&&("video"==e.type||"audio"==e.type||"pdf"==e.type)){if(e.typeValue.open_show)return e.typeValue.open_show;if(e.typeValue.openShow)return e.typeValue.openShow}}));if(-1!==i){try{if("video"==t[i].type&&""===t[i].typeValue.video_url_origin)return void this.updateLocalUserDataState({showIndex:999999})}catch(e){}(0,A.Jv)().miniprogram&&this.updateLocalUserDataState({showIndex:i})}}},buyed(){if(this.user.unid){if(this.close_callback)return;if(this.user_guest&&this.user_guest_orders){let e=this.user_guest_orders;if(!e||!Array.isArray(e))return!1;if("undefined"==typeof e)return!1}}},temporary_user_buyed(){if(this.user.unid){if(this.close_callback)return;if(this.temporary_user&&""!==this.temporary_user.unid&&this.temporary_user.vip){let e=this.temporary_user.vip;if(!e.link3_orders||!Array.isArray(e.link3_orders))return!1;if("undefined"==typeof e.link3_orders)return!1}}},redirect(){const e=this.$route.meta;var t={};if(e.directview&&this.user.unid){if(this.close_callback)return;if(this.user.setting&&this.user.setting.forbid_user)return;let e=this.user.links;if(e.forEach((e=>{"url"==e.type&&!0===e.typeValue.redirect&&(t=e)})),t&&t.type&&!this.redirectflag){let e=(0,A.WR)(t.typeValue.nav_url);if(!e)return;let i=(0,xT.aq)(this.user.username,this.user.unid,t.typeValue.nav_url);if(!i)return;let n=(0,xT.sI)(this.user.username,this.user.unid,t.typeValue.nav_url);if(!n)return;this.redirectflag=!0;let s={action:"click",unid:this.user.unid,system:(0,A.O3)(),client_ip:"",url:location.href,"user-agent":navigator.userAgent,referrer:document.referrer,module_title:t.typeValue.title?t.typeValue.title:"",module_type:t.type,module_unid:t.unid?t.unid:"0"};this.user={unid:this.user.unid},DT.send(s);let r=this.httpsWatchdogPreview(t.typeValue.nav_url);window.location.href=r}}},redirectJump(e){document.getElementById("redirectJumpId").href=e,document.getElementById("redirectJumpId").click()},httpsWatchdogPreview(e){let t=e;return-1===t.indexOf(":")?(t="http://"+t,t):t},entryStatisticsCallback(){const e=this.$route.meta;if(e.directview&&this.user.unid&&!1===this.trackerflag){if(this.close_callback)return;this.trackerflag=!0,DT.send({action:"entry",unid:this.user.unid,system:(0,A.O3)(),client_ip:"",url:location.href,"user-agent":navigator.userAgent,referrer:document.referrer})}},closePAuthPage(e){if(!e){if(de.Z.getToken()){let e=this.user_guest.personal_setting;e&&this.initFavoriteList(e)}this.favorite_reclick&&this.pay_module_id&&999999===this.pay_module_id&&(this.hide_favorite_icon?(0,A.Jv)().miniprogram||(this.show_miniprogram_link=!0):this.hasFavorite(!1)),this.updateLocalUserDataState({module_id_reclick:this.pay_module_id?this.pay_module_id:999999,favorite_reclick:!1})}this.show_auth_popup=e},async getUserBuy(){let e=await he.bG();if(!e)return!1;"0001"==e.code&&this.updateUserGuestState(e.data)},checkOrderH5(e,t){let i=this.orderid_h5;if(i)try{he.Dd(i).then((n=>{"0001"==n.code?((0,ce.Toast)("支付成功"),this.getUserBuy(),window.localStorage.removeItem("pay_pipe"),this.h5_interval_num=999999,this.updateLocalUserDataState({module_id_donate:window.localStorage.getItem("out_trade_no_h5_module_id")?window.localStorage.getItem("out_trade_no_h5_module_id"):999999}),window.localStorage.removeItem("out_trade_no_h5_module_id")):e>t-2&&(console.log("H5订单查询失败:"+i),this.updateLocalUserDataState({module_id_donate:999999}))}))}catch(n){console.log(n)}},miniprogramPopupClose(){this.updateLocalUserDataState({show_miniprogram_popup:!1})},copyLink(){(0,Ce.Z)(this.show_miniprogram_content)&&(ce.Toast.success(this.translate("program_copy_success")),this.miniprogramPopupClose())},toMiddlePage(){location.href="https://link3-production-3fj8vji97d34820-1319417740.tcloudbaseapp.com"},ckeckH5Order(){var e=window.localStorage.getItem("goods");e=Number(e);var t=window.localStorage.getItem("out_trade_no_h5_module_id");if(e&&50===e&&t&&(this.cur_tab="setting",window.localStorage.removeItem("tabitem"),window.localStorage.removeItem("goods"),e)){let e=window.localStorage.getItem("out_trade_no_h5"),t=window.localStorage.getItem("pay_pipe");e&&"h5pay"==t&&(this.orderid_h5=e,window.localStorage.removeItem("out_trade_no_h5"),this.h5_interval_data&&(clearInterval(this.h5_interval_data),this.h5_interval_data=void 0),this.h5_interval_data=setInterval((()=>{this.h5_interval_num=this.h5_interval_num+1;const e=20;this.h5_interval_num<e?this.checkOrderH5(this.h5_interval_num,e):(clearInterval(this.h5_interval_data),this.h5_interval_data=void 0)}),3500))}},clearToken(){de.Z.clear()},clearcode(e){return e&&"string"===typeof e?(e=e.replace("state=STATE",""),e.replace(this.getQueryStringLast("code",!0),"")):""},getQueryStringLast(e,t){let i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","gi"),n=window.location.search.substring(1);n=n.replace("?","&");try{n!==decodeURIComponent(n)&&(n=decodeURIComponent(n))}catch(ST){}if(t){let e=n.match(i);if(null!=e)return decodeURIComponent(e[0])}let s=n.matchAll(i),r=[];for(let o of s)r.push(decodeURIComponent(o[2]));return r.length>0?r:null},autoMove(){const e=localStorage.getItem("move"),t=localStorage.getItem("moveid");switch(e){case"click":t&&this.updateLocalUserDataState({module_id_reclick:t,favorite_reclick:!1}),localStorage.removeItem("move"),localStorage.removeItem("moveid");break;case"collection":this.pay_module_id=999999,this.updateLocalUserDataState({favorite_reclick:!0,module_id_reclick:999999}),this.hide_favorite_icon||this.hasFavorite(!1),localStorage.removeItem("move"),localStorage.removeItem("moveid");break;default:localStorage.removeItem("move"),localStorage.removeItem("moveid");break}},scrollTopAnimate(){let e=this.getQueryStringLast("s");if(!e)return;let t=(0,A.gk)(e[0]),i=document.getElementById("module_"+t);t&&i&&this.$nextTick((()=>{i.scrollIntoView({block:"center",inline:"nearest"}),i.classList.add("links_module_share_overlay"),setTimeout((function(){i.classList.remove("links_module_share_overlay")}),3e3)}))},clickPHeader(e,t){if(e.typeValue&&e.typeValue.title&&e.typeValue.title.trim()&&this.countBetweenPHeader(t)>5)for(let i=t+1;i<this.user.links.length;i++){let e=this.user.links[i];if(e.enable){if("header"!=e.type){let e=!1;for(let t=0;t<this.collapseIndexs.length;t++)i==this.collapseIndexs[t]&&(e=!0);e?this.collapseIndexs=this.collapseIndexs.filter((e=>e!=i)):this.collapseIndexs.push(i);continue}break}}},countBetweenPHeader(e){if(!this.user||!this.user.links||!this.user.links)return 0;let t=0;for(let i=e+1;i<this.user.links.length;i++){let e=this.user.links[i];if(e.enable){if("header"!=e.type){t+=1;continue}break}}return t},updateCollapse(){if(this.collapseIndexs=[],!this.user||!this.user.links)return;let e=!1;for(let t=0;t<this.user.links.length;t++){let i=this.user.links[t];"header"==i.type&&i.enable?e=!(!i.typeValue||!i.typeValue.collapse):i.enable&&1==e&&this.collapseIndexs.push(t)}},isIndexInCollapse(e){let t=!1;for(let i=0;i<this.collapseIndexs.length;i++)e==this.collapseIndexs[i]&&(t=!0);return t},initPopupPictureClose(){this.show_popup_picture=!1},initPopupTextClose(){this.show_popup_text=!1},changeUnidPath(){if(window.location.pathname.startsWith("/link3_")&&!this.user.username.startsWith("/link3_")){let e="/"+this.user.username+window.location.search;this.$router.push(e)}},showSearchPopup:async function(){this.isPC?(this.user.unid&&window.open(p.v.link3PreviewPageUrl+"/search?id="+(0,A.Me)(this.user.unid)),window.open(p.v.link3PreviewPageUrl+"/search")):this.updateSearchPopupState({show:!0,lang:this.present_language})}},updated(){this.entryStatisticsCallback()},created(){},mounted:async function(){if("http://qiniu.test.link3.bfengtech.com"==p.v.qiniuUrl&&(this.tokenclearflag=!0),this.user_data){if(this.pageStatus="normal_page",this.hide_favorite_icon=!1,de.Z.getToken()){let e=this.user.personal_setting;e&&this.initFavoriteList(e),window.wx&&window.wx.miniProgram.postMessage({data:{wx_token:de.Z.getToken()}})}this.has_baidu}else{await this.getUserFromServer(),this.changeUnidPath(),de.Z.getToken()&&setTimeout((()=>{this.getUserGuestFromServer(),window.wx&&window.wx.miniProgram.postMessage({data:{wx_token:de.Z.getToken()}})}),500),setTimeout((async()=>{let e="",t="";this.user.profile_title?(e=this.user.profile_title+" | Link3",t=this.user.profile_title):this.user.username?(e=this.link3PreviewPageUrl("remove_http_prefix")+"/"+this.user.username+" | Link3",t=this.link3PreviewPageUrl("remove_http_prefix")+"/"+this.user.username):(e=this.translate("js_link3_title"),t=this.translate("js_link3_title")),document.title=e;let i="";i=this.user.bio?this.user.bio:this.link3PreviewPageUrl("remove_http_prefix")+"/"+this.user.username;let n=this.user.profile_image?p.v.qiniuUrl+"/"+this.user.profile_image:p.v.qiniuUrl+"/logo/logo.png",s=p.v.link3PreviewPageUrl+"/"+this.user.username;e=t,await(0,kT._)({title:e,description:i,imageUrl:n,url:s}),this.initial_popup_text_status&&this.check_open_initial_popop&&"normal_page"==this.pageStatus&&(this.show_popup_text=!0),this.initial_popup_picture_status&&this.check_open_initial_popop&&"normal_page"==this.pageStatus&&(this.show_popup_picture=!0)}),700),this.has_baidu;var e=window.localStorage.getItem("out_trade_no_h5_module_id");e&&this.ckeckH5Order(),this.scrollTopAnimate()}},watch:{user_data:{handler:function(e,t){this.user=e,this.pageStatus="normal_page"}},"user.links":{handler:function(e){try{var t=(0,u.toRaw)(e);if(!(Array.isArray(t)&&t.length>0))return!1;this.redirect()}catch(i){return!1}},immediate:!0},"user_guest.vip":{handler:function(e){try{e&&this.buyed()}catch(t){return!1}},deep:!0},"user_guest.link3_orders":{handler:function(e){try{e&&this.buyed()}catch(t){return!1}},deep:!0},"temporary_user.vip":{handler:function(e){try{e&&this.temporary_user_buyed()}catch(t){return!1}},deep:!0}},components:{ProfileAvator:Bt.Z,Qrcode:l.Z,QrcodePopup:s.Z,PLink:ov,PHeader:Xe,PImageSquareOrRectangle:Me.Z,PDivider:Ue,PPicSingle:Le,PMultipleImages:_e,PAuthPage:n.Z,PBaiduMap:L,WelcomePage:Yw,ErrorPage:qw,MiddlePage:db,ForbidPage:Wb,CreateMyLink3Button:a.Z,OpenInBrowserPage:Av,PAd:y}},OT=LT;const BT=(0,_.Z)(OT,[["render",wT],["__scopeId","data-v-f810305a"]]);var UT=BT},6106:function(e,t,i){"use strict";i.d(t,{Z:function(){return X}});var n=i(6944),s=(i(3277),i(5331)),r=(i(9041),i(9545)),o=(i(51),i(3548)),a=(i(7603),i(3)),l=(i(6145),i(311));const u=e=>((0,l.pushScopeId)("data-v-46fb07f2"),e=e(),(0,l.popScopeId)(),e),c={style:{width:"100%",margin:"auto",height:"100%",background:"#f0f0f0",position:"relative","z-index":"2"}},d={style:{"font-weight":"600",color:"#121212","line-height":"28px","font-size":"20px","margin-top":"30px","margin-bottom":"60px","text-align":"center"}},h={key:0},p={key:2,style:{"margin-top":"4px"}},m=u((()=>(0,l.createElementVNode)("br",null,null,-1))),g={key:0,style:{"text-align":"center","font-size":"14px"}},_={style:{color:"#5e5e5e"}},f={style:{color:"black","font-weight":"bold"}},y={key:1,style:{"text-align":"center","font-size":"14px","margin-bottom":"60px","margin-top":"15px"}},v={style:{color:"#5e5e5e"}},b={style:{color:"black","font-weight":"bold"}},w={key:2,class:"van-cell",style:{"font-size":"12px",color:"gray","padding-top":"0","padding-bottom":"0px",background:"none"}},k={style:{color:"#7C3AED","text-decoration":"underline","font-weight":"bolder"}},T={style:{"text-align":"left",padding:"20px","font-size":"14px"}},x={style:{"text-decoration":"underline",color:"#7C3AED",cursor:"pointer"}},S=(0,l.createTextVNode)("？ "),E={style:{"text-decoration":"underline",color:"#7C3AED",cursor:"pointer"}},A=(0,l.createTextVNode)("？ "),C={key:2},I={style:{margin:"32px 20px"}},P={style:{"margin-top":"-16px","text-align":"center","font-size":"14px"}},N={style:{"text-decoration":"underline",color:"#7C3AED",cursor:"pointer"}},D={style:{"text-decoration":"underline",color:"#7C3AED",cursor:"pointer"}},L={key:3,style:{"margin-top":"32px","flex-wrap":"wrap"},class:"flexC"},O={class:"fs12"},B={class:"fs12"};function U(e,t,i,u,U,V){const R=a.E,j=o.g,M=r.z,F=s.T,q=n.l;return(0,l.openBlock)(),(0,l.createElementBlock)("div",c,[e.formHide?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createBlock)(q,{key:0,onSubmit:e.onSubmit,style:{background:"#f0f0f0","padding-top":"20px","padding-bottom":"20px","max-width":"450px",margin:"auto"}},{default:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",d,["login"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createElementBlock)("div",h,(0,l.toDisplayString)(e.translate("big_title")),1)):(0,l.createCommentVNode)("",!0),"regist"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createBlock)(R,{key:1,src:e._qiniuUrl+"/homepage_images/image_three_page.png",fit:"contain",width:"200",style:{border:"0"}},null,8,["src"])):(0,l.createCommentVNode)("",!0),"regist"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createElementBlock)("div",p,[(0,l.createTextVNode)((0,l.toDisplayString)(e.translate("only_one_minute")),1),m,(0,l.createTextVNode)(" "+(0,l.toDisplayString)(e.translate("take_your_link3")),1)])):(0,l.createCommentVNode)("",!0)]),"rename_username"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createElementBlock)("div",g,[(0,l.createElementVNode)("span",_,(0,l.toDisplayString)(e.translate("old_username"))+": ",1),(0,l.createElementVNode)("span",f,(0,l.toDisplayString)(e.user.username),1)])):(0,l.createCommentVNode)("",!0),"rename_username"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createElementBlock)("div",y,[(0,l.createElementVNode)("span",v,(0,l.toDisplayString)(e.translate("old_link3"))+": "+(0,l.toDisplayString)(e.link3PreviewPageUrl("remove_http_prefix"))+"/",1),(0,l.createElementVNode)("span",b,(0,l.toDisplayString)(e.user.username),1)])):(0,l.createCommentVNode)("",!0),e.auth.show_username?((0,l.openBlock)(),(0,l.createElementBlock)("div",w,[(0,l.createTextVNode)((0,l.toDisplayString)(e.translate("tip_your"))+(0,l.toDisplayString)("rename_username"==e.auth.submit_button_action?e.translate("tip_your_new"):"")+(0,l.toDisplayString)(e.translate("tip_forever_link3"))+": ",1),(0,l.createElementVNode)("span",k,(0,l.toDisplayString)(e.link3PreviewPageUrl(""))+"/"+(0,l.toDisplayString)(e.username?e.username:e.translate("tip_username")),1)])):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(F,{inset:""},{default:(0,l.withCtx)((()=>[e.auth.show_username?((0,l.openBlock)(),(0,l.createBlock)(j,{key:0,modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),name:"username",label:e.translate("input_username_label"),placeholder:"rename_username"==e.auth.submit_button_action?e.translate("input_username_new"):e.translate("input_username"),onFocus:e.usernameFocus,onBlur:e.usernameBlur,"error-message":e.username_error_msg},null,8,["modelValue","label","placeholder","onFocus","onBlur","error-message"])):(0,l.createCommentVNode)("",!0),e.auth.show_password?((0,l.openBlock)(),(0,l.createBlock)(j,{key:1,modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),type:"password",name:"password",label:e.translate("input_password_label"),placeholder:"reset_password"==e.auth.submit_button_action?e.translate("input_password_new"):e.translate("input_password"),onFocus:e.passwordFocus,onBlur:e.passwordBlur,"error-message":e.password_error_msg},null,8,["modelValue","label","placeholder","onFocus","onBlur","error-message"])):(0,l.createCommentVNode)("",!0),e.auth.show_phone?((0,l.openBlock)(),(0,l.createBlock)(j,{key:2,modelValue:e.phone,"onUpdate:modelValue":t[2]||(t[2]=t=>e.phone=t),type:"tel",name:"phone",placeholder:e.translate("input_phone"),formatter:e.phoneFormatter,onFocus:e.phoneFocus,onBlur:e.phoneBlur,"error-message":e.phone_error_msg},{label:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.translate("input_phone_label")),1)])),_:1},8,["modelValue","placeholder","formatter","onFocus","onBlur","error-message"])):(0,l.createCommentVNode)("",!0),e.auth.show_msgcode?((0,l.openBlock)(),(0,l.createBlock)(j,{key:3,modelValue:e.msgcode,"onUpdate:modelValue":t[3]||(t[3]=t=>e.msgcode=t),name:"msgcode",center:"",clearable:"",label:e.translate("input_msgcode_label"),placeholder:e.translate("input_msgcode"),rules:[{required:!0,message:e.translate("input_msgcode_desc")}]},{button:(0,l.withCtx)((()=>[(0,l.createVNode)(M,{size:"small",type:"primary",onClick:e.codeVerifyClick,disabled:0!==e.countdown,style:{background:"#7C3AED",width:"80px",border:"0"}},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.countdown>0?e.countdown+"s":e.translate("input_msgcode_send")),1)])),_:1},8,["onClick","disabled"])])),_:1},8,["modelValue","label","placeholder","rules"])):(0,l.createCommentVNode)("",!0)])),_:1}),(0,l.createElementVNode)("div",T,["login"==e.auth.submit_button_action&&e.auth.show_username&&!e.auth.show_phone?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,onClick:t[4]||(t[4]=(...t)=>e.clickLoginUsePhone&&e.clickLoginUsePhone(...t))},[(0,l.createTextVNode)((0,l.toDisplayString)(e.translate("switch_to_phone_text1"))+" ",1),(0,l.createElementVNode)("span",x,(0,l.toDisplayString)(e.translate("switch_to_phone_text2")),1),S])):(0,l.createCommentVNode)("",!0),"login"==e.auth.submit_button_action&&e.auth.show_phone&&!e.auth.show_username?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:1,onClick:t[5]||(t[5]=(...t)=>e.clickLoginUseUsername&&e.clickLoginUseUsername(...t))},[(0,l.createTextVNode)((0,l.toDisplayString)(e.translate("switch_to_username_text1"))+" ",1),(0,l.createElementVNode)("span",E,(0,l.toDisplayString)(e.translate("switch_to_username_text2")),1),A])):(0,l.createCommentVNode)("",!0),"rename_username"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createElementBlock)("div",C,(0,l.toDisplayString)(e.translate("attention_tip")),1)):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",I,[(0,l.createVNode)(M,{round:"",block:"",type:"primary","native-type":"submit",style:{background:"#7C3AED","font-weight":"bolder",border:"0","background-image":"linear-gradient(to right, #eac7c7 , #7C3AED)"}},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.submitButtonName),1)])),_:1}),"rename_username"==e.auth.submit_button_action||"reset_password"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createBlock)(M,{key:0,round:"",block:"",type:"primary",style:{"margin-top":"40px",background:"white","font-weight":"bolder","border-color":"#EBEDF0",color:"black"},onClick:e.clickBack},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.translate("return_back")),1)])),_:1},8,["onClick"])):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",P,["login"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,onClick:t[6]||(t[6]=(...t)=>e.switchToRegist&&e.switchToRegist(...t))},[(0,l.createTextVNode)((0,l.toDisplayString)(e.translate("no_link3_account_text1"))+" ",1),(0,l.createElementVNode)("span",N,(0,l.toDisplayString)(e.translate("no_link3_account_text2")),1)])):"regist"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:1,onClick:t[7]||(t[7]=(...t)=>e.switchToLogin&&e.switchToLogin(...t))},[(0,l.createTextVNode)((0,l.toDisplayString)(e.translate("has_link3_account_text1"))+" ",1),(0,l.createElementVNode)("span",D,(0,l.toDisplayString)(e.translate("has_link3_account_text2")),1)])):(0,l.createCommentVNode)("",!0)]),"login"==e.auth.submit_button_action||"regist"==e.auth.submit_button_action?((0,l.openBlock)(),(0,l.createElementBlock)("div",L,[(0,l.createElementVNode)("span",O,(0,l.toDisplayString)(e.translate("link3_right1")),1),(0,l.createElementVNode)("span",{class:"fs12 pointer",onClick:t[8]||(t[8]=(...t)=>e.toAgreement&&e.toAgreement(...t)),style:{color:"#7D3AED"}},(0,l.toDisplayString)(e.translate("link3_right2")),1),(0,l.createElementVNode)("span",B,(0,l.toDisplayString)(e.translate("link3_right3")),1),(0,l.createElementVNode)("span",{class:"fs12 pointer",onClick:t[9]||(t[9]=(...t)=>e.toPrivacy&&e.toPrivacy(...t)),style:{color:"#7D3AED"}},(0,l.toDisplayString)(e.translate("link3_right4")),1)])):(0,l.createCommentVNode)("",!0)])),_:1},8,["onSubmit"]))])}var V=i(6294),R=i(4189),j=i(8871),M=i(9592),F=i(4944),q=i(8322),z={props:{show:{type:Boolean,default:!1},guest_info:Object},data:function(){return{formHide:!1,username:"",password:"",phone:"",msgcode:"",countdown:0,username_error_msg:"",password_error_msg:"",phone_error_msg:"",preview_language:{en:{big_title:"Link3, link to everywhere",only_one_minute:"only one minute,",take_your_link3:"get your own & forever Link3",old_username:"Old username",old_link3:"Old Link3",tip_your:"Your ",tip_your_new:"new ",tip_forever_link3:"forever Link3",tip_username:"username",input_username_label:"Username",input_username_new:"please input new username",input_username:"please input username",input_username_desc:"username must be: up to 4 letter, number, _",input_password_label:"Password",input_password_new:"please input new password",input_password:"please input password",input_password_desc:"password is need",input_phone_label:"Phone(+86)",input_phone:"please input phone",input_phone_desc:"please input right phone",input_msgcode_label:"Pin code",input_msgcode:"please input pin code",input_msgcode_desc:"pin code is need",input_msgcode_send:"Send",switch_to_phone_text1:"Switch to",switch_to_phone_text2:"Login with Phone",switch_to_username_text1:"Switch to",switch_to_username_text2:"Login with Username",attention_tip:"Note: all your link3 link will be changed after change the username. If you share them before, you must shage again.",return_back:"Back",no_link3_account_text1:"Has no Link3 account? Go",no_link3_account_text2:"Regist Free",has_link3_account_text1:"Already have Link3? Go",has_link3_account_text2:"Login",link3_right1:"Log in and registed means that you have read and agreed",link3_right2:"《User Agreement》",link3_right3:" and ",link3_right4:"《Privacy Agreement》",js_login:"Login",js_regist:"Regist",js_bind_username:"Bind Username",js_change_password:"Change Password",js_change_username:"Change Username",js_send_msgcode:"Send sussess, 5 minutes limited.【Link3】",js_input_phone:"Please input right phone number",js_send_msgcode_fail:"Send failed. Please contact us with Wechat: link3cc888",js_wrong_to_contact_us:"Wrong. Please contact us with Wechat: link3cc888",js_right_username_password:"Wrong username or password",js_right_phone_msgcode:"Wrong phone number or password",js_input_username_password:"Please input username, password",js_input_right_username_password:"Please input right username, username maybe exist, or length must more then 4",js_username_exist:"Username already exist, please input other username",js_password_change_success:"Password changed success",js_input_username:"Please input username",js_username_exist_use_other:"Username already exist, please input other username",js_success:"Success",js_tip_username_change_success:"Username changed success. Note: your http Link3, qrcode have changed, please share again if you have shared before.",js_modify_username_success:"Username changed",js_quit_need_login:"You have quit, please login first."},"zh-CN":{big_title:"登录Link3,链接到各种社交平台",only_one_minute:"只要1分钟,",take_your_link3:"领取你的专属、永久Link3链接",old_username:"原用户名",old_link3:"原社交链接",tip_your:"您的",tip_your_new:"新",tip_forever_link3:"永久且唯一Link3链接",tip_username:"用户名",input_username_label:"用户名",input_username_new:"请输入新的用户名",input_username:"请输入您的用户名",input_username_desc:"请输入正确的用户名:4位以上，仅支持英文字母、数字、下划线。不支持中文",input_password_label:"密码",input_password_new:"请输入新密码",input_password:"请输入密码",input_password_desc:"请输入密码",input_phone_label:"手机号(+86)",input_phone:"请输入手机号",input_phone_desc:"请正确输入手机号",input_msgcode_label:"验证码",input_msgcode:"请输入短信验证码",input_msgcode_desc:"请输入验证码",input_msgcode_send:"发送验证码",switch_to_phone_text1:"切换到",switch_to_phone_text2:"手机号登录",switch_to_username_text1:"切换到",switch_to_username_text2:"用户名登录",attention_tip:"注意：修改用户名后，您的Link3链接将会改变。若之前您已经对外分享过，修改成功后，要记得重新分享。",return_back:"返回",no_link3_account_text1:"没有Link3账户？去",no_link3_account_text2:"免费注册",has_link3_account_text1:"已经有Link3账户？去",has_link3_account_text2:"登录",link3_right1:"登录和注册即代表您已阅读并同意",link3_right2:"《用户协议》",link3_right3:" 和 ",link3_right4:"《隐私政策》",js_login:"登录",js_regist:"注册",js_bind_username:"绑定用户名",js_change_password:"修改密码",js_change_username:"修改用户名",js_send_msgcode:"发送成功,5分钟有效。短信验证码标识为【Link3】",js_input_phone:"请输入正确的手机号",js_send_msgcode_fail:"发送失败,请联系客服微信:link3cc888",js_wrong_to_contact_us:"出错了,请联系客服: link3cc888",js_right_username_password:"用户名或密码错误",js_right_phone_msgcode:"手机号或验证码错误",js_input_username_password:"请输入用户名、密码",js_input_right_username_password:"请输入正确的用户名: 用户名已被他人抢注，或长度至少4位以上",js_username_exist:"用户名已被他人抢注，请使用其它的用户名",js_password_change_success:"密码修改成功",js_input_username:"请输入用户名",js_username_exist_use_other:"用户名已被他人抢注，请使用其它的用户名",js_success:"成功",js_tip_username_change_success:"用户名修改成功。注意，您的Link3链接，和您的二维码，都已改变。若您之前已经对外分享过，要记得重新分享。",js_modify_username_success:"用户名已修改",js_quit_need_login:"已退出，请先登录"},"zh-HK":{big_title:"登錄Link3,鏈接到各種社交平台",only_one_minute:"只要1分鐘,",take_your_link3:"領取你的專屬、永久Link3鏈接",old_username:"原用戶名",old_link3:"原社交鏈接",tip_your:"您的",tip_your_new:"新",tip_forever_link3:"永久且唯一Link3鏈接",tip_username:"用戶名",input_username_label:"用戶名",input_username_new:"請輸入新的用戶名",input_username:"請輸入您的用戶名",input_username_desc:"請輸入正確的用戶名:4位以上，僅支持英文字母、數字、下劃線。不支持中文",input_password_label:"密碼",input_password_new:"請輸入新密碼",input_password:"請輸入密碼",input_password_desc:"請輸入密碼",input_phone_label:"手機號(+86)",input_phone:"請輸入手機號",input_phone_desc:"請正確輸入手機號",input_msgcode_label:"驗證碼",input_msgcode:"請輸入短信驗證碼",input_msgcode_desc:"請輸入驗證碼",input_msgcode_send:"發送驗證碼",switch_to_phone_text1:"切換到",switch_to_phone_text2:"手機號登錄",switch_to_username_text1:"切換到",switch_to_username_text2:"用戶名登錄",attention_tip:"注意：修改用戶名後，您的Link3鏈接將會改變。若之前您已經對外分享過，修改成功後，要記得重新分享。 ",return_back:"返回",no_link3_account_text1:"沒有Link3賬戶？去",no_link3_account_text2:"免費註冊",has_link3_account_text1:"已經有Link3賬戶？去",has_link3_account_text2:"登錄",link3_right1:"登錄和註冊即代表您已閱讀並同意",link3_right2:"《用戶協議》",link3_right3:" 和 ",link3_right4:"《隱私政策》",js_login:"登錄",js_regist:"註冊",js_bind_username:"綁定用戶名",js_change_password:"修改密碼",js_change_username:"修改用戶名",js_send_msgcode:"發送成功,5分鐘有效。短信驗證碼標識為【Link3】",js_input_phone:"請輸入正確的手機號",js_send_msgcode_fail:"發送失敗,請聯繫客服微信:link3cc888",js_wrong_to_contact_us:"出錯了,請聯繫客服: link3cc888",js_right_username_password:"用戶名或密碼錯誤",js_right_phone_msgcode:"手機號或驗證碼錯誤",js_input_username_password:"請輸入用戶名、密碼",js_input_right_username_password:"請輸入正確的用戶名: 用戶名已被他人搶註，或長度至少4位以上",js_username_exist:"用戶名已被他人搶註，請使用其它的用戶名",js_password_change_success:"密碼修改成功",js_input_username:"請輸入用戶名",js_username_exist_use_other:"用戶名已被他人搶註，請使用其它的用戶名",js_success:"成功",js_tip_username_change_success:"用戶名修改成功。注意，您的Link3鏈接，和您的二維碼，都已改變。若您之前已經對外分享過，要記得重新分享。 ",js_modify_username_success:"用戶名修改成功",js_quit_need_login:"已退出，請先登錄"}},agreement:!1,selectedZonePhone:"86",gt4_captcha:null,gt4_result:null}},computed:{...(0,V.mapState)({auth:e=>e.user.auth,user:e=>e.user.user,user_guest:e=>e.user.user_guest,temporary_user:e=>e.user.temporary_user}),submitButtonName:function(){let e=this.translate("js_login");switch(this.auth.submit_button_action){case"login":e=this.translate("js_login");break;case"regist":e=this.translate("js_regist");break;case"bind_username":e=this.translate("js_bind_username");break;case"reset_password":e=this.translate("js_change_password");break;case"rename_username":e=this.translate("js_change_username");break;default:e=this.translate("js_login");break}return e},present_language_c:function(){return this.present_language()},isPC(){return M.Jv().pc},_qiniuUrl(){return q.v.qiniuUrl},link3PreviewPageUrl(){return function(e){let t=q.v.link3PreviewPageUrl;return"remove_http_prefix"==e?t.replace(/^https?:\/\//,""):t}}},methods:{...(0,V.mapMutations)({updateLocalUserDataState:"page/updateLocalUserDataState",updateAuthState:"user/updateAuthState",updateUserState:"user/updateUserState",updateUserGuestState:"user/updateUserGuestState"}),translate:function(e){if(e)return-1==e.indexOf(".")?this.preview_language[this.present_language_c][e]:this.traverseObject(this.preview_language[this.present_language_c],e.split("."))},traverseObject(e,t){if(0===t.length)return"no";{const i=t[0];if("object"!==typeof e[i]||null===e[i])return e[i];this.traverseObject(e[i],t.slice(1))}},clickLoginUsePhone(){this.updateAuthState({is_logined:!1,show_username:!1,show_password:!1,show_phone:!0,show_msgcode:!0,submit_button_action:"login"})},clickLoginUseUsername(){this.updateAuthState({is_logined:!1,show_username:!0,show_password:!0,show_phone:!1,show_msgcode:!1,submit_button_action:"login"})},switchToLogin(){this.updateAuthState({is_logined:!1,show_username:!0,show_password:!0,show_phone:!1,show_msgcode:!1,submit_button_action:"login"})},switchToRegist(){this.updateAuthState({is_logined:!1,show_username:!1,show_password:!1,show_phone:!0,show_msgcode:!0,submit_button_action:"regist"})},usernameFocus(){this.username_error_msg=""},usernameBlur(){this.username&&(this.username=this.username.trim()),M.S_(this.username)||(this.username_error_msg=this.translate("input_username_desc"))},usernameFormatter(e){let t=e.replace(/^link3.cc\//g,"");return"link3.cc"==t?"link3.cc/":(t=t.replace(/[^0-9a-zA-Z_]/g,""),"link3.cc/"+t)},phoneFocus(){this.phone_error_msg=""},phoneBlur(){this.phone&&(this.phone=this.phone.trim()),this.selectedZonePhone&&"86"!==this.selectedZonePhone?this.selectedZonePhone:M.tH(this.phone)||(this.phone_error_msg=this.translate("input_phone_desc"))},phoneFormatter(e){return e.replace(/[^0-9]/g,"")},passwordFocus(){this.password_error_msg=""},passwordBlur(){this.password&&(this.password=this.password.trim()),(!this.password||this.password.length<=0)&&(this.password_error_msg=this.translate("input_password_desc"))},codeVerifyClick:async function(){this.phone&&M.tH(this.phone)?this.gt4_captcha?this.gt4_captcha.showBox():console.log("error, 图形验证码未初始化"):this.phone_error_msg=this.$t("account_page.auth_page.js_input_phone")},sendSms:async function(){this.countdown=59;try{let e=await R.i7(this.selectedZonePhone,this.phone,this.gt4_result);if(!e)return!1;if("0001"==e.code){let e=setInterval((()=>{this.countdown<=0?(clearInterval(e),e=null):this.countdown-=1}).bind(this),1e3);return void(0,j.Toast)({message:this.translate("js_send_msgcode"),position:"top"})}return"0002"==e.code?(this.phone_error_msg=this.translate("js_input_phone"),void(this.countdown=0)):(this.countdown=0,void j.Toast.fail(this.translate("js_send_msgcode_fail")))}catch(e){return j.Toast.fail(this.translate("js_wrong_to_contact_us")),void(this.countdown=0)}},clickBack:function(){this.$router.go(-1)},getUserInfo:async function(){let e=await R.bG();return!!e&&("0002"!=e.code&&"0003"!=e.code&&("0001"==e.code&&e.data))},usernameAuth:async function(){let e=await R.RF(this.username,this.password);return!!e&&("0002"==e.code||"0003"==e.code?(j.Toast.fail(this.translate("js_right_username_password")),!1):"0001"!=e.code?(j.Toast.fail(this.translate("js_wrong_to_contact_us")),!1):(window.wx&&window.wx.miniProgram.postMessage({data:{wx_token:e.data.token}}),e.data))},phoneAuth:async function(){let e="",t=await R.Mh(this.selectedZonePhone,this.phone,this.msgcode,e);return!!t&&("0002"==t.code||"0003"==t.code?(j.Toast.fail(this.translate("js_right_phone_msgcode")),!1):"0001"!=t.code?(j.Toast.fail(this.translate("js_wrong_to_contact_us")),!1):(window.wx&&window.wx.miniProgram.postMessage({data:{wx_token:t.data.token}}),t.data))},enterUserPage:async function(){this.updateAuthState({is_logined:!0,show_username:!0,show_password:!0,show_phone:!1,show_msgcode:!1,submit_button_action:"login"}),this.$emit("closePAuthPageEmit",!1)},onSubmit:async function(){try{switch(this.auth.submit_button_action){case"login":if(this.auth.show_username&&this.auth.show_password){if(this.username&&(this.username=this.username.trim()),this.password&&(this.password=this.password.trim()),!this.username)return void(this.username_error_msg=this.translate("js_input_username"));if(!this.password||this.password.length<=0)return void(this.password_error_msg=this.translate("input_password_desc"));let e=await this.usernameAuth();if(!e)return;let t=await this.getUserInfo();if(!t)return;this.updateUserGuestState(t),await this.enterUserPage()}else if(this.auth.show_phone&&this.auth.show_msgcode){if(this.msgcode&&(this.msgcode=this.msgcode.trim()),this.phone&&(this.phone=this.phone.trim()),this.selectedZonePhone&&"86"!==this.selectedZonePhone)this.selectedZonePhone;else if(!this.phone||!M.tH(this.phone))return void(this.phone_error_msg=this.translate("input_phone_desc"));if(!this.msgcode)return;let e=await this.phoneAuth();if(!e)return;let t=await this.getUserInfo();if(!t)return;this.updateUserGuestState(t),await this.enterUserPage()}break;case"regist":{if(this.msgcode&&(this.msgcode=this.msgcode.trim()),this.phone&&(this.phone=this.phone.trim()),this.selectedZonePhone&&"86"!==this.selectedZonePhone)this.selectedZonePhone;else if(!this.phone||!M.tH(this.phone))return void(this.phone_error_msg=this.translate("input_phone_desc"));if(!this.msgcode)return;let e=await this.phoneAuth();if(!e)return;let t=await this.getUserInfo();if(!t)return;await this.enterUserPage();break}case"bind_username":{if(this.username&&(this.username=this.username.trim()),this.password&&(this.password=this.password.trim()),!this.username)return void(this.username_error_msg=this.translate("js_input_username"));if(!M.S_(this.username))return void(this.username_error_msg=this.translate("input_username_desc"));if(0==this.username.indexOf("zscc")||this.username.length<4)return void(this.username_error_msg=this.translate("js_input_right_username_password"));if(!this.password||this.password.length<=0)return void(this.password_error_msg=this.translate("input_password_desc"));let e=await R.gS({username:this.username,password:M.FB(this.password)});if(!e)return!1;if("0005"==e.code)return void(this.username_error_msg=this.translate("js_username_exist"));if("0001"!=e.code)return void j.Toast.fail(this.translate("js_wrong_to_contact_us"));await this.enterUserPage();break}case"reset_password":{if(this.password&&(this.password=this.password.trim()),!this.password||this.password.length<=0)return void(this.password_error_msg=this.translate("input_password_desc"));let e=await R.gS({password:M.FB(this.password)});if(!e)return!1;if("0001"!=e.code)return void j.Toast.fail(this.translate("js_wrong_to_contact_us"));j.Toast.success(this.translate("js_password_change_success")),await this.enterUserPage();break}case"rename_username":{if(this.username&&(this.username=this.username.trim()),!this.username)return void(this.username_error_msg=this.translate("js_input_username"));if(!M.S_(this.username))return void(this.username_error_msg=this.translate("input_username_desc"));if(0==this.username.indexOf("zscc")||this.username.length<4)return void(this.username_error_msg=this.translate("js_input_right_username_password"));let e=await R.gS({username:this.username});if(!e)return!1;if("0005"==e.code)return void(this.username_error_msg=this.translate("js_username_exist_use_other"));if("0001"!=e.code)return void j.Toast.fail(this.translate("js_wrong_to_contact_us"));await this.enterUserPage();break}default:break}}catch(e){return void console.log(e)}},toAgreement(){window.open(this._qiniuUrl+"/others/%E7%94%A8%E6%88%B7%E5%8D%8F%E8%AE%AE%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/Link3%E7%94%A8%E6%88%B7%E5%8D%8F%E8%AE%AE.pdf")},toPrivacy(){window.open(this._qiniuUrl+"/others/%E7%94%A8%E6%88%B7%E5%8D%8F%E8%AE%AE%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/Link3%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96.pdf")},async userInfoFunction(){let e=await this.getUserInfo();e&&(this.updateUserGuestState(e),this.enterUserPage())},agree(){j.Toast.fail("请先同意用户协议和隐私政策")},pickCountry(e){e&&e.dialCode&&(this.selectedZonePhone=e.dialCode)}},created(){},mounted(){if(window&&window.initGeetest4){let e=this;window.initGeetest4({captchaId:q.v.txyzm.gt4.captcha_id,product:"bind"},(function(t){e.gt4_captcha=t,t.onReady((function(){console.log("txyzm ready")})).onSuccess((function(){let i=t.getValidate();i?(i.captcha_id=q.v.txyzm.gt4.captcha_id,e.gt4_result=i,e.sendSms()):j.Toast.fail("请完成验证")})).onError((function(){j.Toast.fail(this.$t("account_page.auth_page.js_wrong_to_contact_us")),console.log("dddd err")}))}))}let e=this.$route.query?this.$route.query:{};"regist"!=e.auth_type||this.updateAuthState({is_logined:!1,show_username:!1,show_password:!1,show_phone:!0,show_msgcode:!0,submit_button_action:"regist"})},inject:["present_language"],watch:{"$route.params":{handler:function(e){e&&e.is401&&(j.Toast.fail(this.translate("js_quit_need_login")),this.updateAuthState({is_logined:!1,show_username:!0,show_password:!0,show_phone:!1,show_msgcode:!1,submit_button_action:"login"}))}}},components:{PhonePicker:F.Z}},H=z,W=i(89);const G=(0,W.Z)(H,[["render",U],["__scopeId","data-v-46fb07f2"]]);var X=G},5610:function(e,t,i){"use strict";i.d(t,{Z:function(){return Z}});var n=i(3),s=(i(6145),i(6106)),r=i(3042),o=(i(5708),i(9545)),a=(i(51),i(311));const l=e=>((0,a.pushScopeId)("data-v-a5d4ff3a"),e=e(),(0,a.popScopeId)(),e),u={style:{width:"85vw",position:"relative","max-width":"320px"},class:"b",id:"pbuypopup"},c={style:{width:"100%",height:"257px","background-color":"white","border-radius":"16px"},class:"flexC flexD b"},d={class:"flexLC flexD b",style:{width:"100%",flex:"1",padding:"0 7.5%"}},h={class:"fs16 bold",style:{"padding-top":"30px","padding-bottom":"14px"}},p={class:"tac",style:{width:"100%",color:"#666","margin-top":"16px"}},m={class:"fs14",style:{"margin-right":"4px"}},g={key:0,class:"fs15 bold"},_={key:1},f={class:"fs14",style:{"margin-left":"4px"}},y={class:"flexC tac",style:{width:"100%",color:"#666","margin-top":"16px"}},v={class:"fs18 bold",style:{color:"#FA5B26"}},b=l((()=>(0,a.createElementVNode)("span",{style:{"font-size":"12px","padding-right":"2px"}},"¥",-1))),w={class:"flexBC pointer",style:{height:"50px","border-top":"1px solid #eee",width:"100%"}},k={class:"fs16"},T={class:"flexD flexLC",style:{width:"320px",height:"342px",background:"#FFFFFF","border-radius":"16px"}},x={class:"fs16 bold",style:{"line-height":"18px","padding-top":"30px","padding-bottom":"18px"}},S={class:"fs14",style:{"line-height":"18px","padding-bottom":"16px",color:"#696969"}},E={class:"flexD flexLC",style:{width:"184px",height:"216px","border-radius":"8px",border:"1px solid #EBEEF1"}},A={class:"flexC",style:{"padding-top":"10px","align-items":"flex-end"}},C=l((()=>(0,a.createElementVNode)("span",{class:"fs12 bold",style:{"padding-right":"3px","padding-bottom":"1px"}},"¥",-1))),I={class:"fs16 bold"},P={key:0},N={style:{width:"320px","min-height":"300px","background-color":"white","border-radius":"16px"},class:"flexC flexD b"},D={class:"flexLC flexD b",style:{width:"100%",flex:"1",padding:"0 10px",cursor:"text"}},L={class:"fs14",style:{"line-height":"18px","padding-top":"32px",color:"#000000"}},O={class:"fs14",style:{"line-height":"18px",color:"#000000"}},B={class:"fs14",style:{"line-height":"18px",color:"#000000"}},U={style:{"padding-top":"10px","padding-bottom":"20px"}},V={class:"flexBC pointer",style:{height:"47px",width:"100%","line-height":"47px",color:"#000000","font-size":"16px","border-top":"1px solid #EEEEEE"}};function R(e,t,i,l,R,j){const M=(0,a.resolveComponent)("pwxpay"),F=o.z,q=r.G,z=(0,a.resolveComponent)("vue-qrcode"),H=s.Z,W=n.E;return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(M,{ref:"pwxpay",goods:e.goods,buy_num:e.buy_num},null,8,["goods","buy_num"]),(0,a.createVNode)(q,{onClickOverlay:e.buyClose,show:e.buy_popup_show,"onUpdate:show":t[2]||(t[2]=t=>e.buy_popup_show=t),round:"",teleport:"#app",style:{"--van-popup-background-color":"transparent"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("div",d,[(0,a.createElementVNode)("span",h,(0,a.toDisplayString)(e.translate("paid_access")),1),(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("span",m,(0,a.toDisplayString)(e.translate("js_pay_to")),1),e.user.profile_title?((0,a.openBlock)(),(0,a.createElementBlock)("span",g,(0,a.toDisplayString)(e.user.profile_title?e.nameslice(e.user.profile_title,26):e.user.username),1)):((0,a.openBlock)(),(0,a.createElementBlock)("span",_,(0,a.toDisplayString)(e.translate("Web_Author")),1)),(0,a.createElementVNode)("span",f,(0,a.toDisplayString)(e.translate("js_pay_to_")),1)]),(0,a.createElementVNode)("div",y,[(0,a.createElementVNode)("span",v,[b,(0,a.createTextVNode)((0,a.toDisplayString)(e.goods.price),1)])])]),(0,a.createElementVNode)("div",w,[(0,a.createElementVNode)("div",{class:"flexC cancel",style:{width:"50%",height:"100%"},onClick:t[0]||(t[0]=(...t)=>e.buyClose&&e.buyClose(...t))},[(0,a.createElementVNode)("span",k,(0,a.toDisplayString)(e.translate("cancel")),1)]),(0,a.createElementVNode)("div",{loading:"true",class:"flexC go",style:{width:"50%",height:"100%",color:"#7F49FC","border-left":"1px solid #eee"},onClick:t[1]||(t[1]=(...t)=>e.open&&e.open(...t))},[e.is_login?((0,a.openBlock)(),(0,a.createBlock)(F,{key:0,class:"fs16",loading:!(!e.is_login||!e.button_loading)&&e.is_login,type:"default",style:{border:"none"},"loading-text":e.translate("js_pay_and_continue_loading")},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("js_pay_and_continue")),1)])),_:1},8,["loading","loading-text"])):((0,a.openBlock)(),(0,a.createBlock)(F,{key:1,class:"fs16",loading:!!e.button_loading&&e.button_loading,type:"default",style:{border:"none"},"loading-text":e.translate("js_log_in_and_continue_loading")},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.translate("js_log_in_and_continue")),1)])),_:1},8,["loading","loading-text"]))])])])])])),_:1},8,["onClickOverlay","show"]),(0,a.createVNode)(q,{onClickOverlay:e.qrcodeClose,show:e.buy_popup_qrcode,"onUpdate:show":t[3]||(t[3]=t=>e.buy_popup_qrcode=t),style:{"--van-popup-background-color":"transparent"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",T,[(0,a.createElementVNode)("span",x,(0,a.toDisplayString)(e.translate("cash")),1),(0,a.createElementVNode)("span",S,(0,a.toDisplayString)(e.translate("scan")),1),(0,a.createElementVNode)("div",E,[(0,a.createElementVNode)("div",A,[C,(0,a.createElementVNode)("span",I,(0,a.toDisplayString)(e.goods.price),1)]),e.qr_url?((0,a.openBlock)(),(0,a.createElementBlock)("div",P,[(0,a.createVNode)(z,{value:e.qr_url,options:{width:180,height:180,errorCorrectionLevel:"Q"}},null,8,["value"])])):(0,a.createCommentVNode)("",!0)])])])),_:1},8,["onClickOverlay","show"]),(0,a.createVNode)(q,{show:e.show_auth_popup,"onUpdate:show":t[4]||(t[4]=t=>e.show_auth_popup=t),onClickOverlay:e.pAuthPageClose,style:(0,a.normalizeStyle)([{border:"0","border-radius":"16px"},{width:e.bpopupWidth+"px","min-height":e.bpopupWidth+"px"}])},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{show:e.show_auth_popup,guest_info:e.user,onClosePAuthPageEmit:e.closePAuthPage},null,8,["show","guest_info","onClosePAuthPageEmit"])])),_:1},8,["show","onClickOverlay","style"]),(0,a.createVNode)(q,{onClickOverlay:e.joinGroupClose,show:e.join_group,"onUpdate:show":t[6]||(t[6]=t=>e.join_group=t),style:{"--van-popup-background-color":"transparent"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",N,[(0,a.createElementVNode)("div",D,[(0,a.createElementVNode)("span",L,(0,a.toDisplayString)(e.translate("join_group_info_1")),1),(0,a.createElementVNode)("span",O,(0,a.toDisplayString)(e.translate("join_group_info_2")),1),(0,a.createElementVNode)("span",B,(0,a.toDisplayString)(e.translate("join_group_info_3")),1),(0,a.createElementVNode)("div",U,[(0,a.createVNode)(W,{src:e.weChat_url,fit:"contain",width:"173",height:"173",style:{}},null,8,["src"])])]),(0,a.createElementVNode)("div",V,[(0,a.createElementVNode)("div",{class:"flexC",style:{width:"100%",height:"100%","align-items":"center"},onClick:t[5]||(t[5]=(...t)=>e.joinGroupClose&&e.joinGroupClose(...t))},[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.translate("confirm")),1)])])])])),_:1},8,["onClickOverlay","show"])],64)}var j=i(6294),M=i(4189),F=i(2009),q=i(2175),z=i(9592),H=i(7594),W=i(8322),G={props:{item:Object,index:Number,pay_toggle_show:Boolean},data:function(){return{lang:[],languageChecked:"zh-CN",buy_num:1,goods:{},showcomputed:this.show,buy_popup_show:!0,buy_popup_qrcode:!1,qr_url:void 0,preview_language:{en:{js_toast_fail:"Wrong. Please contact us with Wechat: link3cc888",js_language_tip:"Language changed, your friend will see it in ",cash:"Cash Register",scan:"Please use wechat scan the QR code to pay",cancel:"Cancel",js_pay_and_continue:"Pay and continue",js_pay_and_continue_loading:"Pay and continue ...",paid_access:"Paid Access",Web_Author:"web page author",js_pay_to:"Pay to ",js_pay_to_:"",js_log_in_and_continue:"Log in",js_log_in_and_continue_loading:"Log in ...",join_group_info_1:"The service has been temporarily disabled by the Link3's administrator,",join_group_info_2:"The restoration time will be notified separately.",join_group_info_3:"You can join the Link3's official user group to stay updated on the latest developments.",confirm:"Confirm"},"zh-CN":{js_toast_fail:"失败，请联系客服",js_language_tip:"已切换语言，您的用户将看到",cash:"收银台",scan:"请使用微信扫码支付",cancel:"取消",js_pay_and_continue:"支付并继续",js_pay_and_continue_loading:"支付并继续...",paid_access:"付费访问",Web_Author:"网页作者",js_pay_to:"向",js_pay_to_:"支付",js_log_in_and_continue:"登录并继续",js_log_in_and_continue_loading:"登录并继续...",join_group_info_1:"Link3的系统管理员暂时关闭了此服务，",join_group_info_2:"恢复时间另行通知。",join_group_info_3:"加入Link3官方用户群，了解最新进展",confirm:"确定"},"zh-HK":{js_toast_fail:"失敗，請聯繫客服",js_language_tip:"已切換語言，您的用戶將看到",cash:"收銀台",scan:"請使用微信掃碼支付",cancel:"取消",js_pay_and_continue:"支付並繼續",js_pay_and_continue_loading:"支付並繼續...",paid_access:"付费访问",Web_Author:"網頁作者",js_pay_to:"Pay to ",js_pay_to_:"支付",js_log_in_and_continue:"登錄並繼續",js_log_in_and_continue_loading:"登錄並繼續...",join_group_info_1:"Link3的系統管理員暫時關閉了此服務，",join_group_info_2:"恢復時間另行通知。",join_group_info_3:"加入Link3官方用戶群，了解最新進展",confirm:"確定"}},bpopupWidth:.86*window.innerWidth>375?375:.86*window.innerWidth,windowInnerHeight:window.innerHeight+"px",show_auth_popup:!1,is_login:!1,button_loading:!1,join_group:!1}},computed:{...(0,j.mapState)({show_buy_popup_link3:e=>e.page.local_user_data.show_buy_popup_link3,show_buy_qrcode_link3:e=>e.page.local_user_data.show_buy_qrcode_link3,show_buy_qrcode_url_link3:e=>e.page.local_user_data.show_buy_qrcode_url_link3,buy_popup_goods_index_link3:e=>e.page.local_user_data.buy_popup_goods_index_link3,user_guest:e=>e.user.user_guest,user:e=>e.user.user,reclick_buy_popup_link3:e=>e.page.local_user_data.reclick_buy_popup_link3,temporary_user:e=>e.user.temporary_user,user_guest_orders:e=>e.user.user_guest.link3_orders}),type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},buy_popup_show_c:function(){return!!this.pay_toggle_show&&this.buy_popup_show},payment_amount:function(){return this.type_value.payment_amount?this.type_value.payment_amount:""},present_language_c:function(){return this.present_language()},weChat_url(){return W.v.qiniuUrl+"/others/auth/qrcode_new.png"},isWeixin(){return(0,z.Jv)().weixin},isMiniprogram(){return(0,z.Jv)().miniprogram}},emits:["payToggleShowEmit"],inject:["present_language"],methods:{...(0,j.mapMutations)({updateUserState:"user/updateUserState",updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState",updateUserGuestOrders:"user/updateUserGuestOrders"}),buyClose(){this.button_loading=!1,this.buy_popup_show=!1,this.updateLocalUserDataState({show_buy_popup_link3:!1,show_buy_qrcode_link3:!1}),this.$emit("payToggleShowEmit",!1)},open:(0,z.Ds)((async function(){if(this.isMiniprogram)return this.buyClose(),void this.updateLocalUserDataState({show_miniprogram_popup:!0,show_miniprogram_content:this.user.username?W.v.link3PreviewPageUrl+"/"+this.user.username:""});if(this.button_loading=!0,""===this.user_guest.unid)return this.show_auth_popup=!0,void this.updateLocalUserDataState({show_buy_popup_link3:!1,reclick_buy_popup_link3:!0,reclick_donate_popup_link3:!1});if(!H.Z.getToken()||"undefined"==H.Z.getToken()||""===this.user_guest.unid)return this.show_auth_popup=!0,void this.updateLocalUserDataState({show_buy_popup_link3:!1,reclick_buy_popup_link3:!0,reclick_donate_popup_link3:!1});{let e=await M.LO();if(!e)return!1;"0001"==e.code&&(this.updateUserGuestState(e.data),e.data&&e.data.vip&&e.data.vip.link3_orders&&this.updateUserGuestOrders(e.data.vip.link3_orders))}this.updateLocalUserDataState({reclick_buy_popup_link3:!1,reclick_donate_popup_link3:!1}),this.buy_popup_show=!1,this.join_group=!0}),700),checkLink3OrdersStatus(e){if(this.user_guest&&this.user_guest_orders){let t=this.user_guest_orders;return!(!t||!Array.isArray(t))&&(!!t.find((t=>t.module_id==e&&t.price>0))||(this.user_guest.unid,this.user.unid,!1))}return!1},checkTemporaryUserLink3OrdersStatus(e){if(this.temporary_user&&""!==this.temporary_user.unid&&this.temporary_user.vip){let t=this.temporary_user.vip;return!(!t.link3_orders||!Array.isArray(t.link3_orders))&&(!!t.link3_orders.find((t=>t.module_id==e&&t.price>0))||(this.temporary_user.unid,this.user.unid,!1))}return!1},closePAuthPage(e){this.button_loading=!1,this.buy_popup_show=!1,e||(H.Z.getToken()&&this.buy_popup_goods_index_link3&&this.checkLink3OrdersStatus(this.buy_popup_goods_index_link3)?this.updateLocalUserDataState({module_id_reclick:this.buy_popup_goods_index_link3?this.buy_popup_goods_index_link3:999999,favorite_reclick:!1,reclick_buy_popup_link3:!1,reclick_donate_popup_link3:!1}):this.updateLocalUserDataState({module_id_reclick:this.buy_popup_goods_index_link3?this.buy_popup_goods_index_link3:999999,favorite_reclick:!1,reclick_buy_popup_link3:!0,reclick_donate_popup_link3:!1})),this.show_auth_popup=e},goodsIndex(e){switch(e){case"01":return 0;case"02":return 1;default:return e}},qrcodeClose(){this.button_loading=!1,this.buy_popup_show=!1,this.updateLocalUserDataState({show_buy_popup_link3:!1,show_buy_qrcode_link3:!1}),this.$emit("payToggleShowEmit",!1)},nameslice(e,t){const i=t||13;return this.getLength(e,i)[1]+1<e.length?e.slice(0,this.getLength(e,i)[1])+"...":e},getLength(e,t){let i=0,n=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);if(n=s,i+=r>=0&&r<=128?1:2,i>t)return[i,s]}return[i,n]},translate:function(e){return this.preview_language[this.present_language_c][e]},pAuthPageClose(){this.button_loading=!1,this.buy_popup_show=!1,this.updateLocalUserDataState({reclick_buy_popup_link3:!1,show_buy_popup_link3:!1,show_buy_qrcode_link3:!1,reclick_donate_popup_link3:!1}),this.$emit("payToggleShowEmit",!1)},joinGroupClose(){this.join_group=!1,this.buy_popup_show=!1,this.updateLocalUserDataState({show_buy_popup_link3:!1,show_buy_qrcode_link3:!1}),this.$emit("payToggleShowEmit",!1)}},mounted(){this.button_loading=!1,H.Z.getToken()&&(this.is_login=!0)},updated(){this.button_loading=!1,H.Z.getToken()&&this.reclick_buy_popup_link3&&this.goods.price>0&&(this.is_login=!0,this.open())},watch:{buy_popup_goods_index_link3:{handler(e){this.goods.price=parseFloat(this.type_value.payment_amount),this.goods.name=this.type_value.title,this.goods.goodsid=e,this.goods.business_code="51",this.goods.c_unid=this.user.unid},immediate:!0},show_buy_popup_link3:{handler(e,t){"boolean"==typeof e&&(e&&(this.buy_num=1),this.buy_popup_show=e)}},show_buy_qrcode_link3:{handler(e,t){"boolean"==typeof e&&(this.buy_popup_show&&this.updateLocalUserDataState({show_buy_popup_link3:!1}),this.buy_popup_qrcode=e)}},show_buy_qrcode_url_link3:{handler(e){this.qr_url=e}},buy_num(e){e<1&&(this.buy_num=1)},"user.setting.present_language":{handler(e,t){if(e){let t=e;"English"==e?t="en":"中文"==e&&(t="zh-CN"),this.languageChecked=t}},immediate:!0}},components:{pwxpay:F.Z,[q.Z.name]:q.Z,PAuthPage:s.Z}},X=G,Q=i(89);const K=(0,Q.Z)(X,[["render",R],["__scopeId","data-v-a5d4ff3a"]]);var Z=K},5280:function(e,t,i){"use strict";i.d(t,{Z:function(){return k}});var n=i(3042),s=(i(5708),i(311));const r={id:"PEncryptedPopup",class:"main_container flexD flexLC"},o={class:"title flexC",style:{width:"100%"}},a={style:{"padding-top":"28px","padding-bottom":"14px"},class:"fs16 bold"},l={class:"flexC",style:{padding:"0 26px 12px","align-items":"baseline"}},u={style:{height:"30px",width:"100px","background-color":"#fff"}},c={style:{padding:"0 26px 30px","text-align":"center"}},d={class:"fs14 b",style:{color:"#7C7C7C",width:"auto","white-space":"nowrap"}},h={class:"flexBC pointer b",style:{width:"100%",height:"48px","border-top":"1px solid #eee"}},p={class:"fs16"},m={class:"fs16"};function g(e,t,i,g,_,f){const y=(0,s.resolveComponent)("Smscode"),v=n.G;return(0,s.openBlock)(),(0,s.createBlock)(v,{show:e.encrypted_toggle_show_c,"onUpdate:show":t[3]||(t[3]=t=>e.encrypted_toggle_show_c=t),round:"",teleport:"#app",onClickOverlay:t[4]||(t[4]=t=>e.changeTextShowEmit(!1)),position:"center",style:{"--van-popup-round-border-radius":"16px","z-index":"999999"}},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",r,[(0,s.createElementVNode)("div",o,[(0,s.createElementVNode)("span",a,(0,s.toDisplayString)(e.translate("js_Access_after_entering_password")),1)]),(0,s.createElementVNode)("div",l,[(0,s.withDirectives)((0,s.createElementVNode)("span",{class:"fs14 b",style:{"padding-right":"4px",color:"#7C7C7C",width:"auto","white-space":"nowrap"}},(0,s.toDisplayString)(e.translate("js_prompt")),513),[[s.vShow,e.password_prompt]]),(0,s.withDirectives)((0,s.createElementVNode)("span",{class:"fs14 b",style:{color:"#7C7C7C","line-height":"16px"}},(0,s.toDisplayString)(e.password_prompt&&e.password_prompt.length>50?e.password_prompt.slice(0,50)+"...":e.password_prompt),513),[[s.vShow,e.password_prompt]])]),(0,s.createVNode)(y,{style:{width:"246px","flex-grow":"1"},value:e.inputvalue,onCallback:e.encryptedBrowsingPasswordEdit,inputErrorPopup:e.inputErrorPopup,showCursor:!0,codeType:"number",codeCount:4},null,8,["value","onCallback","inputErrorPopup"]),(0,s.withDirectives)((0,s.createElementVNode)("span",{class:"fs14",style:{"padding-top":"10px","padding-bottom":"30px",color:"#FF0000"}},(0,s.toDisplayString)(e.translate("js_verify_fail")),513),[[s.vShow,e.inputErrorPopup&&e.err_first]]),(0,s.withDirectives)((0,s.createElementVNode)("span",{class:"fs14",style:{"padding-top":"10px","padding-bottom":"30px",color:"#FF0000"}},(0,s.toDisplayString)(e.translate("js_access_denied")),513),[[s.vShow,e.inputErrorPopup&&e.err_second]]),(0,s.withDirectives)((0,s.createElementVNode)("div",u,null,512),[[s.vShow,!e.inputErrorPopup]]),(0,s.withDirectives)((0,s.createElementVNode)("div",c,[(0,s.createElementVNode)("span",d,(0,s.toDisplayString)(e.translate("js_get_password_link")),1),(0,s.createElementVNode)("span",{onClick:t[0]||(t[0]=t=>e.openNewPage(e.obtain_password_through_link)),class:"fs14 b pointer",style:{color:"#7D3AED","line-height":"16px",display:"block","margin-top":"2px"}},(0,s.toDisplayString)(e.obtain_password_through_link&&e.obtain_password_through_link.length>24?e.obtain_password_through_link.slice(0,24)+"...":e.obtain_password_through_link),1)],512),[[s.vShow,e.obtain_password_through_link]]),(0,s.createElementVNode)("div",h,[(0,s.createElementVNode)("div",{class:"flexC",style:{width:"50%",height:"100%",color:"#666666"},onClick:t[1]||(t[1]=t=>e.changeTextShowEmit(!1))},[(0,s.createElementVNode)("span",p,(0,s.toDisplayString)(e.translate("js_cancel")),1)]),(0,s.createElementVNode)("div",{class:"flexC",style:{width:"50%",height:"100%",color:"#8537FB","border-left":"1px solid #eee"},onClick:t[2]||(t[2]=t=>e.verifyPasswordEmit(!1))},[(0,s.createElementVNode)("span",m,(0,s.toDisplayString)(e.translate("js_confirm")),1)])])])])),_:1},8,["show"])}var _=i(9592),f=i(8218),y={props:{item:Object,index:Number,user:Object,encrypted_toggle_show:Boolean},inject:["present_language"],data:function(){return{preview_language:{en:{js_access_denied:"Too many consecutive failures, please try again in 10 minutes",js_confirm:"Confirm",js_verify_fail:"Password error, please re-enter",js_cancel:"Cancel",js_Access_after_entering_password:"Access after entering password",js_prompt:"Prompt:",js_get_password_link:"Get password"},"zh-CN":{js_access_denied:"连续失败的次数过多，请10分钟之后再试",js_confirm:"确认",js_verify_fail:"密码错误，请重新输入",js_cancel:"取消",js_Access_after_entering_password:"输入密码后访问",js_prompt:"提示:",js_get_password_link:"获取密码"},"zh-HK":{js_access_denied:"連續失敗的次數過多，請10分鐘之後再試",js_confirm:"確認",js_verify_fail:"密碼錯誤，請重新輸入",js_cancel:"取消",js_Access_after_entering_password:"輸入密碼後訪問",js_prompt:"提示:",js_get_password_link:"獲取密碼"}},tmpEncryptedBrowsingPassword:"",checkEncryption:!1,inter:void 0,inputErrorPopup:!1,inputvalue:"",prompt_info:!1}},computed:{type_value:function(){return this.item&&this.item.typeValue?this.item.typeValue:{}},encrypted_toggle_show_c:function(){if(this.item.unid)return!!this.encrypted_toggle_show&&this.encrypted_toggle_show},present_language_c:function(){return this.present_language()},encrypted_browsing_password_md5:function(){return this.type_value.encrypted_browsing_password_md5?this.type_value.encrypted_browsing_password_md5:""},payment_amount:function(){return this.type_value.payment_amount?this.type_value.payment_amount:""},password_prompt:function(){return this.item&&this.item.typeValue&&this.item.typeValue.password_prompt?this.item.typeValue.password_prompt:""},obtain_password_through_link:function(){return this.item&&this.item.typeValue&&this.item.typeValue.obtain_password_through_link?this.item.typeValue.obtain_password_through_link:""}},methods:{changeTextShowEmit(e){this.$emit("encryptedToggleShowEmit",e)},verifyPasswordEmit:(0,_.Ds)((async function(){const e=this.item.unid;let t=JSON.parse(localStorage.getItem(`errors-${e}`))||[];const i=t.length>0?t[t.length-1]:0,n=(new Date).getTime(),s=(n-i)/1e3/60;if(i&&t.length>4){if(s<10)return this.inputErrorPopup=!0,this.err_second=!0,this.err_first=!1,void(this.inter=setTimeout((()=>{this.inputErrorPopup=!1,clearTimeout(this.inter),this.inter=void 0}),2e3));t=[],localStorage.removeItem(`errors-${e}`),localStorage.removeItem(`attempts-${e}`)}let r=this.type_value.encrypted_browsing_password_md5;(0,_.FB)(this.tmpEncryptedBrowsingPassword)==r?(this.$emit("confirm",""),this.$emit("encryptedToggleShowEmit",!1)):(this.inputErrorPopup=!0,this.err_first=!0,this.err_second=!1,this.inter=setTimeout((()=>{this.inputErrorPopup=!1,clearTimeout(this.inter),this.inter=void 0}),2e3),t.push(n),localStorage.setItem(`errors-${e}`,JSON.stringify(t)))}),300),encryptedBrowsingPasswordEdit:function(e){try{this.tmpEncryptedBrowsingPassword=e}catch(t){console.log(t)}},translate:function(e){return this.preview_language[this.present_language_c][e]},openNewPage(e){let t=(0,_.sg)(e);t&&window.open(t,"_blank")}},watch:{},mounted(){},updated:function(){},components:{Smscode:f.Z}},v=y,b=i(89);const w=(0,b.Z)(v,[["render",g],["__scopeId","data-v-11de6ddc"]]);var k=w},7984:function(e,t,i){"use strict";i.d(t,{Z:function(){return x}});var n=i(5610),s=i(5280),r=i(8620),o=(i(7748),i(3)),a=(i(6145),i(8101)),l=(i(1252),i(3649)),u=(i(4165),i(311)),c=i(6647);const d=e=>((0,u.pushScopeId)("data-v-2fa5b004"),e=e(),(0,u.popScopeId)(),e),h=d((()=>(0,u.createElementVNode)("img",{src:c,style:{height:"70px"},alt:""},null,-1))),p=[h],m=["onClick"],g={style:{"font-size":"16px",width:"100%","padding-left":"12px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},_={key:0,style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"center","margin-top":"5px",cursor:"pointer"}},f=["onClick"],y={key:0};function v(e,t,i,c,d,h){const v=l.J,b=a.j,w=o.E,k=r.o,T=s.Z,x=n.Z;return(0,u.openBlock)(),(0,u.createElementBlock)("div",{style:(0,u.normalizeStyle)([{position:"relative","box-sizing":"border-box"},{"border-radius":e.style_border}])},[(0,u.withDirectives)((0,u.createElementVNode)("div",{onClick:t[0]||(t[0]=(...t)=>e.imageClick&&e.imageClick(...t)),class:"pointer flexC",style:(0,u.normalizeStyle)([{"backdrop-filter":"blur(40px)","z-index":"1",position:"absolute",top:"0",left:"0",height:"100%",width:"100%"},{"border-radius":e.style_border}])},p,4),[[u.vShow,e.encrypt_icon_after]]),(0,u.createVNode)(k,{ref:"refImageSwipe","lazy-render":"",autoplay:e.auto_play_time,"show-indicators":!1,style:{width:"100%",cursor:"pointer"}},{indicator:(0,u.withCtx)((({active:t,total:i})=>[e.show_indicators?((0,u.openBlock)(),(0,u.createElementBlock)("div",_,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(i,(i=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:i,style:(0,u.normalizeStyle)([{height:"10px",width:"10px","border-radius":"10px","margin-left":"8px","margin-right":"8px"},e.indicatorStyle(i,t)]),onClick:t=>e.indicatorClick(i)},null,12,f)))),128))])):(0,u.createCommentVNode)("",!0)])),default:(0,u.withCtx)((()=>[e.images.length<=0?((0,u.openBlock)(),(0,u.createBlock)(b,{key:0,style:{position:"relative",height:"100%"}},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{"vertical-align":"middle",background:"white","font-size":"30px",color:"#5e5e5e","box-sizing":"border-box","text-align":"center"},e.style_when_no_image])},[(0,u.createVNode)(v,{name:"photo-o"})],4)])),_:1})):(0,u.createCommentVNode)("",!0),((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.images,((t,i)=>((0,u.openBlock)(),(0,u.createBlock)(b,{key:i,style:{position:"relative"},class:(0,u.normalizeClass)([e.encrypt_icon_after?"blur40":"",e.encrypt_icon_after&&e.isSafari?"safari_opacity":""])},{default:(0,u.withCtx)((()=>[(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{width:"100%",height:"0"},{paddingBottom:e.style_height_image}])},[e.getImageSquareOrRectangleUrl(t.image_url)?((0,u.openBlock)(),(0,u.createBlock)(w,{key:0,fit:"cover",radius:"4",style:(0,u.normalizeStyle)([{width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px"},e.imageStyle]),src:e.isSafari&&e.encrypt_icon_after?"":e.getImageSquareOrRectangleUrl(t.image_url),onClick:n=>e.imageClick(t,i)},null,8,["style","src","onClick"])):((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,style:(0,u.normalizeStyle)([{"vertical-align":"middle",background:"white","font-size":"30px",color:"#5e5e5e","box-sizing":"border-box","text-align":"center",display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px"},{"border-radius":e.style_border}])},[(0,u.createVNode)(v,{name:"photo-o"})],4))],4),t.tag&&t.tag.text?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:0,style:(0,u.normalizeStyle)([{position:"absolute",top:"14px",width:"100%","box-sizing":"border-box",display:"flex","flex-direction":"row","align-items":"center"},e.tagAlign(t,i)]),onClick:n=>e.imageClick(t,i)},[(0,u.createElementVNode)("div",{style:(0,u.normalizeStyle)([{color:"white",border:"1px solid white","border-radius":"20px","font-size":"14px",height:"34px","line-height":"34px","vertical-align":"middle","padding-left":"16px","padding-right":"16px","box-sizing":"border-box","max-width":"160px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"},e.tagBackgroundColor(t,i)])},(0,u.toDisplayString)(t.tag&&t.tag.text?t.tag.text:""),5)],12,m)):(0,u.createCommentVNode)("",!0),t.desc&&t.desc.text?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,style:(0,u.normalizeStyle)([{position:"absolute",bottom:"0",display:"flex","justify-content":"center","align-items":"center",color:"white",width:"100%",height:"38px","font-size":"14px","font-weight":"600","border-bottom-left-radius":"4px","border-bottom-right-radius":"4px","background-size":"100% 100%"},{backgroundImage:`url(${e.text_bg})`,textAlign:e.descTextAlign(t,i),borderBottomRightRadius:e.style_border,borderBottomLeftRadius:e.style_border}])},[(0,u.createElementVNode)("div",g,(0,u.toDisplayString)(t.desc&&t.desc.text?t.desc.text:""),1)],4)):(0,u.createCommentVNode)("",!0)])),_:2},1032,["class"])))),128))])),_:1},8,["autoplay"]),e.images.length>1&&!e.show_indicators?((0,u.openBlock)(),(0,u.createElementBlock)("div",y,[(0,u.createElementVNode)("div",{style:{"z-index":"1000",position:"absolute",left:"4px",top:"40%","font-size":"16px",display:"flex","justify-content":"center","align-items":"center",width:"16px",height:"20px","border-radius":"2px",background:"#e7e7e799",cursor:"pointer"},onClick:t[1]||(t[1]=(...t)=>e.preImage&&e.preImage(...t))},[(0,u.createVNode)(v,{name:"arrow-left"})]),(0,u.createElementVNode)("div",{style:{"z-index":"1000",position:"absolute",right:"4px",top:"40%","font-size":"16px",display:"flex","justify-content":"center","align-items":"center",width:"16px",height:"20px","border-radius":"2px",background:"#e7e7e799",cursor:"pointer"},onClick:t[2]||(t[2]=(...t)=>e.nextImage&&e.nextImage(...t))},[(0,u.createVNode)(v,{name:"arrow"})])])):(0,u.createCommentVNode)("",!0),e.encrypted_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(T,{key:1,onEncryptedToggleShowEmit:e.encryptionToggleShow,encrypted_toggle_show:e.encrypted_toggle_show,onConfirm:e.VerifyPasswordSuccess,item:e.item,index:e.index,user:e.user},null,8,["onEncryptedToggleShowEmit","encrypted_toggle_show","onConfirm","item","index","user"])):(0,u.createCommentVNode)("",!0),e.pay_toggle_show?((0,u.openBlock)(),(0,u.createBlock)(x,{key:2,onPayToggleShowEmit:e.payToggleShow,pay_toggle_show:e.pay_toggle_show,item:e.item,index:e.index,user:e.user},null,8,["onPayToggleShowEmit","pay_toggle_show","item","index","user"])):(0,u.createCommentVNode)("",!0)],4)}var b=i(406),w=b.Z,k=i(89);const T=(0,k.Z)(w,[["render",v],["__scopeId","data-v-2fa5b004"]]);var x=T},2009:function(e,t,i){"use strict";i.d(t,{Z:function(){return _}});var n=i(311);function s(e,t,i,s,r,o){return(0,n.openBlock)(),(0,n.createElementBlock)("div")}var r=i(6294),o=i(4189),a=i(9841),l=i(8871),u=i(3749),c=i(7594),d=i(9592),h={props:{goods:Object,buy_num:{type:Number,default:1}},data:function(){return{lang:[],languageChecked:"zh-CN",openid:"",prepayID:"",orderid_jsapi:"",orderid_h5:"",orderid_native:"",native_interval_data:void 0,h5_interval_data:void 0,h5_interval_num:0,preview_language:{en:{js_toast_fail:"Wrong. Please contact us with Wechat: link3cc888",payment_successful:"Payment successful"},"zh-CN":{js_toast_fail:"失败，请联系客服",payment_successful:"支付成功"},"zh-HK":{js_toast_fail:"失敗，請聯繫客服",payment_successful:"支付成功"}}}},async created(){let e=window.localStorage.getItem("out_trade_no_h5"),t=window.localStorage.getItem("pay_pipe");e&&"h5pay"==t&&(this.orderid_h5=e,window.localStorage.removeItem("out_trade_no_h5"),this.h5_interval_data&&(clearInterval(this.h5_interval_data),this.h5_interval_data=void 0),this.h5_interval_data=setInterval((()=>{this.h5_interval_num=this.h5_interval_num+1;const e=20;this.h5_interval_num<e?this.checkOrderH5(this.h5_interval_num,e):(clearInterval(this.h5_interval_data),this.h5_interval_data=void 0)}),3500))},computed:{...(0,r.mapState)({user:e=>e.user.user_guest,user_guest:e=>e.user.user_guest,temporary_user:e=>e.user.temporary_user,user_guest_orders:e=>e.user.user_guest.link3_orders}),present_language_c:function(){return this.present_language()},isWeixin(){return(0,d.Jv)().weixin},isMiniprogram(){return(0,d.Jv)().miniprogram}},components:{},inject:["present_language"],methods:{...(0,r.mapMutations)({updateUserState:"user/updateUserState",updateLocalUserDataState:"page/updateLocalUserDataState",updateUserGuestState:"user/updateUserGuestState",updateTemporaryUserState:"user/updateTemporaryUserState",updateUserGuestOrders:"user/updateUserGuestOrders"}),uploadLinksToServer:async function(){try{let e=await o.gS({links:this.user.links});return!!e&&("0001"==e.code||void l.Toast.fail(this.translate("js_toast_fail")))}catch(e){l.Toast.fail(this.translate("js_toast_fail")),console.log(e)}},translate:function(e){return this.preview_language[this.present_language_c][e]},payPipe(){let e=this.user;e.wx_openid?(this.openid||(this.openid=e.wx_openid),this.getConfig()):this.getWxAuth()},getWxAuth:async function(){if(this.$route.query.code)try{let e="";c.Z.getToken()&&"undefined"!=c.Z.getToken()||!this.isWeixin&&!this.isMiniprogram||(e=this.temporary_user&&this.temporary_user.unid||window.sessionStorage.getItem("wx_unid")?this.temporary_user.unid?this.temporary_user.unid:window.sessionStorage.getItem("wx_unid"):"");let t=await o.pK(this.$route.query.code,e);if("0001"==t.code){let e=JSON.parse(JSON.stringify(this.user));e.wx_openid=t.data.openID,this.updateUserState({userdata:e}),this.openid=t.data.openID,this.getConfig()}else{let e=JSON.parse(JSON.stringify(this.user));e.wx_openid="",this.updateUserState({userdata:e}),this.openid="",this.$router.push({query:{}}),this.getWxAuth(),(0,l.Toast)({message:t.msg})}}catch(e){l.Toast.fail("获取config失败，请重试getWxAuth,fail"),console.log(e)}else{window.localStorage.setItem("goods",this.goods.business_code?this.goods.business_code:"01");const e=window.location.href;window.location.href=`https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxe0054c9a47447b75&redirect_uri=${encodeURIComponent(e)}&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect`}},getConfig:async function(){try{let i=await o._L();if("0001"==i.code){var e=i.data;u.Z.config({debug:!1,appId:e.appid,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["chooseWXPay"]});var t=this;u.Z.ready((function(){u.Z.checkJsApi({jsApiList:["chooseWXPay"],success:function(e){t.doPay()},fail:function(e){console.log(e,"getConfig")}})}))}else(0,l.Toast)({message:i.msg});return!0}catch(i){l.Toast.fail("获取config失败，请重试"),console.log(i)}},doPay:async function(){var e={openid:this.openid,goods_name:this.goods.name?this.goods.name:"",number:this.buy_num?this.buy_num:"",price:this.goods.price?this.goods.price:"",business_code:this.goods.business_code?this.goods.business_code:"",code_value:this.goods.goodsid?this.goods.goodsid:"",c_unid:this.goods.c_unid?this.goods.c_unid:this.user.unid,environment:""};c.Z.getToken()&&"undefined"!=c.Z.getToken()||!this.isWeixin&&!this.isMiniprogram||(e.environment=this.temporary_user&&this.temporary_user.unid||window.sessionStorage.getItem("wx_unid")?this.temporary_user.unid?this.temporary_user.unid:window.sessionStorage.getItem("wx_unid"):"");let t=await o.pv(e);if("0001"==t.code){var i=t.data;i.prepayID&&"string"==typeof i.prepayID&&(this.prepayID=i.prepayID.replace("prepay_id=",""));var n=this;u.Z.ready((function(){u.Z.chooseWXPay({timestamp:i.timestamp,nonceStr:i.nonceStr,package:i.prepayID,signType:i.signType,paySign:i.paySign,success:async function(e){if((0,l.Toast)(n.translate("payment_successful")),n.orderid_jsapi=e.out_trade_no,n.closePopup(),c.Z.getToken()&&"undefined"!=c.Z.getToken()||"micromessenger"!==n.runtime_env||!n.temporary_user||""===n.temporary_user.unid){let e=await o.LO();if(!e)return!1;"0001"==e.code&&(n.updateLocalUserDataState({module_id_reclick:n.goods.goodsid?n.goods.goodsid:999999}),n.updateUserGuestState(e.data),e.data&&e.data.vip&&e.data.vip.link3_orders&&n.updateUserGuestOrders(e.data.vip.link3_orders))}else{let e=n.temporary_user&&n.temporary_user.unid||window.sessionStorage.getItem("wx_unid")?n.temporary_user.unid?n.temporary_user.unid:window.sessionStorage.getItem("wx_unid"):"",t=await a.U7(e);if(!t)return!1;"0001"==t.code&&n.updateTemporaryUserState(t.data),n.updateLocalUserDataState({module_id_reclick:n.goods.goodsid?n.goods.goodsid:999999})}"50"==n.goods.business_code&&n.updateLocalUserDataState({module_id_donate:n.goods.goodsid?n.goods.goodsid:999999})},cancel:function(e){n.closePopup()},fail:function(e){let t=JSON.parse(JSON.stringify(this.user));t.wx_openid="",this.updateUserState({userdata:t}),n.openid="",n.$router.push({query:{}}),n.getWxAuth(),(0,l.Toast)("支付失败，请重试")}})}))}else(0,l.Toast)({message:"获取支付信息失败，请重试"})},sendOrder:async function(){var e={business_code:this.goods.business_code?this.goods.business_code:"",goods_name:this.goods.name?this.goods.name:"",number:this.buy_num?this.buy_num:"",price:this.goods.price?this.goods.price:"",outer_trade_id:this.prepayID?this.prepayID:"",out_trade_no:this.orderid_jsapi,pay_type:"jsapi",environment:""};c.Z.getToken()&&"undefined"!=c.Z.getToken()||"micromessenger"!==this.runtime_env&&"miniprogram"!==this.runtime_env||(e.environment=this.temporary_user&&this.temporary_user.unid||window.sessionStorage.getItem("wx_unid")?this.temporary_user.unid?this.temporary_user.unid:window.sessionStorage.getItem("wx_unid"):"");try{let t=await o.KM(e);return"0001"==t.code?(this.closePopup(),this.getUserBuy()):(0,l.Toast)({message:t.msg}),!0}catch(t){l.Toast.fail("获取config失败，请重试"),console.log(t)}},createOrder:function(e="1",t){if(!t)return"not have business_code";let i=Math.floor(Date.now()),n=`${e}${t}${i}`;return n},closePopup(){this.updateLocalUserDataState({show_buy_popup_link3:!1,show_donate_popup_link3:!1})},closeQrcode(){this.updateLocalUserDataState({show_buy_qrcode_link3:!1,show_donate_qrcode_link3:!1,show_buy_popup_link3:!1,show_donate_popup_link3:!1})},async getUserBuy(){if(c.Z.getToken()&&"undefined"!=c.Z.getToken()||"micromessenger"!==this.runtime_env||!this.temporary_user||""===this.temporary_user.unid){let e=await o.LO();if(!e)return!1;"0001"==e.code&&(this.updateUserGuestState(e.data),e.data&&e.data.vip&&e.data.vip.link3_orders&&this.updateUserGuestOrders(e.data.vip.link3_orders))}else{let e=this.temporary_user&&this.temporary_user.unid||window.sessionStorage.getItem("wx_unid")?this.temporary_user.unid?this.temporary_user.unid:window.sessionStorage.getItem("wx_unid"):"",t=await a.U7(e);if(!t)return!1;"0001"==t.code&&this.updateTemporaryUserState(t.data),this.updateLocalUserDataState({module_id_reclick:999999})}},payPipe_h5(){this.doPayH5()},async doPayH5(){var e={goods_name:this.goods.name?this.goods.name:"",number:this.buy_num?this.buy_num:"",price:this.goods.price?this.goods.price:"",business_code:this.goods.business_code?this.goods.business_code:"",code_value:this.goods.goodsid?this.goods.goodsid:"",c_unid:this.goods.c_unid?this.goods.c_unid:this.user.unid,environment:""};c.Z.getToken()&&"undefined"!=c.Z.getToken()||"micromessenger"!==this.runtime_env&&"miniprogram"!==this.runtime_env||(e.environment=this.temporary_user&&this.temporary_user.unid||window.sessionStorage.getItem("wx_unid")?this.temporary_user.unid?this.temporary_user.unid:window.sessionStorage.getItem("wx_unid"):"");let t=await o.Fh(e);if("0001"==t.code){let e=t.data;window.localStorage.setItem("out_trade_no_h5",e.out_trade_no),window.localStorage.setItem("out_trade_no_h5_module_id",this.goods.goodsid);const i=window.location.href;window.localStorage.setItem("pay_pipe","h5pay"),window.localStorage.setItem("goods",this.goods.business_code?this.goods.business_code:"01"),window.sessionStorage.setItem("goods",this.goods.business_code?this.goods.business_code:"01"),e.h5_url&&(window.location.href=e.h5_url+`&redirect_url=${encodeURIComponent(i)}`)}else(0,l.Toast)({message:t.msg})},checkOrderH5(e,t){let i=this.orderid_h5;if(i)try{o.Dd(i).then((n=>{"0001"==n.code?((0,l.Toast)(this.translate("payment_successful")),this.closePopup(),this.getUserBuy(),window.localStorage.removeItem("pay_pipe"),this.h5_interval_num=999999,"50"==this.goods.business_code&&this.updateLocalUserDataState({module_id_donate:this.goods.goodsid?this.goods.goodsid:999999})):e>t-2&&(console.log("H5订单查询失败:"+i),this.updateLocalUserDataState({module_id_donate:999999}))}))}catch(n){l.Toast.fail("获取config失败，请重试"),console.log(n)}},async doPayNative(){var e={goods_name:this.goods.name?this.goods.name:"",number:this.buy_num?this.buy_num:"",price:this.goods.price?this.goods.price:"",business_code:this.goods.business_code?this.goods.business_code:"",code_value:this.goods.goodsid?this.goods.goodsid:"",c_unid:this.goods.c_unid?this.goods.c_unid:this.user.unid,environment:""};c.Z.getToken()&&"undefined"!=c.Z.getToken()||"micromessenger"!==this.runtime_env&&"miniprogram"!==this.runtime_env||(e.environment=this.temporary_user&&this.temporary_user.unid||window.sessionStorage.getItem("wx_unid")?this.temporary_user.unid?this.temporary_user.unid:window.sessionStorage.getItem("wx_unid"):""),o.Kd(e).then((e=>{if("0001"==e.code){let t=e.data;this.orderid_native=t.out_trade_no,this.nativeInterval(),"50"==this.goods.business_code?this.updateLocalUserDataState({show_donate_qrcode_link3:!0,show_buy_qrcode_url_link3:t.code_url}):this.updateLocalUserDataState({show_buy_qrcode_link3:!0,show_buy_qrcode_url_link3:t.code_url,module_id_reclick:999999})}else(0,l.Toast)({message:e.msg})}))},checkOrderNative(e){let t=this.orderid_native;if(t)try{o.Dd(t).then((i=>{if("0001"==i.code)return(0,l.Toast)(this.translate("payment_successful")),this.orderid_native="",this.closeQrcode(),this.getUserBuy(),window.localStorage.removeItem("pay_pipe"),"50"==this.goods.business_code?this.updateLocalUserDataState({module_id_donate:this.goods.goodsid?this.goods.goodsid:999999}):(console.log("db"),this.updateLocalUserDataState({module_id_reclick:999999,reclick_buy_popup_link3:!1})),"stop";e>38&&(this.updateLocalUserDataState({module_id_donate:999999}),console.log("Native订单查询失败:"+t))}))}catch(i){l.Toast.fail("获取config失败，请重试"),console.log(i)}},payPipe_native(){this.doPayNative()},nativeInterval(){var e=0;this.orderid_native&&(this.native_interval_data&&(clearInterval(this.native_interval_data),this.native_interval_data=void 0),this.native_interval_data=setInterval((()=>{if(e++,e<40){let t=this.checkOrderNative(e);"stop"==t&&(e=999999)}else this.getUserBuy(),clearInterval(this.native_interval_data),this.native_interval_data=void 0}),3500))}}},p=h,m=i(89);const g=(0,m.Z)(p,[["render",s]]);var _=g},470:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAABgCAYAAADCS8BYAAAAAXNSR0IArs4c6QAAHkFJREFUeF7tXVuPXMV27prxZYwvYEcEHCISiOAEOwmBRARIEAJCIgvE0QEcIoIIF8VEARRQwjWJMM9IPPDGX4DfA38B8WKEsfFtZjpa3VP2rtXV9e2va+89Pfa3X6pnVtWqda+167bDeDwOo60nhDC2v62M/xqNRvb7ap1Y18rxeDwKIUxKe+JvKxeEF/vP9EfVb9Ke+y3+pX/Zv/xf8U/xX+PfdEjX+K/8p9f87/Tp0yvzErPPPvts9Pnnn4+stCf+trKPZ+j+EA9D0zN0f+K/LIGh9TF0f9K/9F+SwND2OHR/sn/Zv+x/vgSG8MfwzTffrH7//feTKctjx46N7beVObK+/fbb0cmTJ0dW2nP8+PHw3Xffja3MtY+4In6PE/Xn2/v6CH+kzUrrO9JupT0Iv6dX/Ev/sn/5v+Kf4r/GP43/yn/q87/w9ddf70ZvgvPgP/zww/jo0aPBylydCLPS4L4+gnucqL6HL8pX23biX/qX/cv/Ff8U/zX+zUqAHa+7Hk/bjuOL1uua3q7xLcpX23Zd0BtOnz69Z16Hx44ds1lCmxmNM4aT3/a/3MPWz8yIFvurxd9WsLEe2x9bX/ynEkDyQ3BWv6g+2x9bX/qX/psSQPaD4MieWTjbH1tf9i/7l/1fkwDyHwRn/RvVZ/tj61v/4auvvtp75syZyQzlkSNHxvbbyhxxETavfi0cCYTF7/F5/hA+3x7Vr4WL/7IEWPlK/6kEZP9pfEP2JP9PJYDkVQtX/FP8K0mAtS/F/+WP/+HLL7/cN0/pZ8+eHR86dChYmasTYVai4GFwjw+1P3z48Pinn34KVlr7+NvKPvrzOMW/9C/7l/8r/in+a/yblQAav9F4itpr/L/+8x9bgr9pXjJ36NCh8dmzZ4OVWwnk5Lf9z/4+evSo7euclPbE31a2eWrb+z66xif+pX/Zv/xf8U/xX+PfZAJJ47/yn07zv/DFF1/sj4nc+fPnw/79+8dW5hLICLOyTYLp8Z07d2584MCBYKW1v+2220Y//vjjpLTH10f9ofoI7nkQ/9K/7F/+r/in+K/xb1YCaDxG46nGf+U/Pv+zGdAD+/btmyScFy5cGNtvK3MOGGGxvq/j2/v6LNzjZ/HV0of6r8WP+EH9I3nW0of6r8Uv/qe+tqj/Sf9pvOo6Psn+Uwl0LV/5v/xf8e/Gjv+WgB46cuTIJNKcOXPGDiJNykWe2Ha78LH9s/WRTLYbH9s/W1/8lyWw3fJk+2frS//Sf0kC221PbP9sfdm/7F/2P18Ci/iTJaC3xBlP9EaK4IcPH7aDQiMrc8/FixfD2tra2MrcjCtqH3FbaQ+q72lA/SP+EBzRg/pH7cX/1Lakf9m//F/xD8VLxf9UAmj8QeMbgiN9oP5Re41/19/4Fz7++OOr2WJMDq000/UGc/PNN49+/vnnkZX2xN9W2uPhPgBcunRpvHfv3mBlLkGNMCtzcN/e10dwT6/vQ/xPXw6kf9m//F/xT/E/nTDR+KfxX/lPt/nfJAFdW1trda1R5o1ybG0vXrw4SSjj74jP/l+CoyUNNsFF+GrpEf8zb9TSv+xf/q/4p/iv8U/j/9ZYoPxnmk+2ybfCJ5988ntxxhHNUB48eHD0yy+/jKy0J/620h40g7lnz57x5cuXg5W59ix+T69v7xNGRK/4L89Qs/rx8pf+Zf/yf8U/xX+Nfxr/Z/Mndny9HvIfS0Bv3bt37yQhvHTpUrDfVm4llJPfbeFoBjKzJF/VH6J3u/tD8kD018LFfyqBWnmi9kjf260PRH8tXPxzEqiVN2q/3faGpIHor4WLf8W/pgRq7Qm1R/a+3faI6K+FL8K/HUL6/dgQ7aE8d+7c6MCBAyMr7Ym/rWzzoPYInlFgsqcUzcAiGsV/OgPq5cnqx8sbtUdw6X9mQJH9N/aUy/+n++vn7aFX/CtLQPFf8b95RkXjXxpP2PG5zfgfPv300+kt8JnnypUrYffu3WMrc/AIsxIFN4OfP39+tH///klpT/xtpT2+PxZ/GxqYOuJf+pf9y/8V/xT/Nf7NSoAdnzX+K//x+V/44IMPbt+9e/ckwbxy5crYflvZJlGLdWP7X3/9dXTTTTeNrLQn/rZyToKb9Ofx+TaePra+x+fbi3/pX/Yv/1f8U/zX+IcloPF/GiuV/0zzx0Xyv/Dhhx/+ATa17amxa9eu8fr6erDSKIi/rdweiobtVfxL/7J/+b/in+K/xj+N/9dj/hPef//9O+alVewMIVvfz5D6JW8048nOWLLpI8sPW1/8T2fL4wy59J9ueZD9pzPyrH+x/l67QsLSJ/+X/yv+Kf7fyOOfzYD+YZxRRAMeuySO8PkZvgsXLoz27dtn36SfdBV/W5l7A0T4Pb1oRpHFh+ojuPhPZzilf9m//F/xT/Ff45/G/xsj/wkfffTRnfMc3icEtTMKqL1POFFCwtLXN37EH4L3TV/f+BF/CN43fX3jR/wheN/09Y0f8YfgfdPXN37EH4L3TV/f+BF/CN43fX3jR/wheN/09Y0f8YfgfdPXN37EH4L3TV/f+BF/OXh4++23/ygC1tbW7PZ6+6LB5F/xt5X2ePjGxkZYXV0dW2lwP+OH8KElK9TeM+TxRdqszPHj26P+xH9qH9K/7F/+r/in+K/xT+O/8p9F8r/w3nvv/XHbQz1+ydgncGiTLFoC9/i6rs/iQ/SI/1QC0v/0wMw8f2Ltr+v6LD7ZfyoBxb90y4zin+JfUwKK/4r/7PgX3nnnnbviGyyaQt27d699Lck+uZmtGmFW5h4/I7lr166wvr4+ttLq+/Zsfd+npzf2ZaXV9TN44r8sAelf9i//V/xT/Nf4lxspNP5PY4Pyn/b5X3j33Xf/JCagPuFDCZmH+4RuaHy+f59w+gRqu+lF8mXpE//pkrj0P325iy9csv/0BYL1r679tWt88n/5f3NLjOKf4t+yx//w1ltv3RP3SKKAjOC1AZXFj+qjGU6fILP42AS7a/wsPq8f8T/dvyf7n+6RZu1J9p/aj+JfWQJd2xeLT/EvlYDiv+L/do9/dgjp3suXL6PYOYHv2bNnZHWttCf+ju093CP19T2cbd83PYg+8T+1Bel/6j+s/SL7Qv4j++83HiH9yP/l/4p/iv8a/xYf/8Ibb7zxm3l7enwARns8/BKfr88uAaL2Hu73lPo3PIQPZeHiv7zHRfpPl3iRvaEZHNRe9p/ao/w/3VOv+JfOcCF/UvwvS0Djn8a/0h7XRcb/cOrUqT/d3NycHAJaWVkZ228rc6YYYbE+clgE9/15/LVw3z+Lz7cX/1PbkP6n/lL7sPbI+ofsP5UAK2/5fyoBxT/FP8V/jX9djv/h9ddfPzZvIPVv0Kurq2FjY2NsZW4J3uNBe0z8EmLEbaXhQns40RIk6h8lEOI/nUGQ/mX/8n/FP8V/jX8a/2e3ICr/SSWA8i/L38Kbb775Z3HGE+1pQnA0Y+BP5aEEkt1T5+ujN3Y/I4L4Q3DxX54xkf7TU5my/273cMr/U3kq/pVnLBX/0xVPNL4huMY/jX9NCfj4kxv/w2uvvfbnccbRz3CxM4TeQD0+P8OZmQFNvqzkM2iEH53K9TOqnh7xn87wSf9lCbD2Kfufzh7GeCP/TxNGtCdY8S899OTjteJ/+VYGjX/pNV0a/9N4vB35T3j11Vf/AiUaEV6rsLb9dFUP7fli+xH/dQbLyru2vvSfznCgGTEkb9m/7L/5AsEOWMi+uobL/+X/zTMtin91e5j7iP/hlVdeuT86vj9F6qdMuw4QfeNj+WHr901/LX6WH7Z+LX19t2f5Yev3TX8tfpYftn4tfX23Z/lh6/dNfy1+lh+2fi19fbdn+WHr901/LX6WH7Z+LX19t2f5Yev3TX8tfpYftn4tfdY+vPzyy385DxEiyL9R+CU1lMCy7RE9XQikiQP1x9Lv6WPbI3rEf7cSQPJm9Sf9pxJg5Yf00a32RyPUH0u/9C/9NyXA2g+yR9l/txJA8mb1J/+f9f/w0ksvPbh79+4JxCeMXgFegKg+gl+5cmVkfVs5yYZDGI/H42Cl/R1/W2l/x7qL0uv7q8WH+ENw8S/9y/7l/4p/iv8a/zT+34j5j82A/tW89waUsLHvG7X40D2Inp7a/mrbd02P+E/3sKB7a2v1V9te+k8lUCtP2b/sv3kPpfy/fG93rb/Vtlf8U/xrSiBnT+GFF1746zijyBqMn6FEGXwt3M8o+hlMRA/rUKg+6q9ruPhPrzGS/qezh9F/kb0he5b/cwMGknfXcPm//D+uSuZWBJG9yf/TFTc/fij+bUP8O3ny5EPsTGasz54yZOuzdPWN39PD9sfWF/+cBPqWr/SfSoCVN1uf0/7sl9xqT72i/ll+2Pqo/1p7ZPHX9if+uz2VXqsP6b9OAqw9s/VZ6vrGX2tvOfpsBvRvWEZjfbRJd1G8O6Wd+E+/PY0One0UvbalU/qX/qPNm83I/tMZyrZ+tFPryf/l//L/qc8vGv/C888//3D8tJq/5wlN6fvAgS6er8W3vr5uJ1Mt0E+69kv6qP+h6e1anuJf+pf9y/8V/xT/Nf5p/L8e8p/w4osvPjrvS0g+gUKHANCSl99zgfDXTvn69qh/lMCK//IhCOm/fNEvsj8kv9olFtS/7D/9EhiKT6w+kPylf+7TmUheiv+pBJD9yf/l/zHmmeUMEf/Cc88997dtl0CQgcbZGStzj5/B83XY9r6+x4/obct3rIfwsfSL/1QCrPyk/+lsYPQ32X86Q478Vf7PSQDJk/VfxT/Fv6YEWPtR/N/58T88++yzfzdvCR4FHC58zdZm8aP6CM4uwbP4WHmw+FF9BBf/qQSQvBCc1Tcrf7Y+Sy+qj+Div04CrHxRfQTv255YaWw3vah/BGf5ZeXP1mfpRfURXPzXSYCVL6qP4H3bEysNozc888wzj81LQP2eTfTGgd5gPIF+xobFz7Zn90yI/+lHAeKHAFj9IINk9cf2X7tnVvqX/mX/8n/Fv+mHYNj4q/hfloDGv/VROHHixONRTMjA2AwbGSDqr+/2aAmo7yVN8V9eQpD+yxKotR/ZfyoBJE/Fv/IeOeSvrL0hfEhfqD1Lj/Qv/Zf2SHZtbwjf9WD/NgP6RGTUbzpFDHqHRALz+JFDI/weH5piZukT/9weE1a+0n85oMv+U/l4+5L/b4yjjeR8D9kPkqfin+Ifs8dc8b8sAeU/abyaLMGfOHHiyY2NjazkVldX7STUyMrcE2Gxfe2Xjnx/CP/KykrY3NwcW2n0+fqZhDThh62fCdgT2Yj/qf1I/9PlSpODyQNdO+bhsv803sj/p7F3XnxR/FP81/in8X9H5z9PP/30UzHBRAkZm9CxCSyL3wdgnwAhftCAj97oUHvxz73ASP+pBJB9yf7TBET+n74AKf6lCTwbXxT/yxJA8Unjn8Y/NIEZnnrqqb+Ph5DQkoxNctnEzlY5meRp/C9nrcX6aAk2g5DqH+FHS1SZJT6qfyQvRJ/4n5EAJX8kX+mfXuKm5C/7L8dLZJ/yf/m/kwDlf8i+FP8U/5p7Wrcj/wtPPvnkP8xbMvRvMHG638rcEiN6I+r6jRIt0fklTt8/WjIW/+kbnPQ/Xe6R/cv/Ff9mt5go/pe3kGj863ZGVeN/eYvOTsh/whNPPPGPcQ+BTzC8ufglP18fBSAERw6K4Cx+xI/4TyWA5IXkj+BIvwjO4kf8SP/Sf1MCyF6Q/SE4sm8EZ/EjfmT/sn/Z/zUJIH9B/ofgyL8RnMWP+BnC/8Pjjz9+Yh5jfobQ12MPWdTiYwWG6EUKraUXyQfR5/sX/+meP/TChOQr/ZclIPtP91Qie0IrKrXylP/L/5uHjhT/0hUpFM/RjKBvX+uvGv/Te6Rz8pwkoPGiXa8AdG0AUlitwn17lp5a+tj+0ACEHAS1Z+kR/6kEkHxl/6kEWHtj5cvaJ0sPi1/6l/6bEmDtTfZfvgVE4x/3wn8j5D/hscceewYZxjy434PBnnpD9Rela6h24j/dg4L0ycprKD0u2g/LD1t/UbqGasfyw9Yfio9F+2H5YesvStdQ7Vh+2PpD8bFoPyw/bP1F6RqqHcsPW38oPhbth+WHrb8oXUO1Y/nJ1Q+PPPLIs22vYWJPzaE9CeiUnhckqp9JgJJTg5k3WvZe0MCcGhP/5U35SJ/SfyoBJC/Z/8y1J/L/xq0lin8zF2Er/jfu+W5xbZfGv42pDeWSPNa/UDy/Eca/8PDDDz8XE1CUOXeR8aJ7oeIgarS0mFFLvgTSQqHJgITwZ5bkkouhUfsB5CX+V6dXaWzZSxIg0TVaSH/SfyqBAeyZ9S/Zv+xf/q/4p/g/zZd23PgXHn300d/GL220mLGj3hgzGXxVe5QgI3gtf6h9bf+ofS0c0V8LR/Qh/Kh9LRz1XwtH9CH8qH0tHPVfC0f0IfyofS0c9V8LR/Qh/Kh9LRz1XwtH9CH8qH0tHPVfC0f0IfyofS0c9V8LR/Qh/Kh9LRz1XwtH9CH8qH0tHPVfC0f05fCHhx566HdbF8qj9jDDzmTgyYwGe3F9hmD/7WP2onuWnkQm6A1D/M+8gbHyLs5QoxlNb18d6EP6b0hA9l+eYejA3mT/jS0Div8zW5g0/jVm/Bf40AU7Hin+9xz/w4MPPvi7eXsafEbqT/mtr6+Pdu3aNbLSHh+A+z4ViPCz9KIMnMWH6GP7Q9c6IDjSF0sPwif++z0ViuTL2qv0X5YAK0+kH1beyL8RHPkrSw/CJ/7l/9Emzba6vhUH2Rfrr7L/4eNfeOCBB16wN0172D1eSGHLBkf8Ifiy8cPSg/hDcLa/ZauP+EPwZeOHpQfxh+Bsf8tWH/GH4MvGD0sP4g/B2f6WrT7iD8GXjR+WHsQfgrP9LVt9xB+CLxs/LD2IPwRn+2tT3xLQF2NFdNExgrfpsFkH4UN7ElD7rukZuj/xXz5FP7Q+hu5P+pf+m4c2/QAxtD0O3Z/sX/Yv+59edZibIBzaH/voz5bg/ykeQkJT2j6hQwECwT0+1L/Hx36b3PfnAzrqX/ynEkD6RXDpP5UAsj/Zfzogy//TL8H4JU5vL4p/qQQU/+u+JY7iO4Ir/iv+h/vvv/8ldqZw0frslyUW7WdZ24n/mXv4ivfKLaseF6VL+pf+4z55syF0r/Kidras7WT/sn/Z//xrA5fVb7uiK+f/4fjx4//cOIRk92nFk5gze0IzM4A+gUjaZ06pJSjQxa3olBuLn6XfvyGz7Vn6MjMWxVP+LH6WfvGfzhCw8mP1I/2XL5LP3KLh/aMYX1j9yf5l/9Enc4Nw5gVC418jf1D8u5pLLXRx/Y2Q/4Rjx469HPcYoCUatATo26M9AwjO4kNLUOwmW1TfLwGy9Ir/lRBlaLKrlaf0Pw5xGX9rhq147y67RCv/L28BkP+nEkDxDcFZecr/5f+Kf9ObF3ZK/LcE9F+6mmJl93xkZiS29aL6WjmI//KmeSTfWvkh/H3Da+mvbd83fwh/Lf217RF9fcNr6a9t3zd/CH8t/bXtEX19w2vpr23fN38Ify39te0RfX3Da+mvbd83fwj/IvRbAvpKzJj9DJRH6N8wfX30Ruvh/tBFiyWvYoLq8XuBoUMe4j891CD9pwm17D+dYZH/p/6i+Fde0VD8T+Wj8S+9J1XjP9zyct3lP+G+++57dV5mm/nyTFIVffkjkxEXv+SAMmgEz/CR7MlhN/2L/3TTfGbG2n97tvgtb/QlI6RfBJf+ZyQg+2/sSZP/p19yQjMain+Kf81DQ4r/qQSU/5S/fNgm/wv33nvvvxYCEbWpGgW0DuBD0zN0f0hEQ9MzdH/ivyyBofUxdH/Sv/RfksDQ9jh0f7J/2f8NZf/hnnvuea3BcfFUqT+Furm5OVpZWbHDIxMU8beVW0+CL7NkN2k7rz777Xi0JMjiQzNq4l/6l/3L/xX/FP81/mn8V/4zHQuY/C/cfffdr28d9zcf8m98SQ6G9lhmTjGz1whR/bfoz+eQ6I2W6t8jb0FPp/236E/8pxLoVP7SfyqBFvbYqfxb9Cf7l/03JdCp/cn/5f9NCbSIR53aX4v+lj7+hbvuuutNNO+/U+EtZih3Kmut6Bb/cIa2lRx3aiXpX/oHM/Q71bRb0S37l/3L/osrVK38qM9KloD+m2XSW0sIxXsZ/RSzd3BEKDolitrXwlH/LeDJFLP4TwMc0g+SL2pfC0f9t4BL/40lFtm/7L85wCP/RP6F2tfCUf8t4PJ/+f/VJWbFv/r4F+68885TDcdGU8S1MaC4xI2+nNDiSyi19Ne2R/IR/+mXMry8qD3ItV+KyChL+ie+ZIKMvYV8pf9UArL/a9vAcuaF/BPBkcnWtmfxy/5l/00J3HD+H+64445TjU9xFh0oc08XcljqGpjae8BaXNND0eOFIf5n7imT/ssJG2Vvsv+6e/Dk//BDEJQ9Kv6lElD8V/yPMWbLMjT+VY5/loD+e9tDSOj1boEZTPQGSCm4BX1sfyxK9g2GpQcd6qqlF83QIvzin5vBkf7LMyDyfyLAI+fMwPuOJ75LFF8QPQjOiqBvfOI/lYD0z60AXvfxL9x+++3/sbW0bXsb0B5Q6tvdKBrU9ofaswEX4UNwxK+HI3y1cPE/I4HigNODvIsmUdsfai/9S/9OArL/9AUxGeCRPyG44j8nASTPWrji3/LHP0tA3+bMZnlqt7j3c3mI7YES8V/+FGIPIl8qlNK/9B8HaTNMdE3eUhlvB8TI/mX/sv/ppOFO9X9LQN+xvS25BwW0zD1UVWEFvfF45C32fCVN2PriP50R9/KX/tMBoMr4MwkEki9rz2x92b/sP9pgzraRfbL+oPhfXoHU+JdKgI1nbH3Fv/7jX7j11lvfbbsHNHOvWrIkzwacFqfaPUq0JwLV93BqD5D4n7lXTvrfnCahC9i+Nam157733CZsyf5l/+5eRfm//F/xT/F/4fEvHDly5D/tzSD3oFO5aNBFbxwIHkIYj8fjYGVuihnRh/B7uOcH4Rf/ZQmw8vfylv5l//J/xT/Ff41/Gv9nt9ig/IQdf7cj/7EE9L3Ct4zRDEjtt9zZGcnijCX75Yse6lMzqpn0DbUX/4VDBD3oU/bfkEAL+SL7Re9sqL3sX/YfVw1mVhBa2Cfrz2x9ZL+y/7IEkPzk/9eZ/4dbbrnl/biEiL4tmvkS0mT6PW6CRReDs3t82AQtg3/y1YKYYPslzxb0JAYv/qeyNDnYg+xlAXlXBWjpf2YPmexf/q/4t7kZ4wp16t2PZ4r/iv8a/7od/y0B/a95oz47xYuyB4+PXQJH9dEUcm17j78WH2rPykv8pxLoWn7SfyoBZL+19ti1/mrplf6l/6YEau0JtZf9pxffI3nVxhvUXv7fvf+HgwcP/ve8xLHFkgaaMkc5KdV+AHqWbcllaHqG7k/6LyypeOeR/c8cAup6C5DsvyGBAexN/i//n7ulQvEvlcAA/jh4/Av79+//oO0p3hbXbrBL1gnDXS+JI3zomoWMA/gtB76K+G8E1BZLVtJ/QwLIXtklQYRP9l++ZkT+PzMAKv6lW84U/1MJaPzT+Hf1haLN+B/27dv3YWMPqN8z5hMEP+NAZcwog/fwFnsIE3o9w2gAabFnUPynCZL039gDy76hy/7LM5jy/1Q+in/pNWUoXiv+p3s0Nf6VX6CQPXn5tbCvYj6i+D8b/8Pa2trHbe8BRevpPcCpJRp0CCpDH4u/BxaLKFn6+q4v/oeVQN/6ZPEPy/217ybHe+ZqvyVdnLHK3Ms6NL+19LH6ZOsPLQ+Wvr7ri/9hJdC3Pln8w3J/A8Q/S0A/nfcpJ/SpsxZL8lVLrC0GBGRA1JIAu2Qp/rkvASH59vACIf0TS0JIPwiOonOL9sif2QRN+pf+Wy8JIvtEcNl/WQIt5Cf/J/YEtxgvlz7+hT179vxPNBs0RYwcDMEzS2yDLnGz9KEpd4QPLdEOPcWP6JX+4SEXJMIiXPY/s8Qs/29IAMUb5J8Ijoy3tj2LX/EvlYD0D7cQVC1xs/aJ9IHwafxPJZAb/8LKysr/xnsdMwKtuvi1RUDrGr//NFyyZNeCHmqGBeFDcPQGg9pn4OI//TSe9H9tGefq/t14L26LANu1f1Kn1mX/3J7ZzKEy2b/sP/qw/H9r/77i3/Re3GWI/5aA/l/hInoqIWtxSrd4MTZKyBaYwvf0sxcRi/9UAmiJBE35S/+Fi9Fl/6Oifcn/Zz40gD4EoviXSkDxv5GQt/AnjX8a/5oS6Hz8N4SfxR4yx+apKe/MDKo/NIASFCqgInoze0i9AItLgOwMjPifkYD03wj4LV7QZP/lL6tR/ir/T0+RZ15wKHm2iLfFhFf2n75gtbimpmq8kv3L/hs+Z75ZZU99+P//A82hFl1Pv0ajAAAAAElFTkSuQmCC"},2459:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABpJJREFUWEfFWGloXFUUPuclGRMz1FYRxYkbraZWVKqiUhQRaVT8IaIG16r47p1MtEq0SFyqz7oWuqTEZJp7nmtd60J/KVhBUFxwqYpLTdViNVMFRdtIY3Xy7jFnvFOe48zYTMZ6YWDeffd+53tnu+dchDoNrXVgrb3OwfWHYXhXPaCxHiBKqRuZeXkJVk8Yhn1TxZ8yQa31Psz8LTNPi5NBxNHm5uaD+/v7R6dCsh4Ee6219wsJRPycmQXzKPfcS0RL/zeCQRA0j4yMfAMABwgJz/OuEoLM/Igj9UNLS8th/f39v9dKckoa1FqnrbWrnfDvPM+bKf+ZeTMzt7n5dBiGZo8TDILAGxkZGQaAWU74rqDQWvdYa1e4+a/a2tragyCwtZCsWYNKqU5mftYJ/Xn69OmHLFu2bIc8d3d3J/P5vATODGf6TmPMc3ua4AfMfLwLhiVEdGecgO/7SwBgsZv7IAzDE/cYwXQ6PT+KolccuTFEPNQY81OcwMKFC/ffuXPnFmZucevmE9GrkyVZk4l93xdBZzrB/UR0fTnBWusHrbXXunWvEtH8uhOUtJFOpw9GxHZmbrfWHgMA2gkdTyQSswYGBraUE9zV1XVYFEVfMnOjWz+EiJ8i4jAzDw8NDX2HiFyN9C4NLlq0qHV0dLQdAGYLEfkJKQA4kpn3rgDyRBiGV1QT4Pv+kwBwabk1iDg28W6TkHWkv/A8b3jatGnDxYBDrfXezCxn5gJm3msyJvA871hjzCfV9mQymWPz+fzHk8EFgJ2IuCaZTN6Avu+vAoCyPhQD/VG+EADkV/jKhoaGjYODg1/tjuDu7u5ZURQdFUXRbGeVgoUAYP+q5kVchUopibRDnI9sAoDPiioXIp7nfZHNZn/ZHSKTXdPT07Pv2NiY+HXRpWYDwNHMfITD2iIExWGPdBPPdXR0XNLZ2RlNVlg91q9du7Zh/fr1zzDzhQ5vWHzwSmvto0UBiPhkKpVaUOvRVCtRd3SuiQcUIi4oRLFSagUz98RIPmyM8f8tBdRKpnSfpDKl1EMAcHWMwwoiumlXmlFKDTBzd2xzNgzD+HO9+PwDRymVZeauGLlBIvorwRcn5Su01sTM1xTnPM/rM8bs0ux/wVAp1cfMN8SwQyLSRev97ahzfvAYAFwe+5qlRNT7H5Fbysw3x2StSaVSV8X9/x9nsYukp5i5M6bJu4wxQT1JllQ7Av1sR0fHZaUZpGyxEARBYy6Xe56Zz4t93a1EVOg9pjp8378VAO6NYa9LpVIXBUEwXopdsZoJgiCRy+XWMfM5MSBNRDQVgiVtgkC91NbWdn4QBH+Uw61abklTlMvlXmPmU2Sz53n3GWNumwpB3/fFCkWffrulpeWMak3Vv9aDSqkXmfn8QsgjXk5EUp3UPJRSVzDz4w7gxTAML6gGtjsENzKznJGiwROMMRtqZgcAvu+fAADvO4yNYRjOqZmg1rppIg2MuYKTPc9LGmOkhqt5SN25bdu2X/8yCOYRsXXCbfKVAKtqMJ1Oz4mi6DNn3m+I6PCamcU2+r4vzf6hMpVIJOYMDg5urImg7/tSVRTbxZfCMDy3TgRfBoCz3YdfSEQv1ERQa73YWivto4zlYRguqgQktd2OHTsKbWZra+vdK1eu/LnSWqXUcma+0RFcTET31ERQKfU0M1/sgK4hoodLgSRfbt26daG19nYAmO7WSoF7TyqVerBcftNa+9baQj6dqLCfJqKyPUvhfTWTKaU+YubjZE1DQ8O8oaGht+Pr5XYBAB5g5kq+uRkRbyGitSX75jHzm47gR0Q0d9IadIWDXGU0y+ZkMjmjr69vm/xXSs0TkxcTeBEcEaVlkNutYsleeIWI7wDATUT0ljxnMpkZ+Xy+4AKI+FsqlUpWKpAralBrPdNaW2iKEPF7IjpI5iZuCqQC+VtyRUS5VViCiMWbroy19g4A2C+uGUR8HhF7jTFf+77/PQAcKO+bmppmZrPZzeW0WJFgOp0+O4oiiTYhuAERX2fma5m5KaYxufdbhYhyBG6PC5CbVwC4jZmvL2ln//A8b9BaezoAFEzred5ZxpjCVUrpqKbBk621YppygxHxmUQicUulW4XiJne7cJ8LtrLyGhsbT169evW7kyIoGX/79u0bYh1f0Z/ecP70XiXHLjff1dV1UhRFy5j5tBKzb0LEuZVOqKpRnMlk2sfHx8XnTkXEDxFxwBizbjLEStcqpaTw6GbmuYj4RmNjY282m5ULgbLjT45FCw2lW+o4AAAAAElFTkSuQmCC"},5717:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABDJJREFUWEfNmF1oXEUUx8+5965rGmUTbRGrVRrEL6oIGgQLfiIUUUFhn4rBuDN792UFMTSorz4UGoqwkN29MyYS87aiKEgFi1IEUUkptKhFxLbWiqgbcynNZrfeOTJhU5PN7t6P/Ujn+X/O/zdz78w5MwhdGpzzL4noUZ0OEY8JIZ7sRmrsRpJUKvUxIj7fkOsjKeWLnebvGHB8fHyXaZrn9MI1wJBlWbsKhcKFTiA7Bkyn00eUUvuaQSDiESHEM1sGODk5mSiXy2UAMFtAeEqp4ZmZmYtRITtaQc75PBHt9zGfl1K+1HfAZDJpJhKJZQC4xse85rrutlKp5EWBjLyCnPPDRPRaEFNEPCyEeD2ItlETGZAxdgkAtgU0vSSlvC6gdoMsEqBt25Oe5x0MaXhASnkoZMymsytQPGNM79wbAon/F5WllNtDxvgDEhFyzh82TfMxz/MeBIA9AHBPWKN6CfyBiL43TfO453m6HH6LiNQu15VPnM1md1Sr1acB4BEi2kNEuxFxOxENNKkSUfiaxRAiVojob0Q8Q0QnDcP4Jh6Pf57L5f5andTY2NiN8Xj8KyK6u4cgYSekwU9blrUXGWMnAOCBsBn6pD+h/6/LRGT1yTCszb96BasBqkHYxN3S1/QKOkTEu5Wxm3kQsbi6ixljCwCgj5CrZiDicSHEQ1eOGc75SSK672ogRMRTQoj7V4+ZNSB9INu2/aNS6q4thjwthLh37QDfUIvrLdRPADCyRZC/uK575/rWbFOzUCwWYwsLCz8T0W19hvx1dHT0Dtu2L6/3bdrNZLPZ+MrKii49N/cJ8veBgYGRXC6nj7wNo2W7NTExMbi0tHQGAHb0GPLPoaGhkampKd1fbhpt+0F9KVpcXDxPRNf3CPKiUuqWdpcq34aVMabvtTt7BHhBSnlru9y+gJzzFSKK9wiwKqW8NjJgMpkcSCQS+t/wnUjECZDruoOlUqnSKr6tsW3bz3me90lE80BhsVjs2Xw+/2kkQMbYFABEui4GogMAwzAOOY5zIBJgOp0+qpR6KqhZFB0iHhVC6KtG09H2EzPGzgLA7VGMg8YYhnHWcZzdkQA558v1S1NQv9A6RFwWQgyGBqw3DrouhtnBtbqR33vNeh69k2Ot3m5amqfT6SeUUl8EWRJEVET0oeu6Y1o/PDz8vlLqBb0HgsTHYrHH8/n8sWbadoBvKaXe9jEgIvpOKZWcnZ09v16rX14ty/qAiEb9voJhGG84jtP0KaUlIOf8FSJ6twUgGYZxzrKs/dPT01+3m0Qmk9mrlJpXSunN1tTPsqzxQqHwXqgV1C8NlUrlt8YbHyK6RPSqlHIuyOdb02QymZc9z3uHiBINcbVarbZzbm5Ov/dsGn6VZJ9SaoaIbgKAfxDREUK8GQasUZtKpQ4iItO/KgD8YZpmqlgsftYq53/cHp+R9z1vmgAAAABJRU5ErkJggg=="},4054:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEUAAABFCAYAAAAcjSspAAAAAXNSR0IArs4c6QAACyFJREFUeF7tW3twnFUVP+fufps0fZACCSDKS161gMp7QKFhilMixTbdfN+3TR8EHAoIjLxGRIUMIIJYhVHRIlBIafb7bpOWEKyUUYOCrylWYUagRYpYhWlru23TPDa79x7n1E1nu93s3t1tsqnT808ys+fcc+7v3u/cex4X4RDthwAewmR/BA6BkmVXHDBQiGjPWIhIxew+IhK+758IAJcIIbZMmDDh1fr6+l3FjFWqTEmgdHZ2HjU4OHie1voUAJgMAJqIYkKIt/r7+9ctXLhwm6mBnuedjYjLiOhTAJAAgCWu695sKn8g+YoCpaurq6qvr+/LRHQTABwJABMAwAIA3iU8IV7h9xHxe47jSBODfd+/lYgeTo3DIoNCiCNs295tIn8geQoGpaOj4/hkMrmYiGYDgDAw5plQKPS1hoaGLbl4fd+PENFPAWBS6jP8u23bpxb7ORrYNSxLQaBIKY8jomcAYNqQDzFQnkREHxFvsW17+3D8K1euPCKZTN6htZ6OiDEi+oHrur8wGP+AsxiDIqUcR0Q+Ec0swopBAHjIdd17c8l2d3dXbt++fXI8Hk9s2LBhe0tLiy5CV8kiRqDwrmhvbw8rpX4GAIcVqXUgGAyeFQ6H3y1SftTEjEBpbW0db1nWjxFxYYmWPeG67qISxxhxcSNQotHoJ4QQL6WOy1KMekdr/fm5c+f+p5RBcsm2tbUdGQgEePHOJ6J3iejxSCTyYSH6jEDxPO9UAFg7dDIUoiCD99/BYLA+HA6/WcIYw4pKKY/VWj+LiJelHQSbhRBftG37z6Y6TUE5AwDeMDyCc+nejIhzHMf5namBhfB5nncnO/RMOxGxOx6Pz1ywYEGvyXhGoLS3t5+eTCbXAcA4k0Fz8HwohLiqkFUrRJ/v+68Q0aVZZDYJIWbYtv2WyXhGoESj0RMQ8RUAON5k0Bw8G4UQdbZt/7PEcbKK+77/wjBXhn8AwHTXdd8z0WsEyqpVq6rj8Thf2r5kMuhwPIj4gm3bsxFxRO4fnuc1AMDSTN8nhPhJTU3NLXV1dUkT+41AaWlpEVOmTLmJiL4LABUmA2fjCQaDM8Lh8Jpi5fPJpS6YXyGiewBgIgDEAeDp/v7+u5ubm3fkkx/63QgUZk559i4A+Kzp4Gl8GhE7HcfhlRxx4pCBiE5XSm1qbGzcVGj8ZAwKzyQajU4TQnB4/3HTmaUMWouIC2zbXm8qV06+gkDhHJKU8hKtNV/3OYdiQm8T0YL169evK1csY2JkOk+hoOyRlVKeqbV+mIjOF0IcRkTBDMXs0DjBtCYUCt2ZL21QqNEjzV8UKGzU6tWrK3p6ejiFcAEAnCyEmExEfKrEAOAtrfVru3btWrto0SJOOh1UVDQoQ7OUUgb4UldVVWXt3LkTlFKD8+fP7yvUuY0l1PKCwsfxSSedNK6ysrLCsixdXV09MG3atPjBPOl8CzAsKN3d3cFt27Z9Rin1BSI6BRFrUvnXzQDw12Qy+XJTU9PGfAoOxt+zgkJEgRUrVnyHiOYBQE0WR9pPRFsQ8QHHcZ4eqRtquQDdD5SOjo5jlFJPaa2vMDBqABEfqq2tfbiurm7AgL/sLFLKowHgHCKagoic1/lDLBbbmH4g7AMKZ9gqKioe1FrfgIhcsjChWCAQuLmxsXG5CXO5eDi/smLFilla69sB4EIA4AOC6QNEfHLixImP1NfXc1gA+4DS3t5+QTKZ/GWqjmNsPyJynuQ027Z3GguNMmNqblEA4CpkJg0i4t2O4yzeDxTP8zjCvLoYewOBwK2NjY2PFiM70jJLly6tHDdu3GJEvCFHaeYDpdTlTU1N7+7dKVzLlVJuI6LqYoxExNds275kLB7VUko+LDwiuizH3GKcmHccp2svKF1dXcf29vb+qxhAUjIbJk2adF65iuK57G5tba2tqKiQw2Tl9ogi4g6t9TWRSGTVXlA8z5vC1/MSQHkvFApdNBbjnNQB8igRXZvpR9Pm+4HW+qq5c+e+mb5Tqnp7e9lRZgZ3Rjgh4hs7duw4b6zGOlLKy7TWbQBwVLYJIeL9tbW193F2bp/Tx/f914noHCMU9mda6rruNUXKjrgY39C3bNnCSa7HieiINIUcsvwwHo+3DGX79wFFSnm11vrJtDPc1NgEEV0UiUReNxUoFx8X9hDxRkQ8ExG3AkBbTU1Nd3r+NhOUo7XWEhE/V0BXAacan7Jte9FYPHmKAX8fUDginjp16nSl1HMc85gMSES/AYD5kUhkkwn/wcCTNSBMOSVuoDkhrbMocz4c9/yeiG5wXXfDwTBZUxuHTR1IKU9WSkUQ8XIA4Fry4dzTBgCcOvgLALwshPByNeKYGjHW+HImmdhjx2KxwwcHB7mGwiVTJYQYsCwrNmvWrJ3/Lz4kc1HyZt7G2iqOhj1FgcIBVmVl5RlCiKmIOFFrPaC13hiPx9cVUokbjQkWo6NgULg7Uin1iNb64lSrF+ddFADsRsS3AeBbjuP8thhjxoqMMSh8b+no6DhfKdWeq0KIiNz0x0mq52zb5v9Hk3DNmjVVW7dunYyIIcuykpZl7Zo9e7ZxHZmNNQalra3tLCEEJ2m4IzofbUfEa23b7hxNZyylnEFENhGdi4iHExHvXg5yOxOJxKp58+YZtbUbgZIqfH2biL5qEgKkgFhjWda8hoYG41b0fEjn+l1KeZtS6m4GI8tiMzhL4vH4vSbdTEagRKPRjyEidxycbWo4Iu5WSl3MobipTJF8nHudobXmwn96oJc5XEIIwbt3WT49RqAsW7bstFAotJaI+L5iTIg433EcDhlGjKSUE4joR1zEz+cOEPH9qqqqM2bOnNmXyyAjUFIFdW4ENOJPU3i767rfHzFE/tceUlA7KxHVRSIRblUblowmWULL6DzXdfOWPvjeM378eN6FXHYYjMViPabJKs/zPgkA3G2ZNXmUOXNEvNpxnGdLBoULZIlE4gUAOLeAVd8ZCoUubWho4B2WlVLtWNOJ6AoiOg0RxwMAP2rgTsyVruvy35zE96ZEIvErAGBw8pIQ4krbtn9eMihLliyxqqur7yeiO0xOH1bIjjmZTC5samri1oz9KPVm6JsAcF0WB8mXQW4KviufY3zxxRcn7969uxUArsyLCMBARUXFMfnuLUafDytra2ubKoTwAWCqgfKtiHid4zjPD8freR5nvx7LUqfeK0JE24LB4PxwOPzScPed1GOKa5VSjwFA1XD6EJEbiRY7jnNXPvuNQeGBuOeNX3txLTaH8o8QsSUWiy0dzi+wH0DEP+U5QveoQMTnQ6FQc67VXb58+eRAIHAf36Sz7eQUIKuDweD1c+bM+eiAgsKDSSlPJKKbieg6AGAfMETcsbTasqz7lFJv2LbNn0BWklJ+Q2v9QD7jUqDsQMQL8zUR8tHM+R8hxD3pYQiHHbwjlVKPuq7LC5b34WdBOyV9ElLKw/hFBhEdFQgEdiqlXo9EItzZnJd831+Zem6Xl5cZAoHA9MbGRnameamzs3PiwMDARQBwHABstSzr1UJv1UWDkte6HAy+73cS0VWmYyDiDMdxRqwpOdOOcoHyIBF93RCU3mAweEE4HP6bIX/JbGUBxfO8TwPAHwGgMt8MEPHXiOjats01mlGhsoDCM/N9n/twb81RLWA2DvVvdBwnOpotZGUDhfvnE4kEP4BYkO2ugoh8et3W19f3RHNz86i2jpUNFN4G/OR28+bNzUKI67XWHPbviX2EEO8opR6IRCKvjsr3kqGkrKAM2cJX/p6enpODweBQ7PN+GVKZe6EZE6CUYzfk0nkIlCzoHALlEChmH+p/AYJikYKOXtBHAAAAAElFTkSuQmCC"},6647:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAACoCAMAAAAmeKf5AAABI1BMVEUAAAAAAAAAAAAAAAAAAAAAAAD7+/vt7e3p6en////8/Pzz8/P4+Pj////////+/v7u7u5xcXH////+/v79/f38/Pz7+/v7+/v5+fn4+Pg9PT3////+/v79/f339/fx8fH39/fn5+fZ2dne3t7MzMypqan////////+/v7+/v7+/v78/Pz8/Pz39/f5+fn39/f39/fs7Ozw8PDm5ubq6uro6OjPz8/e3t7FxcWoqKh5eXlCQkL+/v7+/v7+/v75+fn8/Pz29vby8vL4+Pjn5+ft7e2Xl5f////////7+/v19fXS0tL///9fYmvDxMiChIvm5uiLjZRpa3Tz8/TU1de0tbqvsLWqrLBxc3tlaHDu7u/a292/wMS6u7+dn6R6fYRhZG2gQ7fcAAAATHRSTlMABAYICg26XF38yXi87ufPSwv20sSunpeUfAz+1b6PYlxDMiEaD/nr4sq3sqKHgnFjVk1JOzArJiEaEQbe2cGpp3Z1dDUpFvLwu2gtTg0DrAAABDJJREFUeNrt24dW1EAUgGGnLBh1mwusuyIIiB2UXuy9XYrYu+//FJJMKpfdyGZuGI/3f4H9zk0mm5NMTnAcx3Ecx3Ecx3Ecx3Ecx3Ec9y8mMp1wKmNyVOhjnAXuO9z1+Qp3gUK47BNJl263b1y7evlK6/rNzoobwJiw1hnxINXdc1PH7ksG174MqPvLx+HDutn5F3Boo89K92Hds3vQq7MXS/ZhXaMKSdXx+/WaB0kTd8r0Yd2tGHO13ZiVQSuda+ch7PpseT6suxgxWosy3drDCDha2vywbvmsMdQm5cGejoBpTpTjw7qZmhHUZySu2QZT2etDRF0Ij9+sPLTXnlm/M2X4sK5hdBeaskdPIGhM0Puw7k7L/H9dkj0bAz9vpTyfiLttfvup7F1z3FxdRFk+kVQHv5uyX4sQtEbswzo5Y877ddk3s3qeSFof1slb5rQ3CoWTQWb5jEhKH+bFc2lkbFjYrAYnqL98yH0pnGwGF7WXTdU/edNcmuV+xDyR5k2D3w2V1yT4zUtyX4wLWgC/c7m8KfB7KMl9GZ00V71OLm8V/IYk8lHqooU7GSn0wVTYZrh0sz5qnXoEfsOIhojgd0op5KPjKRXxdF4xD/kodep0zMsp5mV9hLoBeYpsfBkd5lUODfGofMKU0umYV+lbxNPIZ5GHdSHvZCW3kEfow7oBeCGQgId0A/Gwj2Z4ehBe4iPgIV3liLxwHROMTwSldd2lubFx8KsPpToTNZQO/KoPJiY3CMaHhqf187kqDJJ3Y5rAJ4IS3eIVGDRvonvg8Fof3mMPCvRq0/gs82LdMBRrNMsTdo/t6lko2OOsz+7wRqFo1Q063jQUbx6Nz9rwOhZ4LTreCFhoXdPwtL5qg7dsxmeVpwLeZRu8BXR0LR1bDTYa1pqCp63y1H/EUyQ86SLvpNbaIk/+Pe/d9scP788fjScs8IyuAv37vre1386um7xPW6Yvuy7yvv3eCtvxHOS93Yp77yDvc8L76CBvL+F9cpC3k/C2HeT9iHV7746Fp/vyzu8kwyvAI/tT+2rW7pcP4CQPYPvt518/d/NuCRKe2zdUjvP+p5t5ezyFeIV97vOU9mzwFjTVU4KaDd4UGp4tX90Gb5WMd86CrqZjne3Hj0sWeG27D5fTvG6rsM6bRg9v7Y2vUZg3hoZna3zSwtl3bwMNz+Yrte5QsXXxBums8lS3yPzq6+idmm2fWqoPiLtyehPpCHx6auJazTsarTr+YPi5inUmsn0YSodVcku23GAdnU/puFxagkM6Op/S2ZArwVHqsE+qWJifikKb0Ci3eKXKkxkc1hHtLkyEuKwJ4wg38CEgFvawEevwtuCkPBk9DvuExGEWttFvXMbC/Er77k9kOwKNBoeBuDwYPQ4LcQ59zumyzeQw7R/5PjedkyiO4ziO4ziO4ziO47hS+gNO9jPN8gQSngAAAABJRU5ErkJggg=="},5893:function(){},9675:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports.__esModule=!0,e.exports["default"]=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},8228:function(e,t,i){"use strict";i(1958),i(2939)}}]);